{"version":3,"file":"0717f15885d08e5a5982.chunk.js","mappings":"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","sources":["webpack://superset/./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack://superset/./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack://superset/./node_modules/babel-runtime/core-js/object/keys.js","webpack://superset/./node_modules/babel-runtime/helpers/objectWithoutProperties.js","webpack://superset/./node_modules/babel-runtime/node_modules/core-js/library/fn/object/get-own-property-descriptor.js","webpack://superset/./node_modules/babel-runtime/node_modules/core-js/library/fn/object/get-prototype-of.js","webpack://superset/./node_modules/babel-runtime/node_modules/core-js/library/fn/object/keys.js","webpack://superset/./node_modules/babel-runtime/node_modules/core-js/library/modules/_object-sap.js","webpack://superset/./node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack://superset/./node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack://superset/./node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.keys.js","webpack://superset/./node_modules/lodash/_baseOrderBy.js","webpack://superset/./node_modules/lodash/_baseSortBy.js","webpack://superset/./node_modules/lodash/_baseUniq.js","webpack://superset/./node_modules/lodash/_compareAscending.js","webpack://superset/./node_modules/lodash/_compareMultiple.js","webpack://superset/./node_modules/lodash/_createSet.js","webpack://superset/./node_modules/lodash/flatMap.js","webpack://superset/./node_modules/lodash/flatMapDeep.js","webpack://superset/./node_modules/lodash/isEqualWith.js","webpack://superset/./node_modules/lodash/sortBy.js","webpack://superset/./node_modules/lodash/uniq.js","webpack://superset/./node_modules/lodash/uniqWith.js","webpack://superset/./node_modules/performance-now/lib/performance-now.js","webpack://superset/./node_modules/raf/index.js","webpack://superset/./node_modules/react-checkbox-tree/lib/index.browser.js","webpack://superset/./node_modules/react-dnd/dist/esm/utils/js_utils.js","webpack://superset/./node_modules/react-dnd/dist/esm/decorators/utils.js","webpack://superset/./node_modules/react-dnd/dist/esm/decorators/disposables.js","webpack://superset/./node_modules/react-dnd/dist/esm/decorators/decorateHandler.js","webpack://superset/./node_modules/react-dnd/dist/esm/utils/isValidType.js","webpack://superset/./node_modules/react-dnd/dist/esm/decorators/createSourceFactory.js","webpack://superset/./node_modules/react-dnd/dist/esm/decorators/DragSource.js","webpack://superset/./node_modules/react-dnd/dist/esm/decorators/createTargetFactory.js","webpack://superset/./node_modules/react-dnd/dist/esm/decorators/DropTarget.js","webpack://superset/./node_modules/react-dnd/dist/esm/decorators/DragLayer.js","webpack://superset/./node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js","webpack://superset/./node_modules/react-search-input/lib/index.js","webpack://superset/./node_modules/react-search-input/lib/util.js","webpack://superset/./node_modules/react-search-input/node_modules/fuse.js/dist/fuse.js","webpack://superset/./node_modules/react-sticky/lib/Container.js","webpack://superset/./node_modules/react-sticky/lib/Sticky.js","webpack://superset/./node_modules/react-sticky/lib/index.js","webpack://superset/./packages/superset-ui-core/src/models/TypedRegistry.ts","webpack://superset/./packages/superset-ui-core/src/ui-overrides/UiOverrideRegistry.ts","webpack://superset/./src/components/EditableTitle/index.tsx","webpack://superset/./src/dashboard/util/getChartIdsFromLayout.js","webpack://superset/./node_modules/@vx/responsive/esm/components/ParentSize.js","webpack://superset/./node_modules/react-virtualized/dist/es/List/List.js","webpack://superset/./src/dashboard/components/AddSliceCard.jsx","webpack://superset/./src/dashboard/components/dnd/AddSliceDragPreview.jsx","webpack://superset/./node_modules/react-dnd-html5-backend/dist/esm/getEmptyImage.js","webpack://superset/./src/dashboard/util/isValidChild.ts","webpack://superset/./src/dashboard/util/getDropPosition.js","webpack://superset/./src/dashboard/components/dnd/handleScroll/index.ts","webpack://superset/./src/dashboard/components/dnd/handleHover.js","webpack://superset/./src/dashboard/components/dnd/dragDroppableConfig.js","webpack://superset/./src/dashboard/components/dnd/handleDrop.js","webpack://superset/./src/dashboard/components/dnd/DragDroppable.jsx","webpack://superset/./src/dashboard/components/SliceAdder.jsx","webpack://superset/./src/dashboard/containers/SliceAdder.jsx","webpack://superset/./src/utils/functionalRegistry.ts","webpack://superset/./src/visualizations/presets/dashboardComponents.ts","webpack://superset/./src/visualizations/dashboardComponents/DashboardComponentsRegistry.ts","webpack://superset/./src/dashboard/components/gridComponents/new/DraggableNewComponent.jsx","webpack://superset/./src/dashboard/components/gridComponents/new/NewColumn.jsx","webpack://superset/./src/dashboard/components/gridComponents/new/NewDivider.jsx","webpack://superset/./src/dashboard/components/gridComponents/new/NewHeader.jsx","webpack://superset/./src/dashboard/components/gridComponents/new/NewRow.jsx","webpack://superset/./src/dashboard/components/gridComponents/new/NewTabs.jsx","webpack://superset/./src/dashboard/components/gridComponents/new/NewMarkdown.jsx","webpack://superset/./src/dashboard/components/gridComponents/new/NewDynamicComponent.tsx","webpack://superset/./src/dashboard/components/BuilderComponentPane/index.tsx","webpack://superset/./src/dashboard/components/menu/ShareMenuItems/index.tsx","webpack://superset/./src/dashboard/components/CssEditor/index.jsx","webpack://superset/./src/dashboard/components/RefreshIntervalModal.tsx","webpack://superset/./src/dashboard/components/SaveModal.tsx","webpack://superset/./src/dashboard/util/getFilterScopeNodesTree.js","webpack://superset/./src/dashboard/util/getFilterScopeParentNodes.js","webpack://superset/./src/dashboard/util/getKeyForFilterScopeTree.js","webpack://superset/./src/dashboard/util/getSelectedChartIdForFilterScopeTree.js","webpack://superset/./src/dashboard/util/buildFilterScopeTreeEntry.js","webpack://superset/./src/dashboard/util/getFilterScopeFromNodesTree.js","webpack://superset/./src/dashboard/components/filterscope/renderFilterScopeTreeNodes.jsx","webpack://superset/./src/dashboard/components/filterscope/treeIcons.jsx","webpack://superset/./src/dashboard/components/filterscope/FilterScopeTree.jsx","webpack://superset/./src/dashboard/components/filterscope/FilterFieldItem.jsx","webpack://superset/./src/dashboard/components/filterscope/renderFilterFieldTreeNodes.jsx","webpack://superset/./src/dashboard/components/filterscope/FilterFieldTree.jsx","webpack://superset/./src/dashboard/components/filterscope/FilterScopeSelector.jsx","webpack://superset/./src/dashboard/util/getFilterFieldNodesTree.js","webpack://superset/./src/dashboard/util/getRevertedFilterScope.ts","webpack://superset/./src/dashboard/containers/FilterScope.jsx","webpack://superset/./src/dashboard/components/filterscope/FilterScopeModal.tsx","webpack://superset/./src/dashboard/util/getDashboardUrl.ts","webpack://superset/./src/dashboard/components/Header/HeaderActionsDropdown/index.jsx","webpack://superset/./src/dashboard/components/PublishedStatus/index.jsx","webpack://superset/./src/dashboard/components/UndoRedoKeyListeners/index.jsx","webpack://superset/./src/dashboard/util/setPeriodicRunner.ts","webpack://superset/./src/dashboard/components/DashboardEmbedControls.tsx","webpack://superset/./src/dashboard/components/Header/index.jsx","webpack://superset/./src/dashboard/util/isDashboardLoading.js","webpack://superset/./src/dashboard/containers/DashboardHeader.jsx","webpack://superset/./src/dashboard/components/IconButton.tsx","webpack://superset/./src/dashboard/util/charts/getEffectiveExtraFilters.ts","webpack://superset/./src/dashboard/util/activeAllDashboardFilters.ts","webpack://superset/./src/dashboard/util/charts/getFormDataWithExtraFilters.ts","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/FilterScope/types.ts","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/FilterScope/utils.ts","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/FilterScope/ScopingTree.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/FilterScope/state.ts","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/FilterScope/FilterScope.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/utils.ts","webpack://superset/./src/dashboard/components/CrossFilterScopingModal/CrossFilterScopingForm/index.tsx","webpack://superset/./src/dashboard/components/CrossFilterScopingModal/utils/index.ts","webpack://superset/./src/dashboard/components/nativeFilters/state.ts","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/DraggableFilter.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FilterTitleContainer.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FilterTitlePane.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FilterConfigurePane.tsx","webpack://superset/./src/components/ErrorMessage/BasicErrorAlert.tsx","webpack://superset/./src/utils/cacheWrapper.ts","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/CollapsibleControl.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/ColumnSelect.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/DatasetSelect.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/DefaultValue.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/getControlItemsMap.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/RemovedFilter.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/DependencyList.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/FiltersConfigForm.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/state.ts","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/Footer/CancelConfirmationAlert.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/Footer/Footer.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/DividerConfigForm.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigModal.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FiltersConfigModal/state.ts","webpack://superset/./src/dashboard/components/CrossFilterScopingModal/CrossFilterScopingModal.tsx","webpack://superset/./src/dashboard/components/SliceHeaderControls/index.tsx","webpack://superset/./node_modules/@ant-design/icons-svg/es/asn/CheckCircleFilled.js","webpack://superset/./node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js","webpack://superset/./node_modules/@ant-design/icons-svg/es/asn/ExclamationCircleFilled.js","webpack://superset/./node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js","webpack://superset/./node_modules/@ant-design/icons-svg/es/asn/MinusCircleFilled.js","webpack://superset/./node_modules/@ant-design/icons/es/icons/MinusCircleFilled.js","webpack://superset/./src/dashboard/components/FiltersBadge/Styles.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterSets/utils/index.ts","webpack://superset/./src/dashboard/components/FiltersBadge/FilterIndicator/index.tsx","webpack://superset/./src/dashboard/components/FiltersBadge/DetailsPanel/index.tsx","webpack://superset/./src/dashboard/components/FiltersBadge/selectors.ts","webpack://superset/./src/dashboard/components/FiltersBadge/index.tsx","webpack://superset/./src/dashboard/components/SliceHeader/index.tsx","webpack://superset/./src/dashboard/components/MissingChart.jsx","webpack://superset/./src/dashboard/components/gridComponents/Chart.jsx","webpack://superset/./src/dashboard/util/getFilterValuesByFilterId.js","webpack://superset/./src/dashboard/containers/Chart.jsx","webpack://superset/./src/dashboard/components/URLShortLinkButton/index.tsx","webpack://superset/./src/dashboard/components/AnchorLink/index.tsx","webpack://superset/./src/dashboard/components/DeleteComponentButton.tsx","webpack://superset/./src/dashboard/components/menu/HoverMenu.tsx","webpack://superset/./src/dashboard/components/resizable/ResizableHandle.jsx","webpack://superset/./src/dashboard/util/resizableConfig.ts","webpack://superset/./src/dashboard/components/resizable/ResizableContainer.jsx","webpack://superset/./src/dashboard/components/gridComponents/ChartHolder.jsx","webpack://superset/./src/dashboard/util/getChartAndLabelComponentIdFromPath.js","webpack://superset/./src/components/PopoverDropdown/index.tsx","webpack://superset/./src/dashboard/components/menu/MarkdownModeDropdown.tsx","webpack://superset/./src/dashboard/components/menu/WithPopoverMenu.tsx","webpack://superset/./src/dashboard/components/gridComponents/Markdown.jsx","webpack://superset/./src/dashboard/components/dnd/DragHandle.tsx","webpack://superset/./src/dashboard/components/menu/BackgroundStyleDropdown.tsx","webpack://superset/./src/dashboard/components/gridComponents/Column.jsx","webpack://superset/./src/dashboard/components/gridComponents/Divider.jsx","webpack://superset/./src/dashboard/components/gridComponents/Header.jsx","webpack://superset/./src/dashboard/components/gridComponents/Row.jsx","webpack://superset/./src/dashboard/components/gridComponents/Tab.jsx","webpack://superset/./src/dashboard/util/findTabIndexByComponentId.js","webpack://superset/./src/dashboard/util/getDirectPathToTabIndex.js","webpack://superset/./src/dashboard/util/getLeafComponentIdFromPath.js","webpack://superset/./src/dashboard/components/gridComponents/Tabs.jsx","webpack://superset/./src/dashboard/components/gridComponents/index.js","webpack://superset/./src/dashboard/components/gridComponents/DynamicComponent.tsx","webpack://superset/./src/dashboard/containers/DashboardComponent.jsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/utils.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/state.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterSets/state.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterSets/Footer.tsx","webpack://superset/./node_modules/@ant-design/icons-svg/es/asn/CheckOutlined.js","webpack://superset/./node_modules/@ant-design/icons/es/icons/CheckOutlined.js","webpack://superset/./node_modules/@ant-design/icons-svg/es/asn/EllipsisOutlined.js","webpack://superset/./node_modules/@ant-design/icons/es/icons/EllipsisOutlined.js","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterSets/FiltersHeader.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterSets/FilterSetUnit.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterSets/index.tsx","webpack://superset/./node_modules/@ant-design/icons-svg/es/asn/WarningOutlined.js","webpack://superset/./node_modules/@ant-design/icons/es/icons/WarningOutlined.js","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterSets/EditSection.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterConfigurationLink/index.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/Header/index.tsx","webpack://superset/./node_modules/react-reverse-portal/dist/web/index.js","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterControls/utils.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterValue.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterControls/state.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/useFilterScope.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/Styles.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/useTruncation.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/TooltipWithTruncation.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/ScopeRow.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/DependenciesRow.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/useFilterDependencies.ts","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/NameRow.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/TypeRow.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/FilterCardContent.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterCard/index.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControl.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/FilterControls/FilterControls.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/ActionButtons/index.tsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/index.tsx","webpack://superset/./src/dashboard/components/DashboardBuilder/utils.ts","webpack://superset/./src/dashboard/components/DashboardGrid.jsx","webpack://superset/./src/dashboard/containers/DashboardGrid.jsx","webpack://superset/./src/dashboard/components/DashboardBuilder/DashboardContainer.tsx","webpack://superset/./src/dashboard/util/getChartIdsInFilterScope.ts","webpack://superset/./src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx","webpack://superset/./src/dashboard/components/DashboardBuilder/state.ts","webpack://superset/./src/hooks/useElementOnScreen/index.ts","webpack://superset/./src/dashboard/util/isDashboardEmpty.ts","webpack://superset/./src/dashboard/util/charts/getOwnDataCharts.ts","webpack://superset/./src/dashboard/components/Dashboard.jsx","webpack://superset/./src/dashboard/util/getLayoutComponentFromChartId.js","webpack://superset/./src/dashboard/containers/Dashboard.ts","webpack://superset/./node_modules/use-immer/dist/use-immer.module.js"],"sourcesContent":["module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * This method is like `_.flatMap` except that it recursively flattens the\n * mapped results.\n *\n * @static\n * @memberOf _\n * @since 4.7.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [[[n, n]]];\n * }\n *\n * _.flatMapDeep([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMapDeep(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), INFINITY);\n}\n\nmodule.exports = flatMapDeep;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * This method is like `_.isEqual` except that it accepts `customizer` which\n * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n * are handled by the method instead. The `customizer` is invoked with up to\n * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, othValue) {\n *   if (isGreeting(objValue) && isGreeting(othValue)) {\n *     return true;\n *   }\n * }\n *\n * var array = ['hello', 'goodbye'];\n * var other = ['hi', 'goodbye'];\n *\n * _.isEqualWith(array, other, customizer);\n * // => true\n */\nfunction isEqualWith(value, other, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  var result = customizer ? customizer(value, other) : undefined;\n  return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n}\n\nmodule.exports = isEqualWith;\n","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * This method is like `_.uniq` except that it accepts `comparator` which\n * is invoked to compare elements of `array`. The order of result values is\n * determined by the order they occur in the array.The comparator is invoked\n * with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.uniqWith(objects, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n */\nfunction uniqWith(array, comparator) {\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n}\n\nmodule.exports = uniqWith;\n","// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","/*! react-checkbox-tree - v1.5.1 | 2019 */\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"react\")):\"function\"==typeof define&&define.amd?define([\"react\"],t):\"object\"==typeof exports?exports.ReactCheckboxTree=t(require(\"react\")):e.ReactCheckboxTree=t(e.React)}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=27)}([function(e,t,n){e.exports=n(96)()},function(t,n){t.exports=e},function(e,t,n){var r=n(16),o=\"object\"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function(\"return this\")();e.exports=a},function(e,t,n){var r=n(41),o=n(47);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(31),o=n(32),a=n(33),i=n(34),c=n(35);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=c,e.exports=l},function(e,t,n){var r=n(14);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(12),o=n(43),a=n(44),i=\"[object Null]\",c=\"[object Undefined]\",l=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?c:i:l&&l in Object(e)?o(e):a(e)}},function(e,t,n){var r=n(3)(Object,\"create\");e.exports=r},function(e,t,n){var r=n(56);e.exports=function(e,t){var n=e.__data__;return r(t)?n[\"string\"==typeof t?\"string\":\"hash\"]:n.map}},function(e,t){e.exports=function(e){return null!=e&&\"object\"==typeof e}},function(e,t,n){var r;\n/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n!function(){\"use strict\";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if(\"string\"===a||\"number\"===a)e.push(r);else if(Array.isArray(r)&&r.length){var i=o.apply(null,r);i&&e.push(i)}else if(\"object\"===a)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(\" \")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r=n(3)(n(2),\"Map\");e.exports=r},function(e,t,n){var r=n(2).Symbol;e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(6),o=n(17),a=\"[object AsyncFunction]\",i=\"[object Function]\",c=\"[object GeneratorFunction]\",l=\"[object Proxy]\";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==i||t==c||t==a||t==l}},function(e,t,n){(function(t){var n=\"object\"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(42))},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&(\"object\"==t||\"function\"==t)}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"}},function(e,t,n){var r=n(48),o=n(55),a=n(57),i=n(58),c=n(59);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=c,e.exports=l},function(e,t,n){var r=n(60),o=n(63),a=n(64),i=1,c=2;e.exports=function(e,t,n,l,u,s){var p=n&i,f=e.length,d=t.length;if(f!=d&&!(p&&d>f))return!1;var h=s.get(e);if(h&&s.get(t))return h==t;var b=-1,y=!0,v=n&c?new r:void 0;for(s.set(e,t),s.set(t,e);++b<f;){var x=e[b],m=t[b];if(l)var g=p?l(m,x,b,t,e,s):l(x,m,b,e,t,s);if(void 0!==g){if(g)continue;y=!1;break}if(v){if(!o(t,function(e,t){if(!a(v,t)&&(x===e||u(x,e,n,l,s)))return v.push(t)})){y=!1;break}}else if(x!==m&&!u(x,m,n,l,s)){y=!1;break}}return s.delete(e),s.delete(t),y}},function(e,t,n){(function(e){var r=n(2),o=n(81),a=t&&!t.nodeType&&t,i=a&&\"object\"==typeof e&&e&&!e.nodeType&&e,c=i&&i.exports===a?r.Buffer:void 0,l=(c?c.isBuffer:void 0)||o;e.exports=l}).call(this,n(22)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,\"loaded\",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,\"id\",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(83),o=n(84),a=n(85),i=a&&a.isTypedArray,c=i?o(i):r;e.exports=c},function(e,t){var n=9007199254740991;e.exports=function(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t,n){var r=n(28);e.exports=function(e,t){return r(e,t)}},function(e,t,n){var r=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var t=\"\",n=r.getRandomValues(new Uint8Array(e));0<e--;)t+=\"Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-\"[63&n[e]];return t}},function(e,t,n){e.exports=n(98).default},function(e,t,n){var r=n(29),o=n(9);e.exports=function e(t,n,a,i,c){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,c))}},function(e,t,n){var r=n(30),o=n(20),a=n(65),i=n(69),c=n(91),l=n(13),u=n(21),s=n(23),p=1,f=\"[object Arguments]\",d=\"[object Array]\",h=\"[object Object]\",b=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,y,v,x){var m=l(e),g=l(t),k=m?d:c(e),_=g?d:c(t),O=(k=k==f?h:k)==h,j=(_=_==f?h:_)==h,w=k==_;if(w&&u(e)){if(!u(t))return!1;m=!0,O=!1}if(w&&!O)return x||(x=new r),m||s(e)?o(e,t,n,y,v,x):a(e,t,k,n,y,v,x);if(!(n&p)){var C=O&&b.call(e,\"__wrapped__\"),E=j&&b.call(t,\"__wrapped__\");if(C||E){var P=C?e.value():e,N=E?t.value():t;return x||(x=new r),v(P,N,n,y,x)}}return!!w&&(x||(x=new r),i(e,t,n,y,v,x))}},function(e,t,n){var r=n(4),o=n(36),a=n(37),i=n(38),c=n(39),l=n(40);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=c,u.prototype.set=l,e.exports=u},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(5),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(5);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(5);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(5);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(4);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(4),o=n(11),a=n(19),i=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var c=n.__data__;if(!o||c.length<i-1)return c.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(c)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(15),o=n(45),a=n(17),i=n(18),c=/^\\[object .+?Constructor\\]$/,l=Function.prototype,u=Object.prototype,s=l.toString,p=u.hasOwnProperty,f=RegExp(\"^\"+s.call(p).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?f:c).test(i(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(12),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[c]=n:delete e[c]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,o=n(46),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+r:\"\";e.exports=function(e){return!!a&&a in e}},function(e,t,n){var r=n(2)[\"__core-js_shared__\"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(49),o=n(4),a=n(11);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},function(e,t,n){var r=n(50),o=n(51),a=n(52),i=n(53),c=n(54);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=i,l.prototype.set=c,e.exports=l},function(e,t,n){var r=n(7);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(7),o=\"__lodash_hash_undefined__\",a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return a.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(7),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(7),o=\"__lodash_hash_undefined__\";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?o:t,this}},function(e,t,n){var r=n(8);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return\"string\"==t||\"number\"==t||\"symbol\"==t||\"boolean\"==t?\"__proto__\"!==e:null===e}},function(e,t,n){var r=n(8);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(8);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(8);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t,n){var r=n(19),o=n(61),a=n(62);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,t){var n=\"__lodash_hash_undefined__\";e.exports=function(e){return this.__data__.set(e,n),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(12),o=n(66),a=n(14),i=n(20),c=n(67),l=n(68),u=1,s=2,p=\"[object Boolean]\",f=\"[object Date]\",d=\"[object Error]\",h=\"[object Map]\",b=\"[object Number]\",y=\"[object RegExp]\",v=\"[object Set]\",x=\"[object String]\",m=\"[object Symbol]\",g=\"[object ArrayBuffer]\",k=\"[object DataView]\",_=r?r.prototype:void 0,O=_?_.valueOf:void 0;e.exports=function(e,t,n,r,_,j,w){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case g:return!(e.byteLength!=t.byteLength||!j(new o(e),new o(t)));case p:case f:case b:return a(+e,+t);case d:return e.name==t.name&&e.message==t.message;case y:case x:return e==t+\"\";case h:var C=c;case v:var E=r&u;if(C||(C=l),e.size!=t.size&&!E)return!1;var P=w.get(e);if(P)return P==t;r|=s,w.set(e,t);var N=i(C(e),C(t),r,_,j,w);return w.delete(e),N;case m:if(O)return O.call(e)==O.call(t)}return!1}},function(e,t,n){var r=n(2).Uint8Array;e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var r=n(70),o=1,a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,c,l){var u=n&o,s=r(e),p=s.length;if(p!=r(t).length&&!u)return!1;for(var f=p;f--;){var d=s[f];if(!(u?d in t:a.call(t,d)))return!1}var h=l.get(e);if(h&&l.get(t))return h==t;var b=!0;l.set(e,t),l.set(t,e);for(var y=u;++f<p;){var v=e[d=s[f]],x=t[d];if(i)var m=u?i(x,v,d,t,e,l):i(v,x,d,e,t,l);if(!(void 0===m?v===x||c(v,x,n,i,l):m)){b=!1;break}y||(y=\"constructor\"==d)}if(b&&!y){var g=e.constructor,k=t.constructor;g!=k&&\"constructor\"in e&&\"constructor\"in t&&!(\"function\"==typeof g&&g instanceof g&&\"function\"==typeof k&&k instanceof k)&&(b=!1)}return l.delete(e),l.delete(t),b}},function(e,t,n){var r=n(71),o=n(73),a=n(76);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var r=n(72),o=n(13);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(74),o=n(75),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),r(i(e),function(t){return a.call(e,t)}))}:o;e.exports=c},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(77),o=n(86),a=n(90);e.exports=function(e){return a(e)?r(e):o(e)}},function(e,t,n){var r=n(78),o=n(79),a=n(13),i=n(21),c=n(82),l=n(23),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),s=!n&&o(e),p=!n&&!s&&i(e),f=!n&&!s&&!p&&l(e),d=n||s||p||f,h=d?r(e.length,String):[],b=h.length;for(var y in e)!t&&!u.call(e,y)||d&&(\"length\"==y||p&&(\"offset\"==y||\"parent\"==y)||f&&(\"buffer\"==y||\"byteLength\"==y||\"byteOffset\"==y)||c(y,b))||h.push(y);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(80),o=n(9),a=Object.prototype,i=a.hasOwnProperty,c=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,\"callee\")&&!c.call(e,\"callee\")};e.exports=l},function(e,t,n){var r=n(6),o=n(9),a=\"[object Arguments]\";e.exports=function(e){return o(e)&&r(e)==a}},function(e,t){e.exports=function(){return!1}},function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?n:t)&&(\"number\"==o||\"symbol\"!=o&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(6),o=n(24),a=n(9),i={};i[\"[object Float32Array]\"]=i[\"[object Float64Array]\"]=i[\"[object Int8Array]\"]=i[\"[object Int16Array]\"]=i[\"[object Int32Array]\"]=i[\"[object Uint8Array]\"]=i[\"[object Uint8ClampedArray]\"]=i[\"[object Uint16Array]\"]=i[\"[object Uint32Array]\"]=!0,i[\"[object Arguments]\"]=i[\"[object Array]\"]=i[\"[object ArrayBuffer]\"]=i[\"[object Boolean]\"]=i[\"[object DataView]\"]=i[\"[object Date]\"]=i[\"[object Error]\"]=i[\"[object Function]\"]=i[\"[object Map]\"]=i[\"[object Number]\"]=i[\"[object Object]\"]=i[\"[object RegExp]\"]=i[\"[object Set]\"]=i[\"[object String]\"]=i[\"[object WeakMap]\"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(16),o=t&&!t.nodeType&&t,a=o&&\"object\"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,c=function(){try{var e=a&&a.require&&a.require(\"util\").types;return e||i&&i.binding&&i.binding(\"util\")}catch(e){}}();e.exports=c}).call(this,n(22)(e))},function(e,t,n){var r=n(87),o=n(88),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&\"constructor\"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===(\"function\"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(89)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(15),o=n(24);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){var r=n(92),o=n(11),a=n(93),i=n(94),c=n(95),l=n(6),u=n(18),s=u(r),p=u(o),f=u(a),d=u(i),h=u(c),b=l;(r&&\"[object DataView]\"!=b(new r(new ArrayBuffer(1)))||o&&\"[object Map]\"!=b(new o)||a&&\"[object Promise]\"!=b(a.resolve())||i&&\"[object Set]\"!=b(new i)||c&&\"[object WeakMap]\"!=b(new c))&&(b=function(e){var t=l(e),n=\"[object Object]\"==t?e.constructor:void 0,r=n?u(n):\"\";if(r)switch(r){case s:return\"[object DataView]\";case p:return\"[object Map]\";case f:return\"[object Promise]\";case d:return\"[object Set]\";case h:return\"[object WeakMap]\"}return t}),e.exports=b},function(e,t,n){var r=n(3)(n(2),\"DataView\");e.exports=r},function(e,t,n){var r=n(3)(n(2),\"Promise\");e.exports=r},function(e,t,n){var r=n(3)(n(2),\"Set\");e.exports=r},function(e,t,n){var r=n(3)(n(2),\"WeakMap\");e.exports=r},function(e,t,n){\"use strict\";var r=n(97);function o(){}e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var c=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw c.name=\"Invariant Violation\",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){\"use strict\";e.exports=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\"},function(e,t,n){\"use strict\";n.r(t);var r=n(10),o=n.n(r),a=n(25),i=n.n(a),c=n(26),l=n.n(c),u=n(0),s=n.n(u),p=n(1),f=n.n(p);function d(e){return(d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||\"object\"!==d(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),v(this,x(t).apply(this,arguments))}var n,r,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,f.a.PureComponent),n=t,(r=[{key:\"render\",value:function(){var e=this.props,t=e.children,n=e.title,r=b(e,[\"children\",\"title\"]);return f.a.createElement(\"button\",h({\"aria-label\":n,title:n,type:\"button\"},r),t)}}])&&y(n.prototype,r),o&&y(n,o),t}();g(k,\"propTypes\",{children:s.a.node.isRequired,title:s.a.string}),g(k,\"defaultProps\",{title:null});var _=k;function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.props=t,this.flatNodes=n}var t,n,r;return t=e,(n=[{key:\"setProps\",value:function(e){this.props=e}},{key:\"clone\",value:function(){var t=this,n={};return Object.keys(this.flatNodes).forEach(function(e){var r=t.flatNodes[e];n[e]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){O(e,t,n[t])})}return e}({},r)}),new e(this.props,n)}},{key:\"getNode\",value:function(e){return this.flatNodes[e]}},{key:\"flattenNodes\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Array.isArray(e)&&0!==e.length){var o=this.props,a=o.disabled,i=o.noCascade;e.forEach(function(e,o){var c=t.nodeHasChildren(e);t.flatNodes[e.value]={label:e.label,value:e.value,children:e.children,parent:n,isParent:c,isLeaf:!c,showCheckbox:void 0===e.showCheckbox||e.showCheckbox,disabled:t.getDisabledState(e,n,a,i),treeDepth:r,index:o},t.flattenNodes(e.children,e,r+1)})}}},{key:\"nodeHasChildren\",value:function(e){return Array.isArray(e.children)&&e.children.length>0}},{key:\"getDisabledState\",value:function(e,t,n,r){return!!n||(!(r||!t.disabled)||Boolean(e.disabled))}},{key:\"deserializeLists\",value:function(e){var t=this,n=[\"checked\",\"expanded\"];Object.keys(this.flatNodes).forEach(function(e){n.forEach(function(n){t.flatNodes[e][n]=!1})}),n.forEach(function(n){e[n].forEach(function(e){void 0!==t.flatNodes[e]&&(t.flatNodes[e][n]=!0)})})}},{key:\"serializeList\",value:function(e){var t=this,n=[];return Object.keys(this.flatNodes).forEach(function(r){t.flatNodes[r][e]&&n.push(r)}),n}},{key:\"expandAllNodes\",value:function(e){var t=this;return Object.keys(this.flatNodes).forEach(function(n){t.flatNodes[n].isParent&&(t.flatNodes[n].expanded=e)}),this}},{key:\"toggleChecked\",value:function(e,t,n){var r=this,o=this.flatNodes[e.value];if(o.isLeaf||n){if(e.disabled)return this;this.toggleNode(e.value,\"checked\",t)}else o.children.forEach(function(e){r.toggleChecked(e,t,n)});return this}},{key:\"toggleNode\",value:function(e,t,n){return this.flatNodes[e][t]=n,this}}])&&j(t.prototype,n),r&&j(t,r),e}();function C(e){return(C=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||\"object\"!==C(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),N(this,S(t).apply(this,arguments))}var n,r,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,f.a.PureComponent),n=t,(r=[{key:\"componentDidMount\",value:function(){this.updateDeterminateProperty()}},{key:\"componentDidUpdate\",value:function(){this.updateDeterminateProperty()}},{key:\"updateDeterminateProperty\",value:function(){var e=this.props.indeterminate;this.checkbox.indeterminate=e}},{key:\"render\",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){T(e,t,n[t])})}return e}({},this.props);return delete t.indeterminate,f.a.createElement(\"input\",E({},t,{ref:function(t){e.checkbox=t},type:\"checkbox\"}))}}])&&P(n.prototype,r),o&&P(n,o),t}();T(R,\"propTypes\",{indeterminate:s.a.bool}),T(R,\"defaultProps\",{indeterminate:!1});var I=R,L=s.a.shape({check:s.a.node,uncheck:s.a.node,halfCheck:s.a.node,expandClose:s.a.node,expandOpen:s.a.node,expandAll:s.a.node,collapseAll:s.a.node,parentClose:s.a.node,parentOpen:s.a.node,leaf:s.a.node}),z=s.a.shape({collapseAll:s.a.string.isRequired,expandAll:s.a.string.isRequired,toggle:s.a.string.isRequired});function q(e){return(q=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,(n=!(o=M(t).call(this,e))||\"object\"!==q(o)&&\"function\"!=typeof o?F(r):o).onCheck=n.onCheck.bind(F(F(n))),n.onClick=n.onClick.bind(F(F(n))),n.onExpand=n.onExpand.bind(F(F(n))),n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,f.a.Component),n=t,(r=[{key:\"onCheck\",value:function(){var e=this.props,t=e.value,n=e.onCheck;n({value:t,checked:this.getCheckState({toggle:!0})})}},{key:\"onClick\",value:function(){var e=this.props,t=e.expandOnClick,n=e.isParent,r=e.value,o=e.onClick;n&&t&&this.onExpand(),o({value:r,checked:this.getCheckState({toggle:!1})})}},{key:\"onExpand\",value:function(){var e=this.props,t=e.expanded,n=e.value,r=e.onExpand;r({value:n,expanded:!t})}},{key:\"getCheckState\",value:function(e){var t=e.toggle,n=this.props,r=n.checked,o=n.optimisticToggle;return!(0!==r||!t)||(1===r&&!t||2===r&&o)}},{key:\"renderCollapseButton\",value:function(){var e=this.props,t=e.expandDisabled,n=e.isLeaf,r=e.lang;return n?f.a.createElement(\"span\",{className:\"rct-collapse\"},f.a.createElement(\"span\",{className:\"rct-icon\"})):f.a.createElement(_,{className:\"rct-collapse rct-collapse-btn\",disabled:t,title:r.toggle,onClick:this.onExpand},this.renderCollapseIcon())}},{key:\"renderCollapseIcon\",value:function(){var e=this.props,t=e.expanded,n=e.icons,r=n.expandClose,o=n.expandOpen;return t?o:r}},{key:\"renderCheckboxIcon\",value:function(){var e=this.props,t=e.checked,n=e.icons,r=n.uncheck,o=n.check,a=n.halfCheck;return 0===t?r:1===t?o:a}},{key:\"renderNodeIcon\",value:function(){var e=this.props,t=e.expanded,n=e.icon,r=e.icons,o=r.leaf,a=r.parentClose,i=r.parentOpen,c=e.isLeaf;return null!==n?n:c?o:t?i:a}},{key:\"renderBareLabel\",value:function(e){var t=this.props,n=t.onClick,r=t.title,o=null!==n;return f.a.createElement(\"span\",{className:\"rct-bare-label\",title:r},o?f.a.createElement(\"span\",{className:\"rct-node-clickable\",onClick:this.onClick,onKeyPress:this.onClick,role:\"button\",tabIndex:0},e):e)}},{key:\"renderCheckboxLabel\",value:function(e){var t=this.props,n=t.checked,r=t.disabled,o=t.title,a=t.treeId,i=t.value,c=null!==t.onClick,l=\"\".concat(a,\"-\").concat(String(i).split(\" \").join(\"_\")),u=[f.a.createElement(\"label\",{key:0,htmlFor:l,title:o},f.a.createElement(I,{checked:1===n,disabled:r,id:l,indeterminate:2===n,onClick:this.onCheck,onChange:function(){}}),f.a.createElement(\"span\",{className:\"rct-checkbox\"},this.renderCheckboxIcon()),c?null:e)];return c&&u.push(f.a.createElement(\"span\",{key:1,className:\"rct-node-clickable\",onClick:this.onClick,onKeyPress:this.onClick,role:\"link\",tabIndex:0},e)),u}},{key:\"renderLabel\",value:function(){var e=this.props,t=e.label,n=e.showCheckbox,r=[e.showNodeIcon?f.a.createElement(\"span\",{key:0,className:\"rct-node-icon\"},this.renderNodeIcon()):null,f.a.createElement(\"span\",{key:1,className:\"rct-title\"},t)];return n?this.renderCheckboxLabel(r):this.renderBareLabel(r)}},{key:\"renderChildren\",value:function(){return this.props.expanded?this.props.children:null}},{key:\"render\",value:function(){var e=this.props,t=e.className,n=e.disabled,r=e.expanded,a=e.isLeaf,i=o()({\"rct-node\":!0,\"rct-node-leaf\":a,\"rct-node-parent\":!a,\"rct-node-expanded\":!a&&r,\"rct-node-collapsed\":!a&&!r,\"rct-disabled\":n},t);return f.a.createElement(\"li\",{className:i},f.a.createElement(\"span\",{className:\"rct-text\"},this.renderCollapseButton(),this.renderLabel()),this.renderChildren())}}])&&D(n.prototype,r),a&&D(n,a),t}();U(H,\"propTypes\",{checked:s.a.number.isRequired,disabled:s.a.bool.isRequired,expandDisabled:s.a.bool.isRequired,expanded:s.a.bool.isRequired,icons:L.isRequired,isLeaf:s.a.bool.isRequired,isParent:s.a.bool.isRequired,label:s.a.node.isRequired,lang:z.isRequired,optimisticToggle:s.a.bool.isRequired,showNodeIcon:s.a.bool.isRequired,treeId:s.a.string.isRequired,value:s.a.oneOfType([s.a.string,s.a.number]).isRequired,onCheck:s.a.func.isRequired,onExpand:s.a.func.isRequired,children:s.a.node,className:s.a.string,expandOnClick:s.a.bool,icon:s.a.node,showCheckbox:s.a.bool,title:s.a.string,onClick:s.a.func}),U(H,\"defaultProps\",{children:null,className:null,expandOnClick:!1,icon:null,showCheckbox:!0,title:null,onClick:function(){}});var V=H,$=s.a.oneOfType([s.a.arrayOf(s.a.string),s.a.arrayOf(s.a.number)]);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J={label:s.a.node.isRequired,value:s.a.oneOfType([s.a.string,s.a.number]).isRequired,disabled:s.a.bool,icon:s.a.node,showCheckbox:s.a.bool,title:s.a.string},K=s.a.oneOfType([s.a.shape(J),s.a.shape(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){W(e,t,n[t])})}return e}({},J,{children:s.a.arrayOf(J).isRequired}))]);function G(e){return(G=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){te(e,t,n[t])})}return e}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),r=this,n=!(o=X(t).call(this,e))||\"object\"!==G(o)&&\"function\"!=typeof o?ee(r):o;var a=new w(e);return a.flattenNodes(e.nodes),a.deserializeLists({checked:e.checked,expanded:e.expanded}),n.state={id:e.id||\"rct-\".concat(l()(7)),model:a,prevProps:e},n.onCheck=n.onCheck.bind(ee(ee(n))),n.onExpand=n.onExpand.bind(ee(ee(n))),n.onNodeClick=n.onNodeClick.bind(ee(ee(n))),n.onExpandAll=n.onExpandAll.bind(ee(ee(n))),n.onCollapseAll=n.onCollapseAll.bind(ee(ee(n))),n}var n,r,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,f.a.Component),n=t,a=[{key:\"getDerivedStateFromProps\",value:function(e,t){var n=t.model,r=t.prevProps,o=e.disabled,a=e.id,c=e.nodes,l=Y({},t,{prevProps:e});return n.setProps(e),i()(r.nodes,c)&&r.disabled===o||n.flattenNodes(c),null!==a&&(l=Y({},l,{id:a})),n.deserializeLists({checked:e.checked,expanded:e.expanded}),l}}],(r=[{key:\"onCheck\",value:function(e){var t=this.props,n=t.noCascade,r=t.onCheck,o=this.state.model.clone(),a=o.getNode(e.value);o.toggleChecked(e,e.checked,n),r(o.serializeList(\"checked\"),Y({},a,e))}},{key:\"onExpand\",value:function(e){var t=this.props.onExpand,n=this.state.model.clone(),r=n.getNode(e.value);n.toggleNode(e.value,\"expanded\",e.expanded),t(n.serializeList(\"expanded\"),Y({},r,e))}},{key:\"onNodeClick\",value:function(e){(0,this.props.onClick)(Y({},this.state.model.getNode(e.value),e))}},{key:\"onExpandAll\",value:function(){this.expandAllNodes()}},{key:\"onCollapseAll\",value:function(){this.expandAllNodes(!1)}},{key:\"expandAllNodes\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,this.props.onExpand)(this.state.model.clone().expandAllNodes(e).serializeList(\"expanded\"))}},{key:\"determineShallowCheckState\",value:function(e,t){var n=this.state.model.getNode(e.value);return n.isLeaf||t?n.checked?1:0:this.isEveryChildChecked(e)?1:this.isSomeChildChecked(e)?2:0}},{key:\"isEveryChildChecked\",value:function(e){var t=this;return e.children.every(function(e){return 1===t.state.model.getNode(e.value).checkState})}},{key:\"isSomeChildChecked\",value:function(e){var t=this;return e.children.some(function(e){return t.state.model.getNode(e.value).checkState>0})}},{key:\"renderTreeNodes\",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.props,a=o.expandDisabled,i=o.expandOnClick,c=o.icons,l=o.lang,u=o.noCascade,s=o.onClick,p=o.onlyLeafCheckboxes,d=o.optimisticToggle,h=o.showNodeTitle,b=o.showNodeIcon,y=this.state,v=y.id,x=y.model,m=t.defaultProps.icons,g=e.map(function(e){var t=e.value,o=x.getNode(e.value),y=o.isParent?n.renderTreeNodes(e.children,e):null;o.checkState=n.determineShallowCheckState(e,u);var g=p?o.isLeaf:o.showCheckbox;return!r.value||x.getNode(r.value).expanded?f.a.createElement(V,{key:t,checked:o.checkState,className:e.className,disabled:o.disabled,expandDisabled:a,expandOnClick:i,expanded:o.expanded,icon:e.icon,icons:Y({},m,c),label:e.label,lang:l,optimisticToggle:d,isLeaf:o.isLeaf,isParent:o.isParent,showCheckbox:g,showNodeIcon:b,title:h?e.title||e.label:e.title,treeId:v,value:e.value,onCheck:n.onCheck,onClick:s&&n.onNodeClick,onExpand:n.onExpand},y):null});return f.a.createElement(\"ol\",null,g)}},{key:\"renderExpandAll\",value:function(){var e=this.props,t=e.icons,n=t.expandAll,r=t.collapseAll,o=e.lang;return e.showExpandAll?f.a.createElement(\"div\",{className:\"rct-options\"},f.a.createElement(_,{className:\"rct-option rct-option-expand-all\",title:o.expandAll,onClick:this.onExpandAll},n),f.a.createElement(_,{className:\"rct-option rct-option-collapse-all\",title:o.collapseAll,onClick:this.onCollapseAll},r)):null}},{key:\"renderHiddenInput\",value:function(){var e=this.props,t=e.name,n=e.nameAsArray;return void 0===t?null:n?this.renderArrayHiddenInput():this.renderJoinedHiddenInput()}},{key:\"renderArrayHiddenInput\",value:function(){var e=this.props,t=e.checked,n=e.name;return t.map(function(e){var t=\"\".concat(n,\"[]\");return f.a.createElement(\"input\",{key:e,name:t,type:\"hidden\",value:e})})}},{key:\"renderJoinedHiddenInput\",value:function(){var e=this.props,t=e.checked,n=e.name,r=t.join(\",\");return f.a.createElement(\"input\",{name:n,type:\"hidden\",value:r})}},{key:\"render\",value:function(){var e=this.props,t=e.disabled,n=e.nodes,r=e.nativeCheckboxes,a=this.renderTreeNodes(n),i=o()({\"react-checkbox-tree\":!0,\"rct-disabled\":t,\"rct-native-display\":r});return f.a.createElement(\"div\",{className:i},this.renderExpandAll(),this.renderHiddenInput(),a)}}])&&Q(n.prototype,r),a&&Q(n,a),t}();te(ne,\"propTypes\",{nodes:s.a.arrayOf(K).isRequired,checked:$,disabled:s.a.bool,expandDisabled:s.a.bool,expandOnClick:s.a.bool,expanded:$,icons:L,id:s.a.string,lang:z,name:s.a.string,nameAsArray:s.a.bool,nativeCheckboxes:s.a.bool,noCascade:s.a.bool,onlyLeafCheckboxes:s.a.bool,optimisticToggle:s.a.bool,showExpandAll:s.a.bool,showNodeIcon:s.a.bool,showNodeTitle:s.a.bool,onCheck:s.a.func,onClick:s.a.func,onExpand:s.a.func}),te(ne,\"defaultProps\",{checked:[],disabled:!1,expandDisabled:!1,expandOnClick:!1,expanded:[],icons:{check:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-check\"}),uncheck:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-uncheck\"}),halfCheck:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-half-check\"}),expandClose:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-expand-close\"}),expandOpen:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-expand-open\"}),expandAll:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-expand-all\"}),collapseAll:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-collapse-all\"}),parentClose:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-parent-close\"}),parentOpen:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-parent-open\"}),leaf:f.a.createElement(\"span\",{className:\"rct-icon rct-icon-leaf\"})},id:null,lang:{collapseAll:\"Collapse all\",expandAll:\"Expand all\",toggle:\"Toggle\"},name:void 0,nameAsArray:!1,nativeCheckboxes:!1,noCascade:!1,onlyLeafCheckboxes:!1,optimisticToggle:!0,showExpandAll:!1,showNodeIcon:!0,showNodeTitle:!1,onCheck:function(){},onClick:null,onExpand:function(){}});t.default=ne}])});","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// cheap lodash replacements\nexport function isFunction(input) {\n  return typeof input === 'function';\n}\nexport function noop() {// noop\n}\n\nfunction isObjectLike(input) {\n  return _typeof(input) === 'object' && input !== null;\n}\n\nexport function isPlainObject(input) {\n  if (!isObjectLike(input)) {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(input) === null) {\n    return true;\n  }\n\n  var proto = input;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(input) === proto;\n}","export function getDecoratedComponent(instanceRef) {\n  var currentRef = instanceRef.current;\n\n  if (currentRef == null) {\n    return null;\n  } else if (currentRef.decoratedRef) {\n    // go through the private field in decorateHandler to avoid the invariant hit\n    return currentRef.decoratedRef.current;\n  } else {\n    return currentRef;\n  }\n}\nexport function isClassComponent(Component) {\n  return Component && Component.prototype && typeof Component.prototype.render === 'function';\n}\nexport function isRefForwardingComponent(C) {\n  var _item$$$typeof;\n\n  var item = C;\n  return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n}\nexport function isRefable(C) {\n  return isClassComponent(C) || isRefForwardingComponent(C);\n}\nexport function checkDecoratorArguments(functionName, signature) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n      var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n      if (arg && arg.prototype && arg.prototype.render) {\n        // eslint-disable-next-line no-console\n        console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n        return;\n      }\n    }\n  }\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { isFunction, noop } from '../utils/js_utils';\n/**\n * Provides a set of static methods for creating Disposables.\n * @param {Function} action Action to run during the first call to dispose.\n * The action is guaranteed to be run at most once.\n */\n\nvar Disposable =\n/** @class */\nfunction () {\n  var Disposable = /*#__PURE__*/function () {\n    function Disposable(action) {\n      _classCallCheck(this, Disposable);\n\n      this.isDisposed = false;\n      this.action = isFunction(action) ? action : noop;\n    }\n    /**\n     * Validates whether the given object is a disposable\n     * @param {Object} Object to test whether it has a dispose method\n     * @returns {Boolean} true if a disposable object, else false.\n     */\n\n\n    _createClass(Disposable, [{\n      key: \"dispose\",\n\n      /** Performs the task of cleaning up resources. */\n      value: function dispose() {\n        if (!this.isDisposed) {\n          this.action();\n          this.isDisposed = true;\n        }\n      }\n    }], [{\n      key: \"isDisposable\",\n      value: function isDisposable(d) {\n        return Boolean(d && isFunction(d.dispose));\n      }\n    }, {\n      key: \"_fixup\",\n      value: function _fixup(result) {\n        return Disposable.isDisposable(result) ? result : Disposable.empty;\n      }\n      /**\n       * Creates a disposable object that invokes the specified action when disposed.\n       * @param {Function} dispose Action to run during the first call to dispose.\n       * The action is guaranteed to be run at most once.\n       * @return {Disposable} The disposable object that runs the given action upon disposal.\n       */\n\n    }, {\n      key: \"create\",\n      value: function create(action) {\n        return new Disposable(action);\n      }\n    }]);\n\n    return Disposable;\n  }();\n  /**\n   * Gets the disposable that does nothing when disposed.\n   */\n\n\n  Disposable.empty = {\n    dispose: noop\n  };\n  return Disposable;\n}();\n\nexport { Disposable };\n/**\n * Represents a group of disposable resources that are disposed together.\n * @constructor\n */\n\nexport var CompositeDisposable = /*#__PURE__*/function () {\n  function CompositeDisposable() {\n    _classCallCheck(this, CompositeDisposable);\n\n    this.isDisposed = false;\n\n    for (var _len = arguments.length, disposables = new Array(_len), _key = 0; _key < _len; _key++) {\n      disposables[_key] = arguments[_key];\n    }\n\n    this.disposables = disposables;\n  }\n  /**\n   * Adds a disposable to the CompositeDisposable or disposes the disposable if the CompositeDisposable is disposed.\n   * @param {Any} item Disposable to add.\n   */\n\n\n  _createClass(CompositeDisposable, [{\n    key: \"add\",\n    value: function add(item) {\n      if (this.isDisposed) {\n        item.dispose();\n      } else {\n        this.disposables.push(item);\n      }\n    }\n    /**\n     * Removes and disposes the first occurrence of a disposable from the CompositeDisposable.\n     * @param {Any} item Disposable to remove.\n     * @returns {Boolean} true if found; false otherwise.\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      var shouldDispose = false;\n\n      if (!this.isDisposed) {\n        var idx = this.disposables.indexOf(item);\n\n        if (idx !== -1) {\n          shouldDispose = true;\n          this.disposables.splice(idx, 1);\n          item.dispose();\n        }\n      }\n\n      return shouldDispose;\n    }\n    /**\n     *  Disposes all disposables in the group and removes them from the group but\n     *  does not dispose the CompositeDisposable.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (!this.isDisposed) {\n        var len = this.disposables.length;\n        var currentDisposables = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          currentDisposables[i] = this.disposables[i];\n        }\n\n        this.disposables = [];\n\n        for (var _i = 0; _i < len; _i++) {\n          currentDisposables[_i].dispose();\n        }\n      }\n    }\n    /**\n     *  Disposes all disposables in the group and removes them from the group.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.isDisposed = true;\n        var len = this.disposables.length;\n        var currentDisposables = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          currentDisposables[i] = this.disposables[i];\n        }\n\n        this.disposables = [];\n\n        for (var _i2 = 0; _i2 < len; _i2++) {\n          currentDisposables[_i2].dispose();\n        }\n      }\n    }\n  }]);\n\n  return CompositeDisposable;\n}();\n/**\n * Represents a disposable resource whose underlying disposable resource can\n * be replaced by another disposable resource, causing automatic disposal of\n * the previous underlying disposable resource.\n */\n\nexport var SerialDisposable = /*#__PURE__*/function () {\n  function SerialDisposable() {\n    _classCallCheck(this, SerialDisposable);\n\n    this.isDisposed = false;\n  }\n  /**\n   * Gets the underlying disposable.\n   * @returns {Any} the underlying disposable.\n   */\n\n\n  _createClass(SerialDisposable, [{\n    key: \"getDisposable\",\n    value: function getDisposable() {\n      return this.current;\n    }\n  }, {\n    key: \"setDisposable\",\n    value: function setDisposable(value) {\n      var shouldDispose = this.isDisposed;\n\n      if (!shouldDispose) {\n        var old = this.current;\n        this.current = value;\n\n        if (old) {\n          old.dispose();\n        }\n      }\n\n      if (shouldDispose && value) {\n        value.dispose();\n      }\n    }\n    /** Performs the task of cleaning up resources. */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.isDisposed = true;\n        var old = this.current;\n        this.current = undefined;\n\n        if (old) {\n          old.dispose();\n        }\n      }\n    }\n  }]);\n\n  return SerialDisposable;\n}();","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport * as React from 'react';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { invariant } from '@react-dnd/invariant';\nimport hoistStatics from 'hoist-non-react-statics';\nimport { DndContext } from '../common/DndContext';\nimport { isPlainObject } from '../utils/js_utils';\nimport { Disposable, CompositeDisposable, SerialDisposable } from './disposables';\nimport { isRefable } from './utils';\nexport function decorateHandler(_ref) {\n  var DecoratedComponent = _ref.DecoratedComponent,\n      createHandler = _ref.createHandler,\n      createMonitor = _ref.createMonitor,\n      createConnector = _ref.createConnector,\n      registerHandler = _ref.registerHandler,\n      containerDisplayName = _ref.containerDisplayName,\n      getType = _ref.getType,\n      collect = _ref.collect,\n      options = _ref.options;\n  var _options$arePropsEqua = options.arePropsEqual,\n      arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n  var Decorated = DecoratedComponent;\n  var displayName = DecoratedComponent.displayName || DecoratedComponent.name || 'Component';\n\n  var DragDropContainer =\n  /** @class */\n  function () {\n    var DragDropContainer = /*#__PURE__*/function (_React$Component) {\n      _inherits(DragDropContainer, _React$Component);\n\n      var _super = _createSuper(DragDropContainer);\n\n      function DragDropContainer(props) {\n        var _this;\n\n        _classCallCheck(this, DragDropContainer);\n\n        _this = _super.call(this, props);\n        _this.decoratedRef = React.createRef();\n\n        _this.handleChange = function () {\n          var nextState = _this.getCurrentState();\n\n          if (!shallowEqual(nextState, _this.state)) {\n            _this.setState(nextState);\n          }\n        };\n\n        _this.disposable = new SerialDisposable();\n\n        _this.receiveProps(props);\n\n        _this.dispose();\n\n        return _this;\n      }\n\n      _createClass(DragDropContainer, [{\n        key: \"getHandlerId\",\n        value: function getHandlerId() {\n          return this.handlerId;\n        }\n      }, {\n        key: \"getDecoratedComponentInstance\",\n        value: function getDecoratedComponentInstance() {\n          invariant(this.decoratedRef.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n          return this.decoratedRef.current;\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.disposable = new SerialDisposable();\n          this.currentType = undefined;\n          this.receiveProps(this.props);\n          this.handleChange();\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (!arePropsEqual(this.props, prevProps)) {\n            this.receiveProps(this.props);\n            this.handleChange();\n          }\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.dispose();\n        }\n      }, {\n        key: \"receiveProps\",\n        value: function receiveProps(props) {\n          if (!this.handler) {\n            return;\n          }\n\n          this.handler.receiveProps(props);\n          this.receiveType(getType(props));\n        }\n      }, {\n        key: \"receiveType\",\n        value: function receiveType(type) {\n          if (!this.handlerMonitor || !this.manager || !this.handlerConnector) {\n            return;\n          }\n\n          if (type === this.currentType) {\n            return;\n          }\n\n          this.currentType = type;\n\n          var _registerHandler = registerHandler(type, this.handler, this.manager),\n              _registerHandler2 = _slicedToArray(_registerHandler, 2),\n              handlerId = _registerHandler2[0],\n              unregister = _registerHandler2[1];\n\n          this.handlerId = handlerId;\n          this.handlerMonitor.receiveHandlerId(handlerId);\n          this.handlerConnector.receiveHandlerId(handlerId);\n          var globalMonitor = this.manager.getMonitor();\n          var unsubscribe = globalMonitor.subscribeToStateChange(this.handleChange, {\n            handlerIds: [handlerId]\n          });\n          this.disposable.setDisposable(new CompositeDisposable(new Disposable(unsubscribe), new Disposable(unregister)));\n        }\n      }, {\n        key: \"dispose\",\n        value: function dispose() {\n          this.disposable.dispose();\n\n          if (this.handlerConnector) {\n            this.handlerConnector.receiveHandlerId(null);\n          }\n        }\n      }, {\n        key: \"getCurrentState\",\n        value: function getCurrentState() {\n          if (!this.handlerConnector) {\n            return {};\n          }\n\n          var nextState = collect(this.handlerConnector.hooks, this.handlerMonitor, this.props);\n\n          if (process.env.NODE_ENV !== 'production') {\n            invariant(isPlainObject(nextState), 'Expected `collect` specified as the second argument to ' + '%s for %s to return a plain object of props to inject. ' + 'Instead, received %s.', containerDisplayName, displayName, nextState);\n          }\n\n          return nextState;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return React.createElement(DndContext.Consumer, null, function (_ref2) {\n            var dragDropManager = _ref2.dragDropManager;\n\n            _this2.receiveDragDropManager(dragDropManager);\n\n            if (typeof requestAnimationFrame !== 'undefined') {\n              requestAnimationFrame(function () {\n                var _this2$handlerConnect;\n\n                return (_this2$handlerConnect = _this2.handlerConnector) === null || _this2$handlerConnect === void 0 ? void 0 : _this2$handlerConnect.reconnect();\n              });\n            }\n\n            return React.createElement(Decorated, Object.assign({}, _this2.props, _this2.getCurrentState(), {\n              // NOTE: if Decorated is a Function Component, decoratedRef will not be populated unless it's a refforwarding component.\n              ref: isRefable(Decorated) ? _this2.decoratedRef : null\n            }));\n          });\n        }\n      }, {\n        key: \"receiveDragDropManager\",\n        value: function receiveDragDropManager(dragDropManager) {\n          if (this.manager !== undefined) {\n            return;\n          }\n\n          invariant(dragDropManager !== undefined, 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n\n          if (dragDropManager === undefined) {\n            return;\n          }\n\n          this.manager = dragDropManager;\n          this.handlerMonitor = createMonitor(dragDropManager);\n          this.handlerConnector = createConnector(dragDropManager.getBackend());\n          this.handler = createHandler(this.handlerMonitor, this.decoratedRef);\n        }\n      }]);\n\n      return DragDropContainer;\n    }(React.Component);\n\n    DragDropContainer.DecoratedComponent = DecoratedComponent;\n    DragDropContainer.displayName = \"\".concat(containerDisplayName, \"(\").concat(displayName, \")\");\n    return DragDropContainer;\n  }();\n\n  return hoistStatics(DragDropContainer, DecoratedComponent);\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function isValidType(type, allowArray) {\n  return typeof type === 'string' || _typeof(type) === 'symbol' || !!allowArray && Array.isArray(type) && type.every(function (t) {\n    return isValidType(t, false);\n  });\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { isPlainObject } from '../utils/js_utils';\nimport { getDecoratedComponent } from './utils';\nvar ALLOWED_SPEC_METHODS = ['canDrag', 'beginDrag', 'isDragging', 'endDrag'];\nvar REQUIRED_SPEC_METHODS = ['beginDrag'];\n\nvar SourceImpl = /*#__PURE__*/function () {\n  function SourceImpl(spec, monitor, ref) {\n    var _this = this;\n\n    _classCallCheck(this, SourceImpl);\n\n    this.props = null;\n\n    this.beginDrag = function () {\n      if (!_this.props) {\n        return;\n      }\n\n      var item = _this.spec.beginDrag(_this.props, _this.monitor, _this.ref.current);\n\n      if (process.env.NODE_ENV !== 'production') {\n        invariant(isPlainObject(item), 'beginDrag() must return a plain object that represents the dragged item. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', item);\n      }\n\n      return item;\n    };\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.ref = ref;\n  }\n\n  _createClass(SourceImpl, [{\n    key: \"receiveProps\",\n    value: function receiveProps(props) {\n      this.props = props;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      if (!this.props) {\n        return false;\n      }\n\n      if (!this.spec.canDrag) {\n        return true;\n      }\n\n      return this.spec.canDrag(this.props, this.monitor);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, sourceId) {\n      if (!this.props) {\n        return false;\n      }\n\n      if (!this.spec.isDragging) {\n        return sourceId === globalMonitor.getSourceId();\n      }\n\n      return this.spec.isDragging(this.props, this.monitor);\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      if (!this.props) {\n        return;\n      }\n\n      if (!this.spec.endDrag) {\n        return;\n      }\n\n      this.spec.endDrag(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n  }]);\n\n  return SourceImpl;\n}();\n\nexport function createSourceFactory(spec) {\n  Object.keys(spec).forEach(function (key) {\n    invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drag source specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', ALLOWED_SPEC_METHODS.join(', '), key);\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n  });\n  REQUIRED_SPEC_METHODS.forEach(function (key) {\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n  });\n  return function createSource(monitor, ref) {\n    return new SourceImpl(spec, monitor, ref);\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { isPlainObject } from '../utils/js_utils';\nimport { checkDecoratorArguments } from './utils';\nimport { decorateHandler } from './decorateHandler';\nimport { registerSource } from '../common/registration';\nimport { DragSourceMonitorImpl } from '../common/DragSourceMonitorImpl';\nimport { SourceConnector } from '../common/SourceConnector';\nimport { isValidType } from '../utils/isValidType';\nimport { createSourceFactory } from './createSourceFactory';\n/**\n * Decorates a component as a dragsource\n * @param type The dragsource type\n * @param spec The drag source specification\n * @param collect The props collector function\n * @param options DnD options\n */\n\nexport function DragSource(type, spec, collect) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  checkDecoratorArguments('DragSource', 'type, spec, collect[, options]', type, spec, collect, options);\n  var getType = type;\n\n  if (typeof type !== 'function') {\n    invariant(isValidType(type), 'Expected \"type\" provided as the first argument to DragSource to be ' + 'a string, or a function that returns a string given the current props. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', type);\n\n    getType = function getType() {\n      return type;\n    };\n  }\n\n  invariant(isPlainObject(spec), 'Expected \"spec\" provided as the second argument to DragSource to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', spec);\n  var createSource = createSourceFactory(spec);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DragSource to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the fourth argument to DragSource to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n  return function decorateSource(DecoratedComponent) {\n    return decorateHandler({\n      containerDisplayName: 'DragSource',\n      createHandler: createSource,\n      registerHandler: registerSource,\n      createConnector: function createConnector(backend) {\n        return new SourceConnector(backend);\n      },\n      createMonitor: function createMonitor(manager) {\n        return new DragSourceMonitorImpl(manager);\n      },\n      DecoratedComponent: DecoratedComponent,\n      getType: getType,\n      collect: collect,\n      options: options\n    });\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { isPlainObject } from '../utils/js_utils';\nimport { getDecoratedComponent } from './utils';\nvar ALLOWED_SPEC_METHODS = ['canDrop', 'hover', 'drop'];\n\nvar TargetImpl = /*#__PURE__*/function () {\n  function TargetImpl(spec, monitor, ref) {\n    _classCallCheck(this, TargetImpl);\n\n    this.props = null;\n    this.spec = spec;\n    this.monitor = monitor;\n    this.ref = ref;\n  }\n\n  _createClass(TargetImpl, [{\n    key: \"receiveProps\",\n    value: function receiveProps(props) {\n      this.props = props;\n    }\n  }, {\n    key: \"receiveMonitor\",\n    value: function receiveMonitor(monitor) {\n      this.monitor = monitor;\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      if (!this.spec.canDrop) {\n        return true;\n      }\n\n      return this.spec.canDrop(this.props, this.monitor);\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      if (!this.spec.hover || !this.props) {\n        return;\n      }\n\n      this.spec.hover(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      if (!this.spec.drop) {\n        return undefined;\n      }\n\n      var dropResult = this.spec.drop(this.props, this.monitor, this.ref.current);\n\n      if (process.env.NODE_ENV !== 'production') {\n        invariant(typeof dropResult === 'undefined' || isPlainObject(dropResult), 'drop() must either return undefined, or an object that represents the drop result. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', dropResult);\n      }\n\n      return dropResult;\n    }\n  }]);\n\n  return TargetImpl;\n}();\n\nexport function createTargetFactory(spec) {\n  Object.keys(spec).forEach(function (key) {\n    invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drop target specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', ALLOWED_SPEC_METHODS.join(', '), key);\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drop target specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', key, key, spec[key]);\n  });\n  return function createTarget(monitor, ref) {\n    return new TargetImpl(spec, monitor, ref);\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { isPlainObject } from '../utils/js_utils';\nimport { registerTarget } from '../common/registration';\nimport { isValidType } from '../utils/isValidType';\nimport { TargetConnector } from '../common/TargetConnector';\nimport { DropTargetMonitorImpl } from '../common/DropTargetMonitorImpl';\nimport { checkDecoratorArguments } from './utils';\nimport { decorateHandler } from './decorateHandler';\nimport { createTargetFactory } from './createTargetFactory';\nexport function DropTarget(type, spec, collect) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  checkDecoratorArguments('DropTarget', 'type, spec, collect[, options]', type, spec, collect, options);\n  var getType = type;\n\n  if (typeof type !== 'function') {\n    invariant(isValidType(type, true), 'Expected \"type\" provided as the first argument to DropTarget to be ' + 'a string, an array of strings, or a function that returns either given ' + 'the current props. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', type);\n\n    getType = function getType() {\n      return type;\n    };\n  }\n\n  invariant(isPlainObject(spec), 'Expected \"spec\" provided as the second argument to DropTarget to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', spec);\n  var createTarget = createTargetFactory(spec);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DropTarget to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the fourth argument to DropTarget to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', collect);\n  return function decorateTarget(DecoratedComponent) {\n    return decorateHandler({\n      containerDisplayName: 'DropTarget',\n      createHandler: createTarget,\n      registerHandler: registerTarget,\n      createMonitor: function createMonitor(manager) {\n        return new DropTargetMonitorImpl(manager);\n      },\n      createConnector: function createConnector(backend) {\n        return new TargetConnector(backend);\n      },\n      DecoratedComponent: DecoratedComponent,\n      getType: getType,\n      collect: collect,\n      options: options\n    });\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport * as React from 'react';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport hoistStatics from 'hoist-non-react-statics';\nimport { invariant } from '@react-dnd/invariant';\nimport { DndContext } from '../common/DndContext';\nimport { isPlainObject } from '../utils/js_utils';\nimport { isRefable, checkDecoratorArguments } from './utils';\nexport function DragLayer(collect) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  checkDecoratorArguments('DragLayer', 'collect[, options]', collect, options);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ', 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the second argument to DragLayer to be a plain object when specified. ' + 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', options);\n  return function decorateLayer(DecoratedComponent) {\n    var Decorated = DecoratedComponent;\n    var _options$arePropsEqua = options.arePropsEqual,\n        arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n    var displayName = Decorated.displayName || Decorated.name || 'Component';\n\n    var DragLayerContainer =\n    /** @class */\n    function () {\n      var DragLayerContainer = /*#__PURE__*/function (_React$Component) {\n        _inherits(DragLayerContainer, _React$Component);\n\n        var _super = _createSuper(DragLayerContainer);\n\n        function DragLayerContainer() {\n          var _this;\n\n          _classCallCheck(this, DragLayerContainer);\n\n          _this = _super.apply(this, arguments);\n          _this.isCurrentlyMounted = false;\n          _this.ref = React.createRef();\n\n          _this.handleChange = function () {\n            if (!_this.isCurrentlyMounted) {\n              return;\n            }\n\n            var nextState = _this.getCurrentState();\n\n            if (!shallowEqual(nextState, _this.state)) {\n              _this.setState(nextState);\n            }\n          };\n\n          return _this;\n        }\n\n        _createClass(DragLayerContainer, [{\n          key: \"getDecoratedComponentInstance\",\n          value: function getDecoratedComponentInstance() {\n            invariant(this.ref.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n            return this.ref.current;\n          }\n        }, {\n          key: \"shouldComponentUpdate\",\n          value: function shouldComponentUpdate(nextProps, nextState) {\n            return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n          }\n        }, {\n          key: \"componentDidMount\",\n          value: function componentDidMount() {\n            this.isCurrentlyMounted = true;\n            this.handleChange();\n          }\n        }, {\n          key: \"componentWillUnmount\",\n          value: function componentWillUnmount() {\n            this.isCurrentlyMounted = false;\n\n            if (this.unsubscribeFromOffsetChange) {\n              this.unsubscribeFromOffsetChange();\n              this.unsubscribeFromOffsetChange = undefined;\n            }\n\n            if (this.unsubscribeFromStateChange) {\n              this.unsubscribeFromStateChange();\n              this.unsubscribeFromStateChange = undefined;\n            }\n          }\n        }, {\n          key: \"render\",\n          value: function render() {\n            var _this2 = this;\n\n            return React.createElement(DndContext.Consumer, null, function (_ref) {\n              var dragDropManager = _ref.dragDropManager;\n\n              if (dragDropManager === undefined) {\n                return null;\n              }\n\n              _this2.receiveDragDropManager(dragDropManager); // Let componentDidMount fire to initialize the collected state\n\n\n              if (!_this2.isCurrentlyMounted) {\n                return null;\n              }\n\n              return React.createElement(Decorated, Object.assign({}, _this2.props, _this2.state, {\n                ref: isRefable(Decorated) ? _this2.ref : null\n              }));\n            });\n          }\n        }, {\n          key: \"receiveDragDropManager\",\n          value: function receiveDragDropManager(dragDropManager) {\n            if (this.manager !== undefined) {\n              return;\n            }\n\n            this.manager = dragDropManager;\n            invariant(_typeof(dragDropManager) === 'object', 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n            var monitor = this.manager.getMonitor();\n            this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleChange);\n            this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleChange);\n          }\n        }, {\n          key: \"getCurrentState\",\n          value: function getCurrentState() {\n            if (!this.manager) {\n              return {};\n            }\n\n            var monitor = this.manager.getMonitor();\n            return collect(monitor, this.props);\n          }\n        }]);\n\n        return DragLayerContainer;\n      }(React.Component);\n\n      DragLayerContainer.displayName = \"DragLayer(\".concat(displayName, \")\");\n      DragLayerContainer.DecoratedComponent = DecoratedComponent;\n      return DragLayerContainer;\n    }();\n\n    return hoistStatics(DragLayerContainer, DecoratedComponent);\n  };\n}","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\n\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\n\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(\n      prevProps,\n      prevState\n    );\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\n\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n\n  if (\n    typeof Component.getDerivedStateFromProps !== 'function' &&\n    typeof prototype.getSnapshotBeforeUpdate !== 'function'\n  ) {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (\n    foundWillMountName !== null ||\n    foundWillReceivePropsName !== null ||\n    foundWillUpdateName !== null\n  ) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName =\n      typeof Component.getDerivedStateFromProps === 'function'\n        ? 'getDerivedStateFromProps()'\n        : 'getSnapshotBeforeUpdate()';\n\n    throw Error(\n      'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n        componentName +\n        ' uses ' +\n        newApiName +\n        ' but also contains the following legacy lifecycles:' +\n        (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') +\n        (foundWillReceivePropsName !== null\n          ? '\\n  ' + foundWillReceivePropsName\n          : '') +\n        (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') +\n        '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' +\n        'https://fb.me/react-async-component-lifecycle-hooks'\n    );\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error(\n        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'\n      );\n    }\n\n    prototype.componentWillUpdate = componentWillUpdate;\n\n    var componentDidUpdate = prototype.componentDidUpdate;\n\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(\n      prevProps,\n      prevState,\n      maybeSnapshot\n    ) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag\n        ? this.__reactInternalSnapshot\n        : maybeSnapshot;\n\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n\n  return Component;\n}\n\nexport { polyfill };\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFilter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Search = function (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(props) {\n    _classCallCheck(this, Search);\n\n    var _this = _possibleConstructorReturn(this, (Search.__proto__ || Object.getPrototypeOf(Search)).call(this, props));\n\n    _this.state = {\n      searchTerm: _this.props.value || ''\n    };\n    _this.updateSearch = _this.updateSearch.bind(_this);\n    _this.filter = _this.filter.bind(_this);\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (typeof nextProps.value !== 'undefined' && nextProps.value !== this.props.value) {\n        var e = {\n          target: {\n            value: nextProps.value\n          }\n        };\n        this.updateSearch(e);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          className = _props.className,\n          onChange = _props.onChange,\n          caseSensitive = _props.caseSensitive,\n          sortResults = _props.sortResults,\n          throttle = _props.throttle,\n          filterKeys = _props.filterKeys,\n          value = _props.value,\n          fuzzy = _props.fuzzy,\n          inputClassName = _props.inputClassName,\n          inputProps = _objectWithoutProperties(_props, ['className', 'onChange', 'caseSensitive', 'sortResults', 'throttle', 'filterKeys', 'value', 'fuzzy', 'inputClassName']); // eslint-disable-line no-unused-vars\n\n\n      inputProps.type = inputProps.type || 'search';\n      inputProps.value = this.state.searchTerm;\n      inputProps.onChange = this.updateSearch;\n      inputProps.className = inputClassName;\n      inputProps.placeholder = inputProps.placeholder || 'Search';\n      return _react2.default.createElement(\n        'div',\n        { className: className },\n        _react2.default.createElement('input', inputProps)\n      );\n    }\n  }, {\n    key: 'updateSearch',\n    value: function updateSearch(e) {\n      var _this2 = this;\n\n      var searchTerm = e.target.value;\n      this.setState({\n        searchTerm: searchTerm\n      }, function () {\n        if (_this2._throttleTimeout) {\n          clearTimeout(_this2._throttleTimeout);\n        }\n\n        _this2._throttleTimeout = setTimeout(function () {\n          return _this2.props.onChange(searchTerm);\n        }, _this2.props.throttle);\n      });\n    }\n  }, {\n    key: 'filter',\n    value: function filter(keys) {\n      var _props2 = this.props,\n          filterKeys = _props2.filterKeys,\n          caseSensitive = _props2.caseSensitive,\n          fuzzy = _props2.fuzzy,\n          sortResults = _props2.sortResults;\n\n      return (0, _util.createFilter)(this.state.searchTerm, keys || filterKeys, {\n        caseSensitive: caseSensitive,\n        fuzzy: fuzzy,\n        sortResults: sortResults\n      });\n    }\n  }]);\n\n  return Search;\n}(_react.Component);\n\nSearch.defaultProps = {\n  className: '',\n  onChange: function onChange() {},\n\n  caseSensitive: false,\n  fuzzy: false,\n  throttle: 200\n};\n\nSearch.propTypes = {\n  className: _propTypes2.default.string,\n  inputClassName: _propTypes2.default.string,\n  onChange: _propTypes2.default.func,\n  caseSensitive: _propTypes2.default.bool,\n  sortResults: _propTypes2.default.bool,\n  fuzzy: _propTypes2.default.bool,\n  throttle: _propTypes2.default.number,\n  filterKeys: _propTypes2.default.oneOf([_propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.string)]),\n  value: _propTypes2.default.string\n};\n\nexports.default = Search;\nexports.createFilter = _util.createFilter;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getValuesForKey = getValuesForKey;\nexports.searchStrings = searchStrings;\nexports.createFilter = createFilter;\n\nvar _fuse = require('fuse.js');\n\nvar _fuse2 = _interopRequireDefault(_fuse);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction flatten(array) {\n  return array.reduce(function (flat, toFlatten) {\n    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n  }, []);\n}\n\nfunction getValuesForKey(key, item) {\n  var keys = key.split('.');\n  var results = [item];\n  keys.forEach(function (_key) {\n    var tmp = [];\n    results.forEach(function (result) {\n      if (result) {\n        if (result instanceof Array) {\n          var index = parseInt(_key, 10);\n          if (!isNaN(index)) {\n            return tmp.push(result[index]);\n          }\n          result.forEach(function (res) {\n            tmp.push(res[_key]);\n          });\n        } else if (result && typeof result.get === 'function') {\n          tmp.push(result.get(_key));\n        } else {\n          tmp.push(result[_key]);\n        }\n      }\n    });\n\n    results = tmp;\n  });\n\n  // Support arrays and Immutable lists.\n  results = results.map(function (r) {\n    return r && r.push && r.toArray ? r.toArray() : r;\n  });\n  results = flatten(results);\n\n  return results.filter(function (r) {\n    return typeof r === 'string' || typeof r === 'number';\n  });\n}\n\nfunction searchStrings(strings, term) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      caseSensitive = _ref.caseSensitive,\n      fuzzy = _ref.fuzzy,\n      sortResults = _ref.sortResults,\n      exactMatch = _ref.exactMatch;\n\n  strings = strings.map(function (e) {\n    return e.toString();\n  });\n\n  try {\n    if (fuzzy) {\n      if (typeof strings.toJS === 'function') {\n        strings = strings.toJS();\n      }\n      var fuse = new _fuse2.default(strings.map(function (s) {\n        return { id: s };\n      }), { keys: ['id'], id: 'id', caseSensitive: caseSensitive, shouldSort: sortResults });\n      return fuse.search(term).length;\n    }\n    return strings.some(function (value) {\n      try {\n        if (!caseSensitive) {\n          value = value.toLowerCase();\n        }\n        if (exactMatch) {\n          term = new RegExp('^' + term + '$', 'i');\n        }\n        if (value && value.search(term) !== -1) {\n          return true;\n        }\n        return false;\n      } catch (e) {\n        return false;\n      }\n    });\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction createFilter(term, keys) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  return function (item) {\n    if (term === '') {\n      return true;\n    }\n\n    if (!options.caseSensitive) {\n      term = term.toLowerCase();\n    }\n\n    var terms = term.split(' ');\n\n    if (!keys) {\n      return terms.every(function (term) {\n        return searchStrings([item], term, options);\n      });\n    }\n\n    if (typeof keys === 'string') {\n      keys = [keys];\n    }\n\n    return terms.every(function (term) {\n      // allow search in specific fields with the syntax `field:search`\n      var currentKeys = void 0;\n      if (term.indexOf(':') !== -1) {\n        var searchedField = term.split(':')[0];\n        term = term.split(':')[1];\n        currentKeys = keys.filter(function (key) {\n          return key.toLowerCase().indexOf(searchedField) > -1;\n        });\n      } else {\n        currentKeys = keys;\n      }\n\n      return currentKeys.some(function (key) {\n        var values = getValuesForKey(key, item);\n        return searchStrings(values, term, options);\n      });\n    });\n  };\n}","/*!\n * Fuse.js v3.6.1 - Lightweight fuzzy-search (http://fusejs.io)\n * \n * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n * \n * http://www.apache.org/licenses/LICENSE-2.0\n */\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"Fuse\",[],t):\"object\"==typeof exports?exports.Fuse=t():e.Fuse=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){function n(e){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(1),a=r(7),s=a.get,c=(a.deepValue,a.isArray),h=function(){function e(t,r){var n=r.location,o=void 0===n?0:n,i=r.distance,a=void 0===i?100:i,c=r.threshold,h=void 0===c?.6:c,l=r.maxPatternLength,u=void 0===l?32:l,f=r.caseSensitive,v=void 0!==f&&f,p=r.tokenSeparator,d=void 0===p?/ +/g:p,g=r.findAllMatches,y=void 0!==g&&g,m=r.minMatchCharLength,k=void 0===m?1:m,b=r.id,S=void 0===b?null:b,x=r.keys,M=void 0===x?[]:x,_=r.shouldSort,w=void 0===_||_,L=r.getFn,A=void 0===L?s:L,O=r.sortFn,C=void 0===O?function(e,t){return e.score-t.score}:O,j=r.tokenize,P=void 0!==j&&j,I=r.matchAllTokens,F=void 0!==I&&I,T=r.includeMatches,N=void 0!==T&&T,z=r.includeScore,E=void 0!==z&&z,W=r.verbose,K=void 0!==W&&W;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={location:o,distance:a,threshold:h,maxPatternLength:u,isCaseSensitive:v,tokenSeparator:d,findAllMatches:y,minMatchCharLength:k,id:S,keys:M,includeMatches:N,includeScore:E,shouldSort:w,getFn:A,sortFn:C,verbose:K,tokenize:P,matchAllTokens:F},this.setCollection(t),this._processKeys(M)}var t,r,a;return t=e,(r=[{key:\"setCollection\",value:function(e){return this.list=e,e}},{key:\"_processKeys\",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&\"string\"==typeof e[0])for(var t=0,r=e.length;t<r;t+=1){var n=e[t];this._keyWeights[n]=1,this._keyNames.push(n)}else{for(var o=null,i=null,a=0,s=0,c=e.length;s<c;s+=1){var h=e[s];if(!h.hasOwnProperty(\"name\"))throw new Error('Missing \"name\" property in key object');var l=h.name;if(this._keyNames.push(l),!h.hasOwnProperty(\"weight\"))throw new Error('Missing \"weight\" property in key object');var u=h.weight;if(u<0||u>1)throw new Error('\"weight\" property in key must bein the range of [0, 1)');i=null==i?u:Math.max(i,u),o=null==o?u:Math.min(o,u),this._keyWeights[l]=u,a+=u}if(a>1)throw new Error(\"Total of weights cannot exceed 1\")}}},{key:\"search\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\\nSearch pattern: \"'.concat(e,'\"'));var r=this._prepareSearchers(e),n=r.tokenSearchers,o=r.fullSearcher,i=this._search(n,o);return this._computeScore(i),this.options.shouldSort&&this._sort(i),t.limit&&\"number\"==typeof t.limit&&(i=i.slice(0,t.limit)),this._format(i)}},{key:\"_prepareSearchers\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=[];if(this.options.tokenize)for(var r=e.split(this.options.tokenSeparator),n=0,o=r.length;n<o;n+=1)t.push(new i(r[n],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:\"_search\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=this.list,n={},o=[];if(\"string\"==typeof r[0]){for(var i=0,a=r.length;i<a;i+=1)this._analyze({key:\"\",value:r[i],record:i,index:i},{resultMap:n,results:o,tokenSearchers:e,fullSearcher:t});return o}for(var s=0,c=r.length;s<c;s+=1)for(var h=r[s],l=0,u=this._keyNames.length;l<u;l+=1){var f=this._keyNames[l];this._analyze({key:f,value:this.options.getFn(h,f),record:h,index:s},{resultMap:n,results:o,tokenSearchers:e,fullSearcher:t})}return o}},{key:\"_analyze\",value:function(e,t){var r=this,n=e.key,o=e.arrayIndex,i=void 0===o?-1:o,a=e.value,s=e.record,h=e.index,l=t.tokenSearchers,u=void 0===l?[]:l,f=t.fullSearcher,v=t.resultMap,p=void 0===v?{}:v,d=t.results,g=void 0===d?[]:d;!function e(t,o,i,a){if(null!=o)if(\"string\"==typeof o){var s=!1,h=-1,l=0;r._log(\"\\nKey: \".concat(\"\"===n?\"--\":n));var v=f.search(o);if(r._log('Full text: \"'.concat(o,'\", score: ').concat(v.score)),r.options.tokenize){for(var d=o.split(r.options.tokenSeparator),y=d.length,m=[],k=0,b=u.length;k<b;k+=1){var S=u[k];r._log('\\nPattern: \"'.concat(S.pattern,'\"'));for(var x=!1,M=0;M<y;M+=1){var _=d[M],w=S.search(_),L={};w.isMatch?(L[_]=w.score,s=!0,x=!0,m.push(w.score)):(L[_]=1,r.options.matchAllTokens||m.push(1)),r._log('Token: \"'.concat(_,'\", score: ').concat(L[_]))}x&&(l+=1)}h=m[0];for(var A=m.length,O=1;O<A;O+=1)h+=m[O];h/=A,r._log(\"Token score average:\",h)}var C=v.score;h>-1&&(C=(C+h)/2),r._log(\"Score average:\",C);var j=!r.options.tokenize||!r.options.matchAllTokens||l>=u.length;if(r._log(\"\\nCheck Matches: \".concat(j)),(s||v.isMatch)&&j){var P={key:n,arrayIndex:t,value:o,score:C};r.options.includeMatches&&(P.matchedIndices=v.matchedIndices);var I=p[a];I?I.output.push(P):(p[a]={item:i,output:[P]},g.push(p[a]))}}else if(c(o))for(var F=0,T=o.length;F<T;F+=1)e(F,o[F],i,a)}(i,a,s,h)}},{key:\"_computeScore\",value:function(e){this._log(\"\\n\\nComputing score:\\n\");for(var t=this._keyWeights,r=!!Object.keys(t).length,n=0,o=e.length;n<o;n+=1){for(var i=e[n],a=i.output,s=a.length,c=1,h=0;h<s;h+=1){var l=a[h],u=l.key,f=r?t[u]:1,v=0===l.score&&t&&t[u]>0?Number.EPSILON:l.score;c*=Math.pow(v,f)}i.score=c,this._log(i)}}},{key:\"_sort\",value:function(e){this._log(\"\\n\\nSorting....\"),e.sort(this.options.sortFn)}},{key:\"_format\",value:function(e){var t=[];if(this.options.verbose){var r=[];this._log(\"\\n\\nOutput:\\n\\n\",JSON.stringify(e,function(e,t){if(\"object\"===n(t)&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t},2)),r=null}var o=[];this.options.includeMatches&&o.push(function(e,t){var r=e.output;t.matches=[];for(var n=0,o=r.length;n<o;n+=1){var i=r[n];if(0!==i.matchedIndices.length){var a={indices:i.matchedIndices,value:i.value};i.key&&(a.key=i.key),i.hasOwnProperty(\"arrayIndex\")&&i.arrayIndex>-1&&(a.arrayIndex=i.arrayIndex),t.matches.push(a)}}}),this.options.includeScore&&o.push(function(e,t){t.score=e.score});for(var i=0,a=e.length;i<a;i+=1){var s=e[i];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),o.length){for(var c={item:s.item},h=0,l=o.length;h<l;h+=1)o[h](s,c);t.push(c)}else t.push(s.item)}return t}},{key:\"_log\",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&o(t.prototype,r),a&&o(t,a),e}();e.exports=h},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(2),i=r(3),a=r(6),s=function(){function e(t,r){var n=r.location,o=void 0===n?0:n,i=r.distance,s=void 0===i?100:i,c=r.threshold,h=void 0===c?.6:c,l=r.maxPatternLength,u=void 0===l?32:l,f=r.isCaseSensitive,v=void 0!==f&&f,p=r.tokenSeparator,d=void 0===p?/ +/g:p,g=r.findAllMatches,y=void 0!==g&&g,m=r.minMatchCharLength,k=void 0===m?1:m,b=r.includeMatches,S=void 0!==b&&b;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:v,tokenSeparator:d,findAllMatches:y,includeMatches:S,minMatchCharLength:k},this.pattern=v?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=a(this.pattern))}var t,r,s;return t=e,(r=[{key:\"search\",value:function(e){var t=this.options,r=t.isCaseSensitive,n=t.includeMatches;if(r||(e=e.toLowerCase()),this.pattern===e){var a={isMatch:!0,score:0};return n&&(a.matchedIndices=[[0,e.length-1]]),a}var s=this.options,c=s.maxPatternLength,h=s.tokenSeparator;if(this.pattern.length>c)return o(e,this.pattern,h);var l=this.options,u=l.location,f=l.distance,v=l.threshold,p=l.findAllMatches,d=l.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:u,distance:f,threshold:v,findAllMatches:p,minMatchCharLength:d,includeMatches:n})}}])&&n(t.prototype,r),s&&n(t,s),e}();e.exports=s},function(e,t){var r=/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(t.replace(r,\"\\\\$&\").replace(n,\"|\")),i=e.match(o),a=!!i,s=[];if(a)for(var c=0,h=i.length;c<h;c+=1){var l=i[c];s.push([e.indexOf(l),l.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,r){var n=r(4),o=r(5);e.exports=function(e,t,r,i){for(var a=i.location,s=void 0===a?0:a,c=i.distance,h=void 0===c?100:c,l=i.threshold,u=void 0===l?.6:l,f=i.findAllMatches,v=void 0!==f&&f,p=i.minMatchCharLength,d=void 0===p?1:p,g=i.includeMatches,y=void 0!==g&&g,m=s,k=e.length,b=u,S=e.indexOf(t,m),x=t.length,M=[],_=0;_<k;_+=1)M[_]=0;if(-1!==S){var w=n(t,{errors:0,currentLocation:S,expectedLocation:m,distance:h});if(b=Math.min(w,b),-1!==(S=e.lastIndexOf(t,m+x))){var L=n(t,{errors:0,currentLocation:S,expectedLocation:m,distance:h});b=Math.min(L,b)}}S=-1;for(var A=[],O=1,C=x+k,j=1<<(x<=31?x-1:30),P=0;P<x;P+=1){for(var I=0,F=C;I<F;){n(t,{errors:P,currentLocation:m+F,expectedLocation:m,distance:h})<=b?I=F:C=F,F=Math.floor((C-I)/2+I)}C=F;var T=Math.max(1,m-F+1),N=v?k:Math.min(m+F,k)+x,z=Array(N+2);z[N+1]=(1<<P)-1;for(var E=N;E>=T;E-=1){var W=E-1,K=r[e.charAt(W)];if(K&&(M[W]=1),z[E]=(z[E+1]<<1|1)&K,0!==P&&(z[E]|=(A[E+1]|A[E])<<1|1|A[E+1]),z[E]&j&&(O=n(t,{errors:P,currentLocation:W,expectedLocation:m,distance:h}))<=b){if(b=O,(S=W)<=m)break;T=Math.max(1,2*m-S)}}if(n(t,{errors:P+1,currentLocation:m,expectedLocation:m,distance:h})>b)break;A=z}var $={isMatch:S>=0,score:0===O?.001:O};return y&&($.matchedIndices=o(M,d)),$}},function(e,t){e.exports=function(e,t){var r=t.errors,n=void 0===r?0:r,o=t.currentLocation,i=void 0===o?0:o,a=t.expectedLocation,s=void 0===a?0:a,c=t.distance,h=void 0===c?100:c,l=n/e.length,u=Math.abs(s-i);return h?l+u/h:u?1:l}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[],n=-1,o=-1,i=0,a=e.length;i<a;i+=1){var s=e[i];s&&-1===n?n=i:s||-1===n||((o=i-1)-n+1>=t&&r.push([n,o]),n=-1)}return e[i-1]&&i-n>=t&&r.push([n,i-1]),r}},function(e,t){e.exports=function(e){for(var t={},r=e.length,n=0;n<r;n+=1)t[e.charAt(n)]=0;for(var o=0;o<r;o+=1)t[e.charAt(o)]|=1<<r-o-1;return t}},function(e,t){var r=function(e){return Array.isArray?Array.isArray(e):\"[object Array]\"===Object.prototype.toString.call(e)},n=function(e){return null==e?\"\":function(e){if(\"string\"==typeof e)return e;var t=e+\"\";return\"0\"==t&&1/e==-1/0?\"-0\":t}(e)},o=function(e){return\"string\"==typeof e},i=function(e){return\"number\"==typeof e};e.exports={get:function(e,t){var a=[];return function e(t,s){if(s){var c=s.indexOf(\".\"),h=s,l=null;-1!==c&&(h=s.slice(0,c),l=s.slice(c+1));var u=t[h];if(null!=u)if(l||!o(u)&&!i(u))if(r(u))for(var f=0,v=u.length;f<v;f+=1)e(u[f],l);else l&&e(u,l);else a.push(n(u))}else a.push(t)}(e,t),a},isArray:r,isString:o,isNum:i,toString:n}}])});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _raf = require(\"raf\");\n\nvar _raf2 = _interopRequireDefault(_raf);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Container = function (_PureComponent) {\n  _inherits(Container, _PureComponent);\n\n  function Container() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Container);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Container.__proto__ || Object.getPrototypeOf(Container)).call.apply(_ref, [this].concat(args))), _this), _this.events = [\"resize\", \"scroll\", \"touchstart\", \"touchmove\", \"touchend\", \"pageshow\", \"load\"], _this.subscribers = [], _this.rafHandle = null, _this.subscribe = function (handler) {\n      _this.subscribers = _this.subscribers.concat(handler);\n    }, _this.unsubscribe = function (handler) {\n      _this.subscribers = _this.subscribers.filter(function (current) {\n        return current !== handler;\n      });\n    }, _this.notifySubscribers = function (evt) {\n      if (!_this.framePending) {\n        var currentTarget = evt.currentTarget;\n\n\n        _this.rafHandle = (0, _raf2.default)(function () {\n          _this.framePending = false;\n\n          var _this$node$getBoundin = _this.node.getBoundingClientRect(),\n              top = _this$node$getBoundin.top,\n              bottom = _this$node$getBoundin.bottom;\n\n          _this.subscribers.forEach(function (handler) {\n            return handler({\n              distanceFromTop: top,\n              distanceFromBottom: bottom,\n              eventSource: currentTarget === window ? document.body : _this.node\n            });\n          });\n        });\n        _this.framePending = true;\n      }\n    }, _this.getParent = function () {\n      return _this.node;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Container, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        subscribe: this.subscribe,\n        unsubscribe: this.unsubscribe,\n        getParent: this.getParent\n      };\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return window.addEventListener(event, _this2.notifySubscribers);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this3 = this;\n\n      if (this.rafHandle) {\n        _raf2.default.cancel(this.rafHandle);\n        this.rafHandle = null;\n      }\n\n      this.events.forEach(function (event) {\n        return window.removeEventListener(event, _this3.notifySubscribers);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return _react2.default.createElement(\"div\", _extends({}, this.props, {\n        ref: function ref(node) {\n          return _this4.node = node;\n        },\n        onScroll: this.notifySubscribers,\n        onTouchStart: this.notifySubscribers,\n        onTouchMove: this.notifySubscribers,\n        onTouchEnd: this.notifySubscribers\n      }));\n    }\n  }]);\n\n  return Container;\n}(_react.PureComponent);\n\nContainer.childContextTypes = {\n  subscribe: _propTypes2.default.func,\n  unsubscribe: _propTypes2.default.func,\n  getParent: _propTypes2.default.func\n};\nexports.default = Container;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Sticky = function (_Component) {\n  _inherits(Sticky, _Component);\n\n  function Sticky() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Sticky);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Sticky.__proto__ || Object.getPrototypeOf(Sticky)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      isSticky: false,\n      wasSticky: false,\n      style: {}\n    }, _this.handleContainerEvent = function (_ref2) {\n      var distanceFromTop = _ref2.distanceFromTop,\n          distanceFromBottom = _ref2.distanceFromBottom,\n          eventSource = _ref2.eventSource;\n\n      var parent = _this.context.getParent();\n\n      var preventingStickyStateChanges = false;\n      if (_this.props.relative) {\n        preventingStickyStateChanges = eventSource !== parent;\n        distanceFromTop = -(eventSource.scrollTop + eventSource.offsetTop) + _this.placeholder.offsetTop;\n      }\n\n      var placeholderClientRect = _this.placeholder.getBoundingClientRect();\n      var contentClientRect = _this.content.getBoundingClientRect();\n      var calculatedHeight = contentClientRect.height;\n\n      var bottomDifference = distanceFromBottom - _this.props.bottomOffset - calculatedHeight;\n\n      var wasSticky = !!_this.state.isSticky;\n      var isSticky = preventingStickyStateChanges ? wasSticky : distanceFromTop <= -_this.props.topOffset && distanceFromBottom > -_this.props.bottomOffset;\n\n      distanceFromBottom = (_this.props.relative ? parent.scrollHeight - parent.scrollTop : distanceFromBottom) - calculatedHeight;\n\n      var style = !isSticky ? {} : {\n        position: \"fixed\",\n        top: bottomDifference > 0 ? _this.props.relative ? parent.offsetTop - parent.offsetParent.scrollTop : 0 : bottomDifference,\n        left: placeholderClientRect.left,\n        width: placeholderClientRect.width\n      };\n\n      if (!_this.props.disableHardwareAcceleration) {\n        style.transform = \"translateZ(0)\";\n      }\n\n      _this.setState({\n        isSticky: isSticky,\n        wasSticky: wasSticky,\n        distanceFromTop: distanceFromTop,\n        distanceFromBottom: distanceFromBottom,\n        calculatedHeight: calculatedHeight,\n        style: style\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Sticky, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (!this.context.subscribe) throw new TypeError(\"Expected Sticky to be mounted within StickyContainer\");\n\n      this.context.subscribe(this.handleContainerEvent);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.context.unsubscribe(this.handleContainerEvent);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.placeholder.style.paddingBottom = this.props.disableCompensation ? 0 : (this.state.isSticky ? this.state.calculatedHeight : 0) + \"px\";\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var element = _react2.default.cloneElement(this.props.children({\n        isSticky: this.state.isSticky,\n        wasSticky: this.state.wasSticky,\n        distanceFromTop: this.state.distanceFromTop,\n        distanceFromBottom: this.state.distanceFromBottom,\n        calculatedHeight: this.state.calculatedHeight,\n        style: this.state.style\n      }), {\n        ref: function ref(content) {\n          _this2.content = _reactDom2.default.findDOMNode(content);\n        }\n      });\n\n      return _react2.default.createElement(\n        \"div\",\n        null,\n        _react2.default.createElement(\"div\", { ref: function ref(placeholder) {\n            return _this2.placeholder = placeholder;\n          } }),\n        element\n      );\n    }\n  }]);\n\n  return Sticky;\n}(_react.Component);\n\nSticky.propTypes = {\n  topOffset: _propTypes2.default.number,\n  bottomOffset: _propTypes2.default.number,\n  relative: _propTypes2.default.bool,\n  children: _propTypes2.default.func.isRequired\n};\nSticky.defaultProps = {\n  relative: false,\n  topOffset: 0,\n  bottomOffset: 0,\n  disableCompensation: false,\n  disableHardwareAcceleration: false\n};\nSticky.contextTypes = {\n  subscribe: _propTypes2.default.func,\n  unsubscribe: _propTypes2.default.func,\n  getParent: _propTypes2.default.func\n};\nexports.default = Sticky;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StickyContainer = exports.Sticky = undefined;\n\nvar _Sticky = require(\"./Sticky\");\n\nvar _Sticky2 = _interopRequireDefault(_Sticky);\n\nvar _Container = require(\"./Container\");\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Sticky = _Sticky2.default;\nexports.StickyContainer = _Container2.default;\nexports.default = _Sticky2.default;","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * A Registry which serves as a typed key:value store for Superset and for Plugins.\n *\n * Differences from the older Registry class:\n *\n * 1. The keys and values stored in this class are individually typed by TYPEMAP parameter.\n *    In the old Registry, all values are of the same type and keys are not enumerated.\n *    Though you can also use indexed or mapped types in a TYPEMAP.\n *\n * 2. This class does not have a separate async get and set methods or use loaders.\n *    Instead, TYPEMAP should specify async values and loaders explicitly when needed.\n *    The value can be anything! A string, a class, a function, an async function... anything!\n *\n * 3. This class does not implement Policies, that is a separate concern to be handled elsewhere.\n *\n *\n * Removing or altering types in a type map could be a potential breaking change, be careful!\n *\n * Listener methods have not been added because there isn't a use case yet.\n */\nclass TypedRegistry<TYPEMAP extends {}> {\n  name = 'TypedRegistry';\n\n  private records: TYPEMAP;\n\n  constructor(initialRecords: TYPEMAP) {\n    this.records = initialRecords;\n  }\n\n  get<K extends keyof TYPEMAP>(key: K): TYPEMAP[K] {\n    // The type construction above means that when you call this function,\n    // you get a really specific type back.\n    return this.records[key];\n  }\n\n  set<K extends keyof TYPEMAP>(key: K, value: TYPEMAP[K]) {\n    this.records[key] = value;\n  }\n}\n\nexport default TypedRegistry;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { TypedRegistry } from '../models';\nimport { makeSingleton } from '../utils';\n\n/** A function (or component) which returns text (or marked-up text) */\ntype UiGeneratorText<P = void> = (props: P) => string | React.ReactElement;\n\n/**\n * This type defines all the UI override options which replace elements of Superset's default UI.\n * Idea with the keys here is generally to namespace following the form of 'domain.functonality.item'\n *\n * When defining a new option here, take care to keep any parameters to functions (or components) minimal.\n * Any removal or alteration to a parameter will be considered a breaking change.\n */\nexport type UiOverrides = Partial<{\n  'embedded.documentation.description': UiGeneratorText;\n  'embedded.documentation.url': string;\n}>;\n\n/**\n * A registry containing UI customizations to replace elements of Superset's default UI.\n */\nclass UiOverrideRegistry extends TypedRegistry<UiOverrides> {\n  name = 'UiOverrideRegistry';\n}\n\nexport const getUiOverrideRegistry = makeSingleton(UiOverrideRegistry, {});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState, useRef } from 'react';\nimport cx from 'classnames';\nimport { css, styled, t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport CertifiedBadge from '../CertifiedBadge';\n\nexport interface EditableTitleProps {\n  canEdit?: boolean;\n  editing?: boolean;\n  emptyText?: string;\n  extraClasses?: Array<string> | string;\n  multiLine?: boolean;\n  noPermitTooltip?: string;\n  onSaveTitle: (arg0: string) => void;\n  showTooltip?: boolean;\n  style?: object;\n  title?: string;\n  defaultTitle?: string;\n  placeholder?: string;\n  certifiedBy?: string;\n  certificationDetails?: string;\n  onClickTitle?: () => void;\n}\n\nconst StyledCertifiedBadge = styled(CertifiedBadge)`\n  vertical-align: middle;\n`;\n\nexport default function EditableTitle({\n  canEdit = false,\n  editing = false,\n  extraClasses,\n  multiLine = false,\n  noPermitTooltip,\n  onSaveTitle,\n  showTooltip = true,\n  style,\n  title = '',\n  defaultTitle = '',\n  placeholder = '',\n  certifiedBy,\n  certificationDetails,\n  onClickTitle,\n  // rest is related to title tooltip\n  ...rest\n}: EditableTitleProps) {\n  const [isEditing, setIsEditing] = useState(editing);\n  const [currentTitle, setCurrentTitle] = useState(title);\n  const [lastTitle, setLastTitle] = useState(title);\n  const [contentBoundingRect, setContentBoundingRect] =\n    useState<DOMRect | null>(null);\n  // Used so we can access the DOM element if a user clicks on this component.\n\n  const contentRef = useRef<any | HTMLInputElement | HTMLTextAreaElement>();\n\n  useEffect(() => {\n    if (title !== currentTitle) {\n      setLastTitle(currentTitle);\n      setCurrentTitle(title);\n    }\n  }, [title]);\n\n  useEffect(() => {\n    if (isEditing) {\n      contentRef.current.focus();\n      // move cursor and scroll to the end\n      if (contentRef.current.setSelectionRange) {\n        const { length } = contentRef.current.value;\n        contentRef.current.setSelectionRange(length, length);\n        contentRef.current.scrollLeft = contentRef.current.scrollWidth;\n        contentRef.current.scrollTop = contentRef.current.scrollHeight;\n      }\n    }\n  }, [isEditing]);\n\n  function handleClick() {\n    if (!canEdit || isEditing) {\n      return;\n    }\n\n    // For multi-line values, save the actual rendered size of the displayed text.\n    // Later, if a textarea is constructed for editing the value, we'll need this.\n    const contentBounding = contentRef.current\n      ? contentRef.current.getBoundingClientRect()\n      : null;\n    setIsEditing(true);\n    setContentBoundingRect(contentBounding);\n  }\n\n  function handleBlur() {\n    const formattedTitle = currentTitle.trim();\n\n    if (!canEdit) {\n      return;\n    }\n\n    setIsEditing(false);\n\n    if (!formattedTitle.length) {\n      setCurrentTitle(lastTitle);\n      return;\n    }\n\n    if (lastTitle !== formattedTitle) {\n      setLastTitle(formattedTitle);\n    }\n\n    if (title !== formattedTitle) {\n      onSaveTitle(formattedTitle);\n    }\n  }\n\n  // tl;dr when a EditableTitle is being edited, typically the Tab that wraps it has been\n  // clicked and is focused/active. For accessibility, when the focused tab anchor intercepts\n  // the ' ' key (among others, including all arrows) the onChange() doesn't fire. Somehow\n  // keydown is still called so we can detect this and manually add a ' ' to the current title\n  function handleKeyDown(event: any) {\n    if (event.key === ' ') {\n      event.stopPropagation();\n    }\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      handleBlur();\n    }\n  }\n\n  function handleChange(ev: any) {\n    if (!canEdit) {\n      return;\n    }\n    setCurrentTitle(ev.target.value);\n  }\n\n  function handleKeyPress(ev: any) {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      handleBlur();\n    }\n  }\n\n  let value: string | undefined;\n  value = currentTitle;\n  if (!isEditing && !currentTitle) {\n    value = defaultTitle || title;\n  }\n\n  // Construct an inline style based on previously-saved height of the rendered label. Only\n  // used in multi-line contexts.\n  const editStyle =\n    isEditing && contentBoundingRect\n      ? { height: `${contentBoundingRect.height}px` }\n      : undefined;\n\n  // Create a textarea when we're editing a multi-line value, otherwise create an input (which may\n  // be text or a button).\n  let titleComponent =\n    multiLine && isEditing ? (\n      <textarea\n        data-test=\"editable-title-input\"\n        ref={contentRef}\n        value={value}\n        className={!title ? 'text-muted' : undefined}\n        onKeyDown={handleKeyDown}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        onClick={handleClick}\n        onKeyPress={handleKeyPress}\n        placeholder={placeholder}\n        style={editStyle}\n      />\n    ) : (\n      <input\n        data-test=\"editable-title-input\"\n        ref={contentRef}\n        type={isEditing ? 'text' : 'button'}\n        value={value}\n        className={!title ? 'text-muted' : undefined}\n        onKeyDown={handleKeyDown}\n        onChange={handleChange}\n        onBlur={handleBlur}\n        onClick={handleClick}\n        onKeyPress={handleKeyPress}\n        placeholder={placeholder}\n      />\n    );\n  if (showTooltip && !isEditing) {\n    titleComponent = (\n      <Tooltip\n        id=\"title-tooltip\"\n        title={\n          canEdit\n            ? t('Click to edit')\n            : noPermitTooltip ||\n              t(\"You don't have the rights to alter this title.\")\n        }\n      >\n        {titleComponent}\n      </Tooltip>\n    );\n  }\n  if (!canEdit) {\n    // don't actually want an input in this case\n    titleComponent = onClickTitle ? (\n      <span\n        role=\"button\"\n        onClick={onClickTitle}\n        tabIndex={0}\n        data-test=\"editable-title-input\"\n        css={css`\n          :hover {\n            text-decoration: underline;\n          }\n        `}\n      >\n        {value}\n      </span>\n    ) : (\n      <span data-test=\"editable-title-input\">{value}</span>\n    );\n  }\n  return (\n    <span\n      data-test=\"editable-title\"\n      className={cx(\n        'editable-title',\n        extraClasses,\n        canEdit && 'editable-title--editable',\n        isEditing && 'editable-title--editing',\n      )}\n      style={style}\n      {...rest}\n    >\n      {certifiedBy && (\n        <>\n          <StyledCertifiedBadge\n            certifiedBy={certifiedBy}\n            details={certificationDetails}\n            size=\"xl\"\n          />{' '}\n        </>\n      )}\n      {titleComponent}\n    </span>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { CHART_TYPE } from './componentTypes';\n\nexport default function getChartIdsFromLayout(layout) {\n  return Object.values(layout).reduce((chartIds, currentComponent) => {\n    if (\n      currentComponent &&\n      currentComponent.type === CHART_TYPE &&\n      currentComponent.meta &&\n      currentComponent.meta.chartId\n    ) {\n      chartIds.push(currentComponent.meta.chartId);\n    }\n    return chartIds;\n  }, []);\n}\n","import _pt from \"prop-types\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport debounce from 'lodash/debounce';\nimport React from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\n\nvar ParentSize =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(ParentSize, _React$Component);\n\n  function ParentSize(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"animationFrameID\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"resizeObserver\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"target\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"resize\", function (_ref) {\n      var width = _ref.width,\n          height = _ref.height,\n          top = _ref.top,\n          left = _ref.left;\n\n      _this.setState(function () {\n        return {\n          width: width,\n          height: height,\n          top: top,\n          left: left\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setTarget\", function (ref) {\n      _this.target = ref;\n    });\n\n    _this.state = {\n      width: 0,\n      height: 0,\n      top: 0,\n      left: 0\n    };\n    _this.resize = debounce(_this.resize, props.debounceTime);\n    _this.animationFrameID = null;\n    return _this;\n  }\n\n  var _proto = ParentSize.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.resizeObserver = new ResizeObserver(function (entries\n    /** , observer */\n    ) {\n      if (entries === void 0) {\n        entries = [];\n      }\n\n      entries.forEach(function (entry) {\n        var _entry$contentRect = entry.contentRect,\n            left = _entry$contentRect.left,\n            top = _entry$contentRect.top,\n            width = _entry$contentRect.width,\n            height = _entry$contentRect.height;\n        _this2.animationFrameID = window.requestAnimationFrame(function () {\n          _this2.resize({\n            width: width,\n            height: height,\n            top: top,\n            left: left\n          });\n        });\n      });\n    });\n    if (this.target) this.resizeObserver.observe(this.target);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.animationFrameID) window.cancelAnimationFrame(this.animationFrameID);\n    if (this.resizeObserver) this.resizeObserver.disconnect();\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        className = _this$props.className,\n        children = _this$props.children,\n        debounceTime = _this$props.debounceTime,\n        parentSizeStyles = _this$props.parentSizeStyles,\n        restProps = _objectWithoutPropertiesLoose(_this$props, [\"className\", \"children\", \"debounceTime\", \"parentSizeStyles\"]);\n\n    return React.createElement(\"div\", _extends({\n      style: parentSizeStyles,\n      ref: this.setTarget,\n      className: className\n    }, restProps), children(_extends({}, this.state, {\n      ref: this.target,\n      resize: this.resize\n    })));\n  };\n\n  return ParentSize;\n}(React.Component);\n\n_defineProperty(ParentSize, \"propTypes\", {\n  className: _pt.string,\n  debounceTime: _pt.number,\n  children: _pt.func.isRequired\n});\n\n_defineProperty(ParentSize, \"defaultProps\", {\n  debounceTime: 300,\n  parentSizeStyles: {\n    width: '100%',\n    height: '100%'\n  }\n});\n\nexport { ParentSize as default };","import _extends from 'babel-runtime/helpers/extends';\nimport _Object$getOwnPropertyDescriptor from 'babel-runtime/core-js/object/get-own-property-descriptor';\nimport _Object$getPrototypeOf from 'babel-runtime/core-js/object/get-prototype-of';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport Grid, { accessibilityOverscanIndicesGetter } from '../Grid';\nimport * as React from 'react';\nimport cn from 'classnames';\n\n/**\n * It is inefficient to create and manage a large list of DOM elements within a scrolling container\n * if only a few of those elements are visible. The primary purpose of this component is to improve\n * performance by only rendering the DOM nodes that a user is able to see based on their current\n * scroll position.\n *\n * This component renders a virtualized list of elements with either fixed or dynamic heights.\n */\n\nvar List = function (_React$PureComponent) {\n  _inherits(List, _React$PureComponent);\n\n  function List() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, List);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = List.__proto__ || _Object$getPrototypeOf(List)).call.apply(_ref, [this].concat(args))), _this), _this._cellRenderer = function (_ref2) {\n      var parent = _ref2.parent,\n          rowIndex = _ref2.rowIndex,\n          style = _ref2.style,\n          isScrolling = _ref2.isScrolling,\n          isVisible = _ref2.isVisible,\n          key = _ref2.key;\n      var rowRenderer = _this.props.rowRenderer;\n\n      // TRICKY The style object is sometimes cached by Grid.\n      // This prevents new style objects from bypassing shallowCompare().\n      // However as of React 16, style props are auto-frozen (at least in dev mode)\n      // Check to make sure we can still modify the style before proceeding.\n      // https://github.com/facebook/react/commit/977357765b44af8ff0cfea327866861073095c12#commitcomment-20648713\n\n      var _Object$getOwnPropert = _Object$getOwnPropertyDescriptor(style, 'width'),\n          writable = _Object$getOwnPropert.writable;\n\n      if (writable) {\n        // By default, List cells should be 100% width.\n        // This prevents them from flowing under a scrollbar (if present).\n        style.width = '100%';\n      }\n\n      return rowRenderer({\n        index: rowIndex,\n        style: style,\n        isScrolling: isScrolling,\n        isVisible: isVisible,\n        key: key,\n        parent: parent\n      });\n    }, _this._setRef = function (ref) {\n      _this.Grid = ref;\n    }, _this._onScroll = function (_ref3) {\n      var clientHeight = _ref3.clientHeight,\n          scrollHeight = _ref3.scrollHeight,\n          scrollTop = _ref3.scrollTop;\n      var onScroll = _this.props.onScroll;\n\n\n      onScroll({ clientHeight: clientHeight, scrollHeight: scrollHeight, scrollTop: scrollTop });\n    }, _this._onSectionRendered = function (_ref4) {\n      var rowOverscanStartIndex = _ref4.rowOverscanStartIndex,\n          rowOverscanStopIndex = _ref4.rowOverscanStopIndex,\n          rowStartIndex = _ref4.rowStartIndex,\n          rowStopIndex = _ref4.rowStopIndex;\n      var onRowsRendered = _this.props.onRowsRendered;\n\n\n      onRowsRendered({\n        overscanStartIndex: rowOverscanStartIndex,\n        overscanStopIndex: rowOverscanStopIndex,\n        startIndex: rowStartIndex,\n        stopIndex: rowStopIndex\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(List, [{\n    key: 'forceUpdateGrid',\n    value: function forceUpdateGrid() {\n      if (this.Grid) {\n        this.Grid.forceUpdate();\n      }\n    }\n\n    /** See Grid#getOffsetForCell */\n\n  }, {\n    key: 'getOffsetForRow',\n    value: function getOffsetForRow(_ref5) {\n      var alignment = _ref5.alignment,\n          index = _ref5.index;\n\n      if (this.Grid) {\n        var _Grid$getOffsetForCel = this.Grid.getOffsetForCell({\n          alignment: alignment,\n          rowIndex: index,\n          columnIndex: 0\n        }),\n            _scrollTop = _Grid$getOffsetForCel.scrollTop;\n\n        return _scrollTop;\n      }\n      return 0;\n    }\n\n    /** CellMeasurer compatibility */\n\n  }, {\n    key: 'invalidateCellSizeAfterRender',\n    value: function invalidateCellSizeAfterRender(_ref6) {\n      var columnIndex = _ref6.columnIndex,\n          rowIndex = _ref6.rowIndex;\n\n      if (this.Grid) {\n        this.Grid.invalidateCellSizeAfterRender({\n          rowIndex: rowIndex,\n          columnIndex: columnIndex\n        });\n      }\n    }\n\n    /** See Grid#measureAllCells */\n\n  }, {\n    key: 'measureAllRows',\n    value: function measureAllRows() {\n      if (this.Grid) {\n        this.Grid.measureAllCells();\n      }\n    }\n\n    /** CellMeasurer compatibility */\n\n  }, {\n    key: 'recomputeGridSize',\n    value: function recomputeGridSize() {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$columnIndex = _ref7.columnIndex,\n          columnIndex = _ref7$columnIndex === undefined ? 0 : _ref7$columnIndex,\n          _ref7$rowIndex = _ref7.rowIndex,\n          rowIndex = _ref7$rowIndex === undefined ? 0 : _ref7$rowIndex;\n\n      if (this.Grid) {\n        this.Grid.recomputeGridSize({\n          rowIndex: rowIndex,\n          columnIndex: columnIndex\n        });\n      }\n    }\n\n    /** See Grid#recomputeGridSize */\n\n  }, {\n    key: 'recomputeRowHeights',\n    value: function recomputeRowHeights() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      if (this.Grid) {\n        this.Grid.recomputeGridSize({\n          rowIndex: index,\n          columnIndex: 0\n        });\n      }\n    }\n\n    /** See Grid#scrollToPosition */\n\n  }, {\n    key: 'scrollToPosition',\n    value: function scrollToPosition() {\n      var scrollTop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      if (this.Grid) {\n        this.Grid.scrollToPosition({ scrollTop: scrollTop });\n      }\n    }\n\n    /** See Grid#scrollToCell */\n\n  }, {\n    key: 'scrollToRow',\n    value: function scrollToRow() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      if (this.Grid) {\n        this.Grid.scrollToCell({\n          columnIndex: 0,\n          rowIndex: index\n        });\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          className = _props.className,\n          noRowsRenderer = _props.noRowsRenderer,\n          scrollToIndex = _props.scrollToIndex,\n          width = _props.width;\n\n\n      var classNames = cn('ReactVirtualized__List', className);\n\n      return React.createElement(Grid, _extends({}, this.props, {\n        autoContainerWidth: true,\n        cellRenderer: this._cellRenderer,\n        className: classNames,\n        columnWidth: width,\n        columnCount: 1,\n        noContentRenderer: noRowsRenderer,\n        onScroll: this._onScroll,\n        onSectionRendered: this._onSectionRendered,\n        ref: this._setRef,\n        scrollToRow: scrollToIndex\n      }));\n    }\n  }]);\n\n  return List;\n}(React.PureComponent);\n\nList.defaultProps = {\n  autoHeight: false,\n  estimatedRowSize: 30,\n  onScroll: function onScroll() {},\n  noRowsRenderer: function noRowsRenderer() {\n    return null;\n  },\n  onRowsRendered: function onRowsRendered() {},\n  overscanIndicesGetter: accessibilityOverscanIndicesGetter,\n  overscanRowCount: 10,\n  scrollToAlignment: 'auto',\n  scrollToIndex: -1,\n  style: {}\n};\nList.propTypes = process.env.NODE_ENV === 'production' ? null : {\n  \"aria-label\": PropTypes.string,\n\n\n  /**\n   * Removes fixed height from the scrollingContainer so that the total height\n   * of rows can stretch the window. Intended for use with WindowScroller\n   */\n  autoHeight: PropTypes.bool.isRequired,\n\n\n  /** Optional CSS class name */\n  className: PropTypes.string,\n\n\n  /**\n   * Used to estimate the total height of a List before all of its rows have actually been measured.\n   * The estimated total height is adjusted as rows are rendered.\n   */\n  estimatedRowSize: PropTypes.number.isRequired,\n\n\n  /** Height constraint for list (determines how many actual rows are rendered) */\n  height: PropTypes.number.isRequired,\n\n\n  /** Optional renderer to be used in place of rows when rowCount is 0 */\n  noRowsRenderer: function noRowsRenderer() {\n    return (typeof bpfrpt_proptype_NoContentRenderer === 'function' ? bpfrpt_proptype_NoContentRenderer.isRequired ? bpfrpt_proptype_NoContentRenderer.isRequired : bpfrpt_proptype_NoContentRenderer : PropTypes.shape(bpfrpt_proptype_NoContentRenderer).isRequired).apply(this, arguments);\n  },\n\n\n  /** Callback invoked with information about the slice of rows that were just rendered.  */\n\n  onRowsRendered: PropTypes.func.isRequired,\n\n\n  /**\n   * Callback invoked whenever the scroll offset changes within the inner scrollable region.\n   * This callback can be used to sync scrolling between lists, tables, or grids.\n   */\n  onScroll: PropTypes.func.isRequired,\n\n\n  /** See Grid#overscanIndicesGetter */\n  overscanIndicesGetter: function overscanIndicesGetter() {\n    return (typeof bpfrpt_proptype_OverscanIndicesGetter === 'function' ? bpfrpt_proptype_OverscanIndicesGetter.isRequired ? bpfrpt_proptype_OverscanIndicesGetter.isRequired : bpfrpt_proptype_OverscanIndicesGetter : PropTypes.shape(bpfrpt_proptype_OverscanIndicesGetter).isRequired).apply(this, arguments);\n  },\n\n\n  /**\n   * Number of rows to render above/below the visible bounds of the list.\n   * These rows can help for smoother scrolling on touch devices.\n   */\n  overscanRowCount: PropTypes.number.isRequired,\n\n\n  /** Either a fixed row height (number) or a function that returns the height of a row given its index.  */\n  rowHeight: function rowHeight() {\n    return (typeof bpfrpt_proptype_CellSize === 'function' ? bpfrpt_proptype_CellSize.isRequired ? bpfrpt_proptype_CellSize.isRequired : bpfrpt_proptype_CellSize : PropTypes.shape(bpfrpt_proptype_CellSize).isRequired).apply(this, arguments);\n  },\n\n\n  /** Responsible for rendering a row given an index; ({ index: number }): node */\n  rowRenderer: function rowRenderer() {\n    return (typeof bpfrpt_proptype_RowRenderer === 'function' ? bpfrpt_proptype_RowRenderer.isRequired ? bpfrpt_proptype_RowRenderer.isRequired : bpfrpt_proptype_RowRenderer : PropTypes.shape(bpfrpt_proptype_RowRenderer).isRequired).apply(this, arguments);\n  },\n\n\n  /** Number of rows in list. */\n  rowCount: PropTypes.number.isRequired,\n\n\n  /** See Grid#scrollToAlignment */\n  scrollToAlignment: function scrollToAlignment() {\n    return (typeof bpfrpt_proptype_Alignment === 'function' ? bpfrpt_proptype_Alignment.isRequired ? bpfrpt_proptype_Alignment.isRequired : bpfrpt_proptype_Alignment : PropTypes.shape(bpfrpt_proptype_Alignment).isRequired).apply(this, arguments);\n  },\n\n\n  /** Row index to ensure visible (by forcefully scrolling if necessary) */\n  scrollToIndex: PropTypes.number.isRequired,\n\n\n  /** Vertical offset. */\n  scrollTop: PropTypes.number,\n\n\n  /** Optional inline style */\n  style: PropTypes.object.isRequired,\n\n\n  /** Tab index for focus */\n  tabIndex: PropTypes.number,\n\n\n  /** Width of list */\n  width: PropTypes.number.isRequired\n};\nexport default List;\nimport { bpfrpt_proptype_NoContentRenderer } from '../Grid';\nimport { bpfrpt_proptype_Alignment } from '../Grid';\nimport { bpfrpt_proptype_CellSize } from '../Grid';\nimport { bpfrpt_proptype_CellPosition } from '../Grid';\nimport { bpfrpt_proptype_OverscanIndicesGetter } from '../Grid';\nimport { bpfrpt_proptype_RenderedSection } from '../Grid';\nimport { bpfrpt_proptype_CellRendererParams } from '../Grid';\nimport { bpfrpt_proptype_Scroll as bpfrpt_proptype_GridScroll } from '../Grid';\nimport { bpfrpt_proptype_RowRenderer } from './types';\nimport { bpfrpt_proptype_RenderedRows } from './types';\nimport { bpfrpt_proptype_Scroll } from './types';\nimport PropTypes from 'prop-types';","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t, styled } from '@superset-ui/core';\n\nconst propTypes = {\n  datasourceUrl: PropTypes.string,\n  datasourceName: PropTypes.string,\n  innerRef: PropTypes.func,\n  isSelected: PropTypes.bool,\n  lastModified: PropTypes.string,\n  sliceName: PropTypes.string.isRequired,\n  style: PropTypes.object,\n  visType: PropTypes.string.isRequired,\n};\n\nconst defaultProps = {\n  datasourceUrl: null,\n  datasourceName: '-',\n  innerRef: null,\n  isSelected: false,\n  style: null,\n  lastModified: null,\n};\n\nconst Styled = styled.div`\n  ${({ theme }) => `\n    .chart-card {\n      border: 1px solid ${theme.colors.grayscale.light2};\n      border-radius: ${theme.gridUnit}px;\n      background: ${theme.colors.grayscale.light5};\n      padding: ${theme.gridUnit * 2}px;\n      margin: 0 ${theme.gridUnit * 3}px\n        ${theme.gridUnit * 3}px\n        ${theme.gridUnit * 3}px;\n      position: relative;\n      cursor: move;\n      white-space: nowrap;\n      overflow: hidden;\n\n      &:hover {\n        background: ${theme.colors.grayscale.light4};\n      }\n    }\n\n    .chart-card.is-selected {\n      cursor: not-allowed;\n      opacity: 0.4;\n    }\n\n    .card-title {\n      margin-right: 60px;\n      margin-bottom: ${theme.gridUnit * 2}px;\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    .card-body {\n      display: flex;\n      flex-direction: column;\n\n      .item {\n        span {\n          word-break: break-all;\n\n          &:first-child {\n            font-weight: ${theme.typography.weights.normal};\n          }\n        }\n      }\n    }\n\n    .is-added-label {\n      background: ${theme.colors.grayscale.base};\n      border-radius: ${theme.gridUnit}px;\n      color: ${theme.colors.grayscale.light5};\n      font-size: ${theme.typography.sizes.s}px;\n      text-transform: uppercase;\n      position: absolute;\n      padding: ${theme.gridUnit}px\n        ${theme.gridUnit * 2}px;\n      top: ${theme.gridUnit * 8}px;\n      right: ${theme.gridUnit * 8}px;\n      pointer-events: none;\n    }\n  `}\n`;\n\nfunction AddSliceCard({\n  datasourceUrl,\n  datasourceName,\n  innerRef,\n  isSelected,\n  lastModified,\n  sliceName,\n  style,\n  visType,\n}) {\n  return (\n    <Styled ref={innerRef} style={style}>\n      <div\n        className={cx('chart-card', isSelected && 'is-selected')}\n        data-test=\"chart-card\"\n      >\n        <div className=\"card-title\" data-test=\"card-title\">\n          {sliceName}\n        </div>\n        <div className=\"card-body\">\n          <div className=\"item\">\n            <span>{t('Modified')} </span>\n            <span>{lastModified}</span>\n          </div>\n          <div className=\"item\">\n            <span>{t('Visualization')} </span>\n            <span>{visType}</span>\n          </div>\n          <div className=\"item\">\n            <span>{t('Data source')} </span>\n            <a href={datasourceUrl}>{datasourceName}</a>\n          </div>\n        </div>\n      </div>\n      {isSelected && <div className=\"is-added-label\">{t('Added')}</div>}\n    </Styled>\n  );\n}\n\nAddSliceCard.propTypes = propTypes;\nAddSliceCard.defaultProps = defaultProps;\n\nexport default AddSliceCard;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragLayer } from 'react-dnd';\n\nimport AddSliceCard from '../AddSliceCard';\nimport { slicePropShape } from '../../util/propShapes';\nimport {\n  NEW_COMPONENT_SOURCE_TYPE,\n  CHART_TYPE,\n} from '../../util/componentTypes';\n\nconst staticCardStyles = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  top: 0,\n  left: 0,\n  zIndex: 101, // this should be higher than top-level tabs\n  width: 376 - 2 * 16,\n};\n\nconst propTypes = {\n  dragItem: PropTypes.shape({\n    index: PropTypes.number.isRequired,\n  }),\n  slices: PropTypes.arrayOf(slicePropShape),\n  isDragging: PropTypes.bool.isRequired,\n  currentOffset: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n  }),\n};\n\nconst defaultProps = {\n  currentOffset: null,\n  dragItem: null,\n  slices: null,\n};\n\nfunction AddSliceDragPreview({ dragItem, slices, isDragging, currentOffset }) {\n  if (!isDragging || !currentOffset || !dragItem || !slices) return null;\n\n  const slice = slices[dragItem.index];\n\n  // make sure it's a new component and a chart\n  const shouldRender =\n    slice &&\n    dragItem.parentType === NEW_COMPONENT_SOURCE_TYPE &&\n    dragItem.type === CHART_TYPE;\n\n  return !shouldRender ? null : (\n    <AddSliceCard\n      style={{\n        ...staticCardStyles,\n        transform: `translate(${currentOffset.x}px, ${currentOffset.y}px)`,\n      }}\n      sliceName={slice.slice_name}\n      lastModified={slice.changed_on_humanized}\n      visType={slice.viz_type}\n      datasourceUrl={slice.datasource_url}\n      datasourceName={slice.datasource_name}\n    />\n  );\n}\n\nAddSliceDragPreview.propTypes = propTypes;\nAddSliceDragPreview.defaultProps = defaultProps;\n\n// This injects these props into the component\nexport default DragLayer(monitor => ({\n  dragItem: monitor.getItem(),\n  currentOffset: monitor.getSourceClientOffset(),\n  isDragging: monitor.isDragging(),\n}))(AddSliceDragPreview);\n","var emptyImage;\nexport function getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  return emptyImage;\n}","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint max-len: 0 */\n/**\n * When determining if a component is a valid child of another component we must consider both\n *   - parent + child component types\n *   - component depth, or depth of nesting of container components\n *\n * We consider types because some components aren't containers (e.g. a heading) and we consider\n * depth to prevent infinite nesting of container components.\n *\n * The following example container nestings should be valid, which means that some containers\n * don't increase the (depth) of their children, namely tabs and tab:\n *   (a) root (0) > grid (1) >                         row (2) > column (3) > row (4) > non-container (5)\n *   (b) root (0) > grid (1) >    tabs (2) > tab (2) > row (2) > column (3) > row (4) > non-container (5)\n *   (c) root (0) > top-tab (1) >                      row (2) > column (3) > row (4) > non-container (5)\n *   (d) root (0) > top-tab (1) > tabs (2) > tab (2) > row (2) > column (3) > row (4) > non-container (5)\n */\nimport {\n  CHART_TYPE,\n  COLUMN_TYPE,\n  DASHBOARD_GRID_TYPE,\n  DASHBOARD_ROOT_TYPE,\n  DIVIDER_TYPE,\n  HEADER_TYPE,\n  MARKDOWN_TYPE,\n  ROW_TYPE,\n  TABS_TYPE,\n  TAB_TYPE,\n  DYNAMIC_TYPE,\n} from './componentTypes';\n\nimport { DASHBOARD_ROOT_DEPTH as rootDepth } from './constants';\n\nconst depthOne = rootDepth + 1;\n// const depthTwo = rootDepth + 2; // Meantime no need\nconst depthThree = rootDepth + 3;\nconst depthFour = rootDepth + 4;\nconst depthFive = rootDepth + 5;\n\n// when moving components around the depth of child is irrelevant, note these are parent depths\nconst parentMaxDepthLookup = {\n  [DASHBOARD_ROOT_TYPE]: {\n    [TABS_TYPE]: rootDepth,\n    [DASHBOARD_GRID_TYPE]: rootDepth,\n  },\n\n  [DASHBOARD_GRID_TYPE]: {\n    [CHART_TYPE]: depthOne,\n    [DYNAMIC_TYPE]: depthOne,\n    [MARKDOWN_TYPE]: depthOne,\n    [COLUMN_TYPE]: depthOne,\n    [DIVIDER_TYPE]: depthOne,\n    [HEADER_TYPE]: depthOne,\n    [ROW_TYPE]: depthOne,\n    [TABS_TYPE]: depthOne,\n  },\n\n  [ROW_TYPE]: {\n    [CHART_TYPE]: depthFour,\n    [DYNAMIC_TYPE]: depthFour,\n    [MARKDOWN_TYPE]: depthFour,\n    [COLUMN_TYPE]: depthFour,\n  },\n\n  [TABS_TYPE]: {\n    [TAB_TYPE]: depthThree,\n  },\n\n  [TAB_TYPE]: {\n    [CHART_TYPE]: depthFive,\n    [DYNAMIC_TYPE]: depthFive,\n    [MARKDOWN_TYPE]: depthFive,\n    [COLUMN_TYPE]: depthThree,\n    [DIVIDER_TYPE]: depthFive,\n    [HEADER_TYPE]: depthFive,\n    [ROW_TYPE]: depthThree,\n    [TABS_TYPE]: depthThree,\n  },\n\n  [COLUMN_TYPE]: {\n    [CHART_TYPE]: depthFive,\n    [HEADER_TYPE]: depthFive,\n    [MARKDOWN_TYPE]: depthFive,\n    [ROW_TYPE]: depthThree,\n    [DIVIDER_TYPE]: depthThree,\n    [TABS_TYPE]: depthThree,\n  },\n\n  // these have no valid children\n  [CHART_TYPE]: {},\n  [DYNAMIC_TYPE]: {},\n  [DIVIDER_TYPE]: {},\n  [HEADER_TYPE]: {},\n  [MARKDOWN_TYPE]: {},\n};\n\ninterface IsValidChildProps {\n  parentType?: string;\n  childType?: string;\n  parentDepth?: unknown;\n}\n\nexport default function isValidChild(child: IsValidChildProps): boolean {\n  const { parentType, childType, parentDepth } = child;\n  if (!parentType || !childType || typeof parentDepth !== 'number') {\n    return false;\n  }\n\n  const maxParentDepth: number | undefined = (parentMaxDepthLookup[\n    parentType\n  ] || {})[childType];\n\n  return typeof maxParentDepth === 'number' && parentDepth <= maxParentDepth;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport isValidChild from './isValidChild';\nimport { TAB_TYPE, TABS_TYPE } from './componentTypes';\n\nexport const DROP_TOP = 'DROP_TOP';\nexport const DROP_RIGHT = 'DROP_RIGHT';\nexport const DROP_BOTTOM = 'DROP_BOTTOM';\nexport const DROP_LEFT = 'DROP_LEFT';\n\n// this defines how close the mouse must be to the edge of a component to display\n// a sibling type drop indicator\nconst SIBLING_DROP_THRESHOLD = 20;\nconst NON_SHALLOW_DROP_THRESHOLD = 20;\n\n// We cache the last recorded clientOffset per component in order to\n// have access to it beyond the handleHover phase and into the handleDrop phase\n// of drag-and-drop. we do not have access to it during drop because react-dnd's\n// monitor.getClientOffset() returns null at this point\nlet CACHED_CLIENT_OFFSET = {};\nexport function clearDropCache() {\n  CACHED_CLIENT_OFFSET = {};\n}\n\nexport default function getDropPosition(monitor, Component) {\n  const {\n    depth: componentDepth,\n    parentComponent,\n    component,\n    orientation,\n    isDraggingOverShallow,\n  } = Component.props;\n\n  const draggingItem = monitor.getItem();\n\n  // if dropped self on self, do nothing\n  if (!draggingItem || draggingItem.id === component.id) {\n    return null;\n  }\n\n  const validChild = isValidChild({\n    parentType: component.type,\n    parentDepth: componentDepth,\n    childType: draggingItem.type,\n  });\n\n  const parentType = parentComponent && parentComponent.type;\n  const parentDepth = // see isValidChild.js for why tabs don't increment child depth\n    componentDepth +\n    (parentType === TAB_TYPE || parentType === TABS_TYPE ? 0 : -1);\n\n  const validSibling = isValidChild({\n    parentType,\n    parentDepth,\n    childType: draggingItem.type,\n  });\n\n  if (!validChild && !validSibling) {\n    return null;\n  }\n\n  const hasChildren = (component.children || []).length > 0;\n  const childDropOrientation =\n    orientation === 'row' ? 'vertical' : 'horizontal';\n  const siblingDropOrientation =\n    orientation === 'row' ? 'horizontal' : 'vertical';\n\n  if (isDraggingOverShallow && validChild && !validSibling) {\n    // easiest case, insert as child\n    if (childDropOrientation === 'vertical') {\n      return hasChildren ? DROP_RIGHT : DROP_LEFT;\n    }\n    return hasChildren ? DROP_BOTTOM : DROP_TOP;\n  }\n\n  const refBoundingRect = Component.ref.getBoundingClientRect();\n  const clientOffset =\n    monitor.getClientOffset() || CACHED_CLIENT_OFFSET[component.id];\n\n  if (!clientOffset || !refBoundingRect) {\n    return null;\n  }\n\n  CACHED_CLIENT_OFFSET[component.id] = clientOffset;\n  const deltaTop = Math.abs(clientOffset.y - refBoundingRect.top);\n  const deltaBottom = Math.abs(clientOffset.y - refBoundingRect.bottom);\n  const deltaLeft = Math.abs(clientOffset.x - refBoundingRect.left);\n  const deltaRight = Math.abs(clientOffset.x - refBoundingRect.right);\n\n  // Most of the time we only want a drop indicator for shallow (top-level, non-nested) drop targets\n  // However there are some cases where considering only shallow targets would result in NO drop\n  // indicators which is a bad UX.\n  // e.g.,\n  //    when dragging row-a over a chart that's in another row-b, the chart is the shallow droptarget\n  //    but row-a is not a valid child or sibling. in this case we want to show a sibling drop\n  //    indicator for row-b, which is NOT a shallow drop target.\n  // BUT if we ALWAYS consider non-shallow drop targets we may get multiple indicators shown at the\n  // same time, which is also a bad UX. to prevent this we can enforce a threshold proximity of the\n  // mouse to the edge of a non-shallow target\n  if (\n    !isDraggingOverShallow &&\n    [deltaTop, deltaBottom, deltaLeft, deltaRight].every(\n      delta => delta > NON_SHALLOW_DROP_THRESHOLD,\n    )\n  ) {\n    return null;\n  }\n\n  // Drop based on mouse position relative to component center\n  if (validSibling && !validChild) {\n    if (siblingDropOrientation === 'vertical') {\n      const refMiddleX =\n        refBoundingRect.left +\n        (refBoundingRect.right - refBoundingRect.left) / 2;\n      return clientOffset.x < refMiddleX ? DROP_LEFT : DROP_RIGHT;\n    }\n    const refMiddleY =\n      refBoundingRect.top + (refBoundingRect.bottom - refBoundingRect.top) / 2;\n    return clientOffset.y < refMiddleY ? DROP_TOP : DROP_BOTTOM;\n  }\n\n  // either is valid, so choose location based on boundary deltas\n  if (validSibling && validChild) {\n    // if near enough to a sibling boundary, drop there\n    if (siblingDropOrientation === 'vertical') {\n      if (deltaLeft < SIBLING_DROP_THRESHOLD) return DROP_LEFT;\n      if (deltaRight < SIBLING_DROP_THRESHOLD) return DROP_RIGHT;\n    } else {\n      if (deltaTop < SIBLING_DROP_THRESHOLD) return DROP_TOP;\n      if (deltaBottom < SIBLING_DROP_THRESHOLD) return DROP_BOTTOM;\n    }\n\n    // drop as child\n    if (childDropOrientation === 'vertical') {\n      return hasChildren ? DROP_RIGHT : DROP_LEFT;\n    }\n    return hasChildren ? DROP_BOTTOM : DROP_TOP;\n  }\n\n  return null;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nlet scrollTopDashboardInterval: any;\nconst SCROLL_STEP = 120;\nconst INTERVAL_DELAY = 50;\n\nexport default function handleScroll(scroll: string) {\n  const setupScroll =\n    scroll === 'SCROLL_TOP' &&\n    !scrollTopDashboardInterval &&\n    document.documentElement.scrollTop !== 0;\n\n  const clearScroll =\n    scrollTopDashboardInterval &&\n    (scroll !== 'SCROLL_TOP' || document.documentElement.scrollTop === 0);\n\n  if (setupScroll) {\n    scrollTopDashboardInterval = setInterval(() => {\n      if (document.documentElement.scrollTop === 0) {\n        clearInterval(scrollTopDashboardInterval);\n        scrollTopDashboardInterval = null;\n        return;\n      }\n\n      let scrollTop = document.documentElement.scrollTop - SCROLL_STEP;\n      if (scrollTop < 0) {\n        scrollTop = 0;\n      }\n      window.scroll({\n        top: scrollTop,\n        behavior: 'smooth',\n      });\n    }, INTERVAL_DELAY);\n  } else if (clearScroll) {\n    clearInterval(scrollTopDashboardInterval);\n    scrollTopDashboardInterval = null;\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { throttle } from 'lodash';\nimport { DASHBOARD_ROOT_TYPE } from 'src/dashboard/util/componentTypes';\nimport getDropPosition from 'src/dashboard/util/getDropPosition';\nimport handleScroll from './handleScroll';\n\nconst HOVER_THROTTLE_MS = 100;\n\nfunction handleHover(props, monitor, Component) {\n  // this may happen due to throttling\n  if (!Component.mounted) return;\n\n  const dropPosition = getDropPosition(monitor, Component);\n\n  const isDashboardRoot =\n    Component?.props?.component?.type === DASHBOARD_ROOT_TYPE;\n  const scroll = isDashboardRoot ? 'SCROLL_TOP' : null;\n\n  handleScroll(scroll);\n\n  if (!dropPosition) {\n    Component.setState(() => ({ dropIndicator: null }));\n    return;\n  }\n\n  Component.setState(() => ({\n    dropIndicator: dropPosition,\n  }));\n}\n\n// this is called very frequently by react-dnd\nexport default throttle(handleHover, HOVER_THROTTLE_MS);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport handleHover from './handleHover';\nimport handleDrop from './handleDrop';\n\n// note: the 'type' hook is not useful for us as dropping is contigent on other properties\nconst TYPE = 'DRAG_DROPPABLE';\n\nexport const dragConfig = [\n  TYPE,\n  {\n    canDrag(props) {\n      return !props.disableDragDrop;\n    },\n\n    // this defines the dragging item object returned by monitor.getItem()\n    beginDrag(props /* , monitor, component */) {\n      const { component, index, parentComponent = {} } = props;\n      return {\n        type: component.type,\n        id: component.id,\n        meta: component.meta,\n        index,\n        parentId: parentComponent.id,\n        parentType: parentComponent.type,\n      };\n    },\n  },\n  function dragStateToProps(connect, monitor) {\n    return {\n      dragSourceRef: connect.dragSource(),\n      dragPreviewRef: connect.dragPreview(),\n      isDragging: monitor.isDragging(),\n    };\n  },\n];\n\nexport const dropConfig = [\n  TYPE,\n  {\n    canDrop(props) {\n      return !props.disableDragDrop;\n    },\n    hover(props, monitor, component) {\n      if (component && component.mounted) {\n        handleHover(props, monitor, component);\n      }\n    },\n    // note:\n    //  the react-dnd api requires that the drop() method return a result or undefined\n    //  monitor.didDrop() cannot be used because it returns true only for the most-nested target\n    drop(props, monitor, component) {\n      const dropResult = monitor.getDropResult();\n      if ((!dropResult || !dropResult.destination) && component.mounted) {\n        return handleDrop(props, monitor, component);\n      }\n      return undefined;\n    },\n  },\n  function dropStateToProps(connect, monitor) {\n    return {\n      droppableRef: connect.dropTarget(),\n      isDraggingOver: monitor.isOver(),\n      isDraggingOverShallow: monitor.isOver({ shallow: true }),\n    };\n  },\n];\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport getDropPosition, {\n  clearDropCache,\n  DROP_TOP,\n  DROP_RIGHT,\n  DROP_BOTTOM,\n  DROP_LEFT,\n} from '../../util/getDropPosition';\n\nexport default function handleDrop(props, monitor, Component) {\n  // this may happen due to throttling\n  if (!Component.mounted) return undefined;\n\n  Component.setState(() => ({ dropIndicator: null }));\n  const dropPosition = getDropPosition(monitor, Component);\n\n  if (!dropPosition) {\n    return undefined;\n  }\n\n  const {\n    parentComponent,\n    component,\n    index: componentIndex,\n    onDrop,\n    orientation,\n  } = Component.props;\n\n  const draggingItem = monitor.getItem();\n\n  const dropAsChildOrSibling =\n    (orientation === 'row' &&\n      (dropPosition === DROP_TOP || dropPosition === DROP_BOTTOM)) ||\n    (orientation === 'column' &&\n      (dropPosition === DROP_LEFT || dropPosition === DROP_RIGHT))\n      ? 'sibling'\n      : 'child';\n\n  const dropResult = {\n    source: {\n      id: draggingItem.parentId,\n      type: draggingItem.parentType,\n      index: draggingItem.index,\n    },\n    dragging: {\n      id: draggingItem.id,\n      type: draggingItem.type,\n      meta: draggingItem.meta,\n    },\n  };\n\n  // simplest case, append as child\n  if (dropAsChildOrSibling === 'child') {\n    dropResult.destination = {\n      id: component.id,\n      type: component.type,\n      index: component.children.length,\n    };\n  } else {\n    // if the item is in the same list with a smaller index, you must account for the\n    // \"missing\" index upon movement within the list\n    const sameParent =\n      parentComponent && draggingItem.parentId === parentComponent.id;\n    const sameParentLowerIndex =\n      sameParent && draggingItem.index < componentIndex;\n\n    let nextIndex = sameParentLowerIndex ? componentIndex - 1 : componentIndex;\n    if (dropPosition === DROP_BOTTOM || dropPosition === DROP_RIGHT) {\n      nextIndex += 1;\n    }\n\n    dropResult.destination = {\n      id: parentComponent.id,\n      type: parentComponent.type,\n      index: nextIndex,\n    };\n  }\n\n  onDrop(dropResult);\n  clearDropCache();\n\n  return dropResult;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragSource, DropTarget } from 'react-dnd';\nimport cx from 'classnames';\n\nimport { componentShape } from '../../util/propShapes';\nimport { dragConfig, dropConfig } from './dragDroppableConfig';\nimport {\n  DROP_TOP,\n  DROP_RIGHT,\n  DROP_BOTTOM,\n  DROP_LEFT,\n} from '../../util/getDropPosition';\n\nconst propTypes = {\n  children: PropTypes.func,\n  className: PropTypes.string,\n  component: componentShape.isRequired,\n  parentComponent: componentShape,\n  depth: PropTypes.number.isRequired,\n  disableDragDrop: PropTypes.bool,\n  orientation: PropTypes.oneOf(['row', 'column']),\n  index: PropTypes.number.isRequired,\n  style: PropTypes.object,\n  onDrop: PropTypes.func,\n  editMode: PropTypes.bool.isRequired,\n  useEmptyDragPreview: PropTypes.bool,\n\n  // from react-dnd\n  isDragging: PropTypes.bool.isRequired,\n  isDraggingOver: PropTypes.bool.isRequired,\n  isDraggingOverShallow: PropTypes.bool.isRequired,\n  droppableRef: PropTypes.func.isRequired,\n  dragSourceRef: PropTypes.func.isRequired,\n  dragPreviewRef: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  className: null,\n  style: null,\n  parentComponent: null,\n  disableDragDrop: false,\n  children() {},\n  onDrop() {},\n  orientation: 'row',\n  useEmptyDragPreview: false,\n};\n\n// export unwrapped component for testing\nexport class UnwrappedDragDroppable extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropIndicator: null, // this gets set/modified by the react-dnd HOCs\n    };\n    this.setRef = this.setRef.bind(this);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  setRef(ref) {\n    this.ref = ref;\n    // this is needed for a custom drag preview\n    if (this.props.useEmptyDragPreview) {\n      this.props.dragPreviewRef(getEmptyImage(), {\n        // IE fallback: specify that we'd rather screenshot the node\n        // when it already knows it's being dragged so we can hide it with CSS.\n        captureDraggingState: true,\n      });\n    } else {\n      this.props.dragPreviewRef(ref);\n    }\n    this.props.droppableRef(ref);\n  }\n\n  render() {\n    const {\n      children,\n      className,\n      orientation,\n      dragSourceRef,\n      disableDragDrop,\n      isDragging,\n      isDraggingOver,\n      style,\n      editMode,\n    } = this.props;\n\n    const { dropIndicator } = this.state;\n    const dropIndicatorProps =\n      isDraggingOver && dropIndicator && !disableDragDrop\n        ? {\n            className: cx(\n              'drop-indicator',\n              dropIndicator === DROP_TOP && 'drop-indicator--top',\n              dropIndicator === DROP_BOTTOM && 'drop-indicator--bottom',\n              dropIndicator === DROP_LEFT && 'drop-indicator--left',\n              dropIndicator === DROP_RIGHT && 'drop-indicator--right',\n            ),\n          }\n        : null;\n\n    const childProps = editMode\n      ? {\n          dragSourceRef,\n          dropIndicatorProps,\n        }\n      : {};\n\n    return (\n      <div\n        style={style}\n        ref={this.setRef}\n        data-test=\"dragdroppable-object\"\n        className={cx(\n          'dragdroppable',\n          orientation === 'row' && 'dragdroppable-row',\n          orientation === 'column' && 'dragdroppable-column',\n          isDragging && 'dragdroppable--dragging',\n          className,\n        )}\n      >\n        {children(childProps)}\n      </div>\n    );\n  }\n}\n\nUnwrappedDragDroppable.propTypes = propTypes;\nUnwrappedDragDroppable.defaultProps = defaultProps;\n\n// note that the composition order here determines using\n// component.method() vs decoratedComponentInstance.method() in the drag/drop config\nexport default DragSource(...dragConfig)(\n  DropTarget(...dropConfig)(UnwrappedDragDroppable),\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'react-virtualized';\nimport { createFilter } from 'react-search-input';\nimport {\n  t,\n  styled,\n  isFeatureEnabled,\n  FeatureFlag,\n  css,\n} from '@superset-ui/core';\nimport { Input } from 'src/components/Input';\nimport { Select } from 'src/components';\nimport Loading from 'src/components/Loading';\nimport Button from 'src/components/Button';\nimport Icons from 'src/components/Icons';\nimport {\n  CHART_TYPE,\n  NEW_COMPONENT_SOURCE_TYPE,\n} from 'src/dashboard/util/componentTypes';\nimport {\n  NEW_CHART_ID,\n  NEW_COMPONENTS_SOURCE_ID,\n} from 'src/dashboard/util/constants';\nimport { slicePropShape } from 'src/dashboard/util/propShapes';\nimport { FILTER_BOX_MIGRATION_STATES } from 'src/explore/constants';\nimport AddSliceCard from './AddSliceCard';\nimport AddSliceDragPreview from './dnd/AddSliceDragPreview';\nimport DragDroppable from './dnd/DragDroppable';\n\nconst propTypes = {\n  fetchAllSlices: PropTypes.func.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  slices: PropTypes.objectOf(slicePropShape).isRequired,\n  lastUpdated: PropTypes.number.isRequired,\n  errorMessage: PropTypes.string,\n  userId: PropTypes.string.isRequired,\n  selectedSliceIds: PropTypes.arrayOf(PropTypes.number),\n  editMode: PropTypes.bool,\n  height: PropTypes.number,\n  filterboxMigrationState: FILTER_BOX_MIGRATION_STATES,\n  dashboardId: PropTypes.number,\n};\n\nconst defaultProps = {\n  selectedSliceIds: [],\n  editMode: false,\n  errorMessage: '',\n  height: window.innerHeight,\n  filterboxMigrationState: FILTER_BOX_MIGRATION_STATES.NOOP,\n};\n\nconst KEYS_TO_FILTERS = ['slice_name', 'viz_type', 'datasource_name'];\nconst KEYS_TO_SORT = {\n  slice_name: 'name',\n  viz_type: 'viz type',\n  datasource_name: 'dataset',\n  changed_on: 'recent',\n};\n\nconst DEFAULT_SORT_KEY = 'changed_on';\n\nconst MARGIN_BOTTOM = 16;\nconst SIDEPANE_HEADER_HEIGHT = 30;\nconst SLICE_ADDER_CONTROL_HEIGHT = 64;\nconst DEFAULT_CELL_HEIGHT = 112;\n\nconst Controls = styled.div`\n  display: flex;\n  flex-direction: row;\n  padding: ${({ theme }) => theme.gridUnit * 3}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 4}px;\n`;\n\nconst StyledSelect = styled(Select)`\n  margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n  min-width: 150px;\n`;\n\nconst NewChartButtonContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    justify-content: flex-end;\n    padding-right: ${theme.gridUnit * 2}px;\n  `}\n`;\n\nconst NewChartButton = styled(Button)`\n  ${({ theme }) => css`\n    height: auto;\n    & > .anticon + span {\n      margin-left: 0;\n    }\n    & > [role='img']:first-of-type {\n      margin-right: ${theme.gridUnit}px;\n      padding-bottom: 1px;\n      line-height: 0;\n    }\n  `}\n`;\n\nclass SliceAdder extends React.Component {\n  static sortByComparator(attr) {\n    const desc = attr === 'changed_on' ? -1 : 1;\n\n    return (a, b) => {\n      if (a[attr] < b[attr]) {\n        return -1 * desc;\n      }\n      if (a[attr] > b[attr]) {\n        return 1 * desc;\n      }\n      return 0;\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      filteredSlices: [],\n      searchTerm: '',\n      sortBy: DEFAULT_SORT_KEY,\n      selectedSliceIdsSet: new Set(props.selectedSliceIds),\n    };\n    this.rowRenderer = this.rowRenderer.bind(this);\n    this.searchUpdated = this.searchUpdated.bind(this);\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  componentDidMount() {\n    const { userId, filterboxMigrationState } = this.props;\n    this.slicesRequest = this.props.fetchAllSlices(\n      userId,\n      isFeatureEnabled(FeatureFlag.ENABLE_FILTER_BOX_MIGRATION) &&\n        filterboxMigrationState !== FILTER_BOX_MIGRATION_STATES.SNOOZED,\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const nextState = {};\n    if (nextProps.lastUpdated !== this.props.lastUpdated) {\n      nextState.filteredSlices = Object.values(nextProps.slices)\n        .filter(createFilter(this.state.searchTerm, KEYS_TO_FILTERS))\n        .sort(SliceAdder.sortByComparator(this.state.sortBy));\n    }\n\n    if (nextProps.selectedSliceIds !== this.props.selectedSliceIds) {\n      nextState.selectedSliceIdsSet = new Set(nextProps.selectedSliceIds);\n    }\n\n    if (Object.keys(nextState).length) {\n      this.setState(nextState);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.slicesRequest && this.slicesRequest.abort) {\n      this.slicesRequest.abort();\n    }\n  }\n\n  getFilteredSortedSlices(searchTerm, sortBy) {\n    return Object.values(this.props.slices)\n      .filter(createFilter(searchTerm, KEYS_TO_FILTERS))\n      .sort(SliceAdder.sortByComparator(sortBy));\n  }\n\n  handleKeyPress(ev) {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n\n      this.searchUpdated(ev.target.value);\n    }\n  }\n\n  handleChange(ev) {\n    this.searchUpdated(ev.target.value);\n  }\n\n  searchUpdated(searchTerm) {\n    this.setState(prevState => ({\n      searchTerm,\n      filteredSlices: this.getFilteredSortedSlices(\n        searchTerm,\n        prevState.sortBy,\n      ),\n    }));\n  }\n\n  handleSelect(sortBy) {\n    this.setState(prevState => ({\n      sortBy,\n      filteredSlices: this.getFilteredSortedSlices(\n        prevState.searchTerm,\n        sortBy,\n      ),\n    }));\n  }\n\n  rowRenderer({ key, index, style }) {\n    const { filteredSlices, selectedSliceIdsSet } = this.state;\n    const cellData = filteredSlices[index];\n    const isSelected = selectedSliceIdsSet.has(cellData.slice_id);\n    const type = CHART_TYPE;\n    const id = NEW_CHART_ID;\n\n    const meta = {\n      chartId: cellData.slice_id,\n      sliceName: cellData.slice_name,\n    };\n    return (\n      <DragDroppable\n        key={key}\n        component={{ type, id, meta }}\n        parentComponent={{\n          id: NEW_COMPONENTS_SOURCE_ID,\n          type: NEW_COMPONENT_SOURCE_TYPE,\n        }}\n        index={index}\n        depth={0}\n        disableDragDrop={isSelected}\n        editMode={this.props.editMode}\n        // we must use a custom drag preview within the List because\n        // it does not seem to work within a fixed-position container\n        useEmptyDragPreview\n        // List library expect style props here\n        // actual style should be applied to nested AddSliceCard component\n        style={{}}\n      >\n        {({ dragSourceRef }) => (\n          <AddSliceCard\n            innerRef={dragSourceRef}\n            style={style}\n            sliceName={cellData.slice_name}\n            lastModified={cellData.changed_on_humanized}\n            visType={cellData.viz_type}\n            datasourceUrl={cellData.datasource_url}\n            datasourceName={cellData.datasource_name}\n            isSelected={isSelected}\n          />\n        )}\n      </DragDroppable>\n    );\n  }\n\n  render() {\n    const slicesListHeight =\n      this.props.height -\n      SIDEPANE_HEADER_HEIGHT -\n      SLICE_ADDER_CONTROL_HEIGHT -\n      MARGIN_BOTTOM;\n    return (\n      <div className=\"slice-adder-container\">\n        <NewChartButtonContainer>\n          <NewChartButton\n            buttonStyle=\"link\"\n            buttonSize=\"xsmall\"\n            onClick={() =>\n              window.open(\n                `/chart/add?dashboard_id=${this.props.dashboardId}`,\n                '_blank',\n                'noopener noreferrer',\n              )\n            }\n          >\n            <Icons.PlusSmall />\n            {t('Create new chart')}\n          </NewChartButton>\n        </NewChartButtonContainer>\n        <Controls>\n          <Input\n            placeholder={t('Filter your charts')}\n            className=\"search-input\"\n            onChange={this.handleChange}\n            onKeyPress={this.handleKeyPress}\n            data-test=\"dashboard-charts-filter-search-input\"\n          />\n          <StyledSelect\n            id=\"slice-adder-sortby\"\n            value={this.state.sortBy}\n            onChange={this.handleSelect}\n            options={Object.entries(KEYS_TO_SORT).map(([key, label]) => ({\n              label: t('Sort by %s', label),\n              value: key,\n            }))}\n            placeholder={t('Sort by')}\n          />\n        </Controls>\n        {this.props.isLoading && <Loading />}\n        {!this.props.isLoading && this.state.filteredSlices.length > 0 && (\n          <List\n            width={376}\n            height={slicesListHeight}\n            rowCount={this.state.filteredSlices.length}\n            rowHeight={DEFAULT_CELL_HEIGHT}\n            rowRenderer={this.rowRenderer}\n            searchTerm={this.state.searchTerm}\n            sortBy={this.state.sortBy}\n            selectedSliceIds={this.props.selectedSliceIds}\n          />\n        )}\n        {this.props.errorMessage && (\n          <div className=\"error-message\">{this.props.errorMessage}</div>\n        )}\n        {/* Drag preview is just a single fixed-position element */}\n        <AddSliceDragPreview slices={this.state.filteredSlices} />\n      </div>\n    );\n  }\n}\n\nSliceAdder.propTypes = propTypes;\nSliceAdder.defaultProps = defaultProps;\n\nexport default SliceAdder;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { fetchAllSlices } from '../actions/sliceEntities';\nimport SliceAdder from '../components/SliceAdder';\n\nfunction mapStateToProps(\n  { sliceEntities, dashboardInfo, dashboardState },\n  ownProps,\n) {\n  return {\n    height: ownProps.height,\n    userId: dashboardInfo.userId,\n    dashboardId: dashboardInfo.id,\n    selectedSliceIds: dashboardState.sliceIds,\n    slices: sliceEntities.slices,\n    isLoading: sliceEntities.isLoading,\n    errorMessage: sliceEntities.errorMessage,\n    lastUpdated: sliceEntities.lastUpdated,\n    editMode: dashboardState.editMode,\n    filterboxMigrationState: dashboardState.filterboxMigrationState,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      fetchAllSlices,\n    },\n    dispatch,\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SliceAdder);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ComponentType } from 'react';\nimport { JsonObject } from '@superset-ui/core';\n\nexport interface RegistryMetadata {\n  description: string;\n  name: string;\n}\n\nexport interface ComponentItem<Metadata = RegistryMetadata> {\n  metadata: Metadata;\n  loadComponent: () => Promise<{ default: ComponentType<any> }>;\n}\n\nexport interface ComponentRegistry<Metadata = RegistryMetadata> {\n  metadata: Metadata;\n  Component: ComponentType<any>;\n}\n\nexport type FunctionalRegistryState<RegistryT> = {\n  registry: { [key: string]: RegistryT & { key: string } };\n  registryKeys: string[];\n};\n\nexport const registryGetAll =\n  <RegistryT>({ registryKeys, registry }: FunctionalRegistryState<RegistryT>) =>\n  () =>\n    registryKeys.map(key => registry[key]);\n\nexport const registryDelete =\n  <RegistryT>({ registryKeys, registry }: FunctionalRegistryState<RegistryT>) =>\n  (keyToDelete: string) => {\n    // eslint-disable-next-line no-param-reassign\n    registryKeys = registryKeys.filter(key => key !== keyToDelete);\n    // eslint-disable-next-line no-param-reassign\n    delete registry[keyToDelete];\n  };\n\nexport const registryGet =\n  <RegistryT>({ registry }: FunctionalRegistryState<RegistryT>) =>\n  (key: string) =>\n    registry[key];\n\nexport const registrySet =\n  ({ registryKeys, registry }: FunctionalRegistryState<JsonObject>) =>\n  (key: string, item: JsonObject) => {\n    registryKeys.push(key);\n    // eslint-disable-next-line no-param-reassign\n    registry[key] = {\n      key,\n      ...item,\n    };\n  };\n\nexport const registrySetComponent =\n  ({ registryKeys, registry }: FunctionalRegistryState<ComponentRegistry>) =>\n  (key: string, item: ComponentItem) => {\n    registryKeys.push(key);\n    // eslint-disable-next-line no-param-reassign\n    registry[key] = {\n      key,\n      metadata: item.metadata,\n      Component: React.lazy(item.loadComponent),\n    };\n  };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/*\n  Preset dashboard components (in addition to basic components like row, column, chart, etc...)\n */\n\nimport DashboardComponentsRegistry from '../dashboardComponents/DashboardComponentsRegistry';\n\nconst dashboardComponents = DashboardComponentsRegistry([\n  // Here can be added default dashboard components\n]);\n\nexport default dashboardComponents;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  ComponentItem,\n  ComponentRegistry,\n  FunctionalRegistryState,\n  registryDelete,\n  registryGet,\n  registryGetAll,\n  RegistryMetadata,\n  registrySetComponent,\n} from '../../utils/functionalRegistry';\n\nexport interface DashboardComponentsRegistryMetadata extends RegistryMetadata {\n  iconName: string;\n}\n\n/*\n  This is registry that contains list of dynamic dashboard components that can be added in addition to main components\n */\n\nconst DashboardComponentsRegistry = (\n  initComponents: { key: string; item: ComponentItem }[] = [],\n) => {\n  const state: FunctionalRegistryState<\n    ComponentRegistry<DashboardComponentsRegistryMetadata>\n  > = {\n    registry: {},\n    registryKeys: [],\n  };\n\n  const set = registrySetComponent(state);\n\n  initComponents.forEach(({ key, item }) => {\n    set(key, item);\n  });\n\n  return {\n    set,\n    get: registryGet(state),\n    delete: registryDelete(state),\n    getAll: registryGetAll(state),\n  };\n};\n\nexport default DashboardComponentsRegistry;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport DragDroppable from '../../dnd/DragDroppable';\nimport { NEW_COMPONENTS_SOURCE_ID } from '../../../util/constants';\nimport { NEW_COMPONENT_SOURCE_TYPE } from '../../../util/componentTypes';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  className: PropTypes.string,\n};\n\nconst defaultProps = {\n  className: null,\n};\n\nexport default class DraggableNewComponent extends React.PureComponent {\n  render() {\n    const { label, id, type, className, meta } = this.props;\n    return (\n      <DragDroppable\n        component={{ type, id, meta }}\n        parentComponent={{\n          id: NEW_COMPONENTS_SOURCE_ID,\n          type: NEW_COMPONENT_SOURCE_TYPE,\n        }}\n        index={0}\n        depth={0}\n        editMode\n      >\n        {({ dragSourceRef }) => (\n          <div\n            ref={dragSourceRef}\n            className=\"new-component\"\n            data-test=\"new-component\"\n          >\n            <div className={cx('new-component-placeholder', className)} />\n            {label}\n          </div>\n        )}\n      </DragDroppable>\n    );\n  }\n}\n\nDraggableNewComponent.propTypes = propTypes;\nDraggableNewComponent.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nimport { COLUMN_TYPE } from '../../../util/componentTypes';\nimport { NEW_COLUMN_ID } from '../../../util/constants';\nimport DraggableNewComponent from './DraggableNewComponent';\n\nexport default function DraggableNewColumn() {\n  return (\n    <DraggableNewComponent\n      id={NEW_COLUMN_ID}\n      type={COLUMN_TYPE}\n      label={t('Column')}\n      className=\"fa fa-long-arrow-down\"\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nimport { DIVIDER_TYPE } from '../../../util/componentTypes';\nimport { NEW_DIVIDER_ID } from '../../../util/constants';\nimport DraggableNewComponent from './DraggableNewComponent';\n\nexport default function DraggableNewDivider() {\n  return (\n    <DraggableNewComponent\n      id={NEW_DIVIDER_ID}\n      type={DIVIDER_TYPE}\n      label={t('Divider')}\n      className=\"divider-placeholder\"\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nimport { HEADER_TYPE } from '../../../util/componentTypes';\nimport { NEW_HEADER_ID } from '../../../util/constants';\nimport DraggableNewComponent from './DraggableNewComponent';\n\nexport default function DraggableNewHeader() {\n  return (\n    <DraggableNewComponent\n      id={NEW_HEADER_ID}\n      type={HEADER_TYPE}\n      label={t('Header')}\n      className=\"fa fa-header\"\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nimport { ROW_TYPE } from '../../../util/componentTypes';\nimport { NEW_ROW_ID } from '../../../util/constants';\nimport DraggableNewComponent from './DraggableNewComponent';\n\nexport default function DraggableNewRow() {\n  return (\n    <DraggableNewComponent\n      id={NEW_ROW_ID}\n      type={ROW_TYPE}\n      label={t('Row')}\n      className=\"fa fa-long-arrow-right\"\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nimport { TABS_TYPE } from '../../../util/componentTypes';\nimport { NEW_TABS_ID } from '../../../util/constants';\nimport DraggableNewComponent from './DraggableNewComponent';\n\nexport default function DraggableNewTabs() {\n  return (\n    <DraggableNewComponent\n      id={NEW_TABS_ID}\n      type={TABS_TYPE}\n      label={t('Tabs')}\n      className=\"fa fa-window-restore\"\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\n\nimport { MARKDOWN_TYPE } from '../../../util/componentTypes';\nimport { NEW_MARKDOWN_ID } from '../../../util/constants';\nimport DraggableNewComponent from './DraggableNewComponent';\n\nexport default function DraggableNewDivider() {\n  return (\n    <DraggableNewComponent\n      id={NEW_MARKDOWN_ID}\n      type={MARKDOWN_TYPE}\n      label=\"Markdown\"\n      className=\"fa fa-code\"\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC } from 'react';\nimport DraggableNewComponent from './DraggableNewComponent';\nimport { DYNAMIC_TYPE } from '../../../util/componentTypes';\nimport { NEW_DYNAMIC_COMPONENT } from '../../../util/constants';\nimport { DashboardComponentsRegistryMetadata } from '../../../../visualizations/dashboardComponents/DashboardComponentsRegistry';\n\ntype DraggableNewDynamicComponent = {\n  componentKey: string;\n  metadata: DashboardComponentsRegistryMetadata;\n};\n\nconst DraggableNewDynamicComponent: FC<DraggableNewDynamicComponent> = ({\n  componentKey,\n  metadata,\n}) => (\n  <DraggableNewComponent\n    id={NEW_DYNAMIC_COMPONENT}\n    type={DYNAMIC_TYPE}\n    label={metadata.name}\n    meta={{ metadata, componentKey }}\n    className={`fa fa-${metadata.iconName}`}\n  />\n);\n\nexport default DraggableNewDynamicComponent;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport React from 'react';\nimport Tabs from 'src/components/Tabs';\nimport { StickyContainer, Sticky } from 'react-sticky';\nimport { ParentSize } from '@vx/responsive';\n\nimport { t, styled } from '@superset-ui/core';\n\nimport SliceAdder from 'src/dashboard/containers/SliceAdder';\nimport dashboardComponents from 'src/visualizations/presets/dashboardComponents';\nimport NewColumn from '../gridComponents/new/NewColumn';\nimport NewDivider from '../gridComponents/new/NewDivider';\nimport NewHeader from '../gridComponents/new/NewHeader';\nimport NewRow from '../gridComponents/new/NewRow';\nimport NewTabs from '../gridComponents/new/NewTabs';\nimport NewMarkdown from '../gridComponents/new/NewMarkdown';\nimport NewDynamicComponent from '../gridComponents/new/NewDynamicComponent';\n\nexport interface BCPProps {\n  isStandalone: boolean;\n  topOffset: number;\n}\n\nconst SUPERSET_HEADER_HEIGHT = 59;\nconst SIDEPANE_ADJUST_OFFSET = 4;\nconst TOP_PANEL_OFFSET = 210;\n\nconst BuilderComponentPaneTabs = styled(Tabs)`\n  line-height: inherit;\n  margin-top: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst DashboardBuilderSidepane = styled.div<{\n  topOffset: number;\n}>`\n  height: calc(100% - ${TOP_PANEL_OFFSET}px);\n  position: fixed;\n  right: 0;\n  top: 0;\n`;\n\nconst BuilderComponentPane: React.FC<BCPProps> = ({\n  isStandalone,\n  topOffset = 0,\n}) => (\n  <DashboardBuilderSidepane\n    topOffset={topOffset}\n    className=\"dashboard-builder-sidepane\"\n  >\n    <ParentSize>\n      {({ height }) => (\n        <StickyContainer>\n          <Sticky topOffset={-topOffset} bottomOffset={Infinity}>\n            {({ style, isSticky }: { style: any; isSticky: boolean }) => {\n              const { pageYOffset } = window;\n              const hasHeader =\n                pageYOffset < SUPERSET_HEADER_HEIGHT && !isStandalone;\n              const withHeaderTopOffset =\n                topOffset +\n                (SUPERSET_HEADER_HEIGHT - pageYOffset - SIDEPANE_ADJUST_OFFSET);\n\n              return (\n                <div\n                  className=\"viewport\"\n                  style={{\n                    ...style,\n                    top: hasHeader ? withHeaderTopOffset : topOffset,\n                  }}\n                >\n                  <BuilderComponentPaneTabs\n                    id=\"tabs\"\n                    className=\"tabs-components\"\n                    data-test=\"dashboard-builder-component-pane-tabs-navigation\"\n                  >\n                    <Tabs.TabPane\n                      key={1}\n                      tab={t('Charts')}\n                      className=\"tab-charts\"\n                    >\n                      <SliceAdder\n                        height={\n                          height + (isSticky ? SUPERSET_HEADER_HEIGHT : 0)\n                        }\n                      />\n                    </Tabs.TabPane>\n                    <Tabs.TabPane key={2} tab={t('Layout elements')}>\n                      <NewTabs />\n                      <NewRow />\n                      <NewColumn />\n                      <NewHeader />\n                      <NewMarkdown />\n                      <NewDivider />\n                      {dashboardComponents\n                        .getAll()\n                        .map(({ key: componentKey, metadata }) => (\n                          <NewDynamicComponent\n                            metadata={metadata}\n                            componentKey={componentKey}\n                          />\n                        ))}\n                    </Tabs.TabPane>\n                  </BuilderComponentPaneTabs>\n                </div>\n              );\n            }}\n          </Sticky>\n        </StickyContainer>\n      )}\n    </ParentSize>\n  </DashboardBuilderSidepane>\n);\n\nexport default BuilderComponentPane;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport copyTextToClipboard from 'src/utils/copy';\nimport { t, logging } from '@superset-ui/core';\nimport { Menu } from 'src/components/Menu';\nimport { getDashboardPermalink, getUrlParam } from 'src/utils/urlUtils';\nimport { URL_PARAMS } from 'src/constants';\nimport { getFilterValue } from 'src/dashboard/components/nativeFilters/FilterBar/keyValue';\n\ninterface ShareMenuItemProps {\n  url?: string;\n  copyMenuItemTitle: string;\n  emailMenuItemTitle: string;\n  emailSubject: string;\n  emailBody: string;\n  addDangerToast: Function;\n  addSuccessToast: Function;\n  dashboardId: string | number;\n  dashboardComponentId?: string;\n}\n\nconst ShareMenuItems = (props: ShareMenuItemProps) => {\n  const {\n    copyMenuItemTitle,\n    emailMenuItemTitle,\n    emailSubject,\n    emailBody,\n    addDangerToast,\n    addSuccessToast,\n    dashboardId,\n    dashboardComponentId,\n    ...rest\n  } = props;\n\n  async function generateUrl() {\n    const nativeFiltersKey = getUrlParam(URL_PARAMS.nativeFiltersKey);\n    let filterState = {};\n    if (nativeFiltersKey && dashboardId) {\n      filterState = await getFilterValue(dashboardId, nativeFiltersKey);\n    }\n    return getDashboardPermalink({\n      dashboardId,\n      filterState,\n      hash: dashboardComponentId,\n    });\n  }\n\n  async function onCopyLink() {\n    try {\n      await copyTextToClipboard(generateUrl);\n      addSuccessToast(t('Copied to clipboard!'));\n    } catch (error) {\n      logging.error(error);\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }\n\n  async function onShareByEmail() {\n    try {\n      const encodedBody = encodeURIComponent(\n        `${emailBody}${await generateUrl()}`,\n      );\n      const encodedSubject = encodeURIComponent(emailSubject);\n      window.location.href = `mailto:?Subject=${encodedSubject}%20&Body=${encodedBody}`;\n    } catch (error) {\n      logging.error(error);\n      addDangerToast(t('Sorry, something went wrong. Try again later.'));\n    }\n  }\n\n  return (\n    <Menu selectable={false}>\n      <Menu.Item key=\"copy-url\" {...rest}>\n        <div onClick={onCopyLink} role=\"button\" tabIndex={0}>\n          {copyMenuItemTitle}\n        </div>\n      </Menu.Item>\n      <Menu.Item key=\"share-by-email\" {...rest}>\n        <div onClick={onShareByEmail} role=\"button\" tabIndex={0}>\n          {emailMenuItemTitle}\n        </div>\n      </Menu.Item>\n    </Menu>\n  );\n};\n\nexport default ShareMenuItems;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { AntdDropdown } from 'src/components';\nimport { Menu } from 'src/components/Menu';\nimport Button from 'src/components/Button';\nimport { t, styled } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { CssEditor as AceCssEditor } from 'src/components/AsyncAceEditor';\n\nconst StyledWrapper = styled.div`\n  ${({ theme }) => `\n    .css-editor-header {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      margin-bottom: ${theme.gridUnit * 2}px;\n\n      h5 {\n        margin-top: ${theme.gridUnit}px;\n      }\n    }\n    .css-editor {\n      border: 1px solid ${theme.colors.grayscale.light1};\n    }\n  `}\n`;\n\nconst propTypes = {\n  initialCss: PropTypes.string,\n  triggerNode: PropTypes.node.isRequired,\n  onChange: PropTypes.func,\n  templates: PropTypes.array,\n};\n\nconst defaultProps = {\n  initialCss: '',\n  onChange: () => {},\n};\n\nclass CssEditor extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      css: props.initialCss,\n    };\n    this.changeCss = this.changeCss.bind(this);\n    this.changeCssTemplate = this.changeCssTemplate.bind(this);\n  }\n\n  componentDidMount() {\n    AceCssEditor.preload();\n  }\n\n  changeCss(css) {\n    this.setState({ css }, () => {\n      this.props.onChange(css);\n    });\n  }\n\n  changeCssTemplate({ key }) {\n    this.changeCss(key);\n  }\n\n  renderTemplateSelector() {\n    if (this.props.templates) {\n      const menu = (\n        <Menu onClick={this.changeCssTemplate}>\n          {this.props.templates.map(template => (\n            <Menu.Item key={template.css}>{template.label}</Menu.Item>\n          ))}\n        </Menu>\n      );\n\n      return (\n        <AntdDropdown overlay={menu} placement=\"bottomRight\">\n          <Button>{t('Load a CSS template')}</Button>\n        </AntdDropdown>\n      );\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <ModalTrigger\n        triggerNode={this.props.triggerNode}\n        modalTitle={t('CSS')}\n        modalBody={\n          <StyledWrapper>\n            <div className=\"css-editor-header\">\n              <h5>{t('Live CSS editor')}</h5>\n              {this.renderTemplateSelector()}\n            </div>\n            <AceCssEditor\n              className=\"css-editor\"\n              minLines={12}\n              maxLines={30}\n              onChange={this.changeCss}\n              height=\"200px\"\n              width=\"100%\"\n              editorProps={{ $blockScrolling: true }}\n              enableLiveAutocompletion\n              value={this.state.css || ''}\n            />\n          </StyledWrapper>\n        }\n      />\n    );\n  }\n}\n\nCssEditor.propTypes = propTypes;\nCssEditor.defaultProps = defaultProps;\n\nexport default CssEditor;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { RefObject } from 'react';\nimport Select, { propertyComparator } from 'src/components/Select/Select';\nimport { t, styled } from '@superset-ui/core';\nimport Alert from 'src/components/Alert';\nimport Button from 'src/components/Button';\n\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport { FormLabel } from 'src/components/Form';\n\nexport const options = [\n  [0, t(\"Don't refresh\")],\n  [10, t('10 seconds')],\n  [30, t('30 seconds')],\n  [60, t('1 minute')],\n  [300, t('5 minutes')],\n  [1800, t('30 minutes')],\n  [3600, t('1 hour')],\n  [21600, t('6 hours')],\n  [43200, t('12 hours')],\n  [86400, t('24 hours')],\n].map(o => ({ value: o[0] as number, label: o[1] }));\n\nconst StyledModalTrigger = styled(ModalTrigger)`\n  .ant-modal-body {\n    overflow: visible;\n  }\n`;\n\nconst RefreshWarningContainer = styled.div`\n  margin-top: ${({ theme }) => theme.gridUnit * 6}px;\n`;\n\ntype RefreshIntervalModalProps = {\n  addSuccessToast: (msg: string) => void;\n  triggerNode: JSX.Element;\n  refreshFrequency: number;\n  onChange: (refreshLimit: number, editMode: boolean) => void;\n  editMode: boolean;\n  refreshLimit?: number;\n  refreshWarning: string | null;\n};\n\ntype RefreshIntervalModalState = {\n  refreshFrequency: number;\n};\n\nclass RefreshIntervalModal extends React.PureComponent<\n  RefreshIntervalModalProps,\n  RefreshIntervalModalState\n> {\n  static defaultProps = {\n    refreshLimit: 0,\n    refreshWarning: null,\n  };\n\n  modalRef: RefObject<ModalTrigger>;\n\n  constructor(props: RefreshIntervalModalProps) {\n    super(props);\n    this.modalRef = React.createRef();\n    this.state = {\n      refreshFrequency: props.refreshFrequency,\n    };\n    this.handleFrequencyChange = this.handleFrequencyChange.bind(this);\n    this.onSave = this.onSave.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n  }\n\n  onSave() {\n    this.props.onChange(this.state.refreshFrequency, this.props.editMode);\n    this.modalRef.current?.close();\n    this.props.addSuccessToast(t('Refresh interval saved'));\n  }\n\n  onCancel() {\n    this.setState({\n      refreshFrequency: this.props.refreshFrequency,\n    });\n    this.modalRef.current?.close();\n  }\n\n  handleFrequencyChange(value: number) {\n    this.setState({\n      refreshFrequency: value || options[0].value,\n    });\n  }\n\n  render() {\n    const { refreshLimit = 0, refreshWarning, editMode } = this.props;\n    const { refreshFrequency = 0 } = this.state;\n    const showRefreshWarning =\n      !!refreshFrequency && !!refreshWarning && refreshFrequency < refreshLimit;\n\n    return (\n      <StyledModalTrigger\n        ref={this.modalRef}\n        triggerNode={this.props.triggerNode}\n        modalTitle={t('Refresh interval')}\n        modalBody={\n          <div>\n            <FormLabel>{t('Refresh frequency')}</FormLabel>\n            <Select\n              ariaLabel={t('Refresh interval')}\n              options={options}\n              value={refreshFrequency}\n              onChange={this.handleFrequencyChange}\n              sortComparator={propertyComparator('value')}\n            />\n            {showRefreshWarning && (\n              <RefreshWarningContainer>\n                <Alert\n                  type=\"warning\"\n                  message={\n                    <>\n                      <div>{refreshWarning}</div>\n                      <br />\n                      <strong>{t('Are you sure you want to proceed?')}</strong>\n                    </>\n                  }\n                />\n              </RefreshWarningContainer>\n            )}\n          </div>\n        }\n        modalFooter={\n          <>\n            <Button\n              buttonStyle=\"primary\"\n              buttonSize=\"small\"\n              onClick={this.onSave}\n            >\n              {editMode ? t('Save') : t('Save for this session')}\n            </Button>\n            <Button onClick={this.onCancel} buttonSize=\"small\">\n              {t('Cancel')}\n            </Button>\n          </>\n        }\n      />\n    );\n  }\n}\n\nexport default RefreshIntervalModal;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport React from 'react';\nimport { Radio } from 'src/components/Radio';\nimport { RadioChangeEvent } from 'src/components';\nimport { Input } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { t, JsonResponse } from '@superset-ui/core';\n\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Checkbox from 'src/components/Checkbox';\nimport {\n  SAVE_TYPE_OVERWRITE,\n  SAVE_TYPE_NEWDASHBOARD,\n} from 'src/dashboard/util/constants';\n\ntype SaveType = typeof SAVE_TYPE_OVERWRITE | typeof SAVE_TYPE_NEWDASHBOARD;\n\ntype SaveModalProps = {\n  addSuccessToast: (arg: string) => void;\n  addDangerToast: (arg: string) => void;\n  dashboardId: number;\n  dashboardTitle: string;\n  dashboardInfo: Record<string, any>;\n  expandedSlices: Record<string, any>;\n  layout: Record<string, any>;\n  saveType: SaveType;\n  triggerNode: JSX.Element;\n  customCss: string;\n  colorNamespace?: string;\n  colorScheme?: string;\n  onSave: (data: any, id: number | string, saveType: SaveType) => void;\n  canOverwrite: boolean;\n  shouldPersistRefreshFrequency: boolean;\n  refreshFrequency: number;\n  lastModifiedTime: number;\n};\n\ntype SaveModalState = {\n  saveType: SaveType;\n  newDashName: string;\n  duplicateSlices: boolean;\n};\n\nconst defaultProps = {\n  saveType: SAVE_TYPE_OVERWRITE,\n  colorNamespace: undefined,\n  colorScheme: undefined,\n  shouldPersistRefreshFrequency: false,\n};\n\nclass SaveModal extends React.PureComponent<SaveModalProps, SaveModalState> {\n  static defaultProps = defaultProps;\n\n  modal: ModalTrigger | null;\n\n  onSave: (\n    data: Record<string, any>,\n    dashboardId: number | string,\n    saveType: SaveType,\n  ) => Promise<JsonResponse>;\n\n  constructor(props: SaveModalProps) {\n    super(props);\n    this.state = {\n      saveType: props.saveType,\n      newDashName: `${props.dashboardTitle} [copy]`,\n      duplicateSlices: false,\n    };\n    this.modal = null;\n    this.handleSaveTypeChange = this.handleSaveTypeChange.bind(this);\n    this.handleNameChange = this.handleNameChange.bind(this);\n    this.saveDashboard = this.saveDashboard.bind(this);\n    this.setModalRef = this.setModalRef.bind(this);\n    this.toggleDuplicateSlices = this.toggleDuplicateSlices.bind(this);\n    this.onSave = this.props.onSave.bind(this);\n  }\n\n  setModalRef(ref: ModalTrigger | null) {\n    this.modal = ref;\n  }\n\n  toggleDuplicateSlices(): void {\n    this.setState(prevState => ({\n      duplicateSlices: !prevState.duplicateSlices,\n    }));\n  }\n\n  handleSaveTypeChange(event: RadioChangeEvent) {\n    this.setState({\n      saveType: (event.target as HTMLInputElement).value as SaveType,\n    });\n  }\n\n  handleNameChange(name: string) {\n    this.setState({\n      newDashName: name,\n      saveType: SAVE_TYPE_NEWDASHBOARD,\n    });\n  }\n\n  saveDashboard() {\n    const { saveType, newDashName } = this.state;\n    const {\n      dashboardTitle,\n      dashboardInfo,\n      layout: positions,\n      customCss,\n      dashboardId,\n      refreshFrequency: currentRefreshFrequency,\n      shouldPersistRefreshFrequency,\n      lastModifiedTime,\n    } = this.props;\n\n    // check refresh frequency is for current session or persist\n    const refreshFrequency = shouldPersistRefreshFrequency\n      ? currentRefreshFrequency\n      : dashboardInfo.metadata?.refresh_frequency; // eslint-disable camelcase\n\n    const data = {\n      certified_by: dashboardInfo.certified_by,\n      certification_details: dashboardInfo.certification_details,\n      css: customCss,\n      dashboard_title:\n        saveType === SAVE_TYPE_NEWDASHBOARD ? newDashName : dashboardTitle,\n      duplicate_slices: this.state.duplicateSlices,\n      last_modified_time: lastModifiedTime,\n      owners: dashboardInfo.owners,\n      roles: dashboardInfo.roles,\n      metadata: {\n        ...dashboardInfo?.metadata,\n        positions,\n        refresh_frequency: refreshFrequency,\n      },\n    };\n\n    if (saveType === SAVE_TYPE_NEWDASHBOARD && !newDashName) {\n      this.props.addDangerToast(\n        t('You must pick a name for the new dashboard'),\n      );\n    } else {\n      this.onSave(data, dashboardId, saveType).then((resp: JsonResponse) => {\n        if (\n          saveType === SAVE_TYPE_NEWDASHBOARD &&\n          resp &&\n          resp.json &&\n          resp.json.id\n        ) {\n          window.location.href = `/superset/dashboard/${resp.json.id}/`;\n        }\n      });\n      this.modal?.close();\n    }\n  }\n\n  render() {\n    return (\n      <ModalTrigger\n        ref={this.setModalRef}\n        triggerNode={this.props.triggerNode}\n        modalTitle={t('Save dashboard')}\n        modalBody={\n          <div>\n            <Radio\n              value={SAVE_TYPE_OVERWRITE}\n              onChange={this.handleSaveTypeChange}\n              checked={this.state.saveType === SAVE_TYPE_OVERWRITE}\n              disabled={!this.props.canOverwrite}\n            >\n              {t('Overwrite Dashboard [%s]', this.props.dashboardTitle)}\n            </Radio>\n            <hr />\n            <Radio\n              value={SAVE_TYPE_NEWDASHBOARD}\n              onChange={this.handleSaveTypeChange}\n              checked={this.state.saveType === SAVE_TYPE_NEWDASHBOARD}\n            >\n              {t('Save as:')}\n            </Radio>\n            <Input\n              type=\"text\"\n              placeholder={t('[dashboard name]')}\n              value={this.state.newDashName}\n              onFocus={e => this.handleNameChange(e.target.value)}\n              onChange={e => this.handleNameChange(e.target.value)}\n            />\n            <div className=\"m-l-25 m-t-5\">\n              <Checkbox\n                checked={this.state.duplicateSlices}\n                onChange={() => this.toggleDuplicateSlices()}\n              />\n              <span className=\"m-l-5\">{t('also copy (duplicate) charts')}</span>\n            </div>\n          </div>\n        }\n        modalFooter={\n          <div>\n            <Button\n              data-test=\"modal-save-dashboard-button\"\n              buttonStyle=\"primary\"\n              onClick={this.saveDashboard}\n            >\n              {t('Save')}\n            </Button>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default SaveModal;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { isEmpty } from 'lodash';\nimport { t } from '@superset-ui/core';\n\nimport { DASHBOARD_ROOT_ID } from './constants';\nimport { CHART_TYPE, DASHBOARD_ROOT_TYPE, TAB_TYPE } from './componentTypes';\n\nconst FILTER_SCOPE_CONTAINER_TYPES = [TAB_TYPE, DASHBOARD_ROOT_TYPE];\n\nfunction traverse({\n  currentNode = {},\n  components = {},\n  filterFields = [],\n  selectedChartId,\n}) {\n  if (!currentNode) {\n    return null;\n  }\n\n  const { type } = currentNode;\n  if (\n    CHART_TYPE === type &&\n    currentNode &&\n    currentNode.meta &&\n    currentNode.meta.chartId\n  ) {\n    const chartNode = {\n      value: currentNode.meta.chartId,\n      label:\n        currentNode.meta.sliceName || `${type} ${currentNode.meta.chartId}`,\n      type,\n      showCheckbox: selectedChartId !== currentNode.meta.chartId,\n    };\n\n    return {\n      ...chartNode,\n      children: filterFields.map(filterField => ({\n        value: `${currentNode.meta.chartId}:${filterField}`,\n        label: `${chartNode.label}`,\n        type: 'filter_box',\n        showCheckbox: false,\n      })),\n    };\n  }\n\n  let children = [];\n  if (currentNode.children && currentNode.children.length) {\n    currentNode.children.forEach(child => {\n      const childNodeTree = traverse({\n        currentNode: components[child],\n        components,\n        filterFields,\n        selectedChartId,\n      });\n\n      const childType = components[child].type;\n      if (FILTER_SCOPE_CONTAINER_TYPES.includes(childType)) {\n        children.push(childNodeTree);\n      } else {\n        children = children.concat(childNodeTree);\n      }\n    });\n  }\n\n  if (FILTER_SCOPE_CONTAINER_TYPES.includes(type)) {\n    let label = null;\n    if (type === DASHBOARD_ROOT_TYPE) {\n      label = t('All charts');\n    } else {\n      label =\n        currentNode.meta && currentNode.meta.text\n          ? currentNode.meta.text\n          : `${type} ${currentNode.id}`;\n    }\n\n    return {\n      value: currentNode.id,\n      label,\n      type,\n      children,\n    };\n  }\n\n  return children;\n}\n\nexport default function getFilterScopeNodesTree({\n  components = {},\n  filterFields = [],\n  selectedChartId,\n}) {\n  if (isEmpty(components)) {\n    return [];\n  }\n\n  const root = traverse({\n    currentNode: components[DASHBOARD_ROOT_ID],\n    components,\n    filterFields,\n    selectedChartId,\n  });\n  return [\n    {\n      ...root,\n    },\n  ];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport default function getFilterScopeParentNodes(nodes = [], depthLimit = -1) {\n  const parentNodes = [];\n  const traverse = (currentNode, depth) => {\n    if (!currentNode) {\n      return;\n    }\n\n    if (currentNode.children && (depthLimit === -1 || depth < depthLimit)) {\n      parentNodes.push(currentNode.value);\n      currentNode.children.forEach(child => traverse(child, depth + 1));\n    }\n  };\n\n  if (nodes.length > 0) {\n    nodes.forEach(node => {\n      traverse(node, 0);\n    });\n  }\n\n  return parentNodes;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { safeStringify } from '../../utils/safeStringify';\n\nexport default function getKeyForFilterScopeTree({\n  activeFilterField,\n  checkedFilterFields,\n}) {\n  return safeStringify(\n    activeFilterField ? [activeFilterField] : checkedFilterFields,\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { getChartIdAndColumnFromFilterKey } from './getDashboardFilterKey';\n\nexport default function getSelectedChartIdForFilterScopeTree({\n  activeFilterField,\n  checkedFilterFields,\n}) {\n  // we don't apply filter on filter_box itself, so we will disable\n  // checkbox in filter scope selector.\n  // this function returns chart id based on current filter scope selector local state:\n  // 1. if in single-edit mode, return the chart id for selected filter field.\n  // 2. if in multi-edit mode, if all filter fields are from same chart id,\n  // return the single chart id.\n  // otherwise, there is no chart to disable.\n  if (activeFilterField) {\n    return getChartIdAndColumnFromFilterKey(activeFilterField).chartId;\n  }\n\n  if (checkedFilterFields.length) {\n    const { chartId } = getChartIdAndColumnFromFilterKey(\n      checkedFilterFields[0],\n    );\n\n    if (\n      checkedFilterFields.some(\n        filterKey =>\n          getChartIdAndColumnFromFilterKey(filterKey).chartId !== chartId,\n      )\n    ) {\n      return null;\n    }\n    return chartId;\n  }\n\n  return null;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport getFilterScopeNodesTree from './getFilterScopeNodesTree';\nimport getFilterScopeParentNodes from './getFilterScopeParentNodes';\nimport getKeyForFilterScopeTree from './getKeyForFilterScopeTree';\nimport getSelectedChartIdForFilterScopeTree from './getSelectedChartIdForFilterScopeTree';\n\nexport default function buildFilterScopeTreeEntry({\n  checkedFilterFields = [],\n  activeFilterField,\n  filterScopeMap = {},\n  layout = {},\n}) {\n  const key = getKeyForFilterScopeTree({\n    checkedFilterFields,\n    activeFilterField,\n  });\n  const editingList = activeFilterField\n    ? [activeFilterField]\n    : checkedFilterFields;\n  const selectedChartId = getSelectedChartIdForFilterScopeTree({\n    checkedFilterFields,\n    activeFilterField,\n  });\n  const nodes = getFilterScopeNodesTree({\n    components: layout,\n    filterFields: editingList,\n    selectedChartId,\n  });\n  const checkedChartIdSet = new Set();\n  editingList.forEach(filterField => {\n    (filterScopeMap[filterField].checked || []).forEach(chartId => {\n      checkedChartIdSet.add(`${chartId}:${filterField}`);\n    });\n  });\n  const checked = [...checkedChartIdSet];\n  const expanded = filterScopeMap[key]\n    ? filterScopeMap[key].expanded\n    : getFilterScopeParentNodes(nodes, 1);\n\n  return {\n    [key]: {\n      nodes,\n      nodesFiltered: [...nodes],\n      checked,\n      expanded,\n    },\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { flow, keyBy, mapValues } from 'lodash/fp';\nimport { flatMap, isEmpty } from 'lodash';\n\nimport { CHART_TYPE, TAB_TYPE } from './componentTypes';\nimport { getChartIdAndColumnFromFilterKey } from './getDashboardFilterKey';\n\nfunction getImmuneChartIdsFromTabsNotInScope({ tabs = [], tabsInScope = [] }) {\n  const chartsNotInScope = [];\n  tabs.forEach(({ value: tab, children: tabChildren }) => {\n    if (tabChildren && !tabsInScope.includes(tab)) {\n      tabChildren.forEach(({ value: subTab, children: subTabChildren }) => {\n        if (subTabChildren && !tabsInScope.includes(subTab)) {\n          chartsNotInScope.push(\n            ...subTabChildren.filter(({ type }) => type === CHART_TYPE),\n          );\n        }\n      });\n    }\n  });\n\n  // return chartId only\n  return chartsNotInScope.map(({ value }) => value);\n}\nfunction getTabChildrenScope({\n  tabScopes,\n  parentNodeValue,\n  forceAggregate = false,\n  hasChartSiblings = false,\n  tabChildren = [],\n  immuneChartSiblings = [],\n}) {\n  // if all sub-tabs are in scope, or forceAggregate =  true\n  // aggregate scope to parentNodeValue\n  if (\n    forceAggregate ||\n    (!hasChartSiblings &&\n      Object.entries(tabScopes).every(\n        ([key, { scope }]) => scope && scope.length && key === scope[0],\n      ))\n  ) {\n    // get all charts from tabChildren that is not in scope\n    const immuneChartIdsFromTabsNotInScope =\n      getImmuneChartIdsFromTabsNotInScope({\n        tabs: tabChildren,\n        tabsInScope: flatMap(tabScopes, ({ scope }) => scope),\n      });\n    const immuneChartIdsFromTabsInScope = flatMap(\n      Object.values(tabScopes),\n      ({ immune }) => immune,\n    );\n    const immuneCharts = [\n      ...new Set([\n        ...immuneChartIdsFromTabsNotInScope,\n        ...immuneChartIdsFromTabsInScope,\n      ]),\n    ];\n    return {\n      scope: [parentNodeValue],\n      immune: immuneCharts,\n    };\n  }\n\n  const componentsInScope = Object.values(tabScopes).filter(\n    ({ scope }) => scope && scope.length,\n  );\n  return {\n    scope: flatMap(componentsInScope, ({ scope }) => scope),\n    immune: componentsInScope.length\n      ? flatMap(componentsInScope, ({ immune }) => immune)\n      : flatMap(Object.values(tabScopes), ({ immune }) => immune).concat(\n          immuneChartSiblings,\n        ),\n  };\n}\n\nfunction traverse({ currentNode = {}, filterId, checkedChartIds = [] }) {\n  if (!currentNode) {\n    return {};\n  }\n\n  const { value: currentValue, children } = currentNode;\n  const chartChildren = children.filter(({ type }) => type === CHART_TYPE);\n  const tabChildren = children.filter(({ type }) => type === TAB_TYPE);\n\n  const chartsImmune = chartChildren\n    .filter(\n      ({ value }) => filterId !== value && !checkedChartIds.includes(value),\n    )\n    .map(({ value }) => value);\n  const tabScopes = flow(\n    keyBy(child => child.value),\n    mapValues(child =>\n      traverse({\n        currentNode: child,\n        filterId,\n        checkedChartIds,\n      }),\n    ),\n  )(tabChildren);\n\n  // if any chart type child is in scope,\n  // no matter has tab children or not, current node should be scope\n  if (\n    !isEmpty(chartChildren) &&\n    chartChildren.some(({ value }) => checkedChartIds.includes(value))\n  ) {\n    if (isEmpty(tabChildren)) {\n      return { scope: [currentValue], immune: chartsImmune };\n    }\n\n    const { scope, immune } = getTabChildrenScope({\n      tabScopes,\n      parentNodeValue: currentValue,\n      forceAggregate: true,\n      tabChildren,\n    });\n    return {\n      scope,\n      immune: chartsImmune.concat(immune),\n    };\n  }\n\n  // has tab children but only some sub-tab in scope\n  if (tabChildren.length) {\n    return getTabChildrenScope({\n      tabScopes,\n      parentNodeValue: currentValue,\n      hasChartSiblings: !isEmpty(chartChildren),\n      tabChildren,\n      immuneChartSiblings: chartsImmune,\n    });\n  }\n\n  // no tab children and no chart children in scope\n  return {\n    scope: [],\n    immune: chartsImmune,\n  };\n}\n\nexport default function getFilterScopeFromNodesTree({\n  filterKey,\n  nodes = [],\n  checkedChartIds = [],\n}) {\n  if (nodes.length) {\n    const { chartId } = getChartIdAndColumnFromFilterKey(filterKey);\n    return traverse({\n      currentNode: nodes[0],\n      filterId: chartId,\n      checkedChartIds,\n    });\n  }\n\n  return {};\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport cx from 'classnames';\nimport { styled } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { CHART_TYPE } from 'src/dashboard/util/componentTypes';\n\nconst ChartIcon = styled(Icons.BarChartOutlined)`\n  ${({ theme }) => `\n    position: relative;\n    top: ${theme.gridUnit - 1}px;\n    color: ${theme.colors.primary.base};\n    margin-right: ${theme.gridUnit * 2}px;\n  `}\n`;\n\nfunction traverse({ currentNode = {}, selectedChartId }) {\n  if (!currentNode) {\n    return null;\n  }\n\n  const { label, value, type, children } = currentNode;\n  if (children && children.length) {\n    const updatedChildren = children.map(child =>\n      traverse({ currentNode: child, selectedChartId }),\n    );\n    return {\n      ...currentNode,\n      label: (\n        <span\n          className={cx(`filter-scope-type ${type.toLowerCase()}`, {\n            'selected-filter': selectedChartId === value,\n          })}\n        >\n          {type === CHART_TYPE && <ChartIcon />}\n          {label}\n        </span>\n      ),\n      children: updatedChildren,\n    };\n  }\n  return {\n    ...currentNode,\n    label: (\n      <span\n        className={cx(`filter-scope-type ${type.toLowerCase()}`, {\n          'selected-filter': selectedChartId === value,\n        })}\n      >\n        {label}\n      </span>\n    ),\n  };\n}\n\nexport default function renderFilterScopeTreeNodes({ nodes, selectedChartId }) {\n  if (!nodes) {\n    return [];\n  }\n\n  return nodes.map(node => traverse({ currentNode: node, selectedChartId }));\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport 'react-checkbox-tree/lib/react-checkbox-tree.css';\n\nimport {\n  CheckboxChecked,\n  CheckboxUnchecked,\n  CheckboxHalfChecked,\n} from 'src/components/Checkbox/CheckboxIcons';\n\nconst treeIcons = {\n  check: <CheckboxChecked />,\n  uncheck: <CheckboxUnchecked />,\n  halfCheck: <CheckboxHalfChecked />,\n  expandClose: <span className=\"rct-icon rct-icon-expand-close\" />,\n  expandOpen: <span className=\"rct-icon rct-icon-expand-open\" />,\n  expandAll: (\n    <span className=\"rct-icon rct-icon-expand-all\">{t('Expand all')}</span>\n  ),\n  collapseAll: (\n    <span className=\"rct-icon rct-icon-collapse-all\">{t('Collapse all')}</span>\n  ),\n  parentClose: <span className=\"rct-icon rct-icon-parent-close\" />,\n  parentOpen: <span className=\"rct-icon rct-icon-parent-open\" />,\n  leaf: <span className=\"rct-icon rct-icon-leaf\" />,\n};\n\nexport default treeIcons;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CheckboxTree from 'react-checkbox-tree';\nimport { filterScopeSelectorTreeNodePropShape } from 'src/dashboard/util/propShapes';\nimport renderFilterScopeTreeNodes from './renderFilterScopeTreeNodes';\nimport treeIcons from './treeIcons';\n\nconst propTypes = {\n  nodes: PropTypes.arrayOf(filterScopeSelectorTreeNodePropShape).isRequired,\n  checked: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  ).isRequired,\n  expanded: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  ).isRequired,\n  onCheck: PropTypes.func.isRequired,\n  onExpand: PropTypes.func.isRequired,\n  selectedChartId: PropTypes.number,\n};\n\nconst defaultProps = {\n  selectedChartId: null,\n};\n\nconst NOOP = () => {};\n\nexport default function FilterScopeTree({\n  nodes = [],\n  checked = [],\n  expanded = [],\n  onCheck,\n  onExpand,\n  selectedChartId,\n}) {\n  return (\n    <CheckboxTree\n      showExpandAll\n      expandOnClick\n      showNodeIcon={false}\n      nodes={renderFilterScopeTreeNodes({ nodes, selectedChartId })}\n      checked={checked}\n      expanded={expanded}\n      onCheck={onCheck}\n      onExpand={onExpand}\n      onClick={NOOP}\n      icons={treeIcons}\n    />\n  );\n}\n\nFilterScopeTree.propTypes = propTypes;\nFilterScopeTree.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { FormLabel } from 'src/components/Form';\n\nconst propTypes = {\n  label: PropTypes.string.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n};\n\nexport default function FilterFieldItem({ label, isSelected }) {\n  return (\n    <span\n      className={cx('filter-field-item filter-container', {\n        'is-selected': isSelected,\n      })}\n    >\n      <FormLabel htmlFor={label}>{label}</FormLabel>\n    </span>\n  );\n}\n\nFilterFieldItem.propTypes = propTypes;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport FilterFieldItem from './FilterFieldItem';\n\nexport default function renderFilterFieldTreeNodes({ nodes, activeKey }) {\n  if (!nodes) {\n    return [];\n  }\n\n  const root = nodes[0];\n  const allFilterNodes = root.children;\n  const children = allFilterNodes.map(node => ({\n    ...node,\n    children: node.children.map(child => {\n      const { label, value } = child;\n      return {\n        ...child,\n        label: (\n          <FilterFieldItem isSelected={value === activeKey} label={label} />\n        ),\n      };\n    }),\n  }));\n\n  return [\n    {\n      ...root,\n      label: <span className=\"root\">{root.label}</span>,\n      children,\n    },\n  ];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CheckboxTree from 'react-checkbox-tree';\nimport { filterScopeSelectorTreeNodePropShape } from 'src/dashboard/util/propShapes';\nimport treeIcons from './treeIcons';\nimport renderFilterFieldTreeNodes from './renderFilterFieldTreeNodes';\n\nconst propTypes = {\n  activeKey: PropTypes.string,\n  nodes: PropTypes.arrayOf(filterScopeSelectorTreeNodePropShape).isRequired,\n  checked: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  ).isRequired,\n  expanded: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  ).isRequired,\n  onCheck: PropTypes.func.isRequired,\n  onExpand: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  activeKey: null,\n};\n\nexport default function FilterFieldTree({\n  activeKey,\n  nodes = [],\n  checked = [],\n  expanded = [],\n  onClick,\n  onCheck,\n  onExpand,\n}) {\n  return (\n    <CheckboxTree\n      showExpandAll\n      showNodeIcon={false}\n      expandOnClick\n      nodes={renderFilterFieldTreeNodes({ nodes, activeKey })}\n      checked={checked}\n      expanded={expanded}\n      onClick={onClick}\n      onCheck={onCheck}\n      onExpand={onExpand}\n      icons={treeIcons}\n    />\n  );\n}\n\nFilterFieldTree.propTypes = propTypes;\nFilterFieldTree.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Button from 'src/components/Button';\nimport { t, styled } from '@superset-ui/core';\n\nimport buildFilterScopeTreeEntry from 'src/dashboard/util/buildFilterScopeTreeEntry';\nimport getFilterScopeNodesTree from 'src/dashboard/util/getFilterScopeNodesTree';\nimport getFilterFieldNodesTree from 'src/dashboard/util/getFilterFieldNodesTree';\nimport getFilterScopeParentNodes from 'src/dashboard/util/getFilterScopeParentNodes';\nimport getKeyForFilterScopeTree from 'src/dashboard/util/getKeyForFilterScopeTree';\nimport getSelectedChartIdForFilterScopeTree from 'src/dashboard/util/getSelectedChartIdForFilterScopeTree';\nimport getFilterScopeFromNodesTree from 'src/dashboard/util/getFilterScopeFromNodesTree';\nimport getRevertedFilterScope from 'src/dashboard/util/getRevertedFilterScope';\nimport { getChartIdsInFilterBoxScope } from 'src/dashboard/util/activeDashboardFilters';\nimport {\n  getChartIdAndColumnFromFilterKey,\n  getDashboardFilterKey,\n} from 'src/dashboard/util/getDashboardFilterKey';\nimport { ALL_FILTERS_ROOT } from 'src/dashboard/util/constants';\nimport { dashboardFilterPropShape } from 'src/dashboard/util/propShapes';\nimport FilterScopeTree from './FilterScopeTree';\nimport FilterFieldTree from './FilterFieldTree';\n\nconst propTypes = {\n  dashboardFilters: PropTypes.objectOf(dashboardFilterPropShape).isRequired,\n  layout: PropTypes.object.isRequired,\n\n  updateDashboardFiltersScope: PropTypes.func.isRequired,\n  setUnsavedChanges: PropTypes.func.isRequired,\n  onCloseModal: PropTypes.func.isRequired,\n};\n\nconst ActionsContainer = styled.div`\n  ${({ theme }) => `\n    height: ${theme.gridUnit * 16}px;\n\n    border-top: ${theme.gridUnit / 4}px solid ${theme.colors.primary.light3};\n    padding: ${theme.gridUnit * 6}px;\n    margin: 0 0 0 ${-theme.gridUnit * 6}px;\n    text-align: right;\n\n    .btn {\n      margin-right: ${theme.gridUnit * 4}px;\n\n      &:last-child {\n        margin-right: 0;\n      }\n    }\n  `}\n`;\n\nexport default class FilterScopeSelector extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    const { dashboardFilters, layout } = props;\n\n    if (Object.keys(dashboardFilters).length > 0) {\n      // display filter fields in tree structure\n      const filterFieldNodes = getFilterFieldNodesTree({\n        dashboardFilters,\n      });\n      // filterFieldNodes root node is dashboard_root component,\n      // so that we can offer a select/deselect all link\n      const filtersNodes = filterFieldNodes[0].children;\n      this.allfilterFields = [];\n      filtersNodes.forEach(({ children }) => {\n        children.forEach(child => {\n          this.allfilterFields.push(child.value);\n        });\n      });\n      this.defaultFilterKey = filtersNodes[0].children[0].value;\n\n      // build FilterScopeTree object for each filterKey\n      const filterScopeMap = Object.values(dashboardFilters).reduce(\n        (map, { chartId: filterId, columns }) => {\n          const filterScopeByChartId = Object.keys(columns).reduce(\n            (mapByChartId, columnName) => {\n              const filterKey = getDashboardFilterKey({\n                chartId: filterId,\n                column: columnName,\n              });\n              const nodes = getFilterScopeNodesTree({\n                components: layout,\n                filterFields: [filterKey],\n                selectedChartId: filterId,\n              });\n              const expanded = getFilterScopeParentNodes(nodes, 1);\n              // force display filter_box chart as unchecked, but show checkbox as disabled\n              const chartIdsInFilterScope = (\n                getChartIdsInFilterBoxScope({\n                  filterScope: dashboardFilters[filterId].scopes[columnName],\n                }) || []\n              ).filter(id => id !== filterId);\n\n              return {\n                ...mapByChartId,\n                [filterKey]: {\n                  // unfiltered nodes\n                  nodes,\n                  // filtered nodes in display if searchText is not empty\n                  nodesFiltered: [...nodes],\n                  checked: chartIdsInFilterScope,\n                  expanded,\n                },\n              };\n            },\n            {},\n          );\n\n          return {\n            ...map,\n            ...filterScopeByChartId,\n          };\n        },\n        {},\n      );\n\n      // initial state: active defaultFilerKey\n      const { chartId } = getChartIdAndColumnFromFilterKey(\n        this.defaultFilterKey,\n      );\n      const checkedFilterFields = [];\n      const activeFilterField = this.defaultFilterKey;\n      // expand defaultFilterKey in filter field tree\n      const expandedFilterIds = [ALL_FILTERS_ROOT].concat(chartId);\n\n      const filterScopeTreeEntry = buildFilterScopeTreeEntry({\n        checkedFilterFields,\n        activeFilterField,\n        filterScopeMap,\n        layout,\n      });\n      this.state = {\n        showSelector: true,\n        activeFilterField,\n        searchText: '',\n        filterScopeMap: {\n          ...filterScopeMap,\n          ...filterScopeTreeEntry,\n        },\n        filterFieldNodes,\n        checkedFilterFields,\n        expandedFilterIds,\n      };\n    } else {\n      this.state = {\n        showSelector: false,\n      };\n    }\n\n    this.filterNodes = this.filterNodes.bind(this);\n    this.onChangeFilterField = this.onChangeFilterField.bind(this);\n    this.onCheckFilterScope = this.onCheckFilterScope.bind(this);\n    this.onExpandFilterScope = this.onExpandFilterScope.bind(this);\n    this.onSearchInputChange = this.onSearchInputChange.bind(this);\n    this.onCheckFilterField = this.onCheckFilterField.bind(this);\n    this.onExpandFilterField = this.onExpandFilterField.bind(this);\n    this.onClose = this.onClose.bind(this);\n    this.onSave = this.onSave.bind(this);\n  }\n\n  onCheckFilterScope(checked = []) {\n    const { activeFilterField, filterScopeMap, checkedFilterFields } =\n      this.state;\n\n    const key = getKeyForFilterScopeTree({\n      activeFilterField,\n      checkedFilterFields,\n    });\n    const editingList = activeFilterField\n      ? [activeFilterField]\n      : checkedFilterFields;\n    const updatedEntry = {\n      ...filterScopeMap[key],\n      checked,\n    };\n\n    const updatedFilterScopeMap = getRevertedFilterScope({\n      checked,\n      filterFields: editingList,\n      filterScopeMap,\n    });\n\n    this.setState(() => ({\n      filterScopeMap: {\n        ...filterScopeMap,\n        ...updatedFilterScopeMap,\n        [key]: updatedEntry,\n      },\n    }));\n  }\n\n  onExpandFilterScope(expanded = []) {\n    const { activeFilterField, checkedFilterFields, filterScopeMap } =\n      this.state;\n    const key = getKeyForFilterScopeTree({\n      activeFilterField,\n      checkedFilterFields,\n    });\n    const updatedEntry = {\n      ...filterScopeMap[key],\n      expanded,\n    };\n    this.setState(() => ({\n      filterScopeMap: {\n        ...filterScopeMap,\n        [key]: updatedEntry,\n      },\n    }));\n  }\n\n  onCheckFilterField(checkedFilterFields = []) {\n    const { layout } = this.props;\n    const { filterScopeMap } = this.state;\n    const filterScopeTreeEntry = buildFilterScopeTreeEntry({\n      checkedFilterFields,\n      activeFilterField: null,\n      filterScopeMap,\n      layout,\n    });\n\n    this.setState(() => ({\n      activeFilterField: null,\n      checkedFilterFields,\n      filterScopeMap: {\n        ...filterScopeMap,\n        ...filterScopeTreeEntry,\n      },\n    }));\n  }\n\n  onExpandFilterField(expandedFilterIds = []) {\n    this.setState(() => ({\n      expandedFilterIds,\n    }));\n  }\n\n  onChangeFilterField(filterField = {}) {\n    const { layout } = this.props;\n    const nextActiveFilterField = filterField.value;\n    const {\n      activeFilterField: currentActiveFilterField,\n      checkedFilterFields,\n      filterScopeMap,\n    } = this.state;\n\n    // we allow single edit and multiple edit in the same view.\n    // if user click on the single filter field,\n    // will show filter scope for the single field.\n    // if user click on the same filter filed again,\n    // will toggle off the single filter field,\n    // and allow multi-edit all checked filter fields.\n    if (nextActiveFilterField === currentActiveFilterField) {\n      const filterScopeTreeEntry = buildFilterScopeTreeEntry({\n        checkedFilterFields,\n        activeFilterField: null,\n        filterScopeMap,\n        layout,\n      });\n\n      this.setState({\n        activeFilterField: null,\n        filterScopeMap: {\n          ...filterScopeMap,\n          ...filterScopeTreeEntry,\n        },\n      });\n    } else if (this.allfilterFields.includes(nextActiveFilterField)) {\n      const filterScopeTreeEntry = buildFilterScopeTreeEntry({\n        checkedFilterFields,\n        activeFilterField: nextActiveFilterField,\n        filterScopeMap,\n        layout,\n      });\n\n      this.setState({\n        activeFilterField: nextActiveFilterField,\n        filterScopeMap: {\n          ...filterScopeMap,\n          ...filterScopeTreeEntry,\n        },\n      });\n    }\n  }\n\n  onSearchInputChange(e) {\n    this.setState({ searchText: e.target.value }, this.filterTree);\n  }\n\n  onClose() {\n    this.props.onCloseModal();\n  }\n\n  onSave() {\n    const { filterScopeMap } = this.state;\n\n    const allFilterFieldScopes = this.allfilterFields.reduce(\n      (map, filterKey) => {\n        const { nodes } = filterScopeMap[filterKey];\n        const checkedChartIds = filterScopeMap[filterKey].checked;\n\n        return {\n          ...map,\n          [filterKey]: getFilterScopeFromNodesTree({\n            filterKey,\n            nodes,\n            checkedChartIds,\n          }),\n        };\n      },\n      {},\n    );\n\n    this.props.updateDashboardFiltersScope(allFilterFieldScopes);\n    this.props.setUnsavedChanges(true);\n\n    // click Save button will do save and close modal\n    this.props.onCloseModal();\n  }\n\n  filterTree() {\n    // Reset nodes back to unfiltered state\n    if (!this.state.searchText) {\n      this.setState(prevState => {\n        const { activeFilterField, checkedFilterFields, filterScopeMap } =\n          prevState;\n        const key = getKeyForFilterScopeTree({\n          activeFilterField,\n          checkedFilterFields,\n        });\n\n        const updatedEntry = {\n          ...filterScopeMap[key],\n          nodesFiltered: filterScopeMap[key].nodes,\n        };\n        return {\n          filterScopeMap: {\n            ...filterScopeMap,\n            [key]: updatedEntry,\n          },\n        };\n      });\n    } else {\n      const updater = prevState => {\n        const { activeFilterField, checkedFilterFields, filterScopeMap } =\n          prevState;\n        const key = getKeyForFilterScopeTree({\n          activeFilterField,\n          checkedFilterFields,\n        });\n\n        const nodesFiltered = filterScopeMap[key].nodes.reduce(\n          this.filterNodes,\n          [],\n        );\n        const expanded = getFilterScopeParentNodes([...nodesFiltered]);\n        const updatedEntry = {\n          ...filterScopeMap[key],\n          nodesFiltered,\n          expanded,\n        };\n\n        return {\n          filterScopeMap: {\n            ...filterScopeMap,\n            [key]: updatedEntry,\n          },\n        };\n      };\n\n      this.setState(updater);\n    }\n  }\n\n  filterNodes(filtered = [], node = {}) {\n    const { searchText } = this.state;\n    const children = (node.children || []).reduce(this.filterNodes, []);\n\n    if (\n      // Node's label matches the search string\n      node.label.toLocaleLowerCase().indexOf(searchText.toLocaleLowerCase()) >\n        -1 ||\n      // Or a children has a matching node\n      children.length\n    ) {\n      filtered.push({ ...node, children });\n    }\n\n    return filtered;\n  }\n\n  renderFilterFieldList() {\n    const {\n      activeFilterField,\n      filterFieldNodes,\n      checkedFilterFields,\n      expandedFilterIds,\n    } = this.state;\n    return (\n      <FilterFieldTree\n        activeKey={activeFilterField}\n        nodes={filterFieldNodes}\n        checked={checkedFilterFields}\n        expanded={expandedFilterIds}\n        onClick={this.onChangeFilterField}\n        onCheck={this.onCheckFilterField}\n        onExpand={this.onExpandFilterField}\n      />\n    );\n  }\n\n  renderFilterScopeTree() {\n    const {\n      filterScopeMap,\n      activeFilterField,\n      checkedFilterFields,\n      searchText,\n    } = this.state;\n\n    const key = getKeyForFilterScopeTree({\n      activeFilterField,\n      checkedFilterFields,\n    });\n\n    const selectedChartId = getSelectedChartIdForFilterScopeTree({\n      activeFilterField,\n      checkedFilterFields,\n    });\n    return (\n      <>\n        <input\n          className=\"filter-text scope-search multi-edit-mode\"\n          placeholder={t('Search...')}\n          type=\"text\"\n          value={searchText}\n          onChange={this.onSearchInputChange}\n        />\n        <FilterScopeTree\n          nodes={filterScopeMap[key].nodesFiltered}\n          checked={filterScopeMap[key].checked}\n          expanded={filterScopeMap[key].expanded}\n          onCheck={this.onCheckFilterScope}\n          onExpand={this.onExpandFilterScope}\n          // pass selectedFilterId prop to FilterScopeTree component,\n          // to hide checkbox for selected filter field itself\n          selectedChartId={selectedChartId}\n        />\n      </>\n    );\n  }\n\n  renderEditingFiltersName() {\n    const { dashboardFilters } = this.props;\n    const { activeFilterField, checkedFilterFields } = this.state;\n    const currentFilterLabels = []\n      .concat(activeFilterField || checkedFilterFields)\n      .map(key => {\n        const { chartId, column } = getChartIdAndColumnFromFilterKey(key);\n        return dashboardFilters[chartId].labels[column] || column;\n      });\n\n    return (\n      <div className=\"selected-fields multi-edit-mode\">\n        {currentFilterLabels.length === 0 && t('No filter is selected.')}\n        {currentFilterLabels.length === 1 && t('Editing 1 filter:')}\n        {currentFilterLabels.length > 1 &&\n          t('Batch editing %d filters:', currentFilterLabels.length)}\n        <span className=\"selected-scopes\">\n          {currentFilterLabels.join(', ')}\n        </span>\n      </div>\n    );\n  }\n\n  render() {\n    const { showSelector } = this.state;\n\n    return (\n      <div className=\"filter-scope-container\">\n        <div className=\"filter-scope-header\">\n          <h4>{t('Configure filter scopes')}</h4>\n          {showSelector && this.renderEditingFiltersName()}\n        </div>\n\n        <div className=\"filter-scope-body\">\n          {!showSelector ? (\n            <div className=\"warning-message\">\n              {t('There are no filters in this dashboard.')}\n            </div>\n          ) : (\n            <div className=\"filters-scope-selector\">\n              <div className={cx('filter-field-pane multi-edit-mode')}>\n                {this.renderFilterFieldList()}\n              </div>\n              <div className=\"filter-scope-pane multi-edit-mode\">\n                {this.renderFilterScopeTree()}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <ActionsContainer>\n          <Button buttonSize=\"small\" onClick={this.onClose}>\n            {t('Close')}\n          </Button>\n          {showSelector && (\n            <Button\n              buttonSize=\"small\"\n              buttonStyle=\"primary\"\n              onClick={this.onSave}\n            >\n              {t('Save')}\n            </Button>\n          )}\n        </ActionsContainer>\n      </div>\n    );\n  }\n}\n\nFilterScopeSelector.propTypes = propTypes;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\n\nimport { getDashboardFilterKey } from './getDashboardFilterKey';\nimport { ALL_FILTERS_ROOT } from './constants';\nimport { DASHBOARD_ROOT_TYPE } from './componentTypes';\n\nexport default function getFilterFieldNodesTree({ dashboardFilters = {} }) {\n  const allFilters = Object.values(dashboardFilters).map(dashboardFilter => {\n    const { chartId, filterName, columns, labels } = dashboardFilter;\n    const children = Object.keys(columns).map(column => ({\n      value: getDashboardFilterKey({ chartId, column }),\n      label: labels[column] || column,\n    }));\n    return {\n      value: chartId,\n      label: filterName,\n      children,\n      showCheckbox: true,\n    };\n  });\n\n  return [\n    {\n      value: ALL_FILTERS_ROOT,\n      type: DASHBOARD_ROOT_TYPE,\n      label: t('All filters'),\n      children: allFilters,\n    },\n  ];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { getChartIdAndColumnFromFilterKey } from './getDashboardFilterKey';\n\ninterface FilterScopeMap {\n  [key: string]: number[];\n}\n\ninterface GetRevertFilterScopeProps {\n  checked: string[];\n  filterFields: string[];\n  filterScopeMap: FilterScopeMap;\n}\n\nexport default function getRevertedFilterScope({\n  checked = [],\n  filterFields = [],\n  filterScopeMap = {},\n}: GetRevertFilterScopeProps) {\n  const checkedChartIdsByFilterField = checked.reduce<FilterScopeMap>(\n    (map, value) => {\n      const [chartId, filterField] = value.split(':');\n      return {\n        ...map,\n        [filterField]: (map[filterField] || []).concat(parseInt(chartId, 10)),\n      };\n    },\n    {},\n  );\n\n  return filterFields.reduce<FilterScopeMap>((map, filterField) => {\n    const { chartId } = getChartIdAndColumnFromFilterKey(filterField);\n    // force display filter_box chart as unchecked, but show checkbox as disabled\n    const updatedCheckedIds = (\n      checkedChartIdsByFilterField[filterField] || []\n    ).filter(id => id !== chartId);\n\n    return {\n      ...map,\n      [filterField]: {\n        ...filterScopeMap[filterField],\n        checked: updatedCheckedIds,\n      },\n    };\n  }, {});\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { updateDashboardFiltersScope } from '../actions/dashboardFilters';\nimport { setUnsavedChanges } from '../actions/dashboardState';\nimport FilterScopeSelector from '../components/filterscope/FilterScopeSelector';\n\nfunction mapStateToProps({ dashboardLayout, dashboardFilters }) {\n  return {\n    dashboardFilters,\n    layout: dashboardLayout.present,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      updateDashboardFiltersScope,\n      setUnsavedChanges,\n    },\n    dispatch,\n  );\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(FilterScopeSelector);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { RefObject } from 'react';\nimport { styled } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport FilterScope from 'src/dashboard/containers/FilterScope';\n\ntype FilterScopeModalProps = {\n  triggerNode: JSX.Element;\n};\n\nconst FilterScopeModalBody = styled.div(({ theme: { gridUnit } }) => ({\n  padding: gridUnit * 2,\n  paddingBottom: gridUnit * 3,\n}));\n\nexport default class FilterScopeModal extends React.PureComponent<\n  FilterScopeModalProps,\n  {}\n> {\n  modal: RefObject<ModalTrigger>;\n\n  constructor(props: FilterScopeModalProps) {\n    super(props);\n\n    this.modal = React.createRef();\n    this.handleCloseModal = this.handleCloseModal.bind(this);\n  }\n\n  handleCloseModal(): void {\n    if (this.modal.current) {\n      this.modal.current.close();\n    }\n  }\n\n  render() {\n    const filterScopeProps = {\n      onCloseModal: this.handleCloseModal,\n    };\n\n    return (\n      <ModalTrigger\n        ref={this.modal}\n        triggerNode={this.props.triggerNode}\n        modalBody={\n          <FilterScopeModalBody>\n            <FilterScope {...filterScopeProps} />\n          </FilterScopeModalBody>\n        }\n        width=\"80%\"\n      />\n    );\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { JsonObject } from '@superset-ui/core';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport serializeActiveFilterValues from './serializeActiveFilterValues';\n\nexport default function getDashboardUrl({\n  pathname,\n  filters = {},\n  hash = '',\n  standalone,\n}: {\n  pathname: string;\n  filters: JsonObject;\n  hash: string;\n  standalone?: number | null;\n}) {\n  const newSearchParams = new URLSearchParams();\n\n  // convert flattened { [id_column]: values } object\n  // to nested filter object\n  newSearchParams.set(\n    URL_PARAMS.preselectFilters.name,\n    JSON.stringify(serializeActiveFilterValues(filters)),\n  );\n\n  if (standalone) {\n    newSearchParams.set(URL_PARAMS.standalone.name, standalone.toString());\n  }\n  const dataMaskKey = getUrlParam(URL_PARAMS.nativeFiltersKey);\n  if (dataMaskKey) {\n    newSearchParams.set(\n      URL_PARAMS.nativeFiltersKey.name,\n      dataMaskKey as string,\n    );\n  }\n\n  const hashSection = hash ? `#${hash}` : '';\n  return `${pathname}?${newSearchParams.toString()}${hashSection}`;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { SupersetClient, t } from '@superset-ui/core';\n\nimport { Menu } from 'src/components/Menu';\nimport { URL_PARAMS } from 'src/constants';\nimport ShareMenuItems from 'src/dashboard/components/menu/ShareMenuItems';\nimport CssEditor from 'src/dashboard/components/CssEditor';\nimport RefreshIntervalModal from 'src/dashboard/components/RefreshIntervalModal';\nimport SaveModal from 'src/dashboard/components/SaveModal';\nimport HeaderReportDropdown from 'src/components/ReportModal/HeaderReportDropdown';\nimport injectCustomCss from 'src/dashboard/util/injectCustomCss';\nimport { SAVE_TYPE_NEWDASHBOARD } from 'src/dashboard/util/constants';\nimport FilterScopeModal from 'src/dashboard/components/filterscope/FilterScopeModal';\nimport downloadAsImage from 'src/utils/downloadAsImage';\nimport getDashboardUrl from 'src/dashboard/util/getDashboardUrl';\nimport { getActiveFilters } from 'src/dashboard/util/activeDashboardFilters';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { FILTER_BOX_MIGRATION_STATES } from 'src/explore/constants';\n\nconst propTypes = {\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  dashboardInfo: PropTypes.object.isRequired,\n  dashboardId: PropTypes.number.isRequired,\n  dashboardTitle: PropTypes.string.isRequired,\n  dataMask: PropTypes.object.isRequired,\n  customCss: PropTypes.string.isRequired,\n  colorNamespace: PropTypes.string,\n  colorScheme: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  updateCss: PropTypes.func.isRequired,\n  forceRefreshAllCharts: PropTypes.func.isRequired,\n  refreshFrequency: PropTypes.number.isRequired,\n  shouldPersistRefreshFrequency: PropTypes.bool.isRequired,\n  setRefreshFrequency: PropTypes.func.isRequired,\n  startPeriodicRender: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  userCanEdit: PropTypes.bool.isRequired,\n  userCanShare: PropTypes.bool.isRequired,\n  userCanSave: PropTypes.bool.isRequired,\n  userCanCurate: PropTypes.bool.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  layout: PropTypes.object.isRequired,\n  expandedSlices: PropTypes.object.isRequired,\n  onSave: PropTypes.func.isRequired,\n  showPropertiesModal: PropTypes.func.isRequired,\n  manageEmbedded: PropTypes.func.isRequired,\n  refreshLimit: PropTypes.number,\n  refreshWarning: PropTypes.string,\n  lastModifiedTime: PropTypes.number.isRequired,\n  filterboxMigrationState: FILTER_BOX_MIGRATION_STATES,\n};\n\nconst defaultProps = {\n  colorNamespace: undefined,\n  colorScheme: undefined,\n  refreshLimit: 0,\n  refreshWarning: null,\n  filterboxMigrationState: FILTER_BOX_MIGRATION_STATES.NOOP,\n};\n\nconst MENU_KEYS = {\n  SAVE_MODAL: 'save-modal',\n  SHARE_DASHBOARD: 'share-dashboard',\n  REFRESH_DASHBOARD: 'refresh-dashboard',\n  AUTOREFRESH_MODAL: 'autorefresh-modal',\n  SET_FILTER_MAPPING: 'set-filter-mapping',\n  EDIT_PROPERTIES: 'edit-properties',\n  EDIT_CSS: 'edit-css',\n  DOWNLOAD_AS_IMAGE: 'download-as-image',\n  TOGGLE_FULLSCREEN: 'toggle-fullscreen',\n  MANAGE_EMBEDDED: 'manage-embedded',\n  MANAGE_EMAIL_REPORT: 'manage-email-report',\n};\n\nconst SCREENSHOT_NODE_SELECTOR = '.dashboard';\n\nclass HeaderActionsDropdown extends React.PureComponent {\n  static discardChanges() {\n    window.location.reload();\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      css: props.customCss,\n      cssTemplates: [],\n      showReportSubMenu: null,\n    };\n\n    this.changeCss = this.changeCss.bind(this);\n    this.changeRefreshInterval = this.changeRefreshInterval.bind(this);\n    this.handleMenuClick = this.handleMenuClick.bind(this);\n    this.setShowReportSubMenu = this.setShowReportSubMenu.bind(this);\n  }\n\n  UNSAFE_componentWillMount() {\n    SupersetClient.get({ endpoint: '/csstemplateasyncmodelview/api/read' })\n      .then(({ json }) => {\n        const cssTemplates = json.result.map(row => ({\n          value: row.template_name,\n          css: row.css,\n          label: row.template_name,\n        }));\n        this.setState({ cssTemplates });\n      })\n      .catch(() => {\n        this.props.addDangerToast(\n          t('An error occurred while fetching available CSS templates'),\n        );\n      });\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.customCss !== nextProps.customCss) {\n      this.setState({ css: nextProps.customCss }, () => {\n        injectCustomCss(nextProps.customCss);\n      });\n    }\n  }\n\n  setShowReportSubMenu(show) {\n    this.setState({\n      showReportSubMenu: show,\n    });\n  }\n\n  changeCss(css) {\n    this.props.onChange();\n    this.props.updateCss(css);\n  }\n\n  changeRefreshInterval(refreshInterval, isPersistent) {\n    this.props.setRefreshFrequency(refreshInterval, isPersistent);\n    this.props.startPeriodicRender(refreshInterval * 1000);\n  }\n\n  handleMenuClick({ key, domEvent }) {\n    switch (key) {\n      case MENU_KEYS.REFRESH_DASHBOARD:\n        this.props.forceRefreshAllCharts();\n        this.props.addSuccessToast(t('Refreshing charts'));\n        break;\n      case MENU_KEYS.EDIT_PROPERTIES:\n        this.props.showPropertiesModal();\n        break;\n      case MENU_KEYS.DOWNLOAD_AS_IMAGE: {\n        // menu closes with a delay, we need to hide it manually,\n        // so that we don't capture it on the screenshot\n        const menu = document.querySelector(\n          '.ant-dropdown:not(.ant-dropdown-hidden)',\n        );\n        menu.style.visibility = 'hidden';\n        downloadAsImage(\n          SCREENSHOT_NODE_SELECTOR,\n          this.props.dashboardTitle,\n          true,\n        )(domEvent).then(() => {\n          menu.style.visibility = 'visible';\n        });\n        break;\n      }\n      case MENU_KEYS.TOGGLE_FULLSCREEN: {\n        const url = getDashboardUrl({\n          pathname: window.location.pathname,\n          filters: getActiveFilters(),\n          hash: window.location.hash,\n          standalone: !getUrlParam(URL_PARAMS.standalone),\n        });\n        window.location.replace(url);\n        break;\n      }\n      case MENU_KEYS.MANAGE_EMBEDDED: {\n        this.props.manageEmbedded();\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const {\n      dashboardTitle,\n      dashboardId,\n      dashboardInfo,\n      refreshFrequency,\n      shouldPersistRefreshFrequency,\n      editMode,\n      customCss,\n      colorNamespace,\n      colorScheme,\n      layout,\n      expandedSlices,\n      onSave,\n      userCanEdit,\n      userCanShare,\n      userCanSave,\n      userCanCurate,\n      isLoading,\n      refreshLimit,\n      refreshWarning,\n      lastModifiedTime,\n      addSuccessToast,\n      addDangerToast,\n      filterboxMigrationState,\n      setIsDropdownVisible,\n      isDropdownVisible,\n      ...rest\n    } = this.props;\n\n    const emailTitle = t('Superset dashboard');\n    const emailSubject = `${emailTitle} ${dashboardTitle}`;\n    const emailBody = t('Check out this dashboard: ');\n\n    const url = getDashboardUrl({\n      pathname: window.location.pathname,\n      filters: getActiveFilters(),\n      hash: window.location.hash,\n    });\n\n    return (\n      <Menu selectable={false} data-test=\"header-actions-menu\" {...rest}>\n        {!editMode && (\n          <Menu.Item\n            key={MENU_KEYS.REFRESH_DASHBOARD}\n            data-test=\"refresh-dashboard-menu-item\"\n            disabled={isLoading}\n            onClick={this.handleMenuClick}\n          >\n            {t('Refresh dashboard')}\n          </Menu.Item>\n        )}\n        {!editMode && (\n          <Menu.Item\n            key={MENU_KEYS.TOGGLE_FULLSCREEN}\n            onClick={this.handleMenuClick}\n          >\n            {getUrlParam(URL_PARAMS.standalone)\n              ? t('Exit fullscreen')\n              : t('Enter fullscreen')}\n          </Menu.Item>\n        )}\n        {editMode && (\n          <Menu.Item\n            key={MENU_KEYS.EDIT_PROPERTIES}\n            onClick={this.handleMenuClick}\n          >\n            {t('Edit properties')}\n          </Menu.Item>\n        )}\n        {editMode && (\n          <Menu.Item key={MENU_KEYS.EDIT_CSS}>\n            <CssEditor\n              triggerNode={<span>{t('Edit CSS')}</span>}\n              initialCss={this.state.css}\n              templates={this.state.cssTemplates}\n              onChange={this.changeCss}\n            />\n          </Menu.Item>\n        )}\n        <Menu.Divider />\n        {userCanSave && (\n          <Menu.Item key={MENU_KEYS.SAVE_MODAL}>\n            <SaveModal\n              addSuccessToast={this.props.addSuccessToast}\n              addDangerToast={this.props.addDangerToast}\n              dashboardId={dashboardId}\n              dashboardTitle={dashboardTitle}\n              dashboardInfo={dashboardInfo}\n              saveType={SAVE_TYPE_NEWDASHBOARD}\n              layout={layout}\n              expandedSlices={expandedSlices}\n              refreshFrequency={refreshFrequency}\n              shouldPersistRefreshFrequency={shouldPersistRefreshFrequency}\n              lastModifiedTime={lastModifiedTime}\n              customCss={customCss}\n              colorNamespace={colorNamespace}\n              colorScheme={colorScheme}\n              onSave={onSave}\n              triggerNode={\n                <span data-test=\"save-as-menu-item\">{t('Save as')}</span>\n              }\n              canOverwrite={userCanEdit}\n            />\n          </Menu.Item>\n        )}\n        {!editMode && (\n          <Menu.Item\n            key={MENU_KEYS.DOWNLOAD_AS_IMAGE}\n            onClick={this.handleMenuClick}\n          >\n            {t('Download as image')}\n          </Menu.Item>\n        )}\n        {userCanShare && (\n          <Menu.SubMenu\n            key={MENU_KEYS.SHARE_DASHBOARD}\n            data-test=\"share-dashboard-menu-item\"\n            disabled={isLoading}\n            title={t('Share')}\n          >\n            <ShareMenuItems\n              url={url}\n              copyMenuItemTitle={t('Copy permalink to clipboard')}\n              emailMenuItemTitle={t('Share permalink by email')}\n              emailSubject={emailSubject}\n              emailBody={emailBody}\n              addSuccessToast={addSuccessToast}\n              addDangerToast={addDangerToast}\n              dashboardId={dashboardId}\n            />\n          </Menu.SubMenu>\n        )}\n        {!editMode && userCanCurate && (\n          <Menu.Item\n            key={MENU_KEYS.MANAGE_EMBEDDED}\n            onClick={this.handleMenuClick}\n          >\n            {t('Embed dashboard')}\n          </Menu.Item>\n        )}\n        <Menu.Divider />\n        {!editMode ? (\n          this.state.showReportSubMenu ? (\n            <>\n              <Menu.SubMenu title={t('Manage email report')}>\n                <HeaderReportDropdown\n                  dashboardId={dashboardInfo.id}\n                  setShowReportSubMenu={this.setShowReportSubMenu}\n                  showReportSubMenu={this.state.showReportSubMenu}\n                  setIsDropdownVisible={setIsDropdownVisible}\n                  isDropdownVisible={isDropdownVisible}\n                  useTextMenu\n                />\n              </Menu.SubMenu>\n              <Menu.Divider />\n            </>\n          ) : (\n            <Menu>\n              <HeaderReportDropdown\n                dashboardId={dashboardInfo.id}\n                setShowReportSubMenu={this.setShowReportSubMenu}\n                setIsDropdownVisible={setIsDropdownVisible}\n                isDropdownVisible={isDropdownVisible}\n                useTextMenu\n              />\n            </Menu>\n          )\n        ) : null}\n        {editMode &&\n          filterboxMigrationState !== FILTER_BOX_MIGRATION_STATES.CONVERTED && (\n            <Menu.Item key={MENU_KEYS.SET_FILTER_MAPPING}>\n              <FilterScopeModal\n                className=\"m-r-5\"\n                triggerNode={t('Set filter mapping')}\n              />\n            </Menu.Item>\n          )}\n\n        <Menu.Item key={MENU_KEYS.AUTOREFRESH_MODAL}>\n          <RefreshIntervalModal\n            addSuccessToast={this.props.addSuccessToast}\n            refreshFrequency={refreshFrequency}\n            refreshLimit={refreshLimit}\n            refreshWarning={refreshWarning}\n            onChange={this.changeRefreshInterval}\n            editMode={editMode}\n            triggerNode={<span>{t('Set auto-refresh interval')}</span>}\n          />\n        </Menu.Item>\n      </Menu>\n    );\n  }\n}\n\nHeaderActionsDropdown.propTypes = propTypes;\nHeaderActionsDropdown.defaultProps = defaultProps;\n\nexport default HeaderActionsDropdown;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { t } from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Label from 'src/components/Label';\n\nconst propTypes = {\n  dashboardId: PropTypes.number.isRequired,\n  isPublished: PropTypes.bool.isRequired,\n  savePublished: PropTypes.func.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n  canSave: PropTypes.bool.isRequired,\n};\n\nconst draftButtonTooltip = t(\n  'This dashboard is not published, it will not show up in the list of dashboards. ' +\n    'Click here to publish this dashboard.',\n);\n\nconst draftDivTooltip = t(\n  'This dashboard is not published which means it will not show up in the list of dashboards.' +\n    ' Favorite it to see it there or access it by using the URL directly.',\n);\n\nconst publishedTooltip = t(\n  'This dashboard is published. Click to make it a draft.',\n);\n\nexport default class PublishedStatus extends React.Component {\n  componentDidMount() {\n    this.togglePublished = this.togglePublished.bind(this);\n  }\n\n  togglePublished() {\n    this.props.savePublished(this.props.dashboardId, !this.props.isPublished);\n  }\n\n  render() {\n    // Show everybody the draft badge\n    if (!this.props.isPublished) {\n      // if they can edit the dash, make the badge a button\n      if (this.props.canEdit && this.props.canSave) {\n        return (\n          <Tooltip\n            id=\"unpublished-dashboard-tooltip\"\n            placement=\"bottom\"\n            title={draftButtonTooltip}\n          >\n            <Label\n              onClick={() => {\n                this.togglePublished();\n              }}\n            >\n              {t('Draft')}\n            </Label>\n          </Tooltip>\n        );\n      }\n      return (\n        <Tooltip\n          id=\"unpublished-dashboard-tooltip\"\n          placement=\"bottom\"\n          title={draftDivTooltip}\n        >\n          <Label>{t('Draft')}</Label>\n        </Tooltip>\n      );\n    }\n\n    // Show the published badge for the owner of the dashboard to toggle\n    if (this.props.canEdit && this.props.canSave) {\n      return (\n        <Tooltip\n          id=\"published-dashboard-tooltip\"\n          placement=\"bottom\"\n          title={publishedTooltip}\n        >\n          <Label\n            onClick={() => {\n              this.togglePublished();\n            }}\n          >\n            {t('Published')}\n          </Label>\n        </Tooltip>\n      );\n    }\n\n    // Don't show anything if one doesn't own the dashboard and it is published\n    return null;\n  }\n}\n\nPublishedStatus.propTypes = propTypes;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  onUndo: PropTypes.func.isRequired,\n  onRedo: PropTypes.func.isRequired,\n};\n\nclass UndoRedoKeyListeners extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleKeydown = this.handleKeydown.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  handleKeydown(event) {\n    const controlOrCommand = event.ctrlKey || event.metaKey;\n    if (controlOrCommand) {\n      const isZChar = event.key === 'z' || event.keyCode === 90;\n      const isYChar = event.key === 'y' || event.keyCode === 89;\n      const isEditingMarkdown =\n        document && document.querySelector('.dashboard-markdown--editing');\n      const isEditingTitle =\n        document && document.querySelector('.editable-title--editing');\n\n      if (!isEditingMarkdown && !isEditingTitle && (isZChar || isYChar)) {\n        event.preventDefault();\n        const func = isZChar ? this.props.onUndo : this.props.onRedo;\n        func();\n      }\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nUndoRedoKeyListeners.propTypes = propTypes;\n\nexport default UndoRedoKeyListeners;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport const stopPeriodicRender = (refreshTimer?: number) => {\n  if (refreshTimer) {\n    clearInterval(refreshTimer);\n  }\n};\n\ninterface SetPeriodicRunnerProps {\n  interval?: number;\n  periodicRender: TimerHandler;\n  refreshTimer?: number;\n}\n\nexport default function setPeriodicRunner({\n  interval = 0,\n  periodicRender,\n  refreshTimer,\n}: SetPeriodicRunnerProps) {\n  stopPeriodicRender(refreshTimer);\n\n  if (interval > 0) {\n    return setInterval(periodicRender, interval);\n  }\n  return 0;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useState } from 'react';\nimport {\n  makeApi,\n  styled,\n  SupersetApiError,\n  t,\n  getUiOverrideRegistry,\n} from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport Modal from 'src/components/Modal';\nimport Loading from 'src/components/Loading';\nimport Button from 'src/components/Button';\nimport { Input } from 'src/components/Input';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { FormItem } from 'src/components/Form';\nimport { EmbeddedDashboard } from '../types';\n\nconst uiOverrideRegistry = getUiOverrideRegistry();\n\ntype Props = {\n  dashboardId: string;\n  show: boolean;\n  onHide: () => void;\n};\n\ntype EmbeddedApiPayload = { allowed_domains: string[] };\n\nconst stringToList = (stringyList: string): string[] =>\n  stringyList.split(/(?:\\s|,)+/).filter(x => x);\n\nconst ButtonRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n`;\n\nexport const DashboardEmbedControls = ({ dashboardId, onHide }: Props) => {\n  const { addInfoToast, addDangerToast } = useToasts();\n  const [ready, setReady] = useState(true); // whether we have initialized yet\n  const [loading, setLoading] = useState(false); // whether we are currently doing an async thing\n  const [embedded, setEmbedded] = useState<EmbeddedDashboard | null>(null); // the embedded dashboard config\n  const [allowedDomains, setAllowedDomains] = useState<string>('');\n\n  const endpoint = `/api/v1/dashboard/${dashboardId}/embedded`;\n  // whether saveable changes have been made to the config\n  const isDirty =\n    !embedded ||\n    stringToList(allowedDomains).join() !== embedded.allowed_domains.join();\n\n  const enableEmbedded = useCallback(() => {\n    setLoading(true);\n    makeApi<EmbeddedApiPayload, { result: EmbeddedDashboard }>({\n      method: 'POST',\n      endpoint,\n    })({\n      allowed_domains: stringToList(allowedDomains),\n    })\n      .then(\n        ({ result }) => {\n          setEmbedded(result);\n          setAllowedDomains(result.allowed_domains.join(', '));\n          addInfoToast(t('Changes saved.'));\n        },\n        err => {\n          console.error(err);\n          addDangerToast(\n            t(\n              t('Sorry, something went wrong. The changes could not be saved.'),\n            ),\n          );\n        },\n      )\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [endpoint, allowedDomains]);\n\n  const disableEmbedded = useCallback(() => {\n    Modal.confirm({\n      title: t('Disable embedding?'),\n      content: t('This will remove your current embed configuration.'),\n      okType: 'danger',\n      onOk: () => {\n        setLoading(true);\n        makeApi<{}>({ method: 'DELETE', endpoint })({})\n          .then(\n            () => {\n              setEmbedded(null);\n              setAllowedDomains('');\n              addInfoToast(t('Embedding deactivated.'));\n              onHide();\n            },\n            err => {\n              console.error(err);\n              addDangerToast(\n                t(\n                  'Sorry, something went wrong. Embedding could not be deactivated.',\n                ),\n              );\n            },\n          )\n          .finally(() => {\n            setLoading(false);\n          });\n      },\n    });\n  }, [endpoint]);\n\n  useEffect(() => {\n    setReady(false);\n    makeApi<{}, { result: EmbeddedDashboard }>({\n      method: 'GET',\n      endpoint,\n    })({})\n      .catch(err => {\n        if ((err as SupersetApiError).status === 404) {\n          // 404 just means the dashboard isn't currently embedded\n          return { result: null };\n        }\n        throw err;\n      })\n      .then(({ result }) => {\n        setReady(true);\n        setEmbedded(result);\n        setAllowedDomains(result ? result.allowed_domains.join(', ') : '');\n      });\n  }, [dashboardId]);\n\n  if (!ready) {\n    return <Loading />;\n  }\n\n  const docsDescription = uiOverrideRegistry.get(\n    'embedded.documentation.description',\n  );\n  const docsUrl =\n    uiOverrideRegistry.get('embedded.documentation.url') ??\n    'https://www.npmjs.com/package/@superset-ui/embedded-sdk';\n\n  return (\n    <>\n      <p>\n        {embedded ? (\n          <>\n            {t(\n              'This dashboard is ready to embed. In your application, pass the following id to the SDK:',\n            )}\n            <br />\n            <code>{embedded.uuid}</code>\n          </>\n        ) : (\n          t(\n            'Configure this dashboard to embed it into an external web application.',\n          )\n        )}\n      </p>\n      <p>\n        {t('For further instructions, consult the')}{' '}\n        <a href={docsUrl} target=\"_blank\" rel=\"noreferrer\">\n          {docsDescription\n            ? docsDescription()\n            : t('Superset Embedded SDK documentation.')}\n        </a>\n      </p>\n      <h3>Settings</h3>\n      <FormItem>\n        <label htmlFor=\"allowed-domains\">\n          {t('Allowed Domains (comma separated)')}{' '}\n          <InfoTooltipWithTrigger\n            tooltip={t(\n              'A list of domain names that can embed this dashboard. Leaving this field empty will allow embedding from any domain.',\n            )}\n          />\n        </label>\n        <Input\n          name=\"allowed-domains\"\n          value={allowedDomains}\n          placeholder=\"superset.example.com\"\n          onChange={event => setAllowedDomains(event.target.value)}\n        />\n      </FormItem>\n      <ButtonRow>\n        {embedded ? (\n          <>\n            <Button\n              onClick={disableEmbedded}\n              buttonStyle=\"secondary\"\n              loading={loading}\n            >\n              {t('Deactivate')}\n            </Button>\n            <Button\n              onClick={enableEmbedded}\n              buttonStyle=\"primary\"\n              disabled={!isDirty}\n              loading={loading}\n            >\n              {t('Save changes')}\n            </Button>\n          </>\n        ) : (\n          <Button\n            onClick={enableEmbedded}\n            buttonStyle=\"primary\"\n            loading={loading}\n          >\n            {t('Enable embedding')}\n          </Button>\n        )}\n      </ButtonRow>\n    </>\n  );\n};\n\nexport const DashboardEmbedModal = (props: Props) => {\n  const { show, onHide } = props;\n\n  return (\n    <Modal show={show} onHide={onHide} title={t('Embed')} hideFooter>\n      <DashboardEmbedControls {...props} />\n    </Modal>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport moment from 'moment';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { styled, css, t, getSharedLabelColor } from '@superset-ui/core';\nimport { Global } from '@emotion/react';\nimport { isFeatureEnabled, FeatureFlag } from 'src/featureFlags';\nimport {\n  LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD,\n  LOG_ACTIONS_FORCE_REFRESH_DASHBOARD,\n  LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD,\n} from 'src/logger/LogUtils';\nimport Icons from 'src/components/Icons';\nimport Button from 'src/components/Button';\nimport { AntdButton } from 'src/components/';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport HeaderActionsDropdown from 'src/dashboard/components/Header/HeaderActionsDropdown';\nimport PublishedStatus from 'src/dashboard/components/PublishedStatus';\nimport UndoRedoKeyListeners from 'src/dashboard/components/UndoRedoKeyListeners';\nimport PropertiesModal from 'src/dashboard/components/PropertiesModal';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport { UserWithPermissionsAndRoles } from 'src/types/bootstrapTypes';\nimport {\n  UNDO_LIMIT,\n  SAVE_TYPE_OVERWRITE,\n  DASHBOARD_POSITION_DATA_LIMIT,\n} from 'src/dashboard/util/constants';\nimport setPeriodicRunner, {\n  stopPeriodicRender,\n} from 'src/dashboard/util/setPeriodicRunner';\nimport { options as PeriodicRefreshOptions } from 'src/dashboard/components/RefreshIntervalModal';\nimport findPermission from 'src/dashboard/util/findPermission';\nimport { FILTER_BOX_MIGRATION_STATES } from 'src/explore/constants';\nimport { PageHeaderWithActions } from 'src/components/PageHeaderWithActions';\nimport { DashboardEmbedModal } from '../DashboardEmbedControls';\n\nconst propTypes = {\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  addWarningToast: PropTypes.func.isRequired,\n  user: UserWithPermissionsAndRoles,\n  dashboardInfo: PropTypes.object.isRequired,\n  dashboardTitle: PropTypes.string.isRequired,\n  dataMask: PropTypes.object.isRequired,\n  charts: PropTypes.objectOf(chartPropShape).isRequired,\n  layout: PropTypes.object.isRequired,\n  expandedSlices: PropTypes.object.isRequired,\n  customCss: PropTypes.string.isRequired,\n  colorNamespace: PropTypes.string,\n  colorScheme: PropTypes.string,\n  setColorSchemeAndUnsavedChanges: PropTypes.func.isRequired,\n  isStarred: PropTypes.bool.isRequired,\n  isPublished: PropTypes.bool.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  onSave: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  fetchFaveStar: PropTypes.func.isRequired,\n  fetchCharts: PropTypes.func.isRequired,\n  saveFaveStar: PropTypes.func.isRequired,\n  savePublished: PropTypes.func.isRequired,\n  updateDashboardTitle: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  setEditMode: PropTypes.func.isRequired,\n  showBuilderPane: PropTypes.func.isRequired,\n  updateCss: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  hasUnsavedChanges: PropTypes.bool.isRequired,\n  maxUndoHistoryExceeded: PropTypes.bool.isRequired,\n  lastModifiedTime: PropTypes.number.isRequired,\n\n  // redux\n  onRefresh: PropTypes.func.isRequired,\n  onUndo: PropTypes.func.isRequired,\n  onRedo: PropTypes.func.isRequired,\n  undoLength: PropTypes.number.isRequired,\n  redoLength: PropTypes.number.isRequired,\n  setMaxUndoHistoryExceeded: PropTypes.func.isRequired,\n  maxUndoHistoryToast: PropTypes.func.isRequired,\n  refreshFrequency: PropTypes.number.isRequired,\n  shouldPersistRefreshFrequency: PropTypes.bool.isRequired,\n  setRefreshFrequency: PropTypes.func.isRequired,\n  dashboardInfoChanged: PropTypes.func.isRequired,\n  dashboardTitleChanged: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  colorNamespace: undefined,\n  colorScheme: undefined,\n};\n\nconst headerContainerStyle = theme => css`\n  border-bottom: 1px solid ${theme.colors.grayscale.light2};\n`;\n\nconst editButtonStyle = theme => css`\n  color: ${theme.colors.primary.dark2};\n`;\n\nconst actionButtonsStyle = theme => css`\n  display: flex;\n  align-items: center;\n\n  .action-schedule-report {\n    margin-left: ${theme.gridUnit * 2}px;\n  }\n\n  .undoRedo {\n    margin-right: ${theme.gridUnit * 2}px;\n  }\n`;\n\nconst StyledUndoRedoButton = styled(AntdButton)`\n  padding: 0;\n  &:hover {\n    background: transparent;\n  }\n`;\n\nconst undoRedoStyle = theme => css`\n  color: ${theme.colors.grayscale.light1};\n  &:hover {\n    color: ${theme.colors.grayscale.base};\n  }\n`;\n\nconst undoRedoEmphasized = theme => css`\n  color: ${theme.colors.grayscale.base};\n`;\n\nconst undoRedoDisabled = theme => css`\n  color: ${theme.colors.grayscale.light2};\n`;\n\nconst saveBtnStyle = theme => css`\n  min-width: ${theme.gridUnit * 17}px;\n  height: ${theme.gridUnit * 8}px;\n`;\n\nconst discardBtnStyle = theme => css`\n  min-width: ${theme.gridUnit * 22}px;\n  height: ${theme.gridUnit * 8}px;\n`;\n\nclass Header extends React.PureComponent {\n  static discardChanges() {\n    const url = new URL(window.location.href);\n\n    url.searchParams.delete('edit');\n    window.location.assign(url);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      didNotifyMaxUndoHistoryToast: false,\n      emphasizeUndo: false,\n      emphasizeRedo: false,\n      showingPropertiesModal: false,\n      isDropdownVisible: false,\n    };\n\n    this.handleChangeText = this.handleChangeText.bind(this);\n    this.handleCtrlZ = this.handleCtrlZ.bind(this);\n    this.handleCtrlY = this.handleCtrlY.bind(this);\n    this.toggleEditMode = this.toggleEditMode.bind(this);\n    this.forceRefresh = this.forceRefresh.bind(this);\n    this.startPeriodicRender = this.startPeriodicRender.bind(this);\n    this.overwriteDashboard = this.overwriteDashboard.bind(this);\n    this.showPropertiesModal = this.showPropertiesModal.bind(this);\n    this.hidePropertiesModal = this.hidePropertiesModal.bind(this);\n    this.setIsDropdownVisible = this.setIsDropdownVisible.bind(this);\n  }\n\n  componentDidMount() {\n    const { refreshFrequency } = this.props;\n    this.startPeriodicRender(refreshFrequency * 1000);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.refreshFrequency !== prevProps.refreshFrequency) {\n      const { refreshFrequency } = this.props;\n      this.startPeriodicRender(refreshFrequency * 1000);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (\n      UNDO_LIMIT - nextProps.undoLength <= 0 &&\n      !this.state.didNotifyMaxUndoHistoryToast\n    ) {\n      this.setState(() => ({ didNotifyMaxUndoHistoryToast: true }));\n      this.props.maxUndoHistoryToast();\n    }\n    if (\n      nextProps.undoLength > UNDO_LIMIT &&\n      !this.props.maxUndoHistoryExceeded\n    ) {\n      this.props.setMaxUndoHistoryExceeded();\n    }\n  }\n\n  componentWillUnmount() {\n    stopPeriodicRender(this.refreshTimer);\n    this.props.setRefreshFrequency(0);\n    clearTimeout(this.ctrlYTimeout);\n    clearTimeout(this.ctrlZTimeout);\n  }\n\n  handleChangeText(nextText) {\n    const { updateDashboardTitle, onChange } = this.props;\n    if (nextText && this.props.dashboardTitle !== nextText) {\n      updateDashboardTitle(nextText);\n      onChange();\n    }\n  }\n\n  setIsDropdownVisible(visible) {\n    this.setState({\n      isDropdownVisible: visible,\n    });\n  }\n\n  handleCtrlY() {\n    this.props.onRedo();\n    this.setState({ emphasizeRedo: true }, () => {\n      if (this.ctrlYTimeout) clearTimeout(this.ctrlYTimeout);\n      this.ctrlYTimeout = setTimeout(() => {\n        this.setState({ emphasizeRedo: false });\n      }, 100);\n    });\n  }\n\n  handleCtrlZ() {\n    this.props.onUndo();\n    this.setState({ emphasizeUndo: true }, () => {\n      if (this.ctrlZTimeout) clearTimeout(this.ctrlZTimeout);\n      this.ctrlZTimeout = setTimeout(() => {\n        this.setState({ emphasizeUndo: false });\n      }, 100);\n    });\n  }\n\n  forceRefresh() {\n    if (!this.props.isLoading) {\n      const chartList = Object.keys(this.props.charts);\n      this.props.logEvent(LOG_ACTIONS_FORCE_REFRESH_DASHBOARD, {\n        force: true,\n        interval: 0,\n        chartCount: chartList.length,\n      });\n      return this.props.onRefresh(\n        chartList,\n        true,\n        0,\n        this.props.dashboardInfo.id,\n      );\n    }\n    return false;\n  }\n\n  startPeriodicRender(interval) {\n    let intervalMessage;\n    if (interval) {\n      const predefinedValue = PeriodicRefreshOptions.find(\n        option => option.value === interval / 1000,\n      );\n      if (predefinedValue) {\n        intervalMessage = predefinedValue.label;\n      } else {\n        intervalMessage = moment.duration(interval, 'millisecond').humanize();\n      }\n    }\n\n    const periodicRender = () => {\n      const { fetchCharts, logEvent, charts, dashboardInfo } = this.props;\n      const { metadata } = dashboardInfo;\n      const immune = metadata.timed_refresh_immune_slices || [];\n      const affectedCharts = Object.values(charts)\n        .filter(chart => immune.indexOf(chart.id) === -1)\n        .map(chart => chart.id);\n\n      logEvent(LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD, {\n        interval,\n        chartCount: affectedCharts.length,\n      });\n      this.props.addWarningToast(\n        t(\n          `This dashboard is currently auto refreshing; the next auto refresh will be in %s.`,\n          intervalMessage,\n        ),\n      );\n      if (dashboardInfo.common.conf.DASHBOARD_AUTO_REFRESH_MODE === 'fetch') {\n        // force-refresh while auto-refresh in dashboard\n        return fetchCharts(\n          affectedCharts,\n          false,\n          interval * 0.2,\n          dashboardInfo.id,\n        );\n      }\n      return fetchCharts(\n        affectedCharts,\n        true,\n        interval * 0.2,\n        dashboardInfo.id,\n      );\n    };\n\n    this.refreshTimer = setPeriodicRunner({\n      interval,\n      periodicRender,\n      refreshTimer: this.refreshTimer,\n    });\n  }\n\n  toggleEditMode() {\n    this.props.logEvent(LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD, {\n      edit_mode: !this.props.editMode,\n    });\n    this.props.setEditMode(!this.props.editMode);\n  }\n\n  overwriteDashboard() {\n    const {\n      dashboardTitle,\n      layout: positions,\n      colorScheme,\n      colorNamespace,\n      customCss,\n      dashboardInfo,\n      refreshFrequency: currentRefreshFrequency,\n      shouldPersistRefreshFrequency,\n      lastModifiedTime,\n      slug,\n    } = this.props;\n\n    // check refresh frequency is for current session or persist\n    const refreshFrequency = shouldPersistRefreshFrequency\n      ? currentRefreshFrequency\n      : dashboardInfo.metadata?.refresh_frequency;\n\n    const currentColorScheme =\n      dashboardInfo?.metadata?.color_scheme || colorScheme;\n    const currentColorNamespace =\n      dashboardInfo?.metadata?.color_namespace || colorNamespace;\n    const currentSharedLabelColors = getSharedLabelColor().getColorMap(\n      currentColorNamespace,\n      currentColorScheme,\n    );\n\n    const data = {\n      certified_by: dashboardInfo.certified_by,\n      certification_details: dashboardInfo.certification_details,\n      css: customCss,\n      dashboard_title: dashboardTitle,\n      last_modified_time: lastModifiedTime,\n      owners: dashboardInfo.owners,\n      roles: dashboardInfo.roles,\n      slug,\n      metadata: {\n        ...dashboardInfo?.metadata,\n        color_namespace: currentColorNamespace,\n        color_scheme: currentColorScheme,\n        positions,\n        refresh_frequency: refreshFrequency,\n        shared_label_colors: currentSharedLabelColors,\n      },\n    };\n\n    // make sure positions data less than DB storage limitation:\n    const positionJSONLength = safeStringify(positions).length;\n    const limit =\n      dashboardInfo.common.conf.SUPERSET_DASHBOARD_POSITION_DATA_LIMIT ||\n      DASHBOARD_POSITION_DATA_LIMIT;\n    if (positionJSONLength >= limit) {\n      this.props.addDangerToast(\n        t(\n          'Your dashboard is too large. Please reduce its size before saving it.',\n        ),\n      );\n    } else {\n      if (positionJSONLength >= limit * 0.9) {\n        this.props.addWarningToast('Your dashboard is near the size limit.');\n      }\n\n      this.props.onSave(data, dashboardInfo.id, SAVE_TYPE_OVERWRITE);\n    }\n  }\n\n  showPropertiesModal() {\n    this.setState({ showingPropertiesModal: true });\n  }\n\n  hidePropertiesModal() {\n    this.setState({ showingPropertiesModal: false });\n  }\n\n  showEmbedModal = () => {\n    this.setState({ showingEmbedModal: true });\n  };\n\n  hideEmbedModal = () => {\n    this.setState({ showingEmbedModal: false });\n  };\n\n  render() {\n    const {\n      dashboardTitle,\n      layout,\n      expandedSlices,\n      customCss,\n      colorNamespace,\n      dataMask,\n      setColorSchemeAndUnsavedChanges,\n      colorScheme,\n      onUndo,\n      onRedo,\n      undoLength,\n      redoLength,\n      onChange,\n      onSave,\n      updateCss,\n      editMode,\n      isPublished,\n      user,\n      dashboardInfo,\n      hasUnsavedChanges,\n      isLoading,\n      refreshFrequency,\n      shouldPersistRefreshFrequency,\n      setRefreshFrequency,\n      lastModifiedTime,\n      filterboxMigrationState,\n    } = this.props;\n\n    const userCanEdit =\n      dashboardInfo.dash_edit_perm &&\n      filterboxMigrationState !== FILTER_BOX_MIGRATION_STATES.REVIEWING &&\n      !dashboardInfo.is_managed_externally;\n    const userCanShare = dashboardInfo.dash_share_perm;\n    const userCanSaveAs =\n      dashboardInfo.dash_save_perm &&\n      filterboxMigrationState !== FILTER_BOX_MIGRATION_STATES.REVIEWING;\n    const userCanCurate =\n      isFeatureEnabled(FeatureFlag.EMBEDDED_SUPERSET) &&\n      findPermission('can_set_embedded', 'Dashboard', user.roles);\n    const refreshLimit =\n      dashboardInfo.common?.conf?.SUPERSET_DASHBOARD_PERIODICAL_REFRESH_LIMIT;\n    const refreshWarning =\n      dashboardInfo.common?.conf\n        ?.SUPERSET_DASHBOARD_PERIODICAL_REFRESH_WARNING_MESSAGE;\n\n    const handleOnPropertiesChange = updates => {\n      const { dashboardInfoChanged, dashboardTitleChanged } = this.props;\n      dashboardInfoChanged({\n        slug: updates.slug,\n        metadata: JSON.parse(updates.jsonMetadata || '{}'),\n        certified_by: updates.certifiedBy,\n        certification_details: updates.certificationDetails,\n        owners: updates.owners,\n        roles: updates.roles,\n      });\n      setColorSchemeAndUnsavedChanges(updates.colorScheme);\n      dashboardTitleChanged(updates.title);\n    };\n\n    return (\n      <div\n        css={headerContainerStyle}\n        data-test-id={dashboardInfo.id}\n        className=\"dashboard-header-container\"\n      >\n        <PageHeaderWithActions\n          editableTitleProps={{\n            title: dashboardTitle,\n            canEdit: userCanEdit && editMode,\n            onSave: this.handleChangeText,\n            placeholder: t('Add the name of the dashboard'),\n            label: t('Dashboard title'),\n            showTooltip: false,\n          }}\n          certificatiedBadgeProps={{\n            certifiedBy: dashboardInfo.certified_by,\n            details: dashboardInfo.certification_details,\n          }}\n          faveStarProps={{\n            itemId: dashboardInfo.id,\n            fetchFaveStar: this.props.fetchFaveStar,\n            saveFaveStar: this.props.saveFaveStar,\n            isStarred: this.props.isStarred,\n            showTooltip: true,\n          }}\n          titlePanelAdditionalItems={\n            <PublishedStatus\n              dashboardId={dashboardInfo.id}\n              isPublished={isPublished}\n              savePublished={this.props.savePublished}\n              canEdit={userCanEdit}\n              canSave={userCanSaveAs}\n            />\n          }\n          rightPanelAdditionalItems={\n            <div className=\"button-container\">\n              {userCanSaveAs && (\n                <div\n                  className=\"button-container\"\n                  data-test=\"dashboard-edit-actions\"\n                >\n                  {editMode && (\n                    <div css={actionButtonsStyle}>\n                      <div className=\"undoRedo\">\n                        <Tooltip\n                          id=\"dashboard-undo-tooltip\"\n                          title={t('Undo the action')}\n                        >\n                          <StyledUndoRedoButton\n                            type=\"text\"\n                            disabled={undoLength < 1}\n                          >\n                            <Icons.Undo\n                              css={[\n                                undoRedoStyle,\n                                this.state.emphasizeUndo && undoRedoEmphasized,\n                                undoLength < 1 && undoRedoDisabled,\n                              ]}\n                              onClick={undoLength && onUndo}\n                              data-test=\"undo-action\"\n                              iconSize=\"xl\"\n                            />\n                          </StyledUndoRedoButton>\n                        </Tooltip>\n                        <Tooltip\n                          id=\"dashboard-redo-tooltip\"\n                          title={t('Redo the action')}\n                        >\n                          <StyledUndoRedoButton\n                            type=\"text\"\n                            disabled={redoLength < 1}\n                          >\n                            <Icons.Redo\n                              css={[\n                                undoRedoStyle,\n                                this.state.emphasizeRedo && undoRedoEmphasized,\n                                redoLength < 1 && undoRedoDisabled,\n                              ]}\n                              onClick={redoLength && onRedo}\n                              data-test=\"redo-action\"\n                              iconSize=\"xl\"\n                            />\n                          </StyledUndoRedoButton>\n                        </Tooltip>\n                      </div>\n                      <Button\n                        css={discardBtnStyle}\n                        buttonSize=\"small\"\n                        onClick={this.constructor.discardChanges}\n                        buttonStyle=\"default\"\n                        data-test=\"discard-changes-button\"\n                        aria-label={t('Discard')}\n                      >\n                        {t('Discard')}\n                      </Button>\n                      <Button\n                        css={saveBtnStyle}\n                        buttonSize=\"small\"\n                        disabled={!hasUnsavedChanges}\n                        buttonStyle=\"primary\"\n                        onClick={this.overwriteDashboard}\n                        data-test=\"header-save-button\"\n                        aria-label={t('Save')}\n                      >\n                        {t('Save')}\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              )}\n              {editMode ? (\n                <UndoRedoKeyListeners\n                  onUndo={this.handleCtrlZ}\n                  onRedo={this.handleCtrlY}\n                />\n              ) : (\n                <div css={actionButtonsStyle}>\n                  {userCanEdit && (\n                    <Button\n                      buttonStyle=\"secondary\"\n                      onClick={this.toggleEditMode}\n                      data-test=\"query-save-button\"\n                      className=\"action-button\"\n                      css={editButtonStyle}\n                      aria-label={t('Edit dashboard')}\n                    >\n                      {t('Edit dashboard')}\n                    </Button>\n                  )}\n                </div>\n              )}\n            </div>\n          }\n          menuDropdownProps={{\n            getPopupContainer: triggerNode =>\n              triggerNode.closest('.header-with-actions'),\n            visible: this.state.isDropdownVisible,\n            onVisibleChange: this.setIsDropdownVisible,\n          }}\n          additionalActionsMenu={\n            <HeaderActionsDropdown\n              addSuccessToast={this.props.addSuccessToast}\n              addDangerToast={this.props.addDangerToast}\n              dashboardId={dashboardInfo.id}\n              dashboardTitle={dashboardTitle}\n              dashboardInfo={dashboardInfo}\n              dataMask={dataMask}\n              layout={layout}\n              expandedSlices={expandedSlices}\n              customCss={customCss}\n              colorNamespace={colorNamespace}\n              colorScheme={colorScheme}\n              onSave={onSave}\n              onChange={onChange}\n              forceRefreshAllCharts={this.forceRefresh}\n              startPeriodicRender={this.startPeriodicRender}\n              refreshFrequency={refreshFrequency}\n              shouldPersistRefreshFrequency={shouldPersistRefreshFrequency}\n              setRefreshFrequency={setRefreshFrequency}\n              updateCss={updateCss}\n              editMode={editMode}\n              hasUnsavedChanges={hasUnsavedChanges}\n              userCanEdit={userCanEdit}\n              userCanShare={userCanShare}\n              userCanSave={userCanSaveAs}\n              userCanCurate={userCanCurate}\n              isLoading={isLoading}\n              showPropertiesModal={this.showPropertiesModal}\n              manageEmbedded={this.showEmbedModal}\n              refreshLimit={refreshLimit}\n              refreshWarning={refreshWarning}\n              lastModifiedTime={lastModifiedTime}\n              filterboxMigrationState={filterboxMigrationState}\n              isDropdownVisible={this.state.isDropdownVisible}\n              setIsDropdownVisible={this.setIsDropdownVisible}\n            />\n          }\n          showFaveStar={user?.userId && dashboardInfo?.id}\n          showTitlePanelItems={!editMode}\n        />\n        {this.state.showingPropertiesModal && (\n          <PropertiesModal\n            dashboardId={dashboardInfo.id}\n            dashboardInfo={dashboardInfo}\n            dashboardTitle={dashboardTitle}\n            show={this.state.showingPropertiesModal}\n            onHide={this.hidePropertiesModal}\n            colorScheme={this.props.colorScheme}\n            onSubmit={handleOnPropertiesChange}\n            onlyApply\n          />\n        )}\n\n        {userCanCurate && (\n          <DashboardEmbedModal\n            show={this.state.showingEmbedModal}\n            onHide={this.hideEmbedModal}\n            dashboardId={dashboardInfo.id}\n          />\n        )}\n        <Global\n          styles={css`\n            .ant-menu-vertical {\n              border-right: none;\n            }\n          `}\n        />\n      </div>\n    );\n  }\n}\n\nHeader.propTypes = propTypes;\nHeader.defaultProps = defaultProps;\n\nexport default Header;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport default function isDashboardLoading(charts) {\n  return Object.values(charts).some(\n    chart => chart.chartUpdateStartTime > (chart.chartUpdateEndTime || 0),\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { updateDataMask } from 'src/dataMask/actions';\nimport DashboardHeader from 'src/dashboard/components/Header';\nimport isDashboardLoading from 'src/dashboard/util/isDashboardLoading';\n\nimport { dashboardInfoChanged } from 'src/dashboard/actions/dashboardInfo';\n\nimport {\n  setEditMode,\n  showBuilderPane,\n  fetchFaveStar,\n  saveFaveStar,\n  savePublished,\n  setColorSchemeAndUnsavedChanges,\n  fetchCharts,\n  updateCss,\n  onChange,\n  saveDashboardRequest,\n  setMaxUndoHistoryExceeded,\n  maxUndoHistoryToast,\n  setRefreshFrequency,\n  onRefresh,\n} from 'src/dashboard/actions/dashboardState';\n\nimport {\n  undoLayoutAction,\n  redoLayoutAction,\n  updateDashboardTitle,\n  dashboardTitleChanged,\n} from 'src/dashboard/actions/dashboardLayout';\nimport {\n  addSuccessToast,\n  addDangerToast,\n  addWarningToast,\n} from 'src/components/MessageToasts/actions';\n\nimport { logEvent } from 'src/logger/actions';\nimport { DASHBOARD_HEADER_ID } from 'src/dashboard/util/constants';\nimport { fetchUISpecificReport } from 'src/reports/actions/reports';\n\nfunction mapStateToProps({\n  dashboardLayout: undoableLayout,\n  dashboardState,\n  reports,\n  dashboardInfo,\n  charts,\n  dataMask,\n  user,\n}) {\n  return {\n    dashboardInfo,\n    undoLength: undoableLayout.past.length,\n    redoLength: undoableLayout.future.length,\n    layout: undoableLayout.present,\n    dashboardTitle: (\n      (undoableLayout.present[DASHBOARD_HEADER_ID] || {}).meta || {}\n    ).text,\n    expandedSlices: dashboardState.expandedSlices,\n    refreshFrequency: dashboardState.refreshFrequency,\n    shouldPersistRefreshFrequency:\n      !!dashboardState.shouldPersistRefreshFrequency,\n    customCss: dashboardState.css,\n    colorNamespace: dashboardState.colorNamespace,\n    colorScheme: dashboardState.colorScheme,\n    charts,\n    dataMask,\n    user,\n    isStarred: !!dashboardState.isStarred,\n    isPublished: !!dashboardState.isPublished,\n    isLoading: isDashboardLoading(charts),\n    hasUnsavedChanges: !!dashboardState.hasUnsavedChanges,\n    maxUndoHistoryExceeded: !!dashboardState.maxUndoHistoryExceeded,\n    lastModifiedTime: Math.max(\n      dashboardState.lastModifiedTime,\n      dashboardInfo.last_modified_time,\n    ),\n    editMode: !!dashboardState.editMode,\n    slug: dashboardInfo.slug,\n    metadata: dashboardInfo.metadata,\n    reports,\n    filterboxMigrationState: dashboardState.filterboxMigrationState,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      addSuccessToast,\n      addDangerToast,\n      addWarningToast,\n      onUndo: undoLayoutAction,\n      onRedo: redoLayoutAction,\n      setEditMode,\n      showBuilderPane,\n      setColorSchemeAndUnsavedChanges,\n      fetchFaveStar,\n      saveFaveStar,\n      savePublished,\n      fetchCharts,\n      updateDashboardTitle,\n      updateCss,\n      onChange,\n      onSave: saveDashboardRequest,\n      setMaxUndoHistoryExceeded,\n      maxUndoHistoryToast,\n      logEvent,\n      setRefreshFrequency,\n      onRefresh,\n      dashboardInfoChanged,\n      dashboardTitleChanged,\n      updateDataMask,\n      fetchUISpecificReport,\n    },\n    dispatch,\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DashboardHeader);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { MouseEventHandler } from 'react';\nimport { styled } from '@superset-ui/core';\n\ninterface IconButtonProps {\n  icon: JSX.Element;\n  label?: string;\n  onClick: MouseEventHandler<HTMLDivElement>;\n}\n\nconst StyledDiv = styled.div`\n  display: flex;\n  align-items: center;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  &:hover {\n    color: ${({ theme }) => theme.colors.primary.base};\n  }\n`;\n\nconst StyledSpan = styled.span`\n  margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst IconButton = ({ icon, label, onClick }: IconButtonProps) => (\n  <StyledDiv\n    tabIndex={0}\n    role=\"button\"\n    onClick={e => {\n      e.preventDefault();\n      onClick(e);\n    }}\n  >\n    {icon}\n    {label && <StyledSpan>{label}</StyledSpan>}\n  </StyledDiv>\n);\n\nexport default IconButton;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { DataRecordFilters } from '@superset-ui/core';\n\nexport default function getEffectiveExtraFilters(filters: DataRecordFilters) {\n  return Object.entries(filters)\n    .map(([column, values]) => ({\n      col: column,\n      op: Array.isArray(values) ? 'IN' : '==',\n      val: values,\n    }))\n    .filter(filter => filter.val !== null);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DataMaskStateWithId,\n  Filters,\n  JsonObject,\n  NativeFilterScope,\n} from '@superset-ui/core';\nimport { CHART_TYPE } from './componentTypes';\nimport { ActiveFilters, Layout, LayoutItem } from '../types';\nimport { ChartConfiguration } from '../reducers/types';\nimport { DASHBOARD_ROOT_ID } from './constants';\n\n// Looking for affected chart scopes and values\nexport const findAffectedCharts = ({\n  child,\n  layout,\n  scope,\n  activeFilters,\n  filterId,\n  extraFormData,\n}: {\n  child: string;\n  layout: { [key: string]: LayoutItem };\n  scope: NativeFilterScope;\n  activeFilters: ActiveFilters;\n  filterId: string;\n  extraFormData: any;\n}) => {\n  const chartId = layout[child]?.meta?.chartId;\n  if (layout[child].type === CHART_TYPE) {\n    // Ignore excluded charts\n    if (scope.excluded.includes(chartId)) {\n      return;\n    }\n    if (!activeFilters[filterId]) {\n      // Small mutation but simplify logic\n      // eslint-disable-next-line no-param-reassign\n      activeFilters[filterId] = {\n        scope: [],\n        values: extraFormData,\n      };\n    }\n    // Add not excluded chart scopes(to know what charts refresh) and values(refresh only if its value changed)\n    activeFilters[filterId].scope.push(chartId);\n    return;\n  }\n  // If child is not chart, recursive iterate over its children\n  layout[child].children.forEach((child: string) =>\n    findAffectedCharts({\n      child,\n      layout,\n      scope,\n      activeFilters,\n      filterId,\n      extraFormData,\n    }),\n  );\n};\n\nexport const getRelevantDataMask = (\n  dataMask: DataMaskStateWithId,\n  prop: string,\n): JsonObject | DataMaskStateWithId =>\n  Object.values(dataMask)\n    .filter(item => item[prop])\n    .reduce(\n      (prev, next) => ({ ...prev, [next.id]: prop ? next[prop] : next }),\n      {},\n    );\n\nexport const getAllActiveFilters = ({\n  chartConfiguration,\n  nativeFilters,\n  dataMask,\n  layout,\n}: {\n  chartConfiguration: ChartConfiguration;\n  dataMask: DataMaskStateWithId;\n  nativeFilters: Filters;\n  layout: Layout;\n}): ActiveFilters => {\n  const activeFilters = {};\n\n  // Combine native filters with cross filters, because they have similar logic\n  Object.values(dataMask).forEach(({ id: filterId, extraFormData }) => {\n    const scope = nativeFilters?.[filterId]?.scope ??\n      chartConfiguration?.[filterId]?.crossFilters?.scope ?? {\n        rootPath: [DASHBOARD_ROOT_ID],\n        excluded: [filterId],\n      };\n    // Iterate over all roots to find all affected charts\n    scope.rootPath.forEach((layoutItemId: string | number) => {\n      layout[layoutItemId]?.children?.forEach((child: string) => {\n        // Need exclude from affected charts, charts that located in scope `excluded`\n        findAffectedCharts({\n          child,\n          layout,\n          scope,\n          activeFilters,\n          filterId,\n          extraFormData,\n        });\n      });\n    });\n  });\n  return activeFilters;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DataMaskStateWithId,\n  DataRecordFilters,\n  JsonObject,\n  NativeFiltersState,\n} from '@superset-ui/core';\nimport { ChartQueryPayload, Charts, LayoutItem } from 'src/dashboard/types';\nimport { getExtraFormData } from 'src/dashboard/components/nativeFilters/utils';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport getEffectiveExtraFilters from './getEffectiveExtraFilters';\nimport { ChartConfiguration } from '../../reducers/types';\nimport { getAllActiveFilters } from '../activeAllDashboardFilters';\n\n// We cache formData objects so that our connected container components don't always trigger\n// render cascades. we cannot leverage the reselect library because our cache size is >1\nconst cachedFiltersByChart = {};\nconst cachedFormdataByChart = {};\n\nexport interface GetFormDataWithExtraFiltersArguments {\n  chartConfiguration: ChartConfiguration;\n  chart: ChartQueryPayload;\n  charts: Charts;\n  filters: DataRecordFilters;\n  layout: { [key: string]: LayoutItem };\n  colorScheme?: string;\n  colorNamespace?: string;\n  sliceId: number;\n  dataMask: DataMaskStateWithId;\n  nativeFilters: NativeFiltersState;\n  extraControls: Record<string, string | boolean | null>;\n  labelColors?: Record<string, string>;\n  sharedLabelColors?: Record<string, string>;\n}\n\n// this function merge chart's formData with dashboard filters value,\n// and generate a new formData which will be used in the new query.\n// filters param only contains those applicable to this chart.\nexport default function getFormDataWithExtraFilters({\n  chart,\n  charts,\n  filters,\n  nativeFilters,\n  chartConfiguration,\n  colorScheme,\n  colorNamespace,\n  sliceId,\n  layout,\n  dataMask,\n  extraControls,\n  labelColors,\n  sharedLabelColors,\n}: GetFormDataWithExtraFiltersArguments) {\n  // if dashboard metadata + filters have not changed, use cache if possible\n  const cachedFormData = cachedFormdataByChart[sliceId];\n  if (\n    cachedFiltersByChart[sliceId] === filters &&\n    areObjectsEqual(cachedFormData?.color_scheme, colorScheme, {\n      ignoreUndefined: true,\n    }) &&\n    areObjectsEqual(cachedFormData?.color_namespace, colorNamespace, {\n      ignoreUndefined: true,\n    }) &&\n    areObjectsEqual(cachedFormData?.label_colors, labelColors, {\n      ignoreUndefined: true,\n    }) &&\n    areObjectsEqual(cachedFormData?.shared_label_colors, sharedLabelColors, {\n      ignoreUndefined: true,\n    }) &&\n    !!cachedFormData &&\n    areObjectsEqual(cachedFormData?.dataMask, dataMask, {\n      ignoreUndefined: true,\n    }) &&\n    areObjectsEqual(cachedFormData?.extraControls, extraControls, {\n      ignoreUndefined: true,\n    })\n  ) {\n    return cachedFormData;\n  }\n\n  let extraData: { extra_form_data?: JsonObject } = {};\n  const activeFilters = getAllActiveFilters({\n    chartConfiguration,\n    dataMask,\n    layout,\n    nativeFilters: nativeFilters.filters,\n  });\n  const filterIdsAppliedOnChart = Object.entries(activeFilters)\n    .filter(([, { scope }]) => scope.includes(chart.id))\n    .map(([filterId]) => filterId);\n  if (filterIdsAppliedOnChart.length) {\n    extraData = {\n      extra_form_data: getExtraFormData(\n        dataMask,\n        charts,\n        filterIdsAppliedOnChart,\n      ),\n    };\n  }\n\n  const formData = {\n    ...chart.formData,\n    label_colors: labelColors,\n    shared_label_colors: sharedLabelColors,\n    ...(colorScheme && { color_scheme: colorScheme }),\n    extra_filters: getEffectiveExtraFilters(filters),\n    ...extraData,\n    ...extraControls,\n  };\n\n  cachedFiltersByChart[sliceId] = filters;\n  cachedFormdataByChart[sliceId] = { ...formData, dataMask, extraControls };\n\n  return formData;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { ReactNode } from 'react';\n\nexport enum ScopingType {\n  all,\n  specific,\n}\n\n/** UI Ant tree type */\nexport type TreeItem = {\n  children: TreeItem[];\n  key: string;\n  title: ReactNode;\n};\n\nexport type BuildTreeLeafTitle = (\n  label: string,\n  hasTooltip: boolean,\n  tooltipTitle?: string,\n) => ReactNode;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Charts, Layout, LayoutItem } from 'src/dashboard/types';\nimport {\n  CHART_TYPE,\n  DASHBOARD_ROOT_TYPE,\n  TAB_TYPE,\n} from 'src/dashboard/util/componentTypes';\nimport { DASHBOARD_ROOT_ID } from 'src/dashboard/util/constants';\nimport { NativeFilterScope, t } from '@superset-ui/core';\nimport { BuildTreeLeafTitle, TreeItem } from './types';\n\nexport const isShowTypeInTree = ({ type, meta }: LayoutItem, charts?: Charts) =>\n  (type === TAB_TYPE || type === CHART_TYPE || type === DASHBOARD_ROOT_TYPE) &&\n  (!charts || charts[meta?.chartId]?.formData?.viz_type !== 'filter_box');\n\nexport const buildTree = (\n  node: LayoutItem,\n  treeItem: TreeItem,\n  layout: Layout,\n  charts: Charts,\n  validNodes: string[],\n  initiallyExcludedCharts: number[],\n  buildTreeLeafTitle: BuildTreeLeafTitle,\n) => {\n  let itemToPass: TreeItem = treeItem;\n  if (\n    isShowTypeInTree(node, charts) &&\n    node.type !== DASHBOARD_ROOT_TYPE &&\n    validNodes.includes(node.id)\n  ) {\n    const title = buildTreeLeafTitle(\n      node.meta.sliceNameOverride ||\n        node.meta.sliceName ||\n        node.meta.text ||\n        node.meta.defaultText ||\n        node.id.toString(),\n      initiallyExcludedCharts.includes(node.meta?.chartId),\n      t(\n        \"This chart might be incompatible with the filter (datasets don't match)\",\n      ),\n    );\n\n    const currentTreeItem = {\n      key: node.id,\n      title,\n      children: [],\n    };\n    treeItem.children.push(currentTreeItem);\n    itemToPass = currentTreeItem;\n  }\n  node.children.forEach(child =>\n    buildTree(\n      layout[child],\n      itemToPass,\n      layout,\n      charts,\n      validNodes,\n      initiallyExcludedCharts,\n      buildTreeLeafTitle,\n    ),\n  );\n};\n\nconst addInvisibleParents = (layout: Layout, item: string) => [\n  ...(layout[item]?.children || []),\n  ...Object.values(layout)\n    .filter(\n      val =>\n        val.parents &&\n        val.parents[val.parents.length - 1] === item &&\n        !isShowTypeInTree(layout[val.parents[val.parents.length - 1]]),\n    )\n    .map(({ id }) => id),\n];\n\n// Generate checked options for Ant tree from redux scope\nconst checkTreeItem = (\n  checkedItems: string[],\n  layout: Layout,\n  items: string[],\n  excluded: number[],\n) => {\n  items.forEach(item => {\n    checkTreeItem(\n      checkedItems,\n      layout,\n      addInvisibleParents(layout, item),\n      excluded,\n    );\n    if (\n      layout[item]?.type === CHART_TYPE &&\n      !excluded.includes(layout[item]?.meta.chartId)\n    ) {\n      checkedItems.push(item);\n    }\n  });\n};\n\nexport const getTreeCheckedItems = (\n  scope: NativeFilterScope,\n  layout: Layout,\n) => {\n  const checkedItems: string[] = [];\n  checkTreeItem(checkedItems, layout, [...scope.rootPath], [...scope.excluded]);\n  return [...new Set(checkedItems)];\n};\n\n// Looking for first common parent for selected charts/tabs/tab\nexport const findFilterScope = (\n  checkedKeys: string[],\n  layout: Layout,\n): NativeFilterScope => {\n  if (!checkedKeys.length) {\n    return {\n      rootPath: [],\n      excluded: [],\n    };\n  }\n\n  // Get arrays of parents for selected charts\n  const checkedItemParents = checkedKeys\n    .filter(item => layout[item]?.type === CHART_TYPE)\n    .map(key => {\n      const parents = [DASHBOARD_ROOT_ID, ...(layout[key]?.parents || [])];\n      return parents.filter(parent => isShowTypeInTree(layout[parent]));\n    });\n  // Sort arrays of parents to get first shortest array of parents,\n  // that means on it's level of parents located common parent, from this place parents start be different\n  checkedItemParents.sort((p1, p2) => p1.length - p2.length);\n  const rootPath = checkedItemParents.map(\n    parents => parents[checkedItemParents[0].length - 1],\n  );\n\n  const excluded: number[] = [];\n  const isExcluded = (parent: string, item: string) =>\n    rootPath.includes(parent) && !checkedKeys.includes(item);\n  // looking for charts to be excluded: iterate over all charts\n  // and looking for charts that have one of their parents in `rootPath` and not in selected items\n  Object.entries(layout).forEach(([key, value]) => {\n    const parents = value.parents || [];\n    if (\n      value.type === CHART_TYPE &&\n      [DASHBOARD_ROOT_ID, ...parents]?.find(parent => isExcluded(parent, key))\n    ) {\n      excluded.push(value.meta.chartId);\n    }\n  });\n\n  return {\n    rootPath: [...new Set(rootPath)],\n    excluded,\n  };\n};\n\nexport const getDefaultScopeValue = (\n  chartId?: number,\n  initiallyExcludedCharts: number[] = [],\n): NativeFilterScope => ({\n  rootPath: [DASHBOARD_ROOT_ID],\n  excluded: chartId\n    ? [chartId, ...initiallyExcludedCharts]\n    : initiallyExcludedCharts,\n});\n\nexport const isScopingAll = (scope: NativeFilterScope, chartId?: number) =>\n  !scope ||\n  (scope.rootPath[0] === DASHBOARD_ROOT_ID &&\n    !scope.excluded.filter(item => item !== chartId).length);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { FC, useMemo, useState } from 'react';\nimport { NativeFilterScope } from '@superset-ui/core';\nimport { Tree } from 'src/components';\nimport { DASHBOARD_ROOT_ID } from 'src/dashboard/util/constants';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { useFilterScopeTree } from './state';\nimport { findFilterScope, getTreeCheckedItems } from './utils';\n\ntype ScopingTreeProps = {\n  forceUpdate: Function;\n  updateFormValues: (values: any) => void;\n  formScope?: NativeFilterScope;\n  initialScope: NativeFilterScope;\n  chartId?: number;\n  initiallyExcludedCharts?: number[];\n};\n\nconst buildTreeLeafTitle = (\n  label: string,\n  hasTooltip: boolean,\n  tooltipTitle?: string,\n) => {\n  let title = <span>{label}</span>;\n  if (hasTooltip) {\n    title = (\n      <>\n        {title}&nbsp;\n        <Tooltip title={tooltipTitle}>\n          <Icons.Info iconSize=\"m\" />\n        </Tooltip>\n      </>\n    );\n  }\n  return title;\n};\n\nconst ScopingTree: FC<ScopingTreeProps> = ({\n  formScope,\n  initialScope,\n  forceUpdate,\n  updateFormValues,\n  chartId,\n  initiallyExcludedCharts = [],\n}) => {\n  const [expandedKeys, setExpandedKeys] = useState<string[]>([\n    DASHBOARD_ROOT_ID,\n  ]);\n\n  const { treeData, layout } = useFilterScopeTree(\n    chartId,\n    initiallyExcludedCharts,\n    buildTreeLeafTitle,\n  );\n  const [autoExpandParent, setAutoExpandParent] = useState<boolean>(true);\n\n  const handleExpand = (expandedKeys: string[]) => {\n    setExpandedKeys(expandedKeys);\n    setAutoExpandParent(false);\n  };\n\n  const handleCheck = (checkedKeys: string[]) => {\n    forceUpdate();\n    const scope = findFilterScope(checkedKeys, layout);\n    if (chartId !== undefined) {\n      scope.excluded = [...new Set([...scope.excluded, chartId])];\n    }\n    updateFormValues({\n      scope,\n    });\n  };\n\n  const checkedKeys = useMemo(\n    () => getTreeCheckedItems({ ...(formScope || initialScope) }, layout),\n    [formScope, initialScope, layout],\n  );\n\n  return (\n    <Tree\n      checkable\n      selectable={false}\n      onExpand={handleExpand}\n      expandedKeys={expandedKeys}\n      autoExpandParent={autoExpandParent}\n      onCheck={handleCheck}\n      checkedKeys={checkedKeys}\n      treeData={treeData}\n    />\n  );\n};\n\nexport default ScopingTree;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { t } from '@superset-ui/core';\nimport { Charts, Layout, RootState } from 'src/dashboard/types';\nimport { DASHBOARD_ROOT_ID } from 'src/dashboard/util/constants';\nimport {\n  CHART_TYPE,\n  DASHBOARD_ROOT_TYPE,\n} from 'src/dashboard/util/componentTypes';\nimport { BuildTreeLeafTitle, TreeItem } from './types';\nimport { buildTree } from './utils';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function useFilterScopeTree(\n  currentChartId?: number,\n  initiallyExcludedCharts: number[] = [],\n  buildTreeLeafTitle: BuildTreeLeafTitle = label => label,\n): {\n  treeData: [TreeItem];\n  layout: Layout;\n} {\n  const layout = useSelector<RootState, Layout>(\n    ({ dashboardLayout: { present } }) => present,\n  );\n\n  const charts = useSelector<RootState, Charts>(({ charts }) => charts);\n  const tree = {\n    children: [],\n    key: DASHBOARD_ROOT_ID,\n    type: DASHBOARD_ROOT_TYPE,\n    title: t('All panels'),\n  };\n\n  // We need to get only nodes that have charts as children or grandchildren\n  const validNodes = useMemo(\n    () =>\n      Object.values(layout).reduce<string[]>((acc, cur) => {\n        const { id, parents = [], type, meta } = cur;\n        if (type === CHART_TYPE && currentChartId !== meta?.chartId) {\n          return [...new Set([...acc, ...parents, id])];\n        }\n        return acc;\n      }, []),\n    [layout, currentChartId],\n  );\n\n  useMemo(() => {\n    buildTree(\n      layout[DASHBOARD_ROOT_ID],\n      tree,\n      layout,\n      charts,\n      validNodes,\n      initiallyExcludedCharts,\n      buildTreeLeafTitle,\n    );\n  }, [layout, tree, charts, initiallyExcludedCharts, buildTreeLeafTitle]);\n\n  return { treeData: [tree], layout };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { FC, useCallback, useState } from 'react';\nimport { NativeFilterScope, styled, t } from '@superset-ui/core';\nimport { Radio } from 'src/components/Radio';\nimport { AntdForm, Typography } from 'src/components';\nimport { useComponentDidUpdate } from 'src/hooks/useComponentDidUpdate/useComponentDidUpdate';\nimport { ScopingType } from './types';\nimport ScopingTree from './ScopingTree';\nimport { getDefaultScopeValue, isScopingAll } from './utils';\n\ntype FilterScopeProps = {\n  pathToFormValue?: string[];\n  updateFormValues: (values: any) => void;\n  formFilterScope?: NativeFilterScope;\n  forceUpdate: Function;\n  filterScope?: NativeFilterScope;\n  formScopingType?: ScopingType;\n  chartId?: number;\n  initiallyExcludedCharts?: number[];\n};\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  & > * {\n    margin-bottom: ${({ theme }) => theme.gridUnit}px;\n  }\n  padding: 0px ${({ theme }) => theme.gridUnit * 4}px;\n`;\n\nconst CleanFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\n\nconst FilterScope: FC<FilterScopeProps> = ({\n  pathToFormValue = [],\n  formScopingType,\n  formFilterScope,\n  forceUpdate,\n  filterScope,\n  updateFormValues,\n  chartId,\n  initiallyExcludedCharts,\n}) => {\n  const [initialFilterScope] = useState(\n    filterScope || getDefaultScopeValue(chartId, initiallyExcludedCharts),\n  );\n  const [initialScopingType] = useState(\n    isScopingAll(initialFilterScope, chartId)\n      ? ScopingType.all\n      : ScopingType.specific,\n  );\n  const [hasScopeBeenModified, setHasScopeBeenModified] = useState(\n    !!filterScope,\n  );\n\n  const onUpdateFormValues = useCallback(\n    (formValues: any) => {\n      updateFormValues(formValues);\n      setHasScopeBeenModified(true);\n    },\n    [updateFormValues],\n  );\n\n  const updateScopes = useCallback(() => {\n    if (filterScope || hasScopeBeenModified) {\n      return;\n    }\n\n    const newScope = getDefaultScopeValue(chartId, initiallyExcludedCharts);\n    updateFormValues({\n      scope: newScope,\n      scoping: isScopingAll(newScope, chartId)\n        ? ScopingType.all\n        : ScopingType.specific,\n    });\n  }, [\n    chartId,\n    filterScope,\n    hasScopeBeenModified,\n    initiallyExcludedCharts,\n    updateFormValues,\n  ]);\n  useComponentDidUpdate(updateScopes);\n\n  return (\n    <Wrapper>\n      <CleanFormItem\n        name={[...pathToFormValue, 'scoping']}\n        initialValue={initialScopingType}\n      >\n        <Radio.Group\n          onChange={({ target: { value } }) => {\n            if (value === ScopingType.all) {\n              const scope = getDefaultScopeValue(chartId);\n              updateFormValues({\n                scope,\n              });\n            }\n            setHasScopeBeenModified(true);\n            forceUpdate();\n          }}\n        >\n          <Radio value={ScopingType.all}>{t('Apply to all panels')}</Radio>\n          <Radio value={ScopingType.specific}>\n            {t('Apply to specific panels')}\n          </Radio>\n        </Radio.Group>\n      </CleanFormItem>\n      <Typography.Text type=\"secondary\">\n        {(formScopingType ?? initialScopingType) === ScopingType.specific\n          ? t('Only selected panels will be affected by this filter')\n          : t('All panels with this column will be affected by this filter')}\n      </Typography.Text>\n      {(formScopingType ?? initialScopingType) === ScopingType.specific && (\n        <ScopingTree\n          updateFormValues={onUpdateFormValues}\n          initialScope={initialFilterScope}\n          formScope={formFilterScope}\n          forceUpdate={forceUpdate}\n          chartId={chartId}\n          initiallyExcludedCharts={initiallyExcludedCharts}\n        />\n      )}\n      <CleanFormItem\n        name={[...pathToFormValue, 'scope']}\n        hidden\n        initialValue={initialFilterScope}\n      />\n    </Wrapper>\n  );\n};\n\nexport default FilterScope;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { flatMapDeep } from 'lodash';\nimport { FormInstance } from 'src/components';\nimport React from 'react';\nimport { CustomControlItem, Dataset } from '@superset-ui/chart-controls';\nimport { Column, ensureIsArray, GenericDataType } from '@superset-ui/core';\nimport { DatasourcesState, ChartsState } from 'src/dashboard/types';\n\nconst FILTERS_FIELD_NAME = 'filters';\n\nexport const FILTER_SUPPORTED_TYPES = {\n  filter_time: [GenericDataType.TEMPORAL],\n  filter_timegrain: [GenericDataType.TEMPORAL],\n  filter_timecolumn: [GenericDataType.TEMPORAL],\n  filter_select: [\n    GenericDataType.BOOLEAN,\n    GenericDataType.STRING,\n    GenericDataType.NUMERIC,\n    GenericDataType.TEMPORAL,\n  ],\n  filter_range: [GenericDataType.NUMERIC],\n};\n\nexport const useForceUpdate = () => {\n  const [, updateState] = React.useState({});\n  return React.useCallback(() => updateState({}), []);\n};\n\nexport const setNativeFilterFieldValues = (\n  form: FormInstance,\n  filterId: string,\n  values: object,\n) => {\n  const formFilters = form.getFieldValue(FILTERS_FIELD_NAME) || {};\n  form.setFields([\n    {\n      name: FILTERS_FIELD_NAME,\n      value: {\n        ...formFilters,\n        [filterId]: {\n          ...formFilters[filterId],\n          ...values,\n        },\n      },\n    },\n  ]);\n};\n\nexport const getControlItems = (\n  controlConfig: { [key: string]: any } = {},\n): CustomControlItem[] =>\n  (flatMapDeep(controlConfig.controlPanelSections)?.reduce(\n    (acc: any, { controlSetRows = [] }: any) => [\n      ...acc,\n      ...flatMapDeep(controlSetRows),\n    ],\n    [],\n  ) as CustomControlItem[]) ?? [];\n\ntype DatasetSelectValue = {\n  value: number;\n  label: string;\n};\n\nexport const datasetToSelectOption = (\n  item: Dataset & { table_name: string },\n): DatasetSelectValue => ({\n  value: item.id,\n  label: item.table_name,\n});\n\n// TODO: add column_types field to Dataset\n// We return true if column_types is undefined or empty as a precaution against backend failing to return column_types\nexport const hasTemporalColumns = (\n  dataset: Dataset & { column_types: GenericDataType[] },\n) => {\n  const columnTypes = ensureIsArray(dataset?.column_types);\n  return (\n    columnTypes.length === 0 || columnTypes.includes(GenericDataType.TEMPORAL)\n  );\n};\n\nexport const doesColumnMatchFilterType = (filterType: string, column: Column) =>\n  !column.type_generic ||\n  !(filterType in FILTER_SUPPORTED_TYPES) ||\n  FILTER_SUPPORTED_TYPES[filterType]?.includes(column.type_generic);\n\nexport const mostUsedDataset = (\n  datasets: DatasourcesState,\n  charts: ChartsState,\n) => {\n  const map = new Map<string, number>();\n  let mostUsedDataset = '';\n  let maxCount = 0;\n\n  Object.values(charts).forEach(chart => {\n    const { formData } = chart;\n    if (formData) {\n      const { datasource } = formData;\n      const count = (map.get(datasource) || 0) + 1;\n      map.set(datasource, count);\n\n      if (count > maxCount) {\n        maxCount = count;\n        mostUsedDataset = datasource;\n      }\n    }\n  });\n\n  return datasets[mostUsedDataset]?.id;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC } from 'react';\nimport { FormInstance } from 'src/components';\nimport { NativeFilterScope } from '@superset-ui/core';\nimport FilterScope from 'src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/FilterScope/FilterScope';\nimport { setCrossFilterFieldValues } from 'src/dashboard/components/CrossFilterScopingModal/utils';\nimport { useForceUpdate } from 'src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigForm/utils';\nimport { CrossFilterScopingFormType } from 'src/dashboard/components/CrossFilterScopingModal/types';\n\ntype CrossFilterScopingFormProps = {\n  chartId: number;\n  scope: NativeFilterScope;\n  form: FormInstance<CrossFilterScopingFormType>;\n};\n\nconst CrossFilterScopingForm: FC<CrossFilterScopingFormProps> = ({\n  form,\n  scope,\n  chartId,\n}) => {\n  const forceUpdate = useForceUpdate();\n  const formScope = form.getFieldValue('scope');\n  const formScoping = form.getFieldValue('scoping');\n  return (\n    <FilterScope\n      updateFormValues={(values: any) => {\n        setCrossFilterFieldValues(form, {\n          ...values,\n        });\n      }}\n      filterScope={scope}\n      chartId={chartId}\n      formFilterScope={formScope}\n      forceUpdate={forceUpdate}\n      formScopingType={formScoping}\n    />\n  );\n};\n\nexport default CrossFilterScopingForm;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FormInstance } from 'src/components';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const setCrossFilterFieldValues = (\n  form: FormInstance,\n  values: object,\n) => {\n  form.setFieldsValue({\n    ...values,\n  });\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useSelector } from 'react-redux';\nimport { useMemo } from 'react';\nimport {\n  Filter,\n  FilterConfiguration,\n  Divider,\n  isFilterDivider,\n} from '@superset-ui/core';\nimport { ActiveTabs, DashboardLayout, RootState } from '../../types';\nimport { TAB_TYPE } from '../../util/componentTypes';\n\nconst defaultFilterConfiguration: Filter[] = [];\n\nexport function useFilterConfiguration() {\n  return useSelector<any, FilterConfiguration>(\n    state =>\n      state.dashboardInfo?.metadata?.native_filter_configuration ||\n      defaultFilterConfiguration,\n  );\n}\n\n/**\n * returns the dashboard's filter configuration,\n * converted into a map of id -> filter\n */\nexport function useFilterConfigMap() {\n  const filterConfig = useFilterConfiguration();\n  return useMemo(\n    () =>\n      filterConfig.reduce(\n        (acc: Record<string, Filter | Divider>, filter: Filter) => {\n          acc[filter.id] = filter;\n          return acc;\n        },\n        {} as Record<string, Filter | Divider>,\n      ),\n    [filterConfig],\n  );\n}\n\nexport function useDashboardLayout() {\n  return useSelector<any, DashboardLayout>(\n    state => state.dashboardLayout?.present,\n  );\n}\n\nexport function useDashboardHasTabs() {\n  const dashboardLayout = useDashboardLayout();\n  return useMemo(\n    () =>\n      Object.values(dashboardLayout).some(element => element.type === TAB_TYPE),\n    [dashboardLayout],\n  );\n}\n\nfunction useActiveDashboardTabs() {\n  return useSelector<RootState, ActiveTabs>(\n    state => state.dashboardState?.activeTabs,\n  );\n}\n\nfunction useSelectChartTabParents() {\n  const dashboardLayout = useDashboardLayout();\n  return (chartId: number) => {\n    const chartLayoutItem = Object.values(dashboardLayout).find(\n      layoutItem => layoutItem.meta?.chartId === chartId,\n    );\n    return chartLayoutItem?.parents.filter(\n      (parent: string) => dashboardLayout[parent].type === TAB_TYPE,\n    );\n  };\n}\n\nfunction useIsFilterInScope() {\n  const activeTabs = useActiveDashboardTabs();\n  const selectChartTabParents = useSelectChartTabParents();\n\n  // Filter is in scope if any of it's charts is visible.\n  // Chart is visible if it's placed in an active tab tree or if it's not attached to any tab.\n  // Chart is in an active tab tree if all of it's ancestors of type TAB are active\n  // Dividers are always in scope\n  return (filter: Filter | Divider) =>\n    isFilterDivider(filter) ||\n    ('chartsInScope' in filter &&\n      filter.chartsInScope?.some((chartId: number) => {\n        const tabParents = selectChartTabParents(chartId);\n        return (\n          tabParents?.length === 0 ||\n          tabParents?.every(tab => activeTabs.includes(tab))\n        );\n      }));\n}\n\nexport function useSelectFiltersInScope(filters: (Filter | Divider)[]) {\n  const dashboardHasTabs = useDashboardHasTabs();\n  const isFilterInScope = useIsFilterInScope();\n\n  return useMemo(() => {\n    let filtersInScope: (Filter | Divider)[] = [];\n    const filtersOutOfScope: (Filter | Divider)[] = [];\n\n    // we check native filters scopes only on dashboards with tabs\n    if (!dashboardHasTabs) {\n      filtersInScope = filters;\n    } else {\n      filters.forEach(filter => {\n        const filterInScope = isFilterInScope(filter);\n\n        if (filterInScope) {\n          filtersInScope.push(filter);\n        } else {\n          filtersOutOfScope.push(filter);\n        }\n      });\n    }\n    return [filtersInScope, filtersOutOfScope];\n  }, [filters, dashboardHasTabs, isFilterInScope]);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled } from '@superset-ui/core';\nimport React, { useRef } from 'react';\nimport {\n  DragSourceMonitor,\n  DropTargetMonitor,\n  useDrag,\n  useDrop,\n  XYCoord,\n} from 'react-dnd';\nimport Icons, { IconType } from 'src/components/Icons';\n\ninterface TitleContainerProps {\n  readonly isDragging: boolean;\n}\n\nconst FILTER_TYPE = 'FILTER';\n\nconst Container = styled.div<TitleContainerProps>`\n  ${({ isDragging, theme }) => `\n    opacity: ${isDragging ? 0.3 : 1};\n    cursor: ${isDragging ? 'grabbing' : 'pointer'};\n    width: 100%;\n    display: flex;\n    padding:  ${theme.gridUnit}px;\n  `}\n`;\n\nconst DragIcon = styled(Icons.Drag, {\n  shouldForwardProp: propName => propName !== 'isDragging',\n})<IconType & { isDragging: boolean }>`\n  ${({ isDragging, theme }) => `\n    font-size: ${theme.typography.sizes.m}px;\n    margin-top: 15px;\n    cursor: ${isDragging ? 'grabbing' : 'grab'};\n    padding-left: ${theme.gridUnit}px;\n  `}\n`;\n\ninterface FilterTabTitleProps {\n  index: number;\n  filterIds: string[];\n  onRearrange: (dragItemIndex: number, targetIndex: number) => void;\n}\n\ninterface DragItem {\n  index: number;\n  filterIds: string[];\n  type: string;\n}\n\nexport const DraggableFilter: React.FC<FilterTabTitleProps> = ({\n  index,\n  onRearrange,\n  filterIds,\n  children,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [{ isDragging }, drag] = useDrag({\n    item: { filterIds, type: FILTER_TYPE, index },\n    collect: (monitor: DragSourceMonitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n  const [, drop] = useDrop({\n    accept: FILTER_TYPE,\n    hover: (item: DragItem, monitor: DropTargetMonitor) => {\n      if (!ref.current) {\n        return;\n      }\n\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n\n      // Get pixels to the top\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      onRearrange(dragIndex, hoverIndex);\n      // Note: we're mutating the monitor item here.\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      // eslint-disable-next-line no-param-reassign\n      item.index = hoverIndex;\n    },\n  });\n  drag(drop(ref));\n  return (\n    <Container ref={ref} isDragging={isDragging}>\n      <DragIcon\n        isDragging={isDragging}\n        alt=\"Move icon\"\n        className=\"dragIcon\"\n        viewBox=\"4 4 16 16\"\n      />\n      <div css={{ flex: 1 }}>{children}</div>\n    </Container>\n  );\n};\n\nexport default DraggableFilter;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { forwardRef } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { FilterRemoval } from './types';\nimport DraggableFilter from './DraggableFilter';\n\nconst FilterTitle = styled.div`\n  ${({ theme }) => `\n      display: flex;\n      align-items: center;\n      padding: ${theme.gridUnit * 2}px;\n      width: 100%;\n      border-radius: ${theme.borderRadius}px;\n      &.active {\n        color: ${theme.colors.grayscale.dark1};\n        border-radius: ${theme.borderRadius}px;\n        background-color: ${theme.colors.secondary.light4};\n        span, .anticon {\n          color: ${theme.colors.grayscale.dark1};\n        }\n      }\n      &:hover {\n        color: ${theme.colors.primary.light1};\n        span, .anticon {\n          color: ${theme.colors.primary.light1};\n        }\n      }\n      &.errored div, &.errored .warning {\n        color: ${theme.colors.error.base};\n      }\n  `}\n`;\n\nconst StyledTrashIcon = styled(Icons.Trash)`\n  color: ${({ theme }) => theme.colors.grayscale.light3};\n`;\n\nconst StyledWarning = styled(Icons.Warning)`\n  color: ${({ theme }) => theme.colors.error.base};\n  &.anticon {\n    margin-left: auto;\n  }\n`;\n\nconst Container = styled.div`\n  height: 100%;\n  overflow-y: auto;\n`;\n\ninterface Props {\n  getFilterTitle: (filterId: string) => string;\n  onChange: (filterId: string) => void;\n  currentFilterId: string;\n  removedFilters: Record<string, FilterRemoval>;\n  onRemove: (id: string) => void;\n  restoreFilter: (id: string) => void;\n  onRearrange: (dragIndex: number, targetIndex: number) => void;\n  filters: string[];\n  erroredFilters: string[];\n}\n\nconst FilterTitleContainer = forwardRef<HTMLDivElement, Props>(\n  (\n    {\n      getFilterTitle,\n      onChange,\n      onRemove,\n      restoreFilter,\n      onRearrange,\n      currentFilterId,\n      removedFilters,\n      filters,\n      erroredFilters = [],\n    },\n    ref,\n  ) => {\n    const renderComponent = (id: string) => {\n      const isRemoved = !!removedFilters[id];\n      const isErrored = erroredFilters.includes(id);\n      const isActive = currentFilterId === id;\n      const classNames = [];\n      if (isErrored) {\n        classNames.push('errored');\n      }\n      if (isActive) {\n        classNames.push('active');\n      }\n      return (\n        <FilterTitle\n          role=\"tab\"\n          key={`filter-title-tab-${id}`}\n          onClick={() => onChange(id)}\n          className={classNames.join(' ')}\n        >\n          <div css={{ display: 'flex', width: '100%' }}>\n            <div css={{ alignItems: 'center', display: 'flex' }}>\n              {isRemoved ? t('(Removed)') : getFilterTitle(id)}\n            </div>\n            {!removedFilters[id] && isErrored && (\n              <StyledWarning className=\"warning\" />\n            )}\n            {isRemoved && (\n              <span\n                css={{ alignSelf: 'flex-end', marginLeft: 'auto' }}\n                role=\"button\"\n                data-test=\"undo-button\"\n                tabIndex={0}\n                onClick={e => {\n                  e.preventDefault();\n                  restoreFilter(id);\n                }}\n              >\n                {t('Undo?')}\n              </span>\n            )}\n          </div>\n          <div css={{ alignSelf: 'flex-start', marginLeft: 'auto' }}>\n            {isRemoved ? null : (\n              <StyledTrashIcon\n                onClick={event => {\n                  event.stopPropagation();\n                  onRemove(id);\n                }}\n                alt=\"RemoveFilter\"\n              />\n            )}\n          </div>\n        </FilterTitle>\n      );\n    };\n\n    const renderFilterGroups = () => {\n      const items: React.ReactNode[] = [];\n      filters.forEach((item, index) => {\n        items.push(\n          <DraggableFilter\n            key={index}\n            onRearrange={onRearrange}\n            index={index}\n            filterIds={[item]}\n          >\n            {renderComponent(item)}\n          </DraggableFilter>,\n        );\n      });\n      return items;\n    };\n\n    return (\n      <Container data-test=\"filter-title-container\" ref={ref}>\n        {renderFilterGroups()}\n      </Container>\n    );\n  },\n);\n\nexport default FilterTitleContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useRef } from 'react';\nimport { NativeFilterType, styled, t, useTheme } from '@superset-ui/core';\nimport { AntdDropdown } from 'src/components';\nimport { MainNav as Menu } from 'src/components/Menu';\nimport FilterTitleContainer from './FilterTitleContainer';\nimport { FilterRemoval } from './types';\n\ninterface Props {\n  restoreFilter: (id: string) => void;\n  getFilterTitle: (id: string) => string;\n  onRearrange: (dragIndex: number, targetIndex: number) => void;\n  onRemove: (id: string) => void;\n  onChange: (id: string) => void;\n  onAdd: (type: NativeFilterType) => void;\n  removedFilters: Record<string, FilterRemoval>;\n  currentFilterId: string;\n  filters: string[];\n  erroredFilters: string[];\n}\n\nconst StyledAddBox = styled.div`\n  ${({ theme }) => `\n  cursor: pointer;\n  margin: ${theme.gridUnit * 4}px;\n  color: ${theme.colors.primary.base};\n  &:hover {\n    color: ${theme.colors.primary.dark1};\n  }\n`}\n`;\nconst TabsContainer = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst options = [\n  { label: 'Filter', type: NativeFilterType.NATIVE_FILTER },\n  { label: 'Divider', type: NativeFilterType.DIVIDER },\n];\n\nconst FilterTitlePane: React.FC<Props> = ({\n  getFilterTitle,\n  onChange,\n  onAdd,\n  onRemove,\n  onRearrange,\n  restoreFilter,\n  currentFilterId,\n  filters,\n  removedFilters,\n  erroredFilters,\n}) => {\n  const filtersContainerRef = useRef<HTMLDivElement>(null);\n  const theme = useTheme();\n\n  const handleOnAdd = (type: NativeFilterType) => {\n    onAdd(type);\n    setTimeout(() => {\n      const element = document.getElementById('native-filters-tabs');\n      if (element) {\n        const navList = element.getElementsByClassName('ant-tabs-nav-list')[0];\n        navList.scrollTop = navList.scrollHeight;\n      }\n\n      filtersContainerRef?.current?.scroll?.({\n        top: filtersContainerRef.current.scrollHeight,\n        behavior: 'smooth',\n      });\n    }, 0);\n  };\n  const menu = (\n    <Menu mode=\"horizontal\">\n      {options.map(item => (\n        <Menu.Item onClick={() => handleOnAdd(item.type)}>\n          {item.label}\n        </Menu.Item>\n      ))}\n    </Menu>\n  );\n  return (\n    <TabsContainer>\n      <AntdDropdown\n        overlay={menu}\n        arrow\n        placement=\"topLeft\"\n        trigger={['hover']}\n      >\n        <StyledAddBox>\n          <div data-test=\"new-dropdown-icon\" className=\"fa fa-plus\" />{' '}\n          <span>{t('Add filters and dividers')}</span>\n        </StyledAddBox>\n      </AntdDropdown>\n      <div\n        css={{\n          height: '100%',\n          overflowY: 'auto',\n          marginLeft: theme.gridUnit * 3,\n        }}\n      >\n        <FilterTitleContainer\n          ref={filtersContainerRef}\n          filters={filters}\n          currentFilterId={currentFilterId}\n          removedFilters={removedFilters}\n          getFilterTitle={getFilterTitle}\n          erroredFilters={erroredFilters}\n          onChange={onChange}\n          onRemove={onRemove}\n          onRearrange={onRearrange}\n          restoreFilter={restoreFilter}\n        />\n      </div>\n    </TabsContainer>\n  );\n};\n\nexport default FilterTitlePane;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { NativeFilterType, styled } from '@superset-ui/core';\nimport React from 'react';\nimport FilterTitlePane from './FilterTitlePane';\nimport { FilterRemoval } from './types';\n\ninterface Props {\n  children: (filterId: string) => React.ReactNode;\n  getFilterTitle: (filterId: string) => string;\n  onChange: (activeKey: string) => void;\n  onAdd: (type: NativeFilterType) => void;\n  onRemove: (id: string) => void;\n  onRearrange: (dragIndex: number, targetIndex: number) => void;\n  erroredFilters: string[];\n  restoreFilter: (id: string) => void;\n  currentFilterId: string;\n  filters: string[];\n  removedFilters: Record<string, FilterRemoval>;\n}\n\nconst Container = styled.div`\n  display: flex;\n  height: 100%;\n`;\n\nconst ContentHolder = styled.div`\n  flex-grow: 3;\n  margin-left: ${({ theme }) => theme.gridUnit * -1 - 1};\n`;\n\nconst TitlesContainer = styled.div`\n  width: 270px;\n  border-right: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n`;\n\nconst FilterConfigurePane: React.FC<Props> = ({\n  getFilterTitle,\n  onChange,\n  onRemove,\n  onRearrange,\n  restoreFilter,\n  onAdd,\n  erroredFilters,\n  children,\n  currentFilterId,\n  filters,\n  removedFilters,\n}) => {\n  const active = filters.filter(id => id === currentFilterId)[0];\n  return (\n    <Container>\n      <TitlesContainer>\n        <FilterTitlePane\n          currentFilterId={currentFilterId}\n          filters={filters}\n          removedFilters={removedFilters}\n          erroredFilters={erroredFilters}\n          getFilterTitle={getFilterTitle}\n          onChange={onChange}\n          onAdd={(type: NativeFilterType) => onAdd(type)}\n          onRearrange={onRearrange}\n          onRemove={(id: string) => onRemove(id)}\n          restoreFilter={restoreFilter}\n        />\n      </TitlesContainer>\n      <ContentHolder>\n        {filters.map(id => (\n          <div\n            key={id}\n            style={{\n              height: '100%',\n              overflowY: 'auto',\n              display: id === active ? '' : 'none',\n            }}\n          >\n            {children(id)}\n          </div>\n        ))}\n      </ContentHolder>\n    </Container>\n  );\n};\n\nexport default FilterConfigurePane;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled, useTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { ErrorLevel } from './types';\n\nconst StyledContainer = styled.div<{ level: ErrorLevel }>`\n  display: flex;\n  flex-direction: row;\n  background-color: ${({ level, theme }) => theme.colors[level].light2};\n  border-radius: ${({ theme }) => theme.borderRadius}px;\n  border: 1px solid ${({ level, theme }) => theme.colors[level].base};\n  color: ${({ level, theme }) => theme.colors[level].dark2};\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\n  width: 100%;\n`;\n\nconst StyledContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst StyledTitle = styled.span`\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n`;\n\ninterface BasicErrorAlertProps {\n  title: string;\n  body: string;\n  level: ErrorLevel;\n}\n\nexport default function BasicErrorAlert({\n  body,\n  level = 'error',\n  title,\n}: BasicErrorAlertProps) {\n  const theme = useTheme();\n  const iconColor = theme.colors[level].base;\n\n  return (\n    <StyledContainer level={level} role=\"alert\">\n      {level === 'error' ? (\n        <Icons.ErrorSolid iconColor={iconColor} />\n      ) : (\n        <Icons.WarningSolid iconColor={iconColor} />\n      )}\n      <StyledContent>\n        <StyledTitle>{title}</StyledTitle>\n        <p>{body}</p>\n      </StyledContent>\n    </StyledContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport const cacheWrapper =\n  <T extends Array<any>, U>(\n    fn: (...args: T) => U,\n    cache: Map<string, any>,\n    keyFn: (...args: T) => string = (...args: T) => JSON.stringify([...args]),\n  ) =>\n  (...args: T): U => {\n    const key = keyFn(...args);\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    const result = fn(...args);\n    cache.set(key, result);\n    return result;\n  };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode, useEffect, useState } from 'react';\nimport { styled } from '@superset-ui/core';\nimport { AntdCheckbox } from 'src/components';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\n\ninterface CollapsibleControlProps {\n  initialValue?: boolean;\n  disabled?: boolean;\n  checked?: boolean;\n  title: string;\n  tooltip?: string;\n  children: ReactNode;\n  onChange?: (checked: boolean) => void;\n}\n\nconst StyledContainer = styled.div<{ checked: boolean }>`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  min-height: ${({ theme }) => theme.gridUnit * 10}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 2 + 2}px;\n\n  .checkbox {\n    margin-bottom: ${({ theme, checked }) => (checked ? theme.gridUnit : 0)}px;\n  }\n\n  & > div {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n`;\n\nconst ChildrenContainer = styled.div`\n  margin-left: ${({ theme }) => theme.gridUnit * 6}px;\n`;\n\nconst CollapsibleControl = (props: CollapsibleControlProps) => {\n  const {\n    checked,\n    disabled,\n    title,\n    tooltip,\n    children,\n    onChange = () => {},\n    initialValue = false,\n  } = props;\n  const [isChecked, setIsChecked] = useState(initialValue);\n\n  useEffect(() => {\n    // if external `checked` changed to `undefined`, it means that we work now in uncontrolled mode with local state\n    // and we need ignore external value\n    if (checked !== undefined) {\n      setIsChecked(checked);\n    }\n  }, [checked]);\n\n  return (\n    <StyledContainer checked={isChecked}>\n      <AntdCheckbox\n        className=\"checkbox\"\n        checked={isChecked}\n        disabled={disabled}\n        onChange={e => {\n          const value = e.target.checked;\n          // external `checked` value has more priority then local state\n          if (checked === undefined) {\n            // uncontrolled mode\n            setIsChecked(value);\n          }\n          onChange(value);\n        }}\n      >\n        <>\n          {title}&nbsp;\n          {tooltip && (\n            <InfoTooltipWithTrigger placement=\"top\" tooltip={tooltip} />\n          )}\n        </>\n      </AntdCheckbox>\n      {isChecked && <ChildrenContainer>{children}</ChildrenContainer>}\n    </StyledContainer>\n  );\n};\n\nexport { CollapsibleControl, CollapsibleControlProps };\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useState, useMemo, useEffect } from 'react';\nimport { Column, ensureIsArray, SupersetClient, t } from '@superset-ui/core';\nimport { useChangeEffect } from 'src/hooks/useChangeEffect';\nimport { Select, FormInstance } from 'src/components';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport { cacheWrapper } from 'src/utils/cacheWrapper';\nimport { NativeFiltersForm } from '../types';\nimport { doesColumnMatchFilterType } from './utils';\n\ninterface ColumnSelectProps {\n  allowClear?: boolean;\n  filterValues?: (column: Column) => boolean;\n  form: FormInstance<NativeFiltersForm>;\n  formField?: string;\n  filterId: string;\n  datasetId?: number;\n  value?: string | string[];\n  onChange?: (value: string) => void;\n  mode?: 'multiple';\n}\n\nconst localCache = new Map<string, any>();\n\nconst cachedSupersetGet = cacheWrapper(\n  SupersetClient.get,\n  localCache,\n  ({ endpoint }) => endpoint || '',\n);\n\n/** Special purpose AsyncSelect that selects a column from a dataset */\n// eslint-disable-next-line import/prefer-default-export\nexport function ColumnSelect({\n  allowClear = false,\n  filterValues = () => true,\n  form,\n  formField = 'column',\n  filterId,\n  datasetId,\n  value,\n  onChange,\n  mode,\n}: ColumnSelectProps) {\n  const [columns, setColumns] = useState<Column[]>();\n  const { addDangerToast } = useToasts();\n  const resetColumnField = useCallback(() => {\n    form.setFields([\n      { name: ['filters', filterId, formField], touched: false, value: null },\n    ]);\n  }, [form, filterId, formField]);\n\n  const options = useMemo(\n    () =>\n      ensureIsArray(columns)\n        .filter(filterValues)\n        .map((col: Column) => col.column_name)\n        .map((column: string) => ({ label: column, value: column })),\n    [columns, filterValues],\n  );\n\n  const currentFilterType =\n    form.getFieldValue('filters')?.[filterId].filterType;\n  const currentColumn = useMemo(\n    () => columns?.find(column => column.column_name === value),\n    [columns, value],\n  );\n\n  useEffect(() => {\n    if (\n      currentColumn &&\n      !doesColumnMatchFilterType(currentFilterType, currentColumn)\n    ) {\n      resetColumnField();\n    }\n  }, [currentColumn, currentFilterType, resetColumnField]);\n\n  useChangeEffect(datasetId, previous => {\n    if (previous != null) {\n      resetColumnField();\n    }\n    if (datasetId != null) {\n      cachedSupersetGet({\n        endpoint: `/api/v1/dataset/${datasetId}`,\n      }).then(\n        ({ json: { result } }) => {\n          const lookupValue = Array.isArray(value) ? value : [value];\n          const valueExists = result.columns.some((column: Column) =>\n            lookupValue?.includes(column.column_name),\n          );\n          if (!valueExists) {\n            resetColumnField();\n          }\n          setColumns(result.columns);\n        },\n        async badResponse => {\n          const { error, message } = await getClientErrorObject(badResponse);\n          let errorText = message || error || t('An error has occurred');\n          if (message === 'Forbidden') {\n            errorText = t('You do not have permission to edit this dashboard');\n          }\n          addDangerToast(errorText);\n        },\n      );\n    }\n  });\n\n  return (\n    <Select\n      mode={mode}\n      value={mode === 'multiple' ? value || [] : value}\n      ariaLabel={t('Column select')}\n      onChange={onChange}\n      options={options}\n      placeholder={t('Select a column')}\n      notFoundContent={t('No compatible columns found')}\n      showSearch\n      allowClear={allowClear}\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useMemo } from 'react';\nimport rison from 'rison';\nimport { t, SupersetClient } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport { cacheWrapper } from 'src/utils/cacheWrapper';\nimport {\n  ClientErrorObject,\n  getClientErrorObject,\n} from 'src/utils/getClientErrorObject';\nimport { datasetToSelectOption } from './utils';\n\nconst localCache = new Map<string, any>();\n\nconst cachedSupersetGet = cacheWrapper(\n  SupersetClient.get,\n  localCache,\n  ({ endpoint }) => endpoint || '',\n);\n\ninterface DatasetSelectProps {\n  onChange: (value: { label: string; value: number }) => void;\n  value?: { label: string; value: number };\n}\n\nconst DatasetSelect = ({ onChange, value }: DatasetSelectProps) => {\n  const getErrorMessage = useCallback(\n    ({ error, message }: ClientErrorObject) => {\n      let errorText = message || error || t('An error has occurred');\n      if (message === 'Forbidden') {\n        errorText = t('You do not have permission to edit this dashboard');\n      }\n      return errorText;\n    },\n    [],\n  );\n\n  const loadDatasetOptions = async (\n    search: string,\n    page: number,\n    pageSize: number,\n  ) => {\n    const searchColumn = 'table_name';\n    const query = rison.encode({\n      filters: [{ col: searchColumn, opr: 'ct', value: search }],\n      page,\n      page_size: pageSize,\n      order_column: searchColumn,\n      order_direction: 'asc',\n    });\n    return cachedSupersetGet({\n      endpoint: `/api/v1/dataset/?q=${query}`,\n    })\n      .then(response => {\n        const data: {\n          label: string;\n          value: string | number;\n        }[] = response.json.result.map(datasetToSelectOption);\n        return {\n          data,\n          totalCount: response.json.count,\n        };\n      })\n      .catch(async error => {\n        const errorMessage = getErrorMessage(await getClientErrorObject(error));\n        throw new Error(errorMessage);\n      });\n  };\n\n  return (\n    <Select\n      ariaLabel={t('Dataset')}\n      value={value}\n      options={loadDatasetOptions}\n      onChange={onChange}\n    />\n  );\n};\n\nconst MemoizedSelect = (props: DatasetSelectProps) =>\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useMemo(() => <DatasetSelect {...props} />, []);\n\nexport default MemoizedSelect;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC } from 'react';\nimport {\n  Behavior,\n  SetDataMaskHook,\n  SuperChart,\n  AppSection,\n  t,\n} from '@superset-ui/core';\nimport { FormInstance } from 'src/components';\nimport Loading from 'src/components/Loading';\nimport { NativeFiltersForm } from '../types';\nimport { getFormData } from '../../utils';\n\ntype DefaultValueProps = {\n  hasDefaultValue: boolean;\n  filterId: string;\n  setDataMask: SetDataMaskHook;\n  hasDataset: boolean;\n  form: FormInstance<NativeFiltersForm>;\n  formData: ReturnType<typeof getFormData>;\n  enableNoResults: boolean;\n};\n\nconst DefaultValue: FC<DefaultValueProps> = ({\n  hasDefaultValue,\n  filterId,\n  hasDataset,\n  form,\n  setDataMask,\n  formData,\n  enableNoResults,\n}) => {\n  const formFilter = (form.getFieldValue('filters') || {})[filterId];\n  const queriesData = formFilter?.defaultValueQueriesData;\n  const loading = hasDataset && queriesData === null;\n  const value = formFilter.defaultDataMask?.filterState?.value;\n  const isMissingRequiredValue =\n    hasDefaultValue && (value === null || value === undefined);\n  return loading ? (\n    <Loading position=\"inline-centered\" />\n  ) : (\n    <SuperChart\n      height={32}\n      width={formFilter?.filterType === 'filter_time' ? 350 : 250}\n      appSection={AppSection.FILTER_CONFIG_MODAL}\n      behaviors={[Behavior.NATIVE_FILTER]}\n      formData={formData}\n      // For charts that don't have datasource we need workaround for empty placeholder\n      queriesData={\n        hasDataset ? formFilter?.defaultValueQueriesData : [{ data: [{}] }]\n      }\n      chartType={formFilter?.filterType}\n      hooks={{ setDataMask }}\n      enableNoResults={enableNoResults}\n      filterState={{\n        ...formFilter.defaultDataMask?.filterState,\n        validateMessage: isMissingRequiredValue && t('Value is required'),\n        validateStatus: isMissingRequiredValue && 'error',\n      }}\n    />\n  );\n};\n\nexport default DefaultValue;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  CustomControlItem,\n  InfoTooltipWithTrigger,\n} from '@superset-ui/chart-controls';\nimport React from 'react';\nimport { AntdCheckbox, FormInstance } from 'src/components';\nimport {\n  Filter,\n  getChartControlPanelRegistry,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { FormItem } from 'src/components/Form';\nimport {\n  doesColumnMatchFilterType,\n  getControlItems,\n  setNativeFilterFieldValues,\n} from './utils';\nimport { NativeFiltersForm, NativeFiltersFormItem } from '../types';\nimport {\n  StyledFormItem,\n  StyledLabel,\n  StyledRowFormItem,\n} from './FiltersConfigForm';\nimport { ColumnSelect } from './ColumnSelect';\n\nexport interface ControlItemsProps {\n  datasetId: number;\n  disabled: boolean;\n  forceUpdate: Function;\n  form: FormInstance<NativeFiltersForm>;\n  filterId: string;\n  filterType: string;\n  filterToEdit?: Filter;\n  formFilter?: NativeFiltersFormItem;\n  removed?: boolean;\n}\n\nconst CleanFormItem = styled(FormItem)`\n  margin-bottom: 0;\n`;\n\nexport default function getControlItemsMap({\n  datasetId,\n  disabled,\n  forceUpdate,\n  form,\n  filterId,\n  filterType,\n  filterToEdit,\n  formFilter,\n  removed,\n}: ControlItemsProps) {\n  const controlPanelRegistry = getChartControlPanelRegistry();\n  const controlItems =\n    getControlItems(controlPanelRegistry.get(filterType)) ?? [];\n  const mapControlItems: Record<\n    string,\n    { element: React.ReactNode; checked: boolean }\n  > = {};\n  const mapMainControlItems: Record<\n    string,\n    { element: React.ReactNode; checked: boolean }\n  > = {};\n\n  controlItems\n    .filter(\n      (mainControlItem: CustomControlItem) =>\n        mainControlItem?.name === 'groupby',\n    )\n    .forEach(mainControlItem => {\n      const initialValue =\n        filterToEdit?.controlValues?.[mainControlItem.name] ??\n        mainControlItem?.config?.default;\n      const initColumn = filterToEdit?.targets[0]?.column?.name;\n\n      const element = (\n        <>\n          <CleanFormItem\n            name={['filters', filterId, 'requiredFirst', mainControlItem.name]}\n            hidden\n            initialValue={\n              mainControlItem?.config?.requiredFirst &&\n              filterToEdit?.requiredFirst\n            }\n          />\n          <StyledFormItem\n            // don't show the column select unless we have a dataset\n            name={['filters', filterId, 'column']}\n            initialValue={initColumn}\n            label={\n              <StyledLabel>\n                {mainControlItem.config?.label || t('Column')}\n              </StyledLabel>\n            }\n            rules={[\n              {\n                required: mainControlItem.config?.required && !removed, // TODO: need to move ColumnSelect settings to controlPanel for all filters\n                message: t('Column is required'),\n              },\n            ]}\n            data-test=\"field-input\"\n          >\n            <ColumnSelect\n              mode={mainControlItem.config?.multiple && 'multiple'}\n              form={form}\n              filterId={filterId}\n              datasetId={datasetId}\n              filterValues={column =>\n                doesColumnMatchFilterType(formFilter?.filterType || '', column)\n              }\n              onChange={() => {\n                // We need reset default value when when column changed\n                setNativeFilterFieldValues(form, filterId, {\n                  defaultDataMask: null,\n                });\n                forceUpdate();\n              }}\n            />\n          </StyledFormItem>\n        </>\n      );\n      mapMainControlItems[mainControlItem.name] = {\n        element,\n        checked: initialValue,\n      };\n    });\n  controlItems\n    .filter(\n      (controlItem: CustomControlItem) =>\n        controlItem?.config?.renderTrigger &&\n        controlItem.name !== 'sortAscending' &&\n        controlItem.name !== 'enableSingleValue',\n    )\n    .forEach(controlItem => {\n      const initialValue =\n        filterToEdit?.controlValues?.[controlItem.name] ??\n        controlItem?.config?.default;\n      const element = (\n        <>\n          <CleanFormItem\n            name={['filters', filterId, 'requiredFirst', controlItem.name]}\n            hidden\n            initialValue={\n              controlItem?.config?.requiredFirst && filterToEdit?.requiredFirst\n            }\n          />\n          <Tooltip\n            key={controlItem.name}\n            placement=\"left\"\n            title={\n              controlItem.config.affectsDataMask &&\n              disabled &&\n              t('Populate \"Default value\" to enable this control')\n            }\n          >\n            <StyledRowFormItem\n              key={controlItem.name}\n              name={['filters', filterId, 'controlValues', controlItem.name]}\n              initialValue={initialValue}\n              valuePropName=\"checked\"\n              colon={false}\n            >\n              <AntdCheckbox\n                disabled={controlItem.config.affectsDataMask && disabled}\n                onChange={({ target: { checked } }) => {\n                  if (controlItem.config.requiredFirst) {\n                    setNativeFilterFieldValues(form, filterId, {\n                      requiredFirst: {\n                        ...formFilter?.requiredFirst,\n                        [controlItem.name]: checked,\n                      },\n                    });\n                  }\n                  if (controlItem.config.resetConfig) {\n                    setNativeFilterFieldValues(form, filterId, {\n                      defaultDataMask: null,\n                    });\n                  }\n                  forceUpdate();\n                }}\n              >\n                {controlItem.config.label}&nbsp;\n                {controlItem.config.description && (\n                  <InfoTooltipWithTrigger\n                    placement=\"top\"\n                    label={controlItem.config.name}\n                    tooltip={controlItem.config.description}\n                  />\n                )}\n              </AntdCheckbox>\n            </StyledRowFormItem>\n          </Tooltip>\n        </>\n      );\n      mapControlItems[controlItem.name] = { element, checked: initialValue };\n    });\n  return {\n    controlItems: mapControlItems,\n    mainControlItems: mapMainControlItems,\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport Button, { OnClickHandler } from 'src/components/Button';\nimport React, { FC } from 'react';\nimport { styled, t } from '@superset-ui/core';\n\nconst RemovedContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 400px; // arbitrary\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\ntype RemovedFilterProps = {\n  onClick: OnClickHandler;\n};\n\nconst RemovedFilter: FC<RemovedFilterProps> = ({ onClick }) => (\n  <RemovedContent>\n    <p>{t('You have removed this filter.')}</p>\n    <div>\n      <Button\n        data-test=\"restore-filter-button\"\n        buttonStyle=\"primary\"\n        onClick={onClick}\n      >\n        {t('Restore Filter')}\n      </Button>\n    </div>\n  </RemovedContent>\n);\n\nexport default RemovedFilter;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { Select } from 'src/components';\nimport { CollapsibleControl } from './CollapsibleControl';\n\ninterface DependencyListProps {\n  availableFilters: { label: string; value: string }[];\n  dependencies: string[];\n  onDependenciesChange: (dependencies: string[]) => void;\n  getDependencySuggestion: () => string;\n}\n\nconst MainPanel = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst AddFilter = styled.div`\n  ${({ theme }) => `\n    display: inline-flex;\n    flex-direction: row;\n    align-items: center;\n    cursor: pointer;\n    color: ${theme.colors.primary.base};\n    &:hover {\n      color: ${theme.colors.primary.dark1};\n    }\n  `}\n`;\n\nconst DeleteFilter = styled(Icons.Trash)`\n  ${({ theme }) => `\n    cursor: pointer;\n    margin-left: ${theme.gridUnit * 2}px;\n    color: ${theme.colors.grayscale.base};\n    &:hover {\n      color: ${theme.colors.grayscale.dark1};\n    }\n  `}\n`;\n\nconst RowPanel = styled.div`\n  ${({ theme }) => `\n    display: flex;\n    width: 220px;\n    flex-direction: row;\n    align-items: center;\n    margin-bottom: ${theme.gridUnit}px;\n  `}\n`;\n\nconst Label = styled.div`\n  text-transform: uppercase;\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst Row = ({\n  availableFilters,\n  selection,\n  onChange,\n  onDelete,\n}: {\n  availableFilters: { label: string; value: string }[];\n  selection: string;\n  onChange: (id: string, value: string) => void;\n  onDelete: (id: string) => void;\n}) => {\n  let value = availableFilters.find(e => e.value === selection);\n  let options = availableFilters;\n  if (!value) {\n    value = { label: t('(deleted or invalid type)'), value: selection };\n    options = [value, ...options];\n  }\n  return (\n    <RowPanel>\n      <Select\n        ariaLabel={t('Limit type')}\n        labelInValue\n        options={options}\n        onChange={option =>\n          onChange(selection, (option as { value: string }).value)\n        }\n        value={value}\n      />\n      <DeleteFilter iconSize=\"xl\" onClick={() => onDelete(selection)} />\n    </RowPanel>\n  );\n};\n\nconst List = ({\n  availableFilters = [],\n  dependencies = [],\n  onDependenciesChange,\n}: DependencyListProps) => {\n  const [rows, setRows] = useState<string[]>(dependencies);\n\n  const updateRows = (newRows: string[]) => {\n    setRows(newRows);\n    onDependenciesChange(newRows);\n  };\n\n  const onAdd = () => {\n    const filter = availableFilters.find(\n      availableFilter => !rows.includes(availableFilter.value),\n    );\n    if (filter) {\n      const newRows = [...rows];\n      newRows.push(filter.value);\n      updateRows(newRows);\n    }\n  };\n\n  const onChange = (id: string, value: string) => {\n    const indexOf = rows.findIndex(row => row === id);\n    const newRows = [...rows];\n    newRows[indexOf] = value;\n    updateRows(newRows);\n  };\n\n  const onDelete = (id: string) => {\n    const newRows = [...rows];\n    newRows.splice(rows.indexOf(id), 1);\n    updateRows(newRows);\n  };\n\n  if (availableFilters.length === 0) {\n    return <span>{t('No available filters.')}</span>;\n  }\n\n  return (\n    <>\n      {rows.map(row => (\n        <Row\n          key={row}\n          selection={row}\n          availableFilters={availableFilters.filter(\n            e => e.value === row || !rows.includes(e.value),\n          )}\n          onChange={onChange}\n          onDelete={onDelete}\n        />\n      ))}\n      {availableFilters.length > rows.length && (\n        <AddFilter onClick={onAdd}>\n          <Icons.PlusSmall />\n          {t('Add filter')}\n        </AddFilter>\n      )}\n    </>\n  );\n};\n\nconst DependencyList = ({\n  availableFilters = [],\n  dependencies = [],\n  onDependenciesChange,\n  getDependencySuggestion,\n}: DependencyListProps) => {\n  const hasAvailableFilters = availableFilters.length > 0;\n  const hasDependencies = dependencies.length > 0;\n\n  const onCheckChanged = (value: boolean) => {\n    const newDependencies: string[] = [];\n    if (value && !hasDependencies && hasAvailableFilters) {\n      newDependencies.push(getDependencySuggestion());\n    }\n    onDependenciesChange(newDependencies);\n  };\n\n  return (\n    <MainPanel>\n      <CollapsibleControl\n        title={t('Values are dependent on other filters')}\n        initialValue={hasDependencies}\n        onChange={onCheckChanged}\n        tooltip={t(\n          'Values selected in other filters will affect the filter options to only show relevant values',\n        )}\n      >\n        {hasDependencies && <Label>{t('Values dependent on')}</Label>}\n        <List\n          availableFilters={availableFilters}\n          dependencies={dependencies}\n          onDependenciesChange={onDependenciesChange}\n          getDependencySuggestion={getDependencySuggestion}\n        />\n      </CollapsibleControl>\n    </MainPanel>\n  );\n};\n\nexport default DependencyList;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react-hooks/rules-of-hooks */\nimport {\n  ColumnMeta,\n  InfoTooltipWithTrigger,\n  Metric,\n} from '@superset-ui/chart-controls';\nimport {\n  AdhocFilter,\n  Behavior,\n  ChartDataResponseResult,\n  Column,\n  Filter,\n  GenericDataType,\n  getChartMetadataRegistry,\n  JsonResponse,\n  NativeFilterType,\n  styled,\n  SupersetApiError,\n  SupersetClient,\n  t,\n} from '@superset-ui/core';\nimport { isEqual } from 'lodash';\nimport React, {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useState,\n} from 'react';\nimport { PluginFilterSelectCustomizeProps } from 'src/filters/components/Select/types';\nimport { useSelector } from 'react-redux';\nimport { getChartDataRequest } from 'src/components/Chart/chartAction';\nimport { Input, TextArea } from 'src/components/Input';\nimport { Select, FormInstance } from 'src/components';\nimport Collapse from 'src/components/Collapse';\nimport BasicErrorAlert from 'src/components/ErrorMessage/BasicErrorAlert';\nimport { FormItem } from 'src/components/Form';\nimport Icons from 'src/components/Icons';\nimport Loading from 'src/components/Loading';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { Radio } from 'src/components/Radio';\nimport Tabs from 'src/components/Tabs';\nimport { Tooltip } from 'src/components/Tooltip';\nimport {\n  Chart,\n  ChartsState,\n  DatasourcesState,\n  RootState,\n} from 'src/dashboard/types';\nimport DateFilterControl from 'src/explore/components/controls/DateFilterControl';\nimport AdhocFilterControl from 'src/explore/components/controls/FilterControl/AdhocFilterControl';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport { waitForAsyncData } from 'src/middleware/asyncEvent';\nimport { cacheWrapper } from 'src/utils/cacheWrapper';\nimport { ClientErrorObject } from 'src/utils/getClientErrorObject';\nimport { SingleValueType } from 'src/filters/components/Range/SingleValueType';\nimport {\n  getFormData,\n  mergeExtraFormData,\n} from 'src/dashboard/components/nativeFilters/utils';\nimport {\n  ALLOW_DEPENDENCIES as TYPES_SUPPORT_DEPENDENCIES,\n  getFiltersConfigModalTestId,\n} from '../FiltersConfigModal';\nimport { FilterRemoval, NativeFiltersForm } from '../types';\nimport { CollapsibleControl } from './CollapsibleControl';\nimport { ColumnSelect } from './ColumnSelect';\nimport DatasetSelect from './DatasetSelect';\nimport DefaultValue from './DefaultValue';\nimport FilterScope from './FilterScope/FilterScope';\nimport getControlItemsMap from './getControlItemsMap';\nimport RemovedFilter from './RemovedFilter';\nimport { useBackendFormUpdate, useDefaultValue } from './state';\nimport {\n  FILTER_SUPPORTED_TYPES,\n  hasTemporalColumns,\n  mostUsedDataset,\n  setNativeFilterFieldValues,\n  useForceUpdate,\n} from './utils';\nimport DependencyList from './DependencyList';\n\nconst TabPane = styled(Tabs.TabPane)`\n  padding: ${({ theme }) => theme.gridUnit * 4}px 0px;\n`;\n\nconst StyledContainer = styled.div`\n  ${({ theme }) => `\n    display: flex;\n    flex-direction: row-reverse;\n    justify-content: space-between;\n    padding: 0px ${theme.gridUnit * 4}px;\n  `}\n`;\n\nconst StyledRowContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100%;\n  padding: 0px ${({ theme }) => theme.gridUnit * 4}px;\n`;\n\ntype ControlKey = keyof PluginFilterSelectCustomizeProps;\n\nconst controlsOrder: ControlKey[] = [\n  'enableEmptyFilter',\n  'defaultToFirstItem',\n  'multiSelect',\n  'searchAllOptions',\n  'inverseSelection',\n];\n\nexport const StyledFormItem = styled(FormItem)`\n  width: 49%;\n  margin-bottom: ${({ theme }) => theme.gridUnit * 4}px;\n\n  & .ant-form-item-label {\n    padding-bottom: 0;\n  }\n\n  & .ant-form-item-control-input {\n    min-height: ${({ theme }) => theme.gridUnit * 10}px;\n  }\n`;\n\nexport const StyledRowFormItem = styled(FormItem)`\n  margin-bottom: 0;\n  padding-bottom: 0;\n  min-width: 50%;\n\n  & .ant-form-item-label {\n    padding-bottom: 0;\n  }\n\n  .ant-form-item-control-input-content > div > div {\n    height: auto;\n  }\n\n  & .ant-form-item-control-input {\n    min-height: ${({ theme }) => theme.gridUnit * 10}px;\n  }\n`;\n\nexport const StyledRowSubFormItem = styled(FormItem)`\n  min-width: 50%;\n\n  & .ant-form-item-label {\n    padding-bottom: 0;\n  }\n\n  .ant-form-item {\n    margin-bottom: 0;\n  }\n\n  .ant-form-item-control-input-content > div > div {\n    height: auto;\n  }\n\n  .ant-form-item-extra {\n    display: none;\n  }\n\n  & .ant-form-item-control-input {\n    height: auto;\n  }\n`;\n\nexport const StyledLabel = styled.span`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  text-transform: uppercase;\n`;\n\nconst CleanFormItem = styled(FormItem)`\n  margin-bottom: 0;\n`;\n\nconst DefaultValueContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst RefreshIcon = styled(Icons.Refresh)`\n  margin-left: ${({ theme }) => theme.gridUnit * 2}px;\n  color: ${({ theme }) => theme.colors.primary.base};\n`;\n\nconst StyledCollapse = styled(Collapse)`\n  border-left: 0;\n  border-top: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  border-radius: 0;\n\n  .ant-collapse-header {\n    border-bottom: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-top: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    margin-top: -1px;\n    border-radius: 0;\n  }\n\n  .ant-collapse-content {\n    border: 0;\n  }\n\n  .ant-collapse-content-box {\n    padding-top: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n\n  &.ant-collapse > .ant-collapse-item {\n    border: 0;\n    border-radius: 0;\n  }\n`;\n\nconst StyledTabs = styled(Tabs)`\n  .ant-tabs-nav {\n    position: sticky;\n    top: 0;\n    background: ${({ theme }) => theme.colors.grayscale.light5};\n    z-index: 1;\n  }\n\n  .ant-tabs-nav-list {\n    padding: 0;\n  }\n\n  .ant-form-item-label {\n    padding-bottom: 0;\n  }\n`;\n\nconst StyledAsterisk = styled.span`\n  color: ${({ theme }) => theme.colors.error.base};\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  margin-left: ${({ theme }) => theme.gridUnit - 1}px;\n  &:before {\n    content: '*';\n  }\n`;\n\nconst FilterTabs = {\n  configuration: {\n    key: 'configuration',\n    name: t('Settings'),\n  },\n  scoping: {\n    key: 'scoping',\n    name: t('Scoping'),\n  },\n};\n\nexport const FilterPanels = {\n  configuration: {\n    key: 'configuration',\n    name: t('Filter Configuration'),\n  },\n  settings: {\n    key: 'settings',\n    name: t('Filter Settings'),\n  },\n};\n\nexport interface FiltersConfigFormProps {\n  filterId: string;\n  filterToEdit?: Filter;\n  removedFilters: Record<string, FilterRemoval>;\n  restoreFilter: (filterId: string) => void;\n  form: FormInstance<NativeFiltersForm>;\n  getAvailableFilters: (filterId: string) => { label: string; value: string }[];\n  handleActiveFilterPanelChange: (activeFilterPanel: string | string[]) => void;\n  activeFilterPanelKeys: string | string[];\n  isActive: boolean;\n  setErroredFilters: (f: (filters: string[]) => string[]) => void;\n  validateDependencies: () => void;\n  getDependencySuggestion: (filterId: string) => string;\n}\n\nconst FILTERS_WITH_ADHOC_FILTERS = ['filter_select', 'filter_range'];\n\n// TODO: Rename the filter plugins and remove this mapping\nconst FILTER_TYPE_NAME_MAPPING = {\n  [t('Select filter')]: t('Value'),\n  [t('Range filter')]: t('Numerical range'),\n  [t('Time filter')]: t('Time range'),\n  [t('Time column')]: t('Time column'),\n  [t('Time grain')]: t('Time grain'),\n  [t('Group By')]: t('Group by'),\n};\n\nconst localCache = new Map<string, any>();\n\nconst cachedSupersetGet = cacheWrapper(\n  SupersetClient.get,\n  localCache,\n  ({ endpoint }) => endpoint || '',\n);\n\n/**\n * The configuration form for a specific filter.\n * Assigns field values to `filters[filterId]` in the form.\n */\nconst FiltersConfigForm = (\n  {\n    filterId,\n    filterToEdit,\n    removedFilters,\n    form,\n    getAvailableFilters,\n    activeFilterPanelKeys,\n    restoreFilter,\n    handleActiveFilterPanelChange,\n    setErroredFilters,\n    validateDependencies,\n    getDependencySuggestion,\n  }: FiltersConfigFormProps,\n  ref: React.RefObject<any>,\n) => {\n  const isRemoved = !!removedFilters[filterId];\n  const [error, setError] = useState<string>('');\n  const [metrics, setMetrics] = useState<Metric[]>([]);\n  const [activeTabKey, setActiveTabKey] = useState<string>(\n    FilterTabs.configuration.key,\n  );\n\n  const [undoFormValues, setUndoFormValues] = useState<Record<\n    string,\n    any\n  > | null>(null);\n  const forceUpdate = useForceUpdate();\n  const [datasetDetails, setDatasetDetails] = useState<Record<string, any>>();\n  const defaultFormFilter = useMemo(() => ({}), []);\n  const filters = form.getFieldValue('filters');\n  const formValues = filters?.[filterId];\n  const formFilter = formValues || undoFormValues || defaultFormFilter;\n\n  const dependencies: string[] =\n    formFilter?.dependencies || filterToEdit?.cascadeParentIds;\n\n  const nativeFilterItems = getChartMetadataRegistry().items;\n  const nativeFilterVizTypes = Object.entries(nativeFilterItems)\n    // @ts-ignore\n    .filter(([, { value }]) =>\n      value.behaviors?.includes(Behavior.NATIVE_FILTER),\n    )\n    .map(([key]) => key);\n\n  const loadedDatasets = useSelector<RootState, DatasourcesState>(\n    ({ datasources }) => datasources,\n  );\n\n  const charts = useSelector<RootState, ChartsState>(({ charts }) => charts);\n\n  const doLoadedDatasetsHaveTemporalColumns = useMemo(\n    () =>\n      Object.values(loadedDatasets).some(dataset =>\n        hasTemporalColumns(dataset),\n      ),\n    [loadedDatasets],\n  );\n\n  const showTimeRangePicker = useMemo(() => {\n    const currentDataset = Object.values(loadedDatasets).find(\n      dataset => dataset.id === formFilter?.dataset?.value,\n    );\n\n    return currentDataset ? hasTemporalColumns(currentDataset) : true;\n  }, [formFilter?.dataset?.value, loadedDatasets]);\n\n  const hasDataset =\n    // @ts-ignore\n    !!nativeFilterItems[formFilter?.filterType]?.value?.datasourceCount;\n\n  const datasetId =\n    formFilter?.dataset?.value ??\n    filterToEdit?.targets[0]?.datasetId ??\n    mostUsedDataset(loadedDatasets, charts);\n\n  const { controlItems = {}, mainControlItems = {} } = formFilter\n    ? getControlItemsMap({\n        datasetId,\n        disabled: false,\n        forceUpdate,\n        form,\n        filterId,\n        filterType: formFilter?.filterType,\n        filterToEdit,\n        formFilter,\n        removed: isRemoved,\n      })\n    : {};\n  const hasColumn = !!mainControlItems.groupby;\n\n  const nativeFilterItem = nativeFilterItems[formFilter?.filterType] ?? {};\n  // @ts-ignore\n  const enableNoResults = !!nativeFilterItem.value?.enableNoResults;\n\n  const hasMetrics = hasColumn && !!metrics.length;\n\n  const hasFilledDataset =\n    !hasDataset || (datasetId && (formFilter?.column || !hasColumn));\n\n  const hasAdditionalFilters = FILTERS_WITH_ADHOC_FILTERS.includes(\n    formFilter?.filterType,\n  );\n\n  const canDependOnOtherFilters = TYPES_SUPPORT_DEPENDENCIES.includes(\n    formFilter?.filterType,\n  );\n\n  const isDataDirty = formFilter?.isDataDirty ?? true;\n\n  const setNativeFilterFieldValuesWrapper = (values: object) => {\n    setNativeFilterFieldValues(form, filterId, values);\n    setError('');\n    forceUpdate();\n  };\n\n  const setErrorWrapper = (error: string) => {\n    setNativeFilterFieldValues(form, filterId, {\n      defaultValueQueriesData: null,\n    });\n    setError(error);\n    forceUpdate();\n  };\n\n  // Calculates the dependencies default values to be used\n  // to extract the available values to the filter\n  let dependenciesDefaultValues = {};\n  if (dependencies && dependencies.length > 0 && filters) {\n    dependencies.forEach(dependency => {\n      const extraFormData = filters[dependency]?.defaultDataMask?.extraFormData;\n      dependenciesDefaultValues = mergeExtraFormData(\n        dependenciesDefaultValues,\n        extraFormData,\n      );\n    });\n  }\n\n  const dependenciesText = JSON.stringify(dependenciesDefaultValues);\n\n  const refreshHandler = useCallback(\n    (force = false) => {\n      if (!hasDataset || !formFilter?.dataset?.value) {\n        forceUpdate();\n        return;\n      }\n      const formData = getFormData({\n        datasetId: formFilter?.dataset?.value,\n        groupby: formFilter?.column,\n        ...formFilter,\n      });\n\n      formData.extra_form_data = dependenciesDefaultValues;\n\n      setNativeFilterFieldValuesWrapper({\n        defaultValueQueriesData: null,\n        isDataDirty: false,\n      });\n      getChartDataRequest({\n        formData,\n        force,\n        requestParams: { dashboardId: 0 },\n      })\n        .then(({ response, json }) => {\n          if (isFeatureEnabled(FeatureFlag.GLOBAL_ASYNC_QUERIES)) {\n            // deal with getChartDataRequest transforming the response data\n            const result = 'result' in json ? json.result[0] : json;\n\n            if (response.status === 200) {\n              setNativeFilterFieldValuesWrapper({\n                defaultValueQueriesData: [result],\n              });\n            } else if (response.status === 202) {\n              waitForAsyncData(result)\n                .then((asyncResult: ChartDataResponseResult[]) => {\n                  setNativeFilterFieldValuesWrapper({\n                    defaultValueQueriesData: asyncResult,\n                  });\n                })\n                .catch((error: ClientErrorObject) => {\n                  setError(\n                    error.message || error.error || t('Check configuration'),\n                  );\n                });\n            } else {\n              throw new Error(\n                `Received unexpected response status (${response.status}) while fetching chart data`,\n              );\n            }\n          } else {\n            setNativeFilterFieldValuesWrapper({\n              defaultValueQueriesData: json.result,\n            });\n          }\n        })\n        .catch((error: Response) => {\n          error.json().then(body => {\n            setErrorWrapper(\n              body.message || error.statusText || t('Check configuration'),\n            );\n          });\n        });\n    },\n    [filterId, forceUpdate, form, formFilter, hasDataset, dependenciesText],\n  );\n\n  // TODO: refreshHandler changes itself because of the dependencies. Needs refactor.\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => refreshHandler(), [dependenciesText]);\n\n  const newFormData = getFormData({\n    datasetId,\n    groupby: hasColumn ? formFilter?.column : undefined,\n    ...formFilter,\n  });\n  newFormData.extra_form_data = dependenciesDefaultValues;\n\n  const [hasDefaultValue, isRequired, defaultValueTooltip, setHasDefaultValue] =\n    useDefaultValue(formFilter, filterToEdit);\n\n  const showDataset =\n    !datasetId || datasetDetails || formFilter?.dataset?.label;\n\n  const formChanged = useCallback(() => {\n    form.setFields([\n      {\n        name: 'changed',\n        value: true,\n      },\n    ]);\n  }, [form]);\n\n  const updateFormValues = useCallback(\n    (values: any) => {\n      setNativeFilterFieldValues(form, filterId, values);\n      formChanged();\n    },\n    [filterId, form, formChanged],\n  );\n\n  const hasPreFilter =\n    !!formFilter?.adhoc_filters ||\n    !!formFilter?.time_range ||\n    !!filterToEdit?.adhoc_filters?.length ||\n    !!filterToEdit?.time_range;\n\n  const hasEnableSingleValue =\n    formFilter?.controlValues?.enableSingleValue !== undefined ||\n    filterToEdit?.controlValues?.enableSingleValue !== undefined;\n\n  let enableSingleValue = filterToEdit?.controlValues?.enableSingleValue;\n  if (formFilter?.controlValues?.enableSingleMaxValue !== undefined) {\n    ({ enableSingleValue } = formFilter.controlValues);\n  }\n\n  const hasSorting =\n    typeof formFilter?.controlValues?.sortAscending === 'boolean' ||\n    typeof filterToEdit?.controlValues?.sortAscending === 'boolean';\n\n  let sort = filterToEdit?.controlValues?.sortAscending;\n  if (typeof formFilter?.controlValues?.sortAscending === 'boolean') {\n    sort = formFilter.controlValues.sortAscending;\n  }\n\n  const showDefaultValue =\n    !hasDataset ||\n    (!isDataDirty && hasFilledDataset) ||\n    !mainControlItems.groupby;\n\n  const onSortChanged = (value: boolean | undefined) => {\n    const previous = form.getFieldValue('filters')?.[filterId].controlValues;\n    setNativeFilterFieldValues(form, filterId, {\n      controlValues: {\n        ...previous,\n        sortAscending: value,\n      },\n    });\n    forceUpdate();\n  };\n\n  const onEnableSingleValueChanged = (value: SingleValueType | undefined) => {\n    const previous = form.getFieldValue('filters')?.[filterId].controlValues;\n    setNativeFilterFieldValues(form, filterId, {\n      controlValues: {\n        ...previous,\n        enableSingleValue: value,\n      },\n    });\n    forceUpdate();\n  };\n\n  const validatePreFilter = () =>\n    setTimeout(\n      () =>\n        form.validateFields([\n          ['filters', filterId, 'adhoc_filters'],\n          ['filters', filterId, 'time_range'],\n        ]),\n      0,\n    );\n\n  const hasTimeRange =\n    formFilter?.time_range && formFilter.time_range !== 'No filter';\n\n  const hasAdhoc = formFilter?.adhoc_filters?.length > 0;\n\n  const defaultToFirstItem = formFilter?.controlValues?.defaultToFirstItem;\n\n  const initialDefaultValue =\n    formFilter?.filterType === filterToEdit?.filterType\n      ? filterToEdit?.defaultDataMask\n      : null;\n\n  const preFilterValidator = () => {\n    if (hasTimeRange || hasAdhoc) {\n      return Promise.resolve();\n    }\n    return Promise.reject(new Error(t('Pre-filter is required')));\n  };\n\n  const availableFilters = getAvailableFilters(filterId);\n  const hasAvailableFilters = availableFilters.length > 0;\n\n  useEffect(() => {\n    if (datasetId) {\n      cachedSupersetGet({\n        endpoint: `/api/v1/dataset/${datasetId}`,\n      })\n        .then((response: JsonResponse) => {\n          setMetrics(response.json?.result?.metrics);\n          const dataset = response.json?.result;\n          // modify the response to fit structure expected by AdhocFilterControl\n          dataset.type = dataset.datasource_type;\n          dataset.filter_select = true;\n          setDatasetDetails(dataset);\n        })\n        .catch((response: SupersetApiError) => {\n          addDangerToast(response.message);\n        });\n    }\n  }, [datasetId]);\n\n  useImperativeHandle(ref, () => ({\n    changeTab(tab: 'configuration' | 'scoping') {\n      setActiveTabKey(tab);\n    },\n  }));\n\n  useBackendFormUpdate(form, filterId);\n\n  useEffect(() => {\n    if (hasDataset && hasFilledDataset && hasDefaultValue && isDataDirty) {\n      refreshHandler();\n    }\n  }, [\n    hasDataset,\n    hasFilledDataset,\n    hasDefaultValue,\n    isDataDirty,\n    refreshHandler,\n    showDataset,\n  ]);\n\n  const initiallyExcludedCharts = useMemo(() => {\n    const excluded: number[] = [];\n    if (formFilter?.dataset?.value === undefined) {\n      return [];\n    }\n\n    Object.values(charts).forEach((chart: Chart) => {\n      const chartDatasetUid = chart.formData?.datasource;\n      if (chartDatasetUid === undefined) {\n        return;\n      }\n      if (loadedDatasets[chartDatasetUid]?.id !== formFilter?.dataset?.value) {\n        excluded.push(chart.id);\n      }\n    });\n    return excluded;\n  }, [\n    JSON.stringify(charts),\n    formFilter?.dataset?.value,\n    JSON.stringify(loadedDatasets),\n  ]);\n\n  useEffect(() => {\n    // just removed, saving current form items for eventual undo\n    if (isRemoved) {\n      setUndoFormValues(formValues);\n    }\n  }, [isRemoved]);\n\n  useEffect(() => {\n    // the filter was just restored after undo\n    if (undoFormValues && !isRemoved) {\n      setNativeFilterFieldValues(form, filterId, undoFormValues);\n      setUndoFormValues(null);\n    }\n  }, [formValues, filterId, form, isRemoved, undoFormValues]);\n\n  if (isRemoved) {\n    return <RemovedFilter onClick={() => restoreFilter(filterId)} />;\n  }\n\n  return (\n    <StyledTabs\n      activeKey={activeTabKey}\n      onChange={activeKey => setActiveTabKey(activeKey)}\n      centered\n    >\n      <TabPane\n        tab={FilterTabs.configuration.name}\n        key={FilterTabs.configuration.key}\n        forceRender\n      >\n        <StyledContainer>\n          <StyledFormItem\n            name={['filters', filterId, 'type']}\n            hidden\n            initialValue={NativeFilterType.NATIVE_FILTER}\n          >\n            <Input />\n          </StyledFormItem>\n          <StyledFormItem\n            name={['filters', filterId, 'name']}\n            label={<StyledLabel>{t('Filter name')}</StyledLabel>}\n            initialValue={filterToEdit?.name}\n            rules={[{ required: !isRemoved, message: t('Name is required') }]}\n          >\n            <Input {...getFiltersConfigModalTestId('name-input')} />\n          </StyledFormItem>\n          <StyledFormItem\n            name={['filters', filterId, 'filterType']}\n            rules={[{ required: !isRemoved, message: t('Name is required') }]}\n            initialValue={filterToEdit?.filterType || 'filter_select'}\n            label={<StyledLabel>{t('Filter Type')}</StyledLabel>}\n            {...getFiltersConfigModalTestId('filter-type')}\n          >\n            <Select\n              ariaLabel={t('Filter type')}\n              options={nativeFilterVizTypes.map(filterType => {\n                // @ts-ignore\n                const name = nativeFilterItems[filterType]?.value.name;\n                const mappedName = name\n                  ? FILTER_TYPE_NAME_MAPPING[name]\n                  : undefined;\n                const isDisabled =\n                  FILTER_SUPPORTED_TYPES[filterType]?.length === 1 &&\n                  FILTER_SUPPORTED_TYPES[filterType]?.includes(\n                    GenericDataType.TEMPORAL,\n                  ) &&\n                  !doLoadedDatasetsHaveTemporalColumns;\n                return {\n                  value: filterType,\n                  label: mappedName || name,\n                  customLabel: isDisabled ? (\n                    <Tooltip\n                      title={t('Datasets do not contain a temporal column')}\n                    >\n                      {mappedName || name}\n                    </Tooltip>\n                  ) : undefined,\n                  disabled: isDisabled,\n                };\n              })}\n              onChange={value => {\n                setNativeFilterFieldValues(form, filterId, {\n                  filterType: value,\n                  defaultDataMask: null,\n                  column: null,\n                });\n                forceUpdate();\n              }}\n            />\n          </StyledFormItem>\n        </StyledContainer>\n        {hasDataset && (\n          <StyledRowContainer>\n            {showDataset ? (\n              <StyledFormItem\n                name={['filters', filterId, 'dataset']}\n                label={<StyledLabel>{t('Dataset')}</StyledLabel>}\n                initialValue={\n                  datasetDetails\n                    ? {\n                        label: datasetDetails.table_name,\n                        value: datasetDetails.id,\n                      }\n                    : undefined\n                }\n                rules={[\n                  { required: !isRemoved, message: t('Dataset is required') },\n                ]}\n                {...getFiltersConfigModalTestId('datasource-input')}\n              >\n                <DatasetSelect\n                  onChange={(value: { label: string; value: number }) => {\n                    // We need to reset the column when the dataset has changed\n                    if (value.value !== datasetId) {\n                      setNativeFilterFieldValues(form, filterId, {\n                        dataset: value,\n                        defaultDataMask: null,\n                        column: null,\n                      });\n                    }\n                    forceUpdate();\n                  }}\n                />\n              </StyledFormItem>\n            ) : (\n              <StyledFormItem label={<StyledLabel>{t('Dataset')}</StyledLabel>}>\n                <Loading position=\"inline-centered\" />\n              </StyledFormItem>\n            )}\n            {hasDataset &&\n              Object.keys(mainControlItems).map(\n                key => mainControlItems[key].element,\n              )}\n          </StyledRowContainer>\n        )}\n        <StyledCollapse\n          activeKey={activeFilterPanelKeys}\n          onChange={key => {\n            handleActiveFilterPanelChange(key);\n          }}\n          expandIconPosition=\"right\"\n          key={`native-filter-config-${filterId}`}\n        >\n          {formFilter?.filterType !== 'filter_time' && (\n            <Collapse.Panel\n              forceRender\n              header={FilterPanels.configuration.name}\n              key={`${filterId}-${FilterPanels.configuration.key}`}\n            >\n              {canDependOnOtherFilters && hasAvailableFilters && (\n                <StyledRowFormItem\n                  name={['filters', filterId, 'dependencies']}\n                  initialValue={dependencies}\n                >\n                  <DependencyList\n                    availableFilters={availableFilters}\n                    dependencies={dependencies}\n                    onDependenciesChange={dependencies => {\n                      setNativeFilterFieldValues(form, filterId, {\n                        dependencies,\n                      });\n                      forceUpdate();\n                      validateDependencies();\n                      formChanged();\n                    }}\n                    getDependencySuggestion={() =>\n                      getDependencySuggestion(filterId)\n                    }\n                  />\n                </StyledRowFormItem>\n              )}\n              {hasDataset && hasAdditionalFilters && (\n                <CleanFormItem name={['filters', filterId, 'preFilter']}>\n                  <CollapsibleControl\n                    initialValue={hasPreFilter}\n                    title={t('Pre-filter available values')}\n                    onChange={checked => {\n                      formChanged();\n                      if (checked) {\n                        validatePreFilter();\n                      }\n                    }}\n                  >\n                    <StyledRowSubFormItem\n                      name={['filters', filterId, 'adhoc_filters']}\n                      initialValue={filterToEdit?.adhoc_filters}\n                      required\n                      rules={[\n                        {\n                          validator: preFilterValidator,\n                        },\n                      ]}\n                    >\n                      <AdhocFilterControl\n                        columns={\n                          datasetDetails?.columns?.filter(\n                            (c: ColumnMeta) => c.filterable,\n                          ) || []\n                        }\n                        savedMetrics={datasetDetails?.metrics || []}\n                        datasource={datasetDetails}\n                        onChange={(filters: AdhocFilter[]) => {\n                          setNativeFilterFieldValues(form, filterId, {\n                            adhoc_filters: filters,\n                          });\n                          forceUpdate();\n                          validatePreFilter();\n                        }}\n                        label={\n                          <span>\n                            <StyledLabel>{t('Pre-filter')}</StyledLabel>\n                            {!hasTimeRange && <StyledAsterisk />}\n                          </span>\n                        }\n                      />\n                    </StyledRowSubFormItem>\n                    {showTimeRangePicker && (\n                      <StyledRowFormItem\n                        name={['filters', filterId, 'time_range']}\n                        label={<StyledLabel>{t('Time range')}</StyledLabel>}\n                        initialValue={filterToEdit?.time_range || 'No filter'}\n                        required={!hasAdhoc}\n                        rules={[\n                          {\n                            validator: preFilterValidator,\n                          },\n                        ]}\n                      >\n                        <DateFilterControl\n                          name=\"time_range\"\n                          onChange={timeRange => {\n                            setNativeFilterFieldValues(form, filterId, {\n                              time_range: timeRange,\n                            });\n                            forceUpdate();\n                            validatePreFilter();\n                          }}\n                        />\n                      </StyledRowFormItem>\n                    )}\n                    {hasTimeRange && (\n                      <StyledRowFormItem\n                        name={['filters', filterId, 'granularity_sqla']}\n                        label={\n                          <>\n                            <StyledLabel>{t('Time column')}</StyledLabel>&nbsp;\n                            <InfoTooltipWithTrigger\n                              placement=\"top\"\n                              tooltip={t(\n                                'Optional time column if time range should apply to another column than the default time column',\n                              )}\n                            />\n                          </>\n                        }\n                        initialValue={filterToEdit?.granularity_sqla}\n                      >\n                        <ColumnSelect\n                          allowClear\n                          form={form}\n                          formField=\"granularity_sqla\"\n                          filterId={filterId}\n                          filterValues={(column: Column) => !!column.is_dttm}\n                          datasetId={datasetId}\n                          onChange={column => {\n                            // We need reset default value when when column changed\n                            setNativeFilterFieldValues(form, filterId, {\n                              granularity_sqla: column,\n                            });\n                            forceUpdate();\n                          }}\n                        />\n                      </StyledRowFormItem>\n                    )}\n                  </CollapsibleControl>\n                </CleanFormItem>\n              )}\n              {formFilter?.filterType !== 'filter_range' ? (\n                <CleanFormItem name={['filters', filterId, 'sortFilter']}>\n                  <CollapsibleControl\n                    initialValue={hasSorting}\n                    title={t('Sort filter values')}\n                    onChange={checked => {\n                      onSortChanged(checked || undefined);\n                      formChanged();\n                    }}\n                  >\n                    <StyledRowFormItem\n                      name={[\n                        'filters',\n                        filterId,\n                        'controlValues',\n                        'sortAscending',\n                      ]}\n                      initialValue={sort}\n                      label={<StyledLabel>{t('Sort type')}</StyledLabel>}\n                    >\n                      <Radio.Group\n                        onChange={value => {\n                          onSortChanged(value.target.value);\n                        }}\n                      >\n                        <Radio value>{t('Sort ascending')}</Radio>\n                        <Radio value={false}>{t('Sort descending')}</Radio>\n                      </Radio.Group>\n                    </StyledRowFormItem>\n                    {hasMetrics && (\n                      <StyledRowSubFormItem\n                        name={['filters', filterId, 'sortMetric']}\n                        initialValue={filterToEdit?.sortMetric}\n                        label={\n                          <>\n                            <StyledLabel>{t('Sort Metric')}</StyledLabel>&nbsp;\n                            <InfoTooltipWithTrigger\n                              placement=\"top\"\n                              tooltip={t(\n                                'If a metric is specified, sorting will be done based on the metric value',\n                              )}\n                            />\n                          </>\n                        }\n                        data-test=\"field-input\"\n                      >\n                        <Select\n                          allowClear\n                          ariaLabel={t('Sort metric')}\n                          name=\"sortMetric\"\n                          options={metrics.map((metric: Metric) => ({\n                            value: metric.metric_name,\n                            label: metric.verbose_name ?? metric.metric_name,\n                          }))}\n                          onChange={value => {\n                            if (value !== undefined) {\n                              setNativeFilterFieldValues(form, filterId, {\n                                sortMetric: value,\n                              });\n                              forceUpdate();\n                            }\n                          }}\n                        />\n                      </StyledRowSubFormItem>\n                    )}\n                  </CollapsibleControl>\n                </CleanFormItem>\n              ) : (\n                <CleanFormItem name={['filters', filterId, 'rangeFilter']}>\n                  <CollapsibleControl\n                    initialValue={hasEnableSingleValue}\n                    title={t('Single Value')}\n                    onChange={checked => {\n                      onEnableSingleValueChanged(\n                        checked ? SingleValueType.Exact : undefined,\n                      );\n                      formChanged();\n                    }}\n                  >\n                    <StyledRowFormItem\n                      name={[\n                        'filters',\n                        filterId,\n                        'controlValues',\n                        'enableSingleValue',\n                      ]}\n                      initialValue={enableSingleValue}\n                      label={\n                        <StyledLabel>{t('Single value type')}</StyledLabel>\n                      }\n                    >\n                      <Radio.Group\n                        onChange={value =>\n                          onEnableSingleValueChanged(value.target.value)\n                        }\n                      >\n                        <Radio value={SingleValueType.Minimum}>\n                          {t('Minimum')}\n                        </Radio>\n                        <Radio value={SingleValueType.Exact}>\n                          {t('Exact')}\n                        </Radio>\n                        <Radio value={SingleValueType.Maximum}>\n                          {t('Maximum')}\n                        </Radio>\n                      </Radio.Group>\n                    </StyledRowFormItem>\n                  </CollapsibleControl>\n                </CleanFormItem>\n              )}\n            </Collapse.Panel>\n          )}\n          <Collapse.Panel\n            forceRender\n            header={FilterPanels.settings.name}\n            key={`${filterId}-${FilterPanels.settings.key}`}\n          >\n            <StyledFormItem\n              name={['filters', filterId, 'description']}\n              initialValue={filterToEdit?.description}\n              label={<StyledLabel>{t('Description')}</StyledLabel>}\n            >\n              <TextArea />\n            </StyledFormItem>\n            <CleanFormItem\n              name={['filters', filterId, 'defaultValueQueriesData']}\n              hidden\n              initialValue={null}\n            />\n            <CleanFormItem name={['filters', filterId, 'defaultValue']}>\n              <CollapsibleControl\n                checked={hasDefaultValue}\n                disabled={isRequired || defaultToFirstItem}\n                initialValue={hasDefaultValue}\n                title={t('Filter has default value')}\n                tooltip={defaultValueTooltip}\n                onChange={value => {\n                  setHasDefaultValue(value);\n                  if (!value) {\n                    setNativeFilterFieldValues(form, filterId, {\n                      defaultDataMask: null,\n                    });\n                  }\n                  formChanged();\n                }}\n              >\n                {!isRemoved && (\n                  <StyledRowSubFormItem\n                    name={['filters', filterId, 'defaultDataMask']}\n                    initialValue={initialDefaultValue}\n                    data-test=\"default-input\"\n                    label={<StyledLabel>{t('Default Value')}</StyledLabel>}\n                    required={hasDefaultValue}\n                    rules={[\n                      {\n                        validator: () => {\n                          if (formFilter?.defaultDataMask?.filterState?.value) {\n                            // requires managing the error as the DefaultValue\n                            // component does not use an Antdesign compatible input\n                            const formValidationFields = form.getFieldsError();\n                            setErroredFilters(prevErroredFilters => {\n                              if (\n                                prevErroredFilters.length &&\n                                !formValidationFields.find(\n                                  f => f.errors.length > 0,\n                                )\n                              ) {\n                                return [];\n                              }\n                              return prevErroredFilters;\n                            });\n                            return Promise.resolve();\n                          }\n                          setErroredFilters(prevErroredFilters => {\n                            if (prevErroredFilters.includes(filterId)) {\n                              return prevErroredFilters;\n                            }\n                            return [...prevErroredFilters, filterId];\n                          });\n                          return Promise.reject(\n                            new Error(t('Default value is required')),\n                          );\n                        },\n                      },\n                    ]}\n                  >\n                    {error ? (\n                      <BasicErrorAlert\n                        title={t('Cannot load filter')}\n                        body={error}\n                        level=\"error\"\n                      />\n                    ) : showDefaultValue ? (\n                      <DefaultValueContainer>\n                        <DefaultValue\n                          setDataMask={dataMask => {\n                            if (\n                              !isEqual(\n                                initialDefaultValue?.filterState?.value,\n                                dataMask?.filterState?.value,\n                              )\n                            ) {\n                              formChanged();\n                            }\n                            setNativeFilterFieldValues(form, filterId, {\n                              defaultDataMask: dataMask,\n                            });\n                            form.validateFields([\n                              ['filters', filterId, 'defaultDataMask'],\n                            ]);\n                            forceUpdate();\n                          }}\n                          hasDefaultValue={hasDefaultValue}\n                          filterId={filterId}\n                          hasDataset={hasDataset}\n                          form={form}\n                          formData={newFormData}\n                          enableNoResults={enableNoResults}\n                        />\n                        {hasDataset && datasetId && (\n                          <Tooltip title={t('Refresh the default values')}>\n                            <RefreshIcon onClick={() => refreshHandler(true)} />\n                          </Tooltip>\n                        )}\n                      </DefaultValueContainer>\n                    ) : (\n                      t('Fill all required fields to enable \"Default Value\"')\n                    )}\n                  </StyledRowSubFormItem>\n                )}\n              </CollapsibleControl>\n            </CleanFormItem>\n            {Object.keys(controlItems)\n              .sort(\n                (a, b) =>\n                  controlsOrder.indexOf(a as ControlKey) -\n                  controlsOrder.indexOf(b as ControlKey),\n              )\n              .map(key => controlItems[key].element)}\n          </Collapse.Panel>\n        </StyledCollapse>\n      </TabPane>\n      <TabPane\n        tab={FilterTabs.scoping.name}\n        key={FilterTabs.scoping.key}\n        forceRender\n      >\n        <FilterScope\n          updateFormValues={updateFormValues}\n          pathToFormValue={['filters', filterId]}\n          forceUpdate={forceUpdate}\n          filterScope={filterToEdit?.scope}\n          formFilterScope={formFilter?.scope}\n          formScopingType={formFilter?.scoping}\n          initiallyExcludedCharts={initiallyExcludedCharts}\n        />\n      </TabPane>\n    </StyledTabs>\n  );\n};\n\nexport default forwardRef<typeof FiltersConfigForm, FiltersConfigFormProps>(\n  FiltersConfigForm,\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useState } from 'react';\nimport { FormInstance } from 'src/components';\nimport { Filter, t } from '@superset-ui/core';\nimport { NativeFiltersForm, NativeFiltersFormItem } from '../types';\nimport { setNativeFilterFieldValues, useForceUpdate } from './utils';\n\n// When some fields in form changed we need re-fetch data for Filter defaultValue\n// eslint-disable-next-line import/prefer-default-export\nexport const useBackendFormUpdate = (\n  form: FormInstance<NativeFiltersForm>,\n  filterId: string,\n) => {\n  const forceUpdate = useForceUpdate();\n  const formFilter = (form.getFieldValue('filters') || {})[filterId];\n  useEffect(() => {\n    setNativeFilterFieldValues(form, filterId, {\n      isDataDirty: true,\n      defaultValueQueriesData: null,\n    });\n    forceUpdate();\n  }, [\n    form,\n    formFilter?.filterType,\n    formFilter?.column,\n    formFilter?.dataset?.value,\n    JSON.stringify(formFilter?.adhoc_filters),\n    formFilter?.time_range,\n    forceUpdate,\n    filterId,\n  ]);\n};\n\nexport const useDefaultValue = (\n  formFilter?: NativeFiltersFormItem,\n  filterToEdit?: Filter,\n): [boolean, boolean, string, Function] => {\n  const enableEmptyFilter = !!formFilter?.controlValues?.enableEmptyFilter;\n  const defaultToFirstItem = !!formFilter?.controlValues?.defaultToFirstItem;\n\n  const [hasDefaultValue, setHasPartialDefaultValue] = useState(false);\n  const [isRequired, setIsRequired] = useState(enableEmptyFilter);\n  const [defaultValueTooltip, setDefaultValueTooltip] = useState('');\n\n  const setHasDefaultValue = (value = false) => {\n    const required = enableEmptyFilter && !defaultToFirstItem;\n    setIsRequired(required);\n    setHasPartialDefaultValue(required ? true : value);\n  };\n\n  useEffect(() => {\n    setHasDefaultValue(\n      defaultToFirstItem\n        ? false\n        : !!formFilter?.defaultDataMask?.filterState?.value,\n    );\n    // TODO: this logic should be unhardcoded\n  }, [defaultToFirstItem, enableEmptyFilter]);\n\n  useEffect(() => {\n    setHasDefaultValue(\n      defaultToFirstItem\n        ? false\n        : !!filterToEdit?.defaultDataMask?.filterState?.value,\n    );\n  }, []);\n\n  useEffect(() => {\n    let tooltip = '';\n    if (defaultToFirstItem) {\n      tooltip = t(\n        'Default value set automatically when \"Select first filter value by default\" is checked',\n      );\n    } else if (isRequired) {\n      tooltip = t(\n        'Default value must be set when \"Filter value is required\" is checked',\n      );\n    } else if (hasDefaultValue) {\n      tooltip = t(\n        'Default value must be set when \"Filter has default value\" is checked',\n      );\n    }\n    setDefaultValueTooltip(tooltip);\n  }, [hasDefaultValue, isRequired, defaultToFirstItem]);\n\n  return [hasDefaultValue, isRequired, defaultValueTooltip, setHasDefaultValue];\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport Alert from 'src/components/Alert';\nimport Button, { OnClickHandler } from 'src/components/Button';\n\nexport interface ConfirmationAlertProps {\n  title: string;\n  children: React.ReactNode;\n  onConfirm: OnClickHandler;\n  onDismiss: OnClickHandler;\n}\n\nexport function CancelConfirmationAlert({\n  title,\n  onConfirm,\n  onDismiss,\n  children,\n}: ConfirmationAlertProps) {\n  return (\n    <Alert\n      closable={false}\n      type=\"warning\"\n      key=\"alert\"\n      message={title}\n      css={{\n        textAlign: 'left',\n        '& .ant-alert-action': { alignSelf: 'center' },\n      }}\n      description={children}\n      action={\n        <div css={{ display: 'flex' }}>\n          <Button\n            key=\"cancel\"\n            buttonSize=\"small\"\n            buttonStyle=\"secondary\"\n            onClick={onDismiss}\n          >\n            {t('Keep editing')}\n          </Button>\n          <Button\n            key=\"submit\"\n            buttonSize=\"small\"\n            buttonStyle=\"primary\"\n            onClick={onConfirm}\n          >\n            {t('Yes, cancel')}\n          </Button>\n        </div>\n      }\n    />\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC } from 'react';\nimport Button, { OnClickHandler } from 'src/components/Button';\nimport { t } from '@superset-ui/core';\nimport { CancelConfirmationAlert } from './CancelConfirmationAlert';\n\ntype FooterProps = {\n  onCancel: OnClickHandler;\n  handleSave: OnClickHandler;\n  onConfirmCancel: OnClickHandler;\n  onDismiss: OnClickHandler;\n  saveAlertVisible: boolean;\n  canSave?: boolean;\n};\n\nconst Footer: FC<FooterProps> = ({\n  canSave = true,\n  onCancel,\n  handleSave,\n  onDismiss,\n  onConfirmCancel,\n  saveAlertVisible,\n}) => {\n  if (saveAlertVisible) {\n    return (\n      <CancelConfirmationAlert\n        key=\"cancel-confirm\"\n        title={t('There are unsaved changes.')}\n        onConfirm={onConfirmCancel}\n        onDismiss={onDismiss}\n      >\n        {t('Are you sure you want to cancel?')}\n      </CancelConfirmationAlert>\n    );\n  }\n\n  return (\n    <>\n      <Button\n        key=\"cancel\"\n        buttonStyle=\"secondary\"\n        data-test=\"native-filter-modal-cancel-button\"\n        onClick={onCancel}\n      >\n        {t('Cancel')}\n      </Button>\n      <Button\n        disabled={!canSave}\n        key=\"submit\"\n        buttonStyle=\"primary\"\n        onClick={handleSave}\n        data-test=\"native-filter-modal-save-button\"\n      >\n        {t('Save')}\n      </Button>\n    </>\n  );\n};\n\nexport default Footer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { FormItem } from 'src/components/Form';\nimport { Input, TextArea } from 'src/components/Input';\nimport { NativeFilterType, styled, t } from '@superset-ui/core';\n\ninterface Props {\n  componentId: string;\n  divider?: {\n    title: string;\n    description: string;\n  };\n}\nconst Container = styled.div`\n  ${({ theme }) => `\n    padding: ${theme.gridUnit * 4}px;\n  `}\n`;\n\nconst DividerConfigForm: React.FC<Props> = ({ componentId, divider }) => (\n  <Container>\n    <FormItem\n      initialValue={divider ? divider.title : ''}\n      label={t('Title')}\n      name={['filters', componentId, 'title']}\n      rules={[\n        { required: true, message: t('Title is required'), whitespace: true },\n      ]}\n    >\n      <Input />\n    </FormItem>\n    <FormItem\n      initialValue={divider ? divider.description : ''}\n      label={t('Description')}\n      name={['filters', componentId, 'description']}\n    >\n      <TextArea rows={4} />\n    </FormItem>\n    <FormItem\n      hidden\n      name={['filters', componentId, 'type']}\n      initialValue={NativeFilterType.DIVIDER}\n    />\n  </Container>\n);\n\nexport default DividerConfigForm;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useEffect,\n  useCallback,\n  useMemo,\n  useState,\n  useRef,\n} from 'react';\nimport { uniq, isEqual, sortBy, debounce } from 'lodash';\nimport {\n  Filter,\n  FilterConfiguration,\n  NativeFilterType,\n  Divider,\n  styled,\n  SLOW_DEBOUNCE,\n  t,\n} from '@superset-ui/core';\nimport { AntdForm } from 'src/components';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport { StyledModal } from 'src/components/Modal';\nimport { testWithId } from 'src/utils/testUtils';\nimport { useFilterConfigMap, useFilterConfiguration } from '../state';\nimport FilterConfigurePane from './FilterConfigurePane';\nimport FiltersConfigForm, {\n  FilterPanels,\n} from './FiltersConfigForm/FiltersConfigForm';\nimport Footer from './Footer/Footer';\nimport { useOpenModal, useRemoveCurrentFilter } from './state';\nimport { FilterRemoval, NativeFiltersForm } from './types';\nimport {\n  createHandleSave,\n  createHandleRemoveItem,\n  generateFilterId,\n  getFilterIds,\n  validateForm,\n  NATIVE_FILTER_DIVIDER_PREFIX,\n  hasCircularDependency,\n} from './utils';\nimport DividerConfigForm from './DividerConfigForm';\n\nconst StyledModalWrapper = styled(StyledModal)`\n  min-width: 700px;\n  .ant-modal-body {\n    padding: 0px;\n  }\n`;\n\nexport const StyledModalBody = styled.div`\n  display: flex;\n  height: 700px;\n  flex-direction: row;\n  .filters-list {\n    width: ${({ theme }) => theme.gridUnit * 50}px;\n    overflow: auto;\n  }\n`;\n\nexport const StyledForm = styled(AntdForm)`\n  width: 100%;\n`;\n\nexport const FILTERS_CONFIG_MODAL_TEST_ID = 'filters-config-modal';\nexport const getFiltersConfigModalTestId = testWithId(\n  FILTERS_CONFIG_MODAL_TEST_ID,\n);\n\nexport interface FiltersConfigModalProps {\n  isOpen: boolean;\n  initialFilterId?: string;\n  createNewOnOpen?: boolean;\n  onSave: (filterConfig: FilterConfiguration) => Promise<void>;\n  onCancel: () => void;\n}\nexport const ALLOW_DEPENDENCIES = ['filter_select'];\n\n/**\n * This is the modal to configure all the dashboard-native filters.\n * Manages modal-level state, such as what filters are in the list,\n * and which filter is currently being edited.\n *\n * Calls the `save` callback with the new FilterConfiguration object\n * when the user saves the filters.\n */\nexport function FiltersConfigModal({\n  isOpen,\n  initialFilterId,\n  createNewOnOpen,\n  onSave,\n  onCancel,\n}: FiltersConfigModalProps) {\n  const [form] = AntdForm.useForm<NativeFiltersForm>();\n\n  const configFormRef = useRef<any>();\n\n  // the filter config from redux state, this does not change until modal is closed.\n  const filterConfig = useFilterConfiguration();\n  const filterConfigMap = useFilterConfigMap();\n\n  // new filter ids belong to filters have been added during\n  // this configuration session, and only exist in the form state until we submit.\n  const [newFilterIds, setNewFilterIds] = useState<string[]>([]);\n\n  // store ids of filters that have been removed with the time they were removed\n  // so that we can disappear them after a few secs.\n  // filters are still kept in state until form is submitted.\n  const [removedFilters, setRemovedFilters] = useState<\n    Record<string, FilterRemoval>\n  >({});\n\n  const [saveAlertVisible, setSaveAlertVisible] = useState<boolean>(false);\n\n  // The full ordered set of ((original + new) - completely removed) filter ids\n  // Use this as the canonical list of what filters are being configured!\n  // This includes filter ids that are pending removal, so check for that.\n  const filterIds = useMemo(\n    () =>\n      uniq([...getFilterIds(filterConfig), ...newFilterIds]).filter(\n        id => !removedFilters[id] || removedFilters[id]?.isPending,\n      ),\n    [filterConfig, newFilterIds, removedFilters],\n  );\n\n  // open the first filter in the list to start\n  const initialCurrentFilterId = initialFilterId ?? filterIds[0];\n  const [currentFilterId, setCurrentFilterId] = useState(\n    initialCurrentFilterId,\n  );\n  const [erroredFilters, setErroredFilters] = useState<string[]>([]);\n\n  // the form values are managed by the antd form, but we copy them to here\n  // so that we can display them (e.g. filter titles in the tab headers)\n  const [formValues, setFormValues] = useState<NativeFiltersForm>({\n    filters: {},\n  });\n\n  const unsavedFiltersIds = newFilterIds.filter(id => !removedFilters[id]);\n  // brings back a filter that was previously removed (\"Undo\")\n  const restoreFilter = (id: string) => {\n    const removal = removedFilters[id];\n    // gotta clear the removal timeout to prevent the filter from getting deleted\n    if (removal?.isPending) clearTimeout(removal.timerId);\n    setRemovedFilters(current => ({ ...current, [id]: null }));\n  };\n  const getInitialFilterOrder = () => Object.keys(filterConfigMap);\n\n  // State for tracking the re-ordering of filters\n  const [orderedFilters, setOrderedFilters] = useState<string[]>(\n    getInitialFilterOrder(),\n  );\n\n  const getActiveFilterPanelKey = (filterId: string) => [\n    `${filterId}-${FilterPanels.configuration.key}`,\n    `${filterId}-${FilterPanels.settings.key}`,\n  ];\n\n  const [activeFilterPanelKey, setActiveFilterPanelKey] = useState<\n    string | string[]\n  >(getActiveFilterPanelKey(initialCurrentFilterId));\n\n  const onTabChange = (filterId: string) => {\n    setCurrentFilterId(filterId);\n    setActiveFilterPanelKey(getActiveFilterPanelKey(filterId));\n  };\n\n  // generates a new filter id and appends it to the newFilterIds\n  const addFilter = useCallback(\n    (type: NativeFilterType) => {\n      const newFilterId = generateFilterId(type);\n      setNewFilterIds([...newFilterIds, newFilterId]);\n      setCurrentFilterId(newFilterId);\n      setSaveAlertVisible(false);\n      setOrderedFilters([...orderedFilters, newFilterId]);\n      setActiveFilterPanelKey(getActiveFilterPanelKey(newFilterId));\n    },\n    [\n      newFilterIds,\n      orderedFilters,\n      setCurrentFilterId,\n      setOrderedFilters,\n      setNewFilterIds,\n    ],\n  );\n\n  useOpenModal(isOpen, addFilter, createNewOnOpen);\n\n  useRemoveCurrentFilter(\n    removedFilters,\n    currentFilterId,\n    orderedFilters,\n    setCurrentFilterId,\n  );\n\n  const handleRemoveItem = createHandleRemoveItem(\n    setRemovedFilters,\n    setOrderedFilters,\n    setSaveAlertVisible,\n  );\n\n  // After this, it should be as if the modal was just opened fresh.\n  // Called when the modal is closed.\n  const resetForm = (isSaving = false) => {\n    setNewFilterIds([]);\n    setCurrentFilterId(initialCurrentFilterId);\n    setRemovedFilters({});\n    setSaveAlertVisible(false);\n    setFormValues({ filters: {} });\n    setErroredFilters([]);\n    if (filterIds.length > 0) {\n      setActiveFilterPanelKey(getActiveFilterPanelKey(filterIds[0]));\n    }\n    if (!isSaving) {\n      setOrderedFilters(getInitialFilterOrder());\n    }\n    form.resetFields(['filters']);\n    form.setFieldsValue({ changed: false });\n  };\n\n  const getFilterTitle = useCallback(\n    (id: string) => {\n      const formValue = formValues.filters[id];\n      const config = filterConfigMap[id];\n      return (\n        (formValue && 'name' in formValue && formValue.name) ||\n        (formValue && 'title' in formValue && formValue.title) ||\n        (config && 'name' in config && config.name) ||\n        (config && 'title' in config && config.title) ||\n        t('[untitled]')\n      );\n    },\n    [filterConfigMap, formValues.filters],\n  );\n\n  const canBeUsedAsDependency = useCallback(\n    (filterId: string) => {\n      if (removedFilters[filterId]) {\n        return false;\n      }\n      const component =\n        form.getFieldValue('filters')?.[filterId] || filterConfigMap[filterId];\n      return (\n        component &&\n        'filterType' in component &&\n        ALLOW_DEPENDENCIES.includes(component.filterType)\n      );\n    },\n    [filterConfigMap, form, removedFilters],\n  );\n\n  const getAvailableFilters = useCallback(\n    (filterId: string) =>\n      filterIds\n        .filter(key => key !== filterId)\n        .filter(filterId => canBeUsedAsDependency(filterId))\n        .map(key => ({\n          label: getFilterTitle(key),\n          value: key,\n        })),\n    [canBeUsedAsDependency, filterIds, getFilterTitle],\n  );\n\n  const cleanDeletedParents = (values: NativeFiltersForm | null) => {\n    Object.keys(filterConfigMap).forEach(key => {\n      const filter = filterConfigMap[key];\n      if (!('cascadeParentIds' in filter)) {\n        return;\n      }\n      const { cascadeParentIds } = filter;\n      if (cascadeParentIds) {\n        filter.cascadeParentIds = cascadeParentIds.filter(id =>\n          canBeUsedAsDependency(id),\n        );\n      }\n    });\n\n    const filters = values?.filters;\n    if (filters) {\n      Object.keys(filters).forEach(key => {\n        const filter = filters[key];\n        if (!('dependencies' in filter)) {\n          return;\n        }\n        const { dependencies } = filter;\n        if (dependencies) {\n          filter.dependencies = dependencies.filter(id =>\n            canBeUsedAsDependency(id),\n          );\n        }\n      });\n    }\n  };\n\n  const handleErroredFilters = useCallback(() => {\n    // managing left pane errored filters indicators\n    const formValidationFields = form.getFieldsError();\n    const erroredFiltersIds: string[] = [];\n\n    formValidationFields.forEach(field => {\n      const filterId = field.name[1] as string;\n      if (field.errors.length > 0 && !erroredFiltersIds.includes(filterId)) {\n        erroredFiltersIds.push(filterId);\n      }\n    });\n\n    // no form validation issues found, resets errored filters\n    if (!erroredFiltersIds.length && erroredFilters.length > 0) {\n      setErroredFilters([]);\n      return;\n    }\n    // form validation issues found, sets errored filters\n    if (\n      erroredFiltersIds.length > 0 &&\n      !isEqual(sortBy(erroredFilters), sortBy(erroredFiltersIds))\n    ) {\n      setErroredFilters(erroredFiltersIds);\n    }\n  }, [form, erroredFilters]);\n\n  const handleSave = async () => {\n    const values: NativeFiltersForm | null = await validateForm(\n      form,\n      currentFilterId,\n      setCurrentFilterId,\n    );\n\n    handleErroredFilters();\n\n    if (values) {\n      cleanDeletedParents(values);\n      createHandleSave(\n        filterConfigMap,\n        orderedFilters,\n        removedFilters,\n        onSave,\n        values,\n      )();\n      resetForm(true);\n    } else {\n      configFormRef.current.changeTab('configuration');\n    }\n  };\n\n  const handleConfirmCancel = () => {\n    resetForm();\n    onCancel();\n  };\n\n  const handleCancel = () => {\n    const changed = form.getFieldValue('changed');\n    const initialOrder = getInitialFilterOrder();\n    const didChangeOrder =\n      orderedFilters.length !== initialOrder.length ||\n      orderedFilters.some((val, index) => val !== initialOrder[index]);\n    if (\n      unsavedFiltersIds.length > 0 ||\n      form.isFieldsTouched() ||\n      changed ||\n      didChangeOrder\n    ) {\n      setSaveAlertVisible(true);\n    } else {\n      handleConfirmCancel();\n    }\n  };\n  const onRearrange = (dragIndex: number, targetIndex: number) => {\n    const newOrderedFilter = [...orderedFilters];\n    const removed = newOrderedFilter.splice(dragIndex, 1)[0];\n    newOrderedFilter.splice(targetIndex, 0, removed);\n    setOrderedFilters(newOrderedFilter);\n  };\n\n  const buildDependencyMap = useCallback(() => {\n    const dependencyMap = new Map<string, string[]>();\n    const filters = form.getFieldValue('filters');\n    if (filters) {\n      Object.keys(filters).forEach(key => {\n        const formItem = filters[key];\n        const configItem = filterConfigMap[key];\n        let array: string[] = [];\n        if (formItem && 'dependencies' in formItem) {\n          array = [...formItem.dependencies];\n        } else if (configItem && configItem.cascadeParentIds) {\n          array = [...configItem.cascadeParentIds];\n        }\n        dependencyMap.set(key, array);\n      });\n    }\n    return dependencyMap;\n  }, [filterConfigMap, form]);\n\n  const validateDependencies = () => {\n    const dependencyMap = buildDependencyMap();\n    filterIds\n      .filter(id => !removedFilters[id])\n      .forEach(filterId => {\n        const result = hasCircularDependency(dependencyMap, filterId);\n        const field = {\n          name: ['filters', filterId, 'dependencies'],\n          errors: result ? [t('Cyclic dependency detected')] : [],\n        };\n        form.setFields([field]);\n      });\n    handleErroredFilters();\n  };\n\n  const getDependencySuggestion = (filterId: string) => {\n    const dependencyMap = buildDependencyMap();\n    const possibleDependencies = orderedFilters.filter(\n      key => key !== filterId && canBeUsedAsDependency(key),\n    );\n    const found = possibleDependencies.find(filter => {\n      const dependencies = dependencyMap.get(filterId) || [];\n      dependencies.push(filter);\n      if (hasCircularDependency(dependencyMap, filterId)) {\n        dependencies.pop();\n        return false;\n      }\n      return true;\n    });\n    return found || possibleDependencies[0];\n  };\n\n  const onValuesChange = useMemo(\n    () =>\n      debounce((changes: any, values: NativeFiltersForm) => {\n        const didChangeFilterName =\n          changes.filters &&\n          Object.values(changes.filters).some(\n            (filter: any) => filter.name && filter.name !== null,\n          );\n        const didChangeSectionTitle =\n          changes.filters &&\n          Object.values(changes.filters).some(\n            (filter: any) => filter.title && filter.title !== null,\n          );\n        if (didChangeFilterName || didChangeSectionTitle) {\n          // we only need to set this if a name/title changed\n          setFormValues(values);\n        }\n        setSaveAlertVisible(false);\n        handleErroredFilters();\n      }, SLOW_DEBOUNCE),\n    [handleErroredFilters],\n  );\n\n  useEffect(() => {\n    setErroredFilters(prevErroredFilters =>\n      prevErroredFilters.filter(f => !removedFilters[f]),\n    );\n  }, [removedFilters]);\n\n  const getForm = (id: string) => {\n    const isDivider = id.startsWith(NATIVE_FILTER_DIVIDER_PREFIX);\n    return isDivider ? (\n      <DividerConfigForm\n        componentId={id}\n        divider={filterConfigMap[id] as Divider}\n      />\n    ) : (\n      <FiltersConfigForm\n        ref={configFormRef}\n        form={form}\n        filterId={id}\n        filterToEdit={filterConfigMap[id] as Filter}\n        removedFilters={removedFilters}\n        restoreFilter={restoreFilter}\n        getAvailableFilters={getAvailableFilters}\n        key={id}\n        activeFilterPanelKeys={activeFilterPanelKey}\n        handleActiveFilterPanelChange={key => setActiveFilterPanelKey(key)}\n        isActive={currentFilterId === id}\n        setErroredFilters={setErroredFilters}\n        validateDependencies={validateDependencies}\n        getDependencySuggestion={getDependencySuggestion}\n      />\n    );\n  };\n\n  return (\n    <StyledModalWrapper\n      visible={isOpen}\n      maskClosable={false}\n      title={t('Add and edit filters')}\n      width=\"50%\"\n      destroyOnClose\n      onCancel={handleCancel}\n      onOk={handleSave}\n      centered\n      data-test=\"filter-modal\"\n      footer={\n        <Footer\n          onDismiss={() => setSaveAlertVisible(false)}\n          onCancel={handleCancel}\n          handleSave={handleSave}\n          canSave={!erroredFilters.length}\n          saveAlertVisible={saveAlertVisible}\n          onConfirmCancel={handleConfirmCancel}\n        />\n      }\n    >\n      <ErrorBoundary>\n        <StyledModalBody>\n          <StyledForm\n            form={form}\n            onValuesChange={onValuesChange}\n            layout=\"vertical\"\n          >\n            <FilterConfigurePane\n              erroredFilters={erroredFilters}\n              onRemove={handleRemoveItem}\n              onAdd={addFilter}\n              onChange={onTabChange}\n              getFilterTitle={getFilterTitle}\n              currentFilterId={currentFilterId}\n              removedFilters={removedFilters}\n              restoreFilter={restoreFilter}\n              onRearrange={onRearrange}\n              filters={orderedFilters}\n            >\n              {(id: string) => getForm(id)}\n            </FilterConfigurePane>\n          </StyledForm>\n        </StyledModalBody>\n      </ErrorBoundary>\n    </StyledModalWrapper>\n  );\n}\n","import { useEffect } from 'react';\nimport { usePrevious } from 'src/hooks/usePrevious';\nimport { NativeFilterType } from '@superset-ui/core';\nimport { FilterRemoval } from './types';\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport const useRemoveCurrentFilter = (\n  removedFilters: Record<string, FilterRemoval>,\n  currentFilterId: string,\n  orderedFilters: string[],\n  setCurrentFilterId: Function,\n) => {\n  useEffect(() => {\n    // if the currently viewed filter is fully removed, change to another tab\n    const currentFilterRemoved = removedFilters[currentFilterId];\n    if (currentFilterRemoved && !currentFilterRemoved.isPending) {\n      const nextFilterId = orderedFilters\n        .flat()\n        .find(\n          filterId => !removedFilters[filterId] && filterId !== currentFilterId,\n        );\n\n      if (nextFilterId) setCurrentFilterId(nextFilterId);\n    }\n  }, [currentFilterId, removedFilters, orderedFilters, setCurrentFilterId]);\n};\n\nexport const useOpenModal = (\n  isOpen: boolean,\n  addFilter: Function,\n  createNewOnOpen?: boolean,\n) => {\n  const wasOpen = usePrevious(isOpen);\n  // if this is a \"create\" modal rather than an \"edit\" modal,\n  // add a filter on modal open\n  useEffect(() => {\n    if (createNewOnOpen && isOpen && !wasOpen) {\n      addFilter(NativeFilterType.NATIVE_FILTER);\n    }\n  }, [createNewOnOpen, isOpen, wasOpen, addFilter]);\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\nimport React, { FC } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StyledModal } from 'src/components/Modal';\nimport Button from 'src/components/Button';\nimport { AntdForm } from 'src/components';\nimport { setChartConfiguration } from 'src/dashboard/actions/dashboardInfo';\nimport { ChartConfiguration } from 'src/dashboard/reducers/types';\nimport CrossFilterScopingForm from './CrossFilterScopingForm';\nimport { CrossFilterScopingFormType } from './types';\nimport { StyledForm } from '../nativeFilters/FiltersConfigModal/FiltersConfigModal';\n\ntype CrossFilterScopingModalProps = {\n  chartId: number;\n  isOpen: boolean;\n  onClose: () => void;\n};\n\nconst CrossFilterScopingModal: FC<CrossFilterScopingModalProps> = ({\n  isOpen,\n  chartId,\n  onClose,\n}) => {\n  const dispatch = useDispatch();\n  const [form] = AntdForm.useForm<CrossFilterScopingFormType>();\n  const chartConfig = useSelector<any, ChartConfiguration>(\n    ({ dashboardInfo }) => dashboardInfo?.metadata?.chart_configuration,\n  );\n  const scope = chartConfig?.[chartId]?.crossFilters?.scope;\n  const handleSave = () => {\n    dispatch(\n      setChartConfiguration({\n        ...chartConfig,\n        [chartId]: {\n          id: chartId,\n          crossFilters: { scope: form.getFieldValue('scope') },\n        },\n      }),\n    );\n    onClose();\n  };\n\n  return (\n    <StyledModal\n      visible={isOpen}\n      maskClosable={false}\n      title={t('Cross Filter Scoping')}\n      width=\"55%\"\n      destroyOnClose\n      onCancel={onClose}\n      onOk={handleSave}\n      centered\n      data-test=\"cross-filter-scoping-modal\"\n      footer={\n        <>\n          <Button\n            key=\"cancel\"\n            buttonStyle=\"secondary\"\n            data-test=\"cross-filter-scoping-modal-cancel-button\"\n            onClick={onClose}\n          >\n            {t('Cancel')}\n          </Button>\n          <Button\n            key=\"submit\"\n            buttonStyle=\"primary\"\n            onClick={handleSave}\n            data-test=\"cross-filter-scoping-modal-save-button\"\n          >\n            {t('Save')}\n          </Button>\n        </>\n      }\n    >\n      <StyledForm preserve={false} form={form} layout=\"vertical\">\n        <CrossFilterScopingForm form={form} scope={scope} chartId={chartId} />\n      </StyledForm>\n    </StyledModal>\n  );\n};\n\nexport default CrossFilterScopingModal;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport moment from 'moment';\nimport {\n  Behavior,\n  css,\n  getChartMetadataRegistry,\n  QueryFormData,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport { Menu } from 'src/components/Menu';\nimport { NoAnimationDropdown } from 'src/components/Dropdown';\nimport ShareMenuItems from 'src/dashboard/components/menu/ShareMenuItems';\nimport downloadAsImage from 'src/utils/downloadAsImage';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport CrossFilterScopingModal from 'src/dashboard/components/CrossFilterScopingModal/CrossFilterScopingModal';\nimport Icons from 'src/components/Icons';\nimport ModalTrigger from 'src/components/ModalTrigger';\nimport Button from 'src/components/Button';\nimport ViewQueryModal from 'src/explore/components/controls/ViewQueryModal';\nimport { ResultsPaneOnDashboard } from 'src/explore/components/DataTablesPane';\n\nconst MENU_KEYS = {\n  CROSS_FILTER_SCOPING: 'cross_filter_scoping',\n  DOWNLOAD_AS_IMAGE: 'download_as_image',\n  EXPLORE_CHART: 'explore_chart',\n  EXPORT_CSV: 'export_csv',\n  EXPORT_FULL_CSV: 'export_full_csv',\n  FORCE_REFRESH: 'force_refresh',\n  FULLSCREEN: 'fullscreen',\n  TOGGLE_CHART_DESCRIPTION: 'toggle_chart_description',\n  VIEW_QUERY: 'view_query',\n  VIEW_RESULTS: 'view_results',\n};\n\nconst VerticalDotsContainer = styled.div`\n  padding: ${({ theme }) => theme.gridUnit / 4}px\n    ${({ theme }) => theme.gridUnit * 1.5}px;\n\n  .dot {\n    display: block;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst RefreshTooltip = styled.div`\n  height: auto;\n  margin: ${({ theme }) => theme.gridUnit}px 0;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  line-height: 21px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n`;\n\nconst getScreenshotNodeSelector = (chartId: string | number) =>\n  `.dashboard-chart-id-${chartId}`;\n\nconst VerticalDotsTrigger = () => (\n  <VerticalDotsContainer>\n    <span className=\"dot\" />\n    <span className=\"dot\" />\n    <span className=\"dot\" />\n  </VerticalDotsContainer>\n);\n\nexport interface SliceHeaderControlsProps {\n  slice: {\n    description: string;\n    viz_type: string;\n    slice_name: string;\n    slice_id: number;\n    slice_description: string;\n    form_data?: { emit_filter?: boolean };\n  };\n\n  componentId: string;\n  dashboardId: number;\n  chartStatus: string;\n  isCached: boolean[];\n  cachedDttm: string[] | null;\n  isExpanded?: boolean;\n  updatedDttm: number | null;\n  isFullSize?: boolean;\n  isDescriptionExpanded?: boolean;\n  formData: QueryFormData;\n  onExploreChart: () => void;\n\n  forceRefresh: (sliceId: number, dashboardId: number) => void;\n  logExploreChart?: (sliceId: number) => void;\n  toggleExpandSlice?: (sliceId: number) => void;\n  exportCSV?: (sliceId: number) => void;\n  exportFullCSV?: (sliceId: number) => void;\n  handleToggleFullSize: () => void;\n\n  addDangerToast: (message: string) => void;\n  addSuccessToast: (message: string) => void;\n\n  supersetCanExplore?: boolean;\n  supersetCanShare?: boolean;\n  supersetCanCSV?: boolean;\n  sliceCanEdit?: boolean;\n}\ninterface State {\n  showControls: boolean;\n  showCrossFilterScopingModal: boolean;\n}\n\nconst dropdownIconsStyles = css`\n  &&.anticon > .anticon:first-child {\n    margin-right: 0;\n    vertical-align: 0;\n  }\n`;\n\nclass SliceHeaderControls extends React.PureComponent<\n  SliceHeaderControlsProps,\n  State\n> {\n  constructor(props: SliceHeaderControlsProps) {\n    super(props);\n    this.toggleControls = this.toggleControls.bind(this);\n    this.refreshChart = this.refreshChart.bind(this);\n    this.handleMenuClick = this.handleMenuClick.bind(this);\n\n    this.state = {\n      showControls: false,\n      showCrossFilterScopingModal: false,\n    };\n  }\n\n  refreshChart() {\n    if (this.props.updatedDttm) {\n      this.props.forceRefresh(\n        this.props.slice.slice_id,\n        this.props.dashboardId,\n      );\n    }\n  }\n\n  toggleControls() {\n    this.setState(prevState => ({\n      showControls: !prevState.showControls,\n    }));\n  }\n\n  handleMenuClick({\n    key,\n    domEvent,\n  }: {\n    key: React.Key;\n    domEvent: React.MouseEvent<HTMLElement>;\n  }) {\n    switch (key) {\n      case MENU_KEYS.FORCE_REFRESH:\n        this.refreshChart();\n        this.props.addSuccessToast(t('Data refreshed'));\n        break;\n      case MENU_KEYS.CROSS_FILTER_SCOPING:\n        this.setState({ showCrossFilterScopingModal: true });\n        break;\n      case MENU_KEYS.TOGGLE_CHART_DESCRIPTION:\n        // eslint-disable-next-line no-unused-expressions\n        this.props.toggleExpandSlice &&\n          this.props.toggleExpandSlice(this.props.slice.slice_id);\n        break;\n      case MENU_KEYS.EXPLORE_CHART:\n        // eslint-disable-next-line no-unused-expressions\n        this.props.logExploreChart &&\n          this.props.logExploreChart(this.props.slice.slice_id);\n        break;\n      case MENU_KEYS.EXPORT_CSV:\n        // eslint-disable-next-line no-unused-expressions\n        this.props.exportCSV && this.props.exportCSV(this.props.slice.slice_id);\n        break;\n      case MENU_KEYS.FULLSCREEN:\n        this.props.handleToggleFullSize();\n        break;\n      case MENU_KEYS.EXPORT_FULL_CSV:\n        // eslint-disable-next-line no-unused-expressions\n        this.props.exportFullCSV &&\n          this.props.exportFullCSV(this.props.slice.slice_id);\n        break;\n      case MENU_KEYS.DOWNLOAD_AS_IMAGE: {\n        // menu closes with a delay, we need to hide it manually,\n        // so that we don't capture it on the screenshot\n        const menu = document.querySelector(\n          '.ant-dropdown:not(.ant-dropdown-hidden)',\n        ) as HTMLElement;\n        menu.style.visibility = 'hidden';\n        downloadAsImage(\n          getScreenshotNodeSelector(this.props.slice.slice_id),\n          this.props.slice.slice_name,\n          true,\n          // @ts-ignore\n        )(domEvent).then(() => {\n          menu.style.visibility = 'visible';\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const {\n      componentId,\n      dashboardId,\n      slice,\n      isFullSize,\n      cachedDttm = [],\n      updatedDttm = null,\n      addSuccessToast = () => {},\n      addDangerToast = () => {},\n      supersetCanShare = false,\n      isCached = [],\n    } = this.props;\n    const crossFilterItems = getChartMetadataRegistry().items;\n    const isTable = slice.viz_type === 'table';\n    const isCrossFilter = Object.entries(crossFilterItems)\n      // @ts-ignore\n      .filter(([, { value }]) =>\n        value.behaviors?.includes(Behavior.INTERACTIVE_CHART),\n      )\n      .find(([key]) => key === slice.viz_type);\n    const canEmitCrossFilter = slice.form_data?.emit_filter;\n\n    const cachedWhen = (cachedDttm || []).map(itemCachedDttm =>\n      moment.utc(itemCachedDttm).fromNow(),\n    );\n    const updatedWhen = updatedDttm ? moment.utc(updatedDttm).fromNow() : '';\n    const getCachedTitle = (itemCached: boolean) => {\n      if (itemCached) {\n        return t('Cached %s', cachedWhen);\n      }\n      if (updatedWhen) {\n        return t('Fetched %s', updatedWhen);\n      }\n      return '';\n    };\n    const refreshTooltipData = [...new Set(isCached.map(getCachedTitle) || '')];\n    // If all queries have same cache time we can unit them to one\n    const refreshTooltip = refreshTooltipData.map((item, index) => (\n      <div key={`tooltip-${index}`}>\n        {refreshTooltipData.length > 1\n          ? t('Query %s: %s', index + 1, item)\n          : item}\n      </div>\n    ));\n    const fullscreenLabel = isFullSize\n      ? t('Exit fullscreen')\n      : t('Enter fullscreen');\n    const menu = (\n      <Menu\n        onClick={this.handleMenuClick}\n        selectable={false}\n        data-test={`slice_${slice.slice_id}-menu`}\n      >\n        <Menu.Item\n          key={MENU_KEYS.FORCE_REFRESH}\n          disabled={this.props.chartStatus === 'loading'}\n          style={{ height: 'auto', lineHeight: 'initial' }}\n          data-test=\"refresh-chart-menu-item\"\n        >\n          {t('Force refresh')}\n          <RefreshTooltip data-test=\"dashboard-slice-refresh-tooltip\">\n            {refreshTooltip}\n          </RefreshTooltip>\n        </Menu.Item>\n\n        <Menu.Item key={MENU_KEYS.FULLSCREEN}>{fullscreenLabel}</Menu.Item>\n\n        <Menu.Divider />\n\n        {slice.description && (\n          <Menu.Item key={MENU_KEYS.TOGGLE_CHART_DESCRIPTION}>\n            {this.props.isDescriptionExpanded\n              ? t('Hide chart description')\n              : t('Show chart description')}\n          </Menu.Item>\n        )}\n\n        {this.props.supersetCanExplore && (\n          <Menu.Item\n            key={MENU_KEYS.EXPLORE_CHART}\n            onClick={this.props.onExploreChart}\n          >\n            {t('Edit chart')}\n          </Menu.Item>\n        )}\n\n        {this.props.supersetCanExplore && (\n          <Menu.Item key={MENU_KEYS.VIEW_QUERY}>\n            <ModalTrigger\n              triggerNode={\n                <span data-test=\"view-query-menu-item\">{t('View query')}</span>\n              }\n              modalTitle={t('View query')}\n              modalBody={\n                <ViewQueryModal latestQueryFormData={this.props.formData} />\n              }\n              draggable\n              resizable\n              responsive\n            />\n          </Menu.Item>\n        )}\n\n        {this.props.supersetCanExplore && (\n          <Menu.Item key={MENU_KEYS.VIEW_RESULTS}>\n            <ModalTrigger\n              triggerNode={\n                <span data-test=\"view-query-menu-item\">\n                  {t('View as table')}\n                </span>\n              }\n              modalTitle={t('Chart Data: %s', slice.slice_name)}\n              modalBody={\n                <ResultsPaneOnDashboard\n                  queryFormData={this.props.formData}\n                  queryForce={false}\n                  dataSize={20}\n                  isRequest\n                  isVisible\n                />\n              }\n              modalFooter={\n                <Button\n                  buttonStyle=\"secondary\"\n                  buttonSize=\"small\"\n                  onClick={this.props.onExploreChart}\n                >\n                  {t('Edit chart')}\n                </Button>\n              }\n              draggable\n              resizable\n              responsive\n            />\n          </Menu.Item>\n        )}\n\n        {(slice.description || this.props.supersetCanExplore) && (\n          <Menu.Divider />\n        )}\n\n        {isFeatureEnabled(FeatureFlag.DASHBOARD_CROSS_FILTERS) &&\n          isCrossFilter &&\n          canEmitCrossFilter && (\n            <>\n              <Menu.Item key={MENU_KEYS.CROSS_FILTER_SCOPING}>\n                {t('Cross-filter scoping')}\n              </Menu.Item>\n              <Menu.Divider />\n            </>\n          )}\n\n        {supersetCanShare && (\n          <Menu.SubMenu title={t('Share')}>\n            <ShareMenuItems\n              dashboardId={dashboardId}\n              dashboardComponentId={componentId}\n              copyMenuItemTitle={t('Copy permalink to clipboard')}\n              emailMenuItemTitle={t('Share chart by email')}\n              emailSubject={t('Superset chart')}\n              emailBody={t('Check out this chart: ')}\n              addSuccessToast={addSuccessToast}\n              addDangerToast={addDangerToast}\n            />\n          </Menu.SubMenu>\n        )}\n\n        {this.props.slice.viz_type !== 'filter_box' &&\n          this.props.supersetCanCSV && (\n            <Menu.SubMenu title={t('Download')}>\n              <Menu.Item\n                key={MENU_KEYS.EXPORT_CSV}\n                icon={<Icons.FileOutlined css={dropdownIconsStyles} />}\n              >\n                {t('Export to .CSV')}\n              </Menu.Item>\n\n              {this.props.slice.viz_type !== 'filter_box' &&\n                isFeatureEnabled(FeatureFlag.ALLOW_FULL_CSV_EXPORT) &&\n                this.props.supersetCanCSV &&\n                isTable && (\n                  <Menu.Item\n                    key={MENU_KEYS.EXPORT_FULL_CSV}\n                    icon={<Icons.FileOutlined css={dropdownIconsStyles} />}\n                  >\n                    {t('Export to full .CSV')}\n                  </Menu.Item>\n                )}\n\n              <Menu.Item\n                key={MENU_KEYS.DOWNLOAD_AS_IMAGE}\n                icon={<Icons.FileImageOutlined css={dropdownIconsStyles} />}\n              >\n                {t('Download as image')}\n              </Menu.Item>\n            </Menu.SubMenu>\n          )}\n      </Menu>\n    );\n\n    return (\n      <>\n        <CrossFilterScopingModal\n          chartId={slice.slice_id}\n          isOpen={this.state.showCrossFilterScopingModal}\n          onClose={() => this.setState({ showCrossFilterScopingModal: false })}\n        />\n        {isFullSize && (\n          <Icons.FullscreenExitOutlined\n            style={{ fontSize: 22 }}\n            onClick={() => {\n              this.props.handleToggleFullSize();\n            }}\n          />\n        )}\n        <NoAnimationDropdown\n          overlay={menu}\n          trigger={['click']}\n          placement=\"bottomRight\"\n        >\n          <span\n            id={`slice_${slice.slice_id}-controls`}\n            role=\"button\"\n            aria-label=\"More Options\"\n          >\n            <VerticalDotsTrigger />\n          </span>\n        </NoAnimationDropdown>\n      </>\n    );\n  }\n}\n\nexport default SliceHeaderControls;\n","// This icon file is generated automatically.\nvar CheckCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z\" } }] }, \"name\": \"check-circle\", \"theme\": \"filled\" };\nexport default CheckCircleFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CheckCircleFilledSvg from \"@ant-design/icons-svg/es/asn/CheckCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar CheckCircleFilled = function CheckCircleFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: CheckCircleFilledSvg\n  }));\n};\n\nCheckCircleFilled.displayName = 'CheckCircleFilled';\nexport default React.forwardRef(CheckCircleFilled);","// This icon file is generated automatically.\nvar ExclamationCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z\" } }] }, \"name\": \"exclamation-circle\", \"theme\": \"filled\" };\nexport default ExclamationCircleFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ExclamationCircleFilledSvg from \"@ant-design/icons-svg/es/asn/ExclamationCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar ExclamationCircleFilled = function ExclamationCircleFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: ExclamationCircleFilledSvg\n  }));\n};\n\nExclamationCircleFilled.displayName = 'ExclamationCircleFilled';\nexport default React.forwardRef(ExclamationCircleFilled);","// This icon file is generated automatically.\nvar MinusCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z\" } }] }, \"name\": \"minus-circle\", \"theme\": \"filled\" };\nexport default MinusCircleFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport MinusCircleFilledSvg from \"@ant-design/icons-svg/es/asn/MinusCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar MinusCircleFilled = function MinusCircleFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: MinusCircleFilledSvg\n  }));\n};\n\nMinusCircleFilled.displayName = 'MinusCircleFilled';\nexport default React.forwardRef(MinusCircleFilled);","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { css, styled } from '@superset-ui/core';\n\nexport const Pill = styled.div`\n  ${({ theme }) => css`\n    display: inline-block;\n    color: ${theme.colors.grayscale.light5};\n    background: ${theme.colors.grayscale.base};\n    border-radius: 1em;\n    vertical-align: text-top;\n    padding: ${theme.gridUnit}px ${theme.gridUnit * 2}px;\n    font-size: ${theme.typography.sizes.m}px;\n    font-weight: ${theme.typography.weights.bold};\n    min-width: 1em;\n    min-height: 1em;\n    line-height: 1em;\n    vertical-align: middle;\n    white-space: nowrap;\n\n    svg {\n      position: relative;\n      top: -2px;\n      color: ${theme.colors.grayscale.light5};\n      width: 1em;\n      height: 1em;\n      display: inline-block;\n      vertical-align: middle;\n    }\n\n    &:hover {\n      cursor: pointer;\n      background: ${theme.colors.grayscale.dark1};\n    }\n\n    &.has-cross-filters {\n      background: ${theme.colors.primary.base};\n      &:hover {\n        background: ${theme.colors.primary.dark1};\n      }\n    }\n\n    &.has-incompatible-filters {\n      color: ${theme.colors.grayscale.dark2};\n      background: ${theme.colors.alert.base};\n      &:hover {\n        background: ${theme.colors.alert.dark1};\n      }\n      svg {\n        color: ${theme.colors.grayscale.dark2};\n      }\n    }\n\n    &.filters-inactive {\n      color: ${theme.colors.grayscale.light5};\n      background: ${theme.colors.grayscale.light1};\n      padding: ${theme.gridUnit}px;\n      text-align: center;\n      height: 22px;\n      width: 22px;\n\n      &:hover {\n        background: ${theme.colors.grayscale.base};\n      }\n    }\n  `}\n`;\n\nexport interface TitleProps {\n  bold?: boolean;\n  color?: string;\n}\n\nexport const Title = styled.span<TitleProps>`\n  position: relative;\n  margin-right: ${({ theme }) => theme.gridUnit}px;\n  font-weight: ${({ bold, theme }) => {\n    if (bold) return theme.typography.weights.bold;\n    return 'auto';\n  }};\n  color: ${({ color, theme }) => color || theme.colors.grayscale.light5};\n  display: flex;\n  align-items: center;\n  & > * {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nexport const ItemIcon = styled.i`\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: -${({ theme }) => theme.gridUnit * 5}px;\n`;\n\nexport const Item = styled.button`\n  cursor: pointer;\n  display: flex;\n  flex-wrap: wrap;\n  text-align: left;\n  padding: 0;\n  border: none;\n  background: none;\n  outline: none;\n  width: 100%;\n\n  &::-moz-focus-inner {\n    border: 0;\n  }\n\n  & i svg {\n    color: transparent;\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n\n  &:hover i svg {\n    color: inherit;\n  }\n`;\n\nexport const Reset = styled.div`\n  margin: 0 -${({ theme }) => theme.gridUnit * 4}px;\n`;\n\nexport const Indent = styled.div`\n  padding-left: ${({ theme }) => theme.gridUnit * 6}px;\n  margin: -${({ theme }) => theme.gridUnit * 3}px 0;\n`;\n\nexport const Panel = styled.div`\n  min-width: 200px;\n  max-width: 300px;\n  overflow-x: hidden;\n`;\n\nexport const FilterValue = styled.div`\n  max-width: 100%;\n  flex-grow: 1;\n  overflow: auto;\n  color: ${({ theme }) => theme.colors.grayscale.light5};\n`;\n\nexport const FilterIndicatorText = styled.div`\n  ${({ theme }) => `\n  padding-top: ${theme.gridUnit * 3}px;\n  max-width: 100%;\n  flex-grow: 1;\n  overflow: auto;\n  color: ${theme.colors.grayscale.light5};\n  `}\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport shortid from 'shortid';\nimport { DataMaskState, FilterSet, t } from '@superset-ui/core';\nimport { areObjectsEqual } from 'src/reduxUtils';\n\nexport const generateFiltersSetId = () => `FILTERS_SET-${shortid.generate()}`;\n\nexport const APPLY_FILTERS_HINT = t('Please apply filter changes');\n\nexport const getFilterValueForDisplay = (\n  value?: string[] | null | string | number | object,\n): string => {\n  if (value === null || value === undefined) {\n    return '';\n  }\n  if (typeof value === 'string' || typeof value === 'number') {\n    return `${value}`;\n  }\n  if (Array.isArray(value)) {\n    return value.join(', ');\n  }\n  if (typeof value === 'object') {\n    return JSON.stringify(value);\n  }\n  return t('Unknown value');\n};\n\nexport const findExistingFilterSet = ({\n  filterSetFilterValues,\n  dataMaskSelected,\n}: {\n  filterSetFilterValues: FilterSet[];\n  dataMaskSelected: DataMaskState;\n}) =>\n  filterSetFilterValues.find(({ dataMask: dataMaskFromFilterSet = {} }) => {\n    const dataMaskSelectedEntries = Object.entries(dataMaskSelected);\n    return dataMaskSelectedEntries.every(([id, filterFromSelectedFilters]) => {\n      const isEqual = areObjectsEqual(\n        filterFromSelectedFilters.filterState,\n        dataMaskFromFilterSet?.[id]?.filterState,\n        { ignoreUndefined: true, ignoreNull: true },\n      );\n      const hasSamePropsNumber =\n        dataMaskSelectedEntries.length ===\n        Object.keys(dataMaskFromFilterSet ?? {}).length;\n      return isEqual && hasSamePropsNumber;\n    });\n  });\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { SearchOutlined } from '@ant-design/icons';\nimport React, { FC } from 'react';\nimport { getFilterValueForDisplay } from 'src/dashboard/components/nativeFilters/FilterBar/FilterSets/utils';\nimport {\n  FilterIndicatorText,\n  FilterValue,\n  Item,\n  ItemIcon,\n  Title,\n} from 'src/dashboard/components/FiltersBadge/Styles';\nimport { Indicator } from 'src/dashboard/components/FiltersBadge/selectors';\n\nexport interface IndicatorProps {\n  indicator: Indicator;\n  onClick?: (path: string[]) => void;\n  text?: string;\n}\n\nconst FilterIndicator: FC<IndicatorProps> = ({\n  indicator: { column, name, value, path = [] },\n  onClick = () => {},\n  text,\n}) => {\n  const resultValue = getFilterValueForDisplay(value);\n  return (\n    <>\n      <Item onClick={() => onClick([...path, `LABEL-${column}`])}>\n        <Title bold>\n          <ItemIcon>\n            <SearchOutlined />\n          </ItemIcon>\n          {name}\n          {resultValue ? ': ' : ''}\n        </Title>\n        <FilterValue>{resultValue}</FilterValue>\n      </Item>\n      {text && <FilterIndicatorText>{text}</FilterIndicatorText>}\n    </>\n  );\n};\n\nexport default FilterIndicator;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Global, css } from '@emotion/react';\nimport { t, useTheme } from '@superset-ui/core';\nimport {\n  MinusCircleFilled,\n  CheckCircleFilled,\n  ExclamationCircleFilled,\n} from '@ant-design/icons';\nimport Popover from 'src/components/Popover';\nimport Collapse from 'src/components/Collapse';\nimport Icons from 'src/components/Icons';\nimport {\n  Indent,\n  Panel,\n  Reset,\n  Title,\n} from 'src/dashboard/components/FiltersBadge/Styles';\nimport { Indicator } from 'src/dashboard/components/FiltersBadge/selectors';\nimport FilterIndicator from 'src/dashboard/components/FiltersBadge/FilterIndicator';\nimport { RootState } from 'src/dashboard/types';\n\nexport interface DetailsPanelProps {\n  appliedCrossFilterIndicators: Indicator[];\n  appliedIndicators: Indicator[];\n  incompatibleIndicators: Indicator[];\n  unsetIndicators: Indicator[];\n  onHighlightFilterSource: (path: string[]) => void;\n  children: JSX.Element;\n}\n\nconst DetailsPanelPopover = ({\n  appliedCrossFilterIndicators = [],\n  appliedIndicators = [],\n  incompatibleIndicators = [],\n  unsetIndicators = [],\n  onHighlightFilterSource,\n  children,\n}: DetailsPanelProps) => {\n  const [visible, setVisible] = useState(false);\n  const theme = useTheme();\n  const activeTabs = useSelector<RootState>(\n    state => state.dashboardState?.activeTabs,\n  );\n\n  // we don't need to clean up useEffect, setting { once: true } removes the event listener after handle function is called\n  useEffect(() => {\n    if (visible) {\n      window.addEventListener('resize', () => setVisible(false), {\n        once: true,\n      });\n    }\n  }, [visible]);\n\n  // if tabs change, popover doesn't close automatically\n  useEffect(() => {\n    setVisible(false);\n  }, [activeTabs]);\n\n  const getDefaultActivePanel = () => {\n    const result = [];\n    if (appliedCrossFilterIndicators.length) {\n      result.push('appliedCrossFilters');\n    }\n    if (appliedIndicators.length) {\n      result.push('applied');\n    }\n    if (incompatibleIndicators.length) {\n      result.push('incompatible');\n    }\n    if (result.length) {\n      return result;\n    }\n    return ['unset'];\n  };\n\n  const [activePanels, setActivePanels] = useState<string[]>(() => [\n    ...getDefaultActivePanel(),\n  ]);\n\n  function handlePopoverStatus(isOpen: boolean) {\n    setVisible(isOpen);\n    // every time the popover opens, make sure the most relevant panel is active\n    if (isOpen) {\n      setActivePanels(getDefaultActivePanel());\n    }\n  }\n\n  function handleActivePanelChange(panels: string | string[]) {\n    // need to convert to an array so that handlePopoverStatus will work\n    if (typeof panels === 'string') {\n      setActivePanels([panels]);\n    } else {\n      setActivePanels(panels);\n    }\n  }\n\n  const indicatorKey = (indicator: Indicator): string =>\n    `${indicator.column} - ${indicator.name}`;\n\n  const content = (\n    <Panel>\n      <Global\n        styles={css`\n          .filterStatusPopover {\n            .ant-popover-inner {\n              background-color: ${theme.colors.grayscale.dark2}cc;\n              .ant-popover-inner-content {\n                padding-top: 0;\n                padding-bottom: 0;\n              }\n            }\n            &.ant-popover-placement-bottom,\n            &.ant-popover-placement-bottomLeft,\n            &.ant-popover-placement-bottomRight {\n              & > .ant-popover-content > .ant-popover-arrow {\n                border-top-color: ${theme.colors.grayscale.dark2}cc;\n                border-left-color: ${theme.colors.grayscale.dark2}cc;\n              }\n            }\n            &.ant-popover-placement-top,\n            &.ant-popover-placement-topLeft,\n            &.ant-popover-placement-topRight {\n              & > .ant-popover-content > .ant-popover-arrow {\n                border-bottom-color: ${theme.colors.grayscale.dark2}cc;\n                border-right-color: ${theme.colors.grayscale.dark2}cc;\n              }\n            }\n            &.ant-popover-placement-left,\n            &.ant-popover-placement-leftTop,\n            &.ant-popover-placement-leftBottom {\n              & > .ant-popover-content > .ant-popover-arrow {\n                border-top-color: ${theme.colors.grayscale.dark2}cc;\n                border-right-color: ${theme.colors.grayscale.dark2}cc;\n              }\n            }\n            &.ant-popover-placement-right,\n            &.ant-popover-placement-rightTop,\n            &.ant-popover-placement-rightBottom {\n              & > .ant-popover-content > .ant-popover-arrow {\n                border-bottom-color: ${theme.colors.grayscale.dark2}cc;\n                border-left-color: ${theme.colors.grayscale.dark2}cc;\n              }\n            }\n            &.ant-popover {\n              color: ${theme.colors.grayscale.light4};\n              z-index: 99;\n            }\n          }\n        `}\n      />\n      <Reset>\n        <Collapse\n          ghost\n          light\n          activeKey={activePanels}\n          onChange={handleActivePanelChange}\n        >\n          {appliedCrossFilterIndicators.length ? (\n            <Collapse.Panel\n              key=\"appliedCrossFilters\"\n              header={\n                <Title bold color={theme.colors.primary.light1}>\n                  <Icons.CursorTarget\n                    css={{ fill: theme.colors.primary.light1 }}\n                    iconSize=\"xl\"\n                  />\n                  {t(\n                    'Applied Cross Filters (%d)',\n                    appliedCrossFilterIndicators.length,\n                  )}\n                </Title>\n              }\n            >\n              <Indent css={{ paddingBottom: theme.gridUnit * 3 }}>\n                {appliedCrossFilterIndicators.map(indicator => (\n                  <FilterIndicator\n                    key={indicatorKey(indicator)}\n                    indicator={indicator}\n                    onClick={onHighlightFilterSource}\n                  />\n                ))}\n              </Indent>\n            </Collapse.Panel>\n          ) : null}\n          {appliedIndicators.length ? (\n            <Collapse.Panel\n              key=\"applied\"\n              header={\n                <Title bold color={theme.colors.success.base}>\n                  <CheckCircleFilled />{' '}\n                  {t('Applied Filters (%d)', appliedIndicators.length)}\n                </Title>\n              }\n            >\n              <Indent css={{ paddingBottom: theme.gridUnit * 3 }}>\n                {appliedIndicators.map(indicator => (\n                  <FilterIndicator\n                    key={indicatorKey(indicator)}\n                    indicator={indicator}\n                    onClick={onHighlightFilterSource}\n                  />\n                ))}\n              </Indent>\n            </Collapse.Panel>\n          ) : null}\n          {incompatibleIndicators.length ? (\n            <Collapse.Panel\n              key=\"incompatible\"\n              header={\n                <Title bold color={theme.colors.alert.base}>\n                  <ExclamationCircleFilled />{' '}\n                  {t(\n                    'Incompatible Filters (%d)',\n                    incompatibleIndicators.length,\n                  )}\n                </Title>\n              }\n            >\n              <Indent css={{ paddingBottom: theme.gridUnit * 3 }}>\n                {incompatibleIndicators.map(indicator => (\n                  <FilterIndicator\n                    key={indicatorKey(indicator)}\n                    indicator={indicator}\n                    onClick={onHighlightFilterSource}\n                  />\n                ))}\n              </Indent>\n            </Collapse.Panel>\n          ) : null}\n          {unsetIndicators.length ? (\n            <Collapse.Panel\n              key=\"unset\"\n              header={\n                <Title bold color={theme.colors.grayscale.light1}>\n                  <MinusCircleFilled />{' '}\n                  {t('Unset Filters (%d)', unsetIndicators.length)}\n                </Title>\n              }\n              disabled={!unsetIndicators.length}\n            >\n              <Indent css={{ paddingBottom: theme.gridUnit * 3 }}>\n                {unsetIndicators.map(indicator => (\n                  <FilterIndicator\n                    key={indicatorKey(indicator)}\n                    indicator={indicator}\n                    onClick={onHighlightFilterSource}\n                  />\n                ))}\n              </Indent>\n            </Collapse.Panel>\n          ) : null}\n        </Collapse>\n      </Reset>\n    </Panel>\n  );\n\n  return (\n    <Popover\n      overlayClassName=\"filterStatusPopover\"\n      content={content}\n      visible={visible}\n      onVisibleChange={handlePopoverStatus}\n      placement=\"bottomRight\"\n      trigger=\"click\"\n    >\n      {children}\n    </Popover>\n  );\n};\n\nexport default DetailsPanelPopover;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DataMaskStateWithId,\n  DataMaskType,\n  ensureIsArray,\n  FeatureFlag,\n  Filters,\n  FilterState,\n  isFeatureEnabled,\n  NativeFilterType,\n} from '@superset-ui/core';\nimport { NO_TIME_RANGE, TIME_FILTER_MAP } from 'src/explore/constants';\nimport { getChartIdsInFilterBoxScope } from 'src/dashboard/util/activeDashboardFilters';\nimport { CHART_TYPE } from 'src/dashboard/util/componentTypes';\nimport { ChartConfiguration } from 'src/dashboard/reducers/types';\nimport { Layout } from 'src/dashboard/types';\nimport { areObjectsEqual } from 'src/reduxUtils';\n\nexport enum IndicatorStatus {\n  Unset = 'UNSET',\n  Applied = 'APPLIED',\n  Incompatible = 'INCOMPATIBLE',\n  CrossFilterApplied = 'CROSS_FILTER_APPLIED',\n}\n\nconst TIME_GRANULARITY_FIELDS = new Set(Object.values(TIME_FILTER_MAP));\n\n// As of 2020-09-28, the Dataset type in superset-ui is incorrect.\n// Should patch it here until the Dataset type is updated.\ntype Datasource = {\n  time_grain_sqla?: [string, string][];\n  granularity?: [string, string][];\n};\n\ntype Filter = {\n  chartId: number;\n  columns: { [key: string]: string | string[] };\n  scopes: { [key: string]: any };\n  labels: { [key: string]: string };\n  isDateFilter: boolean;\n  directPathToFilter: string[];\n  datasourceId: string;\n};\n\nconst extractLabel = (filter?: FilterState): string | null => {\n  if (filter?.label) {\n    return filter.label;\n  }\n  if (filter?.value) {\n    return ensureIsArray(filter?.value).join(', ');\n  }\n  return null;\n};\n\nconst selectIndicatorValue = (\n  columnKey: string,\n  filter: Filter,\n  datasource: Datasource,\n): any => {\n  const values = filter.columns[columnKey];\n  const arrValues = Array.isArray(values) ? values : [values];\n\n  if (\n    values == null ||\n    (filter.isDateFilter && values === NO_TIME_RANGE) ||\n    arrValues.length === 0\n  ) {\n    return [];\n  }\n\n  if (filter.isDateFilter && TIME_GRANULARITY_FIELDS.has(columnKey)) {\n    const timeGranularityMap = (\n      (columnKey === TIME_FILTER_MAP.time_grain_sqla\n        ? datasource.time_grain_sqla\n        : datasource.granularity) || []\n    ).reduce(\n      (map, [key, value]) => ({\n        ...map,\n        [key]: value,\n      }),\n      {},\n    );\n\n    return arrValues.map(value => timeGranularityMap[value] || value);\n  }\n\n  return arrValues;\n};\n\nconst selectIndicatorsForChartFromFilter = (\n  chartId: number,\n  filter: Filter,\n  filterDataSource: Datasource,\n  appliedColumns: Set<string>,\n  rejectedColumns: Set<string>,\n): Indicator[] => {\n  // filters can be applied (if the filter is compatible with the datasource)\n  // or rejected (if the filter is incompatible)\n  // or the status can be unknown (if the filter has calculated parameters that we can't analyze)\n  const getStatus = (column: string, filter: Filter) => {\n    if (appliedColumns.has(column) && filter.columns[column])\n      return IndicatorStatus.Applied;\n    if (rejectedColumns.has(column)) return IndicatorStatus.Incompatible;\n    return IndicatorStatus.Unset;\n  };\n\n  return Object.keys(filter.columns)\n    .filter(column =>\n      getChartIdsInFilterBoxScope({\n        filterScope: filter.scopes[column],\n      }).includes(chartId),\n    )\n    .map(column => ({\n      column,\n      name: filter.labels[column] || column,\n      value: selectIndicatorValue(column, filter, filterDataSource),\n      status: getStatus(column, filter),\n      path: filter.directPathToFilter,\n    }));\n};\n\nconst getAppliedColumns = (chart: any): Set<string> =>\n  new Set(\n    (chart?.queriesResponse?.[0]?.applied_filters || []).map(\n      (filter: any) => filter.column,\n    ),\n  );\n\nconst getRejectedColumns = (chart: any): Set<string> =>\n  new Set(\n    (chart?.queriesResponse?.[0]?.rejected_filters || []).map(\n      (filter: any) => filter.column,\n    ),\n  );\n\nexport type Indicator = {\n  column?: string;\n  name: string;\n  value?: any;\n  status?: IndicatorStatus;\n  path?: string[];\n};\n\nconst cachedIndicatorsForChart = {};\nconst cachedDashboardFilterDataForChart = {};\n// inspects redux state to find what the filter indicators should be shown for a given chart\nexport const selectIndicatorsForChart = (\n  chartId: number,\n  filters: { [key: number]: Filter },\n  datasources: { [key: string]: Datasource },\n  chart: any,\n): Indicator[] => {\n  // for now we only need to know which columns are compatible/incompatible,\n  // so grab the columns from the applied/rejected filters\n  const appliedColumns = getAppliedColumns(chart);\n  const rejectedColumns = getRejectedColumns(chart);\n  const matchingFilters = Object.values(filters).filter(\n    filter => filter.chartId !== chartId,\n  );\n  const matchingDatasources = Object.entries(datasources)\n    .filter(([key]) =>\n      matchingFilters.find(filter => filter.datasourceId === key),\n    )\n    .map(([, datasource]) => datasource);\n\n  const cachedFilterData = cachedDashboardFilterDataForChart[chartId];\n  if (\n    cachedIndicatorsForChart[chartId] &&\n    areObjectsEqual(cachedFilterData?.appliedColumns, appliedColumns) &&\n    areObjectsEqual(cachedFilterData?.rejectedColumns, rejectedColumns) &&\n    areObjectsEqual(cachedFilterData?.matchingFilters, matchingFilters) &&\n    areObjectsEqual(cachedFilterData?.matchingDatasources, matchingDatasources)\n  ) {\n    return cachedIndicatorsForChart[chartId];\n  }\n  const indicators = matchingFilters.reduce(\n    (acc, filter) =>\n      acc.concat(\n        selectIndicatorsForChartFromFilter(\n          chartId,\n          filter,\n          datasources[filter.datasourceId] || {},\n          appliedColumns,\n          rejectedColumns,\n        ),\n      ),\n    [] as Indicator[],\n  );\n  indicators.sort((a, b) => a.name.localeCompare(b.name));\n  cachedIndicatorsForChart[chartId] = indicators;\n  cachedDashboardFilterDataForChart[chartId] = {\n    appliedColumns,\n    rejectedColumns,\n    matchingFilters,\n    matchingDatasources,\n  };\n  return indicators;\n};\n\nconst cachedNativeIndicatorsForChart = {};\nconst cachedNativeFilterDataForChart: any = {};\nconst defaultChartConfig = {};\nexport const selectNativeIndicatorsForChart = (\n  nativeFilters: Filters,\n  dataMask: DataMaskStateWithId,\n  chartId: number,\n  chart: any,\n  dashboardLayout: Layout,\n  chartConfiguration: ChartConfiguration = defaultChartConfig,\n): Indicator[] => {\n  const appliedColumns = getAppliedColumns(chart);\n  const rejectedColumns = getRejectedColumns(chart);\n\n  const cachedFilterData = cachedNativeFilterDataForChart[chartId];\n  if (\n    cachedNativeIndicatorsForChart[chartId] &&\n    areObjectsEqual(cachedFilterData?.appliedColumns, appliedColumns) &&\n    areObjectsEqual(cachedFilterData?.rejectedColumns, rejectedColumns) &&\n    cachedFilterData?.nativeFilters === nativeFilters &&\n    cachedFilterData?.dashboardLayout === dashboardLayout &&\n    cachedFilterData?.chartConfiguration === chartConfiguration &&\n    cachedFilterData?.dataMask === dataMask\n  ) {\n    return cachedNativeIndicatorsForChart[chartId];\n  }\n  const getStatus = ({\n    label,\n    column,\n    type = DataMaskType.NativeFilters,\n  }: {\n    label: string | null;\n    column?: string;\n    type?: DataMaskType;\n  }): IndicatorStatus => {\n    // a filter is only considered unset if it's value is null\n    const hasValue = label !== null;\n    if (type === DataMaskType.CrossFilters && hasValue) {\n      return IndicatorStatus.CrossFilterApplied;\n    }\n    if (!column && hasValue) {\n      // Filter without datasource\n      return IndicatorStatus.Applied;\n    }\n    if (column && rejectedColumns.has(column))\n      return IndicatorStatus.Incompatible;\n    if (column && appliedColumns.has(column) && hasValue) {\n      return IndicatorStatus.Applied;\n    }\n    return IndicatorStatus.Unset;\n  };\n\n  let nativeFilterIndicators: any = [];\n  if (isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS)) {\n    nativeFilterIndicators =\n      nativeFilters &&\n      Object.values(nativeFilters)\n        .filter(\n          nativeFilter =>\n            nativeFilter.type === NativeFilterType.NATIVE_FILTER &&\n            nativeFilter.chartsInScope?.includes(chartId),\n        )\n        .map(nativeFilter => {\n          const column = nativeFilter.targets?.[0]?.column?.name;\n          const filterState = dataMask[nativeFilter.id]?.filterState;\n          const label = extractLabel(filterState);\n          return {\n            column,\n            name: nativeFilter.name,\n            path: [nativeFilter.id],\n            status: getStatus({ label, column }),\n            value: label,\n          };\n        });\n  }\n\n  let crossFilterIndicators: any = [];\n  if (isFeatureEnabled(FeatureFlag.DASHBOARD_CROSS_FILTERS)) {\n    const dashboardLayoutValues = Object.values(dashboardLayout);\n    const chartLayoutItem = dashboardLayoutValues.find(\n      layoutItem => layoutItem?.meta?.chartId === chartId,\n    );\n    crossFilterIndicators = Object.values(chartConfiguration)\n      .filter(\n        chartConfig =>\n          !chartConfig.crossFilters.scope.excluded.includes(chartId) &&\n          chartConfig.crossFilters.scope.rootPath.some(\n            elementId =>\n              chartLayoutItem?.type === CHART_TYPE &&\n              chartLayoutItem?.parents?.includes(elementId),\n          ),\n      )\n      .map(chartConfig => {\n        const filterState = dataMask[chartConfig.id]?.filterState;\n        const label = extractLabel(filterState);\n        const filtersState = filterState?.filters;\n        const column = filtersState && Object.keys(filtersState)[0];\n\n        const dashboardLayoutItem = dashboardLayoutValues.find(\n          layoutItem => layoutItem?.meta?.chartId === chartConfig.id,\n        );\n        return {\n          column,\n          name: dashboardLayoutItem?.meta?.sliceName as string,\n          path: [\n            ...(dashboardLayoutItem?.parents ?? []),\n            dashboardLayoutItem?.id,\n          ],\n          status: getStatus({\n            label,\n            type: DataMaskType.CrossFilters,\n          }),\n          value: label,\n        };\n      })\n      .filter(filter => filter.status === IndicatorStatus.CrossFilterApplied);\n  }\n  const indicators = crossFilterIndicators.concat(nativeFilterIndicators);\n  cachedNativeIndicatorsForChart[chartId] = indicators;\n  cachedNativeFilterDataForChart[chartId] = {\n    nativeFilters,\n    dashboardLayout,\n    chartConfiguration,\n    dataMask,\n    appliedColumns,\n    rejectedColumns,\n  };\n  return indicators;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { uniqWith } from 'lodash';\nimport cx from 'classnames';\nimport { DataMaskStateWithId, Filters } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { usePrevious } from 'src/hooks/usePrevious';\nimport DetailsPanelPopover from './DetailsPanel';\nimport { Pill } from './Styles';\nimport {\n  Indicator,\n  IndicatorStatus,\n  selectIndicatorsForChart,\n  selectNativeIndicatorsForChart,\n} from './selectors';\nimport { setDirectPathToChild } from '../../actions/dashboardState';\nimport {\n  ChartsState,\n  DashboardInfo,\n  DashboardLayout,\n  RootState,\n} from '../../types';\n\nexport interface FiltersBadgeProps {\n  chartId: number;\n}\n\nconst sortByStatus = (indicators: Indicator[]): Indicator[] => {\n  const statuses = [\n    IndicatorStatus.Applied,\n    IndicatorStatus.Unset,\n    IndicatorStatus.Incompatible,\n  ];\n  return indicators.sort(\n    (a, b) =>\n      statuses.indexOf(a.status as IndicatorStatus) -\n      statuses.indexOf(b.status as IndicatorStatus),\n  );\n};\n\nconst indicatorsInitialState: Indicator[] = [];\n\nexport const FiltersBadge = ({ chartId }: FiltersBadgeProps) => {\n  const dispatch = useDispatch();\n  const datasources = useSelector<RootState, any>(state => state.datasources);\n  const dashboardFilters = useSelector<RootState, any>(\n    state => state.dashboardFilters,\n  );\n  const nativeFilters = useSelector<RootState, Filters>(\n    state => state.nativeFilters?.filters,\n  );\n  const dashboardInfo = useSelector<RootState, DashboardInfo>(\n    state => state.dashboardInfo,\n  );\n  const charts = useSelector<RootState, ChartsState>(state => state.charts);\n  const present = useSelector<RootState, DashboardLayout>(\n    state => state.dashboardLayout.present,\n  );\n  const dataMask = useSelector<RootState, DataMaskStateWithId>(\n    state => state.dataMask,\n  );\n\n  const [nativeIndicators, setNativeIndicators] = useState<Indicator[]>(\n    indicatorsInitialState,\n  );\n  const [dashboardIndicators, setDashboardIndicators] = useState<Indicator[]>(\n    indicatorsInitialState,\n  );\n\n  const onHighlightFilterSource = useCallback(\n    (path: string[]) => {\n      dispatch(setDirectPathToChild(path));\n    },\n    [dispatch],\n  );\n\n  const chart = charts[chartId];\n  const prevChart = usePrevious(chart);\n  const prevChartStatus = prevChart?.chartStatus;\n  const prevDashboardFilters = usePrevious(dashboardFilters);\n  const prevDatasources = usePrevious(datasources);\n  const showIndicators =\n    chart?.chartStatus && ['rendered', 'success'].includes(chart.chartStatus);\n\n  useEffect(() => {\n    if (!showIndicators && dashboardIndicators.length > 0) {\n      setDashboardIndicators(indicatorsInitialState);\n    } else if (prevChartStatus !== 'success') {\n      if (\n        chart?.queriesResponse?.[0]?.rejected_filters !==\n          prevChart?.queriesResponse?.[0]?.rejected_filters ||\n        chart?.queriesResponse?.[0]?.applied_filters !==\n          prevChart?.queriesResponse?.[0]?.applied_filters ||\n        dashboardFilters !== prevDashboardFilters ||\n        datasources !== prevDatasources\n      ) {\n        setDashboardIndicators(\n          selectIndicatorsForChart(\n            chartId,\n            dashboardFilters,\n            datasources,\n            chart,\n          ),\n        );\n      }\n    }\n  }, [\n    chart,\n    chartId,\n    dashboardFilters,\n    dashboardIndicators.length,\n    datasources,\n    prevChart?.queriesResponse,\n    prevChartStatus,\n    prevDashboardFilters,\n    prevDatasources,\n    showIndicators,\n  ]);\n\n  const prevNativeFilters = usePrevious(nativeFilters);\n  const prevDashboardLayout = usePrevious(present);\n  const prevDataMask = usePrevious(dataMask);\n  const prevChartConfig = usePrevious(\n    dashboardInfo.metadata?.chart_configuration,\n  );\n  useEffect(() => {\n    if (!showIndicators && nativeIndicators.length > 0) {\n      setNativeIndicators(indicatorsInitialState);\n    } else if (prevChartStatus !== 'success') {\n      if (\n        chart?.queriesResponse?.[0]?.rejected_filters !==\n          prevChart?.queriesResponse?.[0]?.rejected_filters ||\n        chart?.queriesResponse?.[0]?.applied_filters !==\n          prevChart?.queriesResponse?.[0]?.applied_filters ||\n        nativeFilters !== prevNativeFilters ||\n        present !== prevDashboardLayout ||\n        dataMask !== prevDataMask ||\n        prevChartConfig !== dashboardInfo.metadata?.chart_configuration\n      ) {\n        setNativeIndicators(\n          selectNativeIndicatorsForChart(\n            nativeFilters,\n            dataMask,\n            chartId,\n            chart,\n            present,\n            dashboardInfo.metadata?.chart_configuration,\n          ),\n        );\n      }\n    }\n  }, [\n    chart,\n    chartId,\n    dashboardInfo.metadata?.chart_configuration,\n    dataMask,\n    nativeFilters,\n    nativeIndicators.length,\n    present,\n    prevChart?.queriesResponse,\n    prevChartConfig,\n    prevChartStatus,\n    prevDashboardLayout,\n    prevDataMask,\n    prevNativeFilters,\n    showIndicators,\n  ]);\n\n  const indicators = useMemo(\n    () =>\n      uniqWith(\n        sortByStatus([...dashboardIndicators, ...nativeIndicators]),\n        (ind1, ind2) =>\n          ind1.column === ind2.column &&\n          ind1.name === ind2.name &&\n          (ind1.status !== IndicatorStatus.Applied ||\n            ind2.status !== IndicatorStatus.Applied),\n      ),\n    [dashboardIndicators, nativeIndicators],\n  );\n\n  const appliedCrossFilterIndicators = useMemo(\n    () =>\n      indicators.filter(\n        indicator => indicator.status === IndicatorStatus.CrossFilterApplied,\n      ),\n    [indicators],\n  );\n  const appliedIndicators = useMemo(\n    () =>\n      indicators.filter(\n        indicator => indicator.status === IndicatorStatus.Applied,\n      ),\n    [indicators],\n  );\n  const unsetIndicators = useMemo(\n    () =>\n      indicators.filter(\n        indicator => indicator.status === IndicatorStatus.Unset,\n      ),\n    [indicators],\n  );\n  const incompatibleIndicators = useMemo(\n    () =>\n      indicators.filter(\n        indicator => indicator.status === IndicatorStatus.Incompatible,\n      ),\n    [indicators],\n  );\n\n  if (\n    !appliedCrossFilterIndicators.length &&\n    !appliedIndicators.length &&\n    !incompatibleIndicators.length &&\n    !unsetIndicators.length\n  ) {\n    return null;\n  }\n\n  const isInactive =\n    !appliedCrossFilterIndicators.length &&\n    !appliedIndicators.length &&\n    !incompatibleIndicators.length;\n\n  return (\n    <DetailsPanelPopover\n      appliedCrossFilterIndicators={appliedCrossFilterIndicators}\n      appliedIndicators={appliedIndicators}\n      unsetIndicators={unsetIndicators}\n      incompatibleIndicators={incompatibleIndicators}\n      onHighlightFilterSource={onHighlightFilterSource}\n    >\n      <Pill\n        className={cx(\n          'filter-counts',\n          !!incompatibleIndicators.length && 'has-incompatible-filters',\n          !!appliedCrossFilterIndicators.length && 'has-cross-filters',\n          isInactive && 'filters-inactive',\n        )}\n      >\n        <Icons.Filter iconSize=\"m\" />\n        {!isInactive && (\n          <span data-test=\"applied-filter-count\">\n            {appliedIndicators.length + appliedCrossFilterIndicators.length}\n          </span>\n        )}\n        {incompatibleIndicators.length ? (\n          <>\n            {' '}\n            <Icons.AlertSolid />\n            <span data-test=\"incompatible-filter-count\">\n              {incompatibleIndicators.length}\n            </span>\n          </>\n        ) : null}\n      </Pill>\n    </DetailsPanelPopover>\n  );\n};\n\nexport default React.memo(FiltersBadge);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC, useEffect, useMemo, useRef, useState } from 'react';\nimport { styled, t } from '@superset-ui/core';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { useDispatch, useSelector } from 'react-redux';\nimport EditableTitle from 'src/components/EditableTitle';\nimport SliceHeaderControls, {\n  SliceHeaderControlsProps,\n} from 'src/dashboard/components/SliceHeaderControls';\nimport FiltersBadge from 'src/dashboard/components/FiltersBadge';\nimport Icons from 'src/components/Icons';\nimport { RootState } from 'src/dashboard/types';\nimport FilterIndicator from 'src/dashboard/components/FiltersBadge/FilterIndicator';\nimport { clearDataMask } from 'src/dataMask/actions';\n\ntype SliceHeaderProps = SliceHeaderControlsProps & {\n  innerRef?: string;\n  updateSliceName?: (arg0: string) => void;\n  editMode?: boolean;\n  annotationQuery?: object;\n  annotationError?: object;\n  sliceName?: string;\n  filters: object;\n  handleToggleFullSize: () => void;\n  formData: object;\n  width: number;\n  height: number;\n};\n\nconst annotationsLoading = t('Annotation layers are still loading.');\nconst annotationsError = t('One ore more annotation layers failed loading.');\nconst CrossFilterIcon = styled(Icons.CursorTarget)`\n  cursor: pointer;\n  color: ${({ theme }) => theme.colors.primary.base};\n  height: 22px;\n  width: 22px;\n`;\n\nconst SliceHeader: FC<SliceHeaderProps> = ({\n  innerRef = null,\n  forceRefresh = () => ({}),\n  updateSliceName = () => ({}),\n  toggleExpandSlice = () => ({}),\n  logExploreChart = () => ({}),\n  onExploreChart,\n  exportCSV = () => ({}),\n  editMode = false,\n  annotationQuery = {},\n  annotationError = {},\n  cachedDttm = null,\n  updatedDttm = null,\n  isCached = [],\n  isExpanded = false,\n  sliceName = '',\n  supersetCanExplore = false,\n  supersetCanShare = false,\n  supersetCanCSV = false,\n  sliceCanEdit = false,\n  exportFullCSV,\n  slice,\n  componentId,\n  dashboardId,\n  addSuccessToast,\n  addDangerToast,\n  handleToggleFullSize,\n  isFullSize,\n  chartStatus,\n  formData,\n  width,\n  height,\n}) => {\n  const dispatch = useDispatch();\n  const uiConfig = useUiConfig();\n  const [headerTooltip, setHeaderTooltip] = useState<string | null>(null);\n  const headerRef = useRef<HTMLDivElement>(null);\n  // TODO: change to indicator field after it will be implemented\n  const crossFilterValue = useSelector<RootState, any>(\n    state => state.dataMask[slice?.slice_id]?.filterState?.value,\n  );\n\n  const indicator = useMemo(\n    () => ({\n      value: crossFilterValue,\n      name: t('Emitted values'),\n    }),\n    [crossFilterValue],\n  );\n\n  const handleClickTitle =\n    !editMode && supersetCanExplore ? onExploreChart : undefined;\n\n  useEffect(() => {\n    const headerElement = headerRef.current;\n    if (handleClickTitle) {\n      setHeaderTooltip(\n        sliceName\n          ? t('Click to edit %s in a new tab', sliceName)\n          : t('Click to edit chart in a new tab'),\n      );\n    } else if (\n      headerElement &&\n      (headerElement.scrollWidth > headerElement.offsetWidth ||\n        headerElement.scrollHeight > headerElement.offsetHeight)\n    ) {\n      setHeaderTooltip(sliceName ?? null);\n    } else {\n      setHeaderTooltip(null);\n    }\n  }, [sliceName, width, height, handleClickTitle]);\n\n  return (\n    <div className=\"chart-header\" data-test=\"slice-header\" ref={innerRef}>\n      <div className=\"header-title\" ref={headerRef}>\n        <Tooltip title={headerTooltip}>\n          <EditableTitle\n            title={\n              sliceName ||\n              (editMode\n                ? '---' // this makes an empty title clickable\n                : '')\n            }\n            canEdit={editMode}\n            emptyText=\"\"\n            onSaveTitle={updateSliceName}\n            showTooltip={false}\n            onClickTitle={handleClickTitle}\n          />\n        </Tooltip>\n        {!!Object.values(annotationQuery).length && (\n          <Tooltip\n            id=\"annotations-loading-tooltip\"\n            placement=\"top\"\n            title={annotationsLoading}\n          >\n            <i\n              role=\"img\"\n              aria-label={annotationsLoading}\n              className=\"fa fa-refresh warning\"\n            />\n          </Tooltip>\n        )}\n        {!!Object.values(annotationError).length && (\n          <Tooltip\n            id=\"annoation-errors-tooltip\"\n            placement=\"top\"\n            title={annotationsError}\n          >\n            <i\n              role=\"img\"\n              aria-label={annotationsError}\n              className=\"fa fa-exclamation-circle danger\"\n            />\n          </Tooltip>\n        )}\n      </div>\n      <div className=\"header-controls\">\n        {!editMode && (\n          <>\n            {crossFilterValue && (\n              <Tooltip\n                placement=\"top\"\n                title={\n                  <FilterIndicator\n                    indicator={indicator}\n                    text={t('Click to clear emitted filters')}\n                  />\n                }\n              >\n                <CrossFilterIcon\n                  onClick={() => dispatch(clearDataMask(slice?.slice_id))}\n                />\n              </Tooltip>\n            )}\n            {!uiConfig.hideChartControls && (\n              <FiltersBadge chartId={slice.slice_id} />\n            )}\n            {!uiConfig.hideChartControls && (\n              <SliceHeaderControls\n                slice={slice}\n                isCached={isCached}\n                isExpanded={isExpanded}\n                cachedDttm={cachedDttm}\n                updatedDttm={updatedDttm}\n                toggleExpandSlice={toggleExpandSlice}\n                forceRefresh={forceRefresh}\n                logExploreChart={logExploreChart}\n                onExploreChart={onExploreChart}\n                exportCSV={exportCSV}\n                exportFullCSV={exportFullCSV}\n                supersetCanExplore={supersetCanExplore}\n                supersetCanShare={supersetCanShare}\n                supersetCanCSV={supersetCanCSV}\n                sliceCanEdit={sliceCanEdit}\n                componentId={componentId}\n                dashboardId={dashboardId}\n                addSuccessToast={addSuccessToast}\n                addDangerToast={addDangerToast}\n                handleToggleFullSize={handleToggleFullSize}\n                isFullSize={isFullSize}\n                isDescriptionExpanded={isExpanded}\n                chartStatus={chartStatus}\n                formData={formData}\n              />\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SliceHeader;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nconst propTypes = {\n  height: PropTypes.number.isRequired,\n};\n\nexport default function MissingChart({ height }) {\n  return (\n    <div className=\"missing-chart-container\" style={{ height: height + 20 }}>\n      <div className=\"missing-chart-body\">\n        {t(\n          'There is no chart definition associated with this component, could it have been deleted?',\n        )}\n        <br />\n        <br />\n        {t('Delete this container and save to remove this message.')}\n      </div>\n    </div>\n  );\n}\n\nMissingChart.propTypes = propTypes;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { styled, t, logging } from '@superset-ui/core';\nimport { isEqual } from 'lodash';\n\nimport { exportChart, mountExploreUrl } from 'src/explore/exploreUtils';\nimport ChartContainer from 'src/components/Chart/ChartContainer';\nimport {\n  LOG_ACTIONS_CHANGE_DASHBOARD_FILTER,\n  LOG_ACTIONS_EXPLORE_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART,\n  LOG_ACTIONS_FORCE_REFRESH_CHART,\n} from 'src/logger/LogUtils';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { FILTER_BOX_MIGRATION_STATES } from 'src/explore/constants';\nimport { postFormData } from 'src/explore/exploreUtils/formData';\nimport { URL_PARAMS } from 'src/constants';\n\nimport SliceHeader from '../SliceHeader';\nimport MissingChart from '../MissingChart';\nimport { slicePropShape, chartPropShape } from '../../util/propShapes';\n\nimport { isFilterBox } from '../../util/activeDashboardFilters';\nimport getFilterValuesByFilterId from '../../util/getFilterValuesByFilterId';\n\nconst propTypes = {\n  id: PropTypes.number.isRequired,\n  componentId: PropTypes.string.isRequired,\n  dashboardId: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  updateSliceName: PropTypes.func.isRequired,\n  isComponentVisible: PropTypes.bool,\n  handleToggleFullSize: PropTypes.func.isRequired,\n  setControlValue: PropTypes.func,\n\n  // from redux\n  chart: chartPropShape.isRequired,\n  formData: PropTypes.object.isRequired,\n  labelColors: PropTypes.object,\n  sharedLabelColors: PropTypes.object,\n  datasource: PropTypes.object,\n  slice: slicePropShape.isRequired,\n  sliceName: PropTypes.string.isRequired,\n  timeout: PropTypes.number.isRequired,\n  maxRows: PropTypes.number.isRequired,\n  filterboxMigrationState: FILTER_BOX_MIGRATION_STATES,\n  // all active filter fields in dashboard\n  filters: PropTypes.object.isRequired,\n  refreshChart: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  toggleExpandSlice: PropTypes.func.isRequired,\n  changeFilter: PropTypes.func.isRequired,\n  setFocusedFilterField: PropTypes.func.isRequired,\n  unsetFocusedFilterField: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  isExpanded: PropTypes.bool.isRequired,\n  isCached: PropTypes.bool,\n  supersetCanExplore: PropTypes.bool.isRequired,\n  supersetCanShare: PropTypes.bool.isRequired,\n  supersetCanCSV: PropTypes.bool.isRequired,\n  sliceCanEdit: PropTypes.bool.isRequired,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  ownState: PropTypes.object,\n  filterState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  datasetsStatus: PropTypes.oneOf(['loading', 'error', 'complete']),\n};\n\nconst defaultProps = {\n  isCached: false,\n  isComponentVisible: true,\n};\n\n// we use state + shouldComponentUpdate() logic to prevent perf-wrecking\n// resizing across all slices on a dashboard on every update\nconst RESIZE_TIMEOUT = 350;\nconst SHOULD_UPDATE_ON_PROP_CHANGES = Object.keys(propTypes).filter(\n  prop =>\n    prop !== 'width' && prop !== 'height' && prop !== 'isComponentVisible',\n);\nconst OVERFLOWABLE_VIZ_TYPES = new Set(['filter_box']);\nconst DEFAULT_HEADER_HEIGHT = 22;\n\nconst ChartOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n\n  &.is-deactivated {\n    opacity: 0.5;\n    background-color: ${({ theme }) => theme.colors.grayscale.light1};\n  }\n`;\n\nconst SliceContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n`;\n\nexport default class Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      width: props.width,\n      height: props.height,\n      descriptionHeight: 0,\n    };\n\n    this.changeFilter = this.changeFilter.bind(this);\n    this.handleFilterMenuOpen = this.handleFilterMenuOpen.bind(this);\n    this.handleFilterMenuClose = this.handleFilterMenuClose.bind(this);\n    this.exportCSV = this.exportCSV.bind(this);\n    this.exportFullCSV = this.exportFullCSV.bind(this);\n    this.forceRefresh = this.forceRefresh.bind(this);\n    this.resize = this.resize.bind(this);\n    this.setDescriptionRef = this.setDescriptionRef.bind(this);\n    this.setHeaderRef = this.setHeaderRef.bind(this);\n    this.getChartHeight = this.getChartHeight.bind(this);\n    this.getDescriptionHeight = this.getDescriptionHeight.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // this logic mostly pertains to chart resizing. we keep a copy of the dimensions in\n    // state so that we can buffer component size updates and only update on the final call\n    // which improves performance significantly\n    if (\n      nextState.width !== this.state.width ||\n      nextState.height !== this.state.height ||\n      nextState.descriptionHeight !== this.state.descriptionHeight ||\n      !isEqual(nextProps.datasource, this.props.datasource)\n    ) {\n      return true;\n    }\n\n    // allow chart update/re-render only if visible:\n    // under selected tab or no tab layout\n    if (nextProps.isComponentVisible) {\n      if (nextProps.chart.triggerQuery) {\n        return true;\n      }\n\n      if (nextProps.isFullSize !== this.props.isFullSize) {\n        clearTimeout(this.resizeTimeout);\n        this.resizeTimeout = setTimeout(this.resize, RESIZE_TIMEOUT);\n        return false;\n      }\n\n      if (\n        nextProps.width !== this.props.width ||\n        nextProps.height !== this.props.height\n      ) {\n        clearTimeout(this.resizeTimeout);\n        this.resizeTimeout = setTimeout(this.resize, RESIZE_TIMEOUT);\n      }\n\n      for (let i = 0; i < SHOULD_UPDATE_ON_PROP_CHANGES.length; i += 1) {\n        const prop = SHOULD_UPDATE_ON_PROP_CHANGES[i];\n        // use deep objects equality comparison to prevent\n        // unneccessary updates when objects references change\n        if (!areObjectsEqual(nextProps[prop], this.props[prop])) {\n          return true;\n        }\n      }\n    }\n\n    // `cacheBusterProp` is jected by react-hot-loader\n    return this.props.cacheBusterProp !== nextProps.cacheBusterProp;\n  }\n\n  componentDidMount() {\n    if (this.props.isExpanded) {\n      const descriptionHeight = this.getDescriptionHeight();\n      this.setState({ descriptionHeight });\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.resizeTimeout);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isExpanded !== prevProps.isExpanded) {\n      const descriptionHeight = this.getDescriptionHeight();\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ descriptionHeight });\n    }\n  }\n\n  getDescriptionHeight() {\n    return this.props.isExpanded && this.descriptionRef\n      ? this.descriptionRef.offsetHeight\n      : 0;\n  }\n\n  getChartHeight() {\n    const headerHeight = this.getHeaderHeight();\n    return Math.max(\n      this.state.height - headerHeight - this.state.descriptionHeight,\n      20,\n    );\n  }\n\n  getHeaderHeight() {\n    if (this.headerRef) {\n      const computedStyle = getComputedStyle(this.headerRef).getPropertyValue(\n        'margin-bottom',\n      );\n      const marginBottom = parseInt(computedStyle, 10) || 0;\n      return this.headerRef.offsetHeight + marginBottom;\n    }\n    return DEFAULT_HEADER_HEIGHT;\n  }\n\n  setDescriptionRef(ref) {\n    this.descriptionRef = ref;\n  }\n\n  setHeaderRef(ref) {\n    this.headerRef = ref;\n  }\n\n  resize() {\n    const { width, height } = this.props;\n    this.setState(() => ({ width, height }));\n  }\n\n  changeFilter(newSelectedValues = {}) {\n    this.props.logEvent(LOG_ACTIONS_CHANGE_DASHBOARD_FILTER, {\n      id: this.props.chart.id,\n      columns: Object.keys(newSelectedValues),\n    });\n    this.props.changeFilter(this.props.chart.id, newSelectedValues);\n  }\n\n  handleFilterMenuOpen(chartId, column) {\n    this.props.setFocusedFilterField(chartId, column);\n  }\n\n  handleFilterMenuClose(chartId, column) {\n    this.props.unsetFocusedFilterField(chartId, column);\n  }\n\n  logExploreChart = () => {\n    this.props.logEvent(LOG_ACTIONS_EXPLORE_DASHBOARD_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n  };\n\n  onExploreChart = async () => {\n    try {\n      const lastTabId = window.localStorage.getItem('last_tab_id');\n      const nextTabId = lastTabId\n        ? String(Number.parseInt(lastTabId, 10) + 1)\n        : undefined;\n      const key = await postFormData(\n        this.props.datasource.id,\n        this.props.datasource.type,\n        this.props.formData,\n        this.props.slice.slice_id,\n        nextTabId,\n      );\n      const url = mountExploreUrl(null, {\n        [URL_PARAMS.formDataKey.name]: key,\n        [URL_PARAMS.sliceId.name]: this.props.slice.slice_id,\n      });\n      window.open(url, '_blank', 'noreferrer');\n    } catch (error) {\n      logging.error(error);\n      this.props.addDangerToast(t('An error occurred while opening Explore'));\n    }\n  };\n\n  exportCSV(isFullCSV = false) {\n    this.props.logEvent(LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n    exportChart({\n      formData: isFullCSV\n        ? { ...this.props.formData, row_limit: this.props.maxRows }\n        : this.props.formData,\n      resultType: 'full',\n      resultFormat: 'csv',\n      force: true,\n      ownState: this.props.ownState,\n    });\n  }\n\n  exportFullCSV() {\n    this.exportCSV(true);\n  }\n\n  forceRefresh() {\n    this.props.logEvent(LOG_ACTIONS_FORCE_REFRESH_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n    return this.props.refreshChart(\n      this.props.chart.id,\n      true,\n      this.props.dashboardId,\n    );\n  }\n\n  render() {\n    const {\n      id,\n      componentId,\n      dashboardId,\n      chart,\n      slice,\n      datasource,\n      isExpanded,\n      editMode,\n      filters,\n      formData,\n      labelColors,\n      sharedLabelColors,\n      updateSliceName,\n      sliceName,\n      toggleExpandSlice,\n      timeout,\n      supersetCanExplore,\n      supersetCanShare,\n      supersetCanCSV,\n      sliceCanEdit,\n      addSuccessToast,\n      addDangerToast,\n      ownState,\n      filterState,\n      handleToggleFullSize,\n      isFullSize,\n      setControlValue,\n      filterboxMigrationState,\n      postTransformProps,\n      datasetsStatus,\n    } = this.props;\n\n    const { width } = this.state;\n    // this prevents throwing in the case that a gridComponent\n    // references a chart that is not associated with the dashboard\n    if (!chart || !slice) {\n      return <MissingChart height={this.getChartHeight()} />;\n    }\n\n    const { queriesResponse, chartUpdateEndTime, chartStatus } = chart;\n    const isLoading = chartStatus === 'loading';\n    const isDeactivatedViz =\n      slice.viz_type === 'filter_box' &&\n      [\n        FILTER_BOX_MIGRATION_STATES.REVIEWING,\n        FILTER_BOX_MIGRATION_STATES.CONVERTED,\n      ].includes(filterboxMigrationState);\n    // eslint-disable-next-line camelcase\n    const isCached = queriesResponse?.map(({ is_cached }) => is_cached) || [];\n    const cachedDttm =\n      // eslint-disable-next-line camelcase\n      queriesResponse?.map(({ cached_dttm }) => cached_dttm) || [];\n    const isOverflowable = OVERFLOWABLE_VIZ_TYPES.has(slice.viz_type);\n    const initialValues = isFilterBox(id)\n      ? getFilterValuesByFilterId({\n          activeFilters: filters,\n          filterId: id,\n        })\n      : {};\n    return (\n      <SliceContainer\n        className=\"chart-slice\"\n        data-test=\"chart-grid-component\"\n        data-test-chart-id={id}\n        data-test-viz-type={slice.viz_type}\n        data-test-chart-name={slice.slice_name}\n      >\n        <SliceHeader\n          innerRef={this.setHeaderRef}\n          slice={slice}\n          isExpanded={isExpanded}\n          isCached={isCached}\n          cachedDttm={cachedDttm}\n          updatedDttm={chartUpdateEndTime}\n          toggleExpandSlice={toggleExpandSlice}\n          forceRefresh={this.forceRefresh}\n          editMode={editMode}\n          annotationQuery={chart.annotationQuery}\n          logExploreChart={this.logExploreChart}\n          onExploreChart={this.onExploreChart}\n          exportCSV={this.exportCSV}\n          exportFullCSV={this.exportFullCSV}\n          updateSliceName={updateSliceName}\n          sliceName={sliceName}\n          supersetCanExplore={supersetCanExplore}\n          supersetCanShare={supersetCanShare}\n          supersetCanCSV={supersetCanCSV}\n          sliceCanEdit={sliceCanEdit}\n          componentId={componentId}\n          dashboardId={dashboardId}\n          filters={filters}\n          addSuccessToast={addSuccessToast}\n          addDangerToast={addDangerToast}\n          handleToggleFullSize={handleToggleFullSize}\n          isFullSize={isFullSize}\n          chartStatus={chart.chartStatus}\n          formData={formData}\n          width={width}\n          height={this.getHeaderHeight()}\n        />\n\n        {/*\n          This usage of dangerouslySetInnerHTML is safe since it is being used to render\n          markdown that is sanitized with bleach. See:\n             https://github.com/apache/superset/pull/4390\n          and\n             https://github.com/apache/superset/commit/b6fcc22d5a2cb7a5e92599ed5795a0169385a825\n        */}\n        {isExpanded && slice.description_markeddown && (\n          <div\n            className=\"slice_description bs-callout bs-callout-default\"\n            ref={this.setDescriptionRef}\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: slice.description_markeddown }}\n          />\n        )}\n\n        <div\n          className={cx(\n            'dashboard-chart',\n            isOverflowable && 'dashboard-chart--overflowable',\n          )}\n        >\n          {(isLoading || isDeactivatedViz) && (\n            <ChartOverlay\n              className={cx(isDeactivatedViz && 'is-deactivated')}\n              style={{\n                width,\n                height: this.getChartHeight(),\n              }}\n            />\n          )}\n          <ChartContainer\n            width={width}\n            height={this.getChartHeight()}\n            addFilter={this.changeFilter}\n            onFilterMenuOpen={this.handleFilterMenuOpen}\n            onFilterMenuClose={this.handleFilterMenuClose}\n            annotationData={chart.annotationData}\n            chartAlert={chart.chartAlert}\n            chartId={id}\n            chartStatus={chartStatus}\n            datasource={datasource}\n            dashboardId={dashboardId}\n            initialValues={initialValues}\n            formData={formData}\n            labelColors={labelColors}\n            sharedLabelColors={sharedLabelColors}\n            ownState={ownState}\n            filterState={filterState}\n            queriesResponse={chart.queriesResponse}\n            timeout={timeout}\n            triggerQuery={chart.triggerQuery}\n            vizType={slice.viz_type}\n            setControlValue={setControlValue}\n            isDeactivatedViz={isDeactivatedViz}\n            filterboxMigrationState={filterboxMigrationState}\n            postTransformProps={postTransformProps}\n            datasetsStatus={datasetsStatus}\n          />\n        </div>\n      </SliceContainer>\n    );\n  }\n}\n\nChart.propTypes = propTypes;\nChart.defaultProps = defaultProps;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { getChartIdAndColumnFromFilterKey } from './getDashboardFilterKey';\n\n// input: { [id_column1]: values, [id_column2]: values }\n// output: { column1: values, column2: values }\nexport default function getFilterValuesByFilterId({\n  activeFilters = {},\n  filterId,\n}) {\n  return Object.entries(activeFilters).reduce((map, entry) => {\n    const [filterKey, { values }] = entry;\n    const { chartId, column } = getChartIdAndColumnFromFilterKey(filterKey);\n    if (chartId === filterId) {\n      return {\n        ...map,\n        [column]: values,\n      };\n    }\n    return map;\n  }, {});\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n  toggleExpandSlice,\n  setFocusedFilterField,\n  unsetFocusedFilterField,\n} from 'src/dashboard/actions/dashboardState';\nimport { updateComponents } from 'src/dashboard/actions/dashboardLayout';\nimport { changeFilter } from 'src/dashboard/actions/dashboardFilters';\nimport {\n  addSuccessToast,\n  addDangerToast,\n} from 'src/components/MessageToasts/actions';\nimport { refreshChart } from 'src/components/Chart/chartAction';\nimport { logEvent } from 'src/logger/actions';\nimport {\n  getActiveFilters,\n  getAppliedFilterValues,\n} from 'src/dashboard/util/activeDashboardFilters';\nimport getFormDataWithExtraFilters from 'src/dashboard/util/charts/getFormDataWithExtraFilters';\nimport Chart from 'src/dashboard/components/gridComponents/Chart';\nimport { PLACEHOLDER_DATASOURCE } from 'src/dashboard/constants';\n\nconst EMPTY_OBJECT = {};\n\nfunction mapStateToProps(\n  {\n    charts: chartQueries,\n    dashboardInfo,\n    dashboardState,\n    dashboardLayout,\n    dataMask,\n    datasources,\n    sliceEntities,\n    nativeFilters,\n    common,\n  },\n  ownProps,\n) {\n  const { id, extraControls, setControlValue } = ownProps;\n  const chart = chartQueries[id] || EMPTY_OBJECT;\n  const datasource =\n    (chart && chart.form_data && datasources[chart.form_data.datasource]) ||\n    PLACEHOLDER_DATASOURCE;\n  const { colorScheme, colorNamespace, datasetsStatus } = dashboardState;\n  const labelColors = dashboardInfo?.metadata?.label_colors || {};\n  const sharedLabelColors = dashboardInfo?.metadata?.shared_label_colors || {};\n  // note: this method caches filters if possible to prevent render cascades\n  const formData = getFormDataWithExtraFilters({\n    layout: dashboardLayout.present,\n    chart,\n    // eslint-disable-next-line camelcase\n    chartConfiguration: dashboardInfo.metadata?.chart_configuration,\n    charts: chartQueries,\n    filters: getAppliedFilterValues(id),\n    colorScheme,\n    colorNamespace,\n    sliceId: id,\n    nativeFilters,\n    dataMask,\n    extraControls,\n    labelColors,\n    sharedLabelColors,\n  });\n\n  formData.dashboardId = dashboardInfo.id;\n\n  return {\n    chart,\n    datasource,\n    labelColors,\n    sharedLabelColors,\n    slice: sliceEntities.slices[id],\n    timeout: dashboardInfo.common.conf.SUPERSET_WEBSERVER_TIMEOUT,\n    filters: getActiveFilters() || EMPTY_OBJECT,\n    formData,\n    editMode: dashboardState.editMode,\n    isExpanded: !!dashboardState.expandedSlices[id],\n    supersetCanExplore: !!dashboardInfo.superset_can_explore,\n    supersetCanShare: !!dashboardInfo.superset_can_share,\n    supersetCanCSV: !!dashboardInfo.superset_can_csv,\n    sliceCanEdit: !!dashboardInfo.slice_can_edit,\n    ownState: dataMask[id]?.ownState,\n    filterState: dataMask[id]?.filterState,\n    maxRows: common.conf.SQL_MAX_ROW,\n    setControlValue,\n    filterboxMigrationState: dashboardState.filterboxMigrationState,\n    datasetsStatus,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      updateComponents,\n      addSuccessToast,\n      addDangerToast,\n      toggleExpandSlice,\n      changeFilter,\n      setFocusedFilterField,\n      unsetFocusedFilterField,\n      refreshChart,\n      logEvent,\n    },\n    dispatch,\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chart);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { t } from '@superset-ui/core';\nimport Popover, { PopoverProps } from 'src/components/Popover';\nimport CopyToClipboard from 'src/components/CopyToClipboard';\nimport { getDashboardPermalink, getUrlParam } from 'src/utils/urlUtils';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport { URL_PARAMS } from 'src/constants';\nimport { getFilterValue } from 'src/dashboard/components/nativeFilters/FilterBar/keyValue';\n\nexport type URLShortLinkButtonProps = {\n  dashboardId: number;\n  anchorLinkId?: string;\n  emailSubject?: string;\n  emailContent?: string;\n  placement?: PopoverProps['placement'];\n};\n\nexport default function URLShortLinkButton({\n  dashboardId,\n  anchorLinkId,\n  placement = 'right',\n  emailContent = '',\n  emailSubject = '',\n}: URLShortLinkButtonProps) {\n  const [shortUrl, setShortUrl] = useState('');\n  const { addDangerToast } = useToasts();\n\n  const getCopyUrl = async () => {\n    const nativeFiltersKey = getUrlParam(URL_PARAMS.nativeFiltersKey);\n    try {\n      const filterState = await getFilterValue(dashboardId, nativeFiltersKey);\n      const url = await getDashboardPermalink({\n        dashboardId,\n        filterState,\n        hash: anchorLinkId,\n      });\n      setShortUrl(url);\n    } catch (error) {\n      addDangerToast(error);\n    }\n  };\n\n  const emailBody = `${emailContent}${shortUrl || ''}`;\n  const emailLink = `mailto:?Subject=${emailSubject}%20&Body=${emailBody}`;\n\n  return (\n    <Popover\n      trigger=\"click\"\n      placement={placement}\n      content={\n        <div id=\"shorturl-popover\" data-test=\"shorturl-popover\">\n          <CopyToClipboard\n            text={shortUrl}\n            copyNode={\n              <i className=\"fa fa-clipboard\" title={t('Copy to clipboard')} />\n            }\n          />\n          &nbsp;&nbsp;\n          <a href={emailLink}>\n            <i className=\"fa fa-envelope\" />\n          </a>\n        </div>\n      }\n    >\n      <span\n        className=\"short-link-trigger btn btn-default btn-sm\"\n        tabIndex={0}\n        role=\"button\"\n        onClick={e => {\n          e.stopPropagation();\n          getCopyUrl();\n        }}\n      >\n        <i className=\"short-link-trigger fa fa-link\" />\n        &nbsp;\n      </span>\n    </Popover>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect } from 'react';\nimport { t } from '@superset-ui/core';\n\nimport URLShortLinkButton, {\n  URLShortLinkButtonProps,\n} from 'src/dashboard/components/URLShortLinkButton';\nimport getLocationHash from 'src/dashboard/util/getLocationHash';\n\nexport type AnchorLinkProps = {\n  id: string;\n  scrollIntoView?: boolean;\n  showShortLinkButton?: boolean;\n} & Pick<URLShortLinkButtonProps, 'dashboardId' | 'placement'>;\n\nexport default function AnchorLink({\n  id,\n  dashboardId,\n  placement = 'right',\n  scrollIntoView = false,\n  showShortLinkButton = true,\n}: AnchorLinkProps) {\n  const scrollAnchorIntoView = (elementId: string) => {\n    const element = document.getElementById(elementId);\n    if (element) {\n      element.scrollIntoView({\n        block: 'center',\n        behavior: 'smooth',\n      });\n    }\n  };\n\n  // will always scroll element into view if element id and url hash match\n  const hash = getLocationHash();\n  useEffect(() => {\n    if (hash && id === hash) {\n      scrollAnchorIntoView(id);\n    }\n  }, [hash, id]);\n\n  // force scroll into view\n  useEffect(() => {\n    if (scrollIntoView) {\n      scrollAnchorIntoView(id);\n    }\n  }, [id, scrollIntoView]);\n\n  return (\n    <span className=\"anchor-link-container\" id={id}>\n      {showShortLinkButton && dashboardId && (\n        <URLShortLinkButton\n          anchorLinkId={id}\n          dashboardId={dashboardId}\n          emailSubject={t('Superset chart')}\n          emailContent={t('Check out this chart in dashboard:')}\n          placement={placement}\n        />\n      )}\n    </span>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { MouseEventHandler } from 'react';\nimport Icons from 'src/components/Icons';\nimport IconButton from './IconButton';\n\ntype DeleteComponentButtonProps = {\n  onDelete: MouseEventHandler<HTMLDivElement>;\n};\n\nconst DeleteComponentButton: React.FC<DeleteComponentButtonProps> = ({\n  onDelete,\n}) => <IconButton onClick={onDelete} icon={<Icons.Trash iconSize=\"xl\" />} />;\n\nexport default DeleteComponentButton;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { RefObject } from 'react';\nimport { styled } from '@superset-ui/core';\nimport cx from 'classnames';\n\ninterface HoverMenuProps {\n  position: 'left' | 'top';\n  innerRef: RefObject<HTMLDivElement>;\n  children: React.ReactNode;\n}\n\nconst HoverStyleOverrides = styled.div`\n  .hover-menu {\n    opacity: 0;\n    position: absolute;\n    z-index: 10;\n    font-size: ${({ theme }) => theme.typography.sizes.m};\n  }\n\n  .hover-menu--left {\n    width: ${({ theme }) => theme.gridUnit * 6}px;\n    top: 50%;\n    transform: translate(0, -50%);\n    left: ${({ theme }) => theme.gridUnit * -7}px;\n    padding: ${({ theme }) => theme.gridUnit * 2}px 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .hover-menu--left > :nth-child(n):not(:only-child):not(:last-child) {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n  }\n\n  .hover-menu--top {\n    height: ${({ theme }) => theme.gridUnit * 6}px;\n    top: ${({ theme }) => theme.gridUnit * -6}px;\n    left: 50%;\n    transform: translate(-50%);\n    padding: 0 ${({ theme }) => theme.gridUnit * 2}px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n  }\n`;\n\nexport default class HoverMenu extends React.PureComponent<HoverMenuProps> {\n  static defaultProps = {\n    position: 'left',\n    innerRef: null,\n    children: null,\n  };\n\n  render() {\n    const { innerRef, position, children } = this.props;\n    return (\n      <HoverStyleOverrides className=\"hover-menu-container\">\n        <div\n          ref={innerRef}\n          className={cx(\n            'hover-menu',\n            position === 'left' && 'hover-menu--left',\n            position === 'top' && 'hover-menu--top',\n          )}\n        >\n          {children}\n        </div>\n      </HoverStyleOverrides>\n    );\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\n\nexport function BottomRightResizeHandle() {\n  return <div className=\"resize-handle resize-handle--bottom-right\" />;\n}\n\nexport function RightResizeHandle() {\n  return <div className=\"resize-handle resize-handle--right\" />;\n}\n\nexport function BottomResizeHandle() {\n  return <div className=\"resize-handle resize-handle--bottom\" />;\n}\n\nexport default {\n  right: RightResizeHandle,\n  bottom: BottomResizeHandle,\n  bottomRight: BottomRightResizeHandle,\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// config for a ResizableContainer\nconst adjustableWidthAndHeight = {\n  top: false,\n  right: true,\n  bottom: true,\n  left: false,\n  topRight: false,\n  bottomRight: true,\n  bottomLeft: false,\n  topLeft: false,\n};\n\nconst adjustableWidth = {\n  ...adjustableWidthAndHeight,\n  bottomRight: false,\n  bottom: false,\n};\n\nconst adjustableHeight = {\n  ...adjustableWidthAndHeight,\n  bottomRight: false,\n  right: false,\n};\n\nconst notAdjustable = {\n  ...adjustableWidthAndHeight,\n  bottomRight: false,\n  bottom: false,\n  right: false,\n};\n\nexport default {\n  widthAndHeight: adjustableWidthAndHeight,\n  widthOnly: adjustableWidth,\n  heightOnly: adjustableHeight,\n  notAdjustable,\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Resizable } from 're-resizable';\nimport cx from 'classnames';\n\nimport ResizableHandle from './ResizableHandle';\nimport resizableConfig from '../../util/resizableConfig';\nimport { GRID_BASE_UNIT, GRID_GUTTER_SIZE } from '../../util/constants';\n\nconst proxyToInfinity = Number.MAX_VALUE;\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  adjustableWidth: PropTypes.bool,\n  adjustableHeight: PropTypes.bool,\n  gutterWidth: PropTypes.number,\n  widthStep: PropTypes.number,\n  heightStep: PropTypes.number,\n  widthMultiple: PropTypes.number,\n  heightMultiple: PropTypes.number,\n  minWidthMultiple: PropTypes.number,\n  maxWidthMultiple: PropTypes.number,\n  minHeightMultiple: PropTypes.number,\n  maxHeightMultiple: PropTypes.number,\n  staticHeight: PropTypes.number,\n  staticHeightMultiple: PropTypes.number,\n  staticWidth: PropTypes.number,\n  staticWidthMultiple: PropTypes.number,\n  onResizeStop: PropTypes.func,\n  onResize: PropTypes.func,\n  onResizeStart: PropTypes.func,\n  editMode: PropTypes.bool.isRequired,\n};\n\nconst defaultProps = {\n  children: null,\n  adjustableWidth: true,\n  adjustableHeight: true,\n  gutterWidth: GRID_GUTTER_SIZE,\n  widthStep: GRID_BASE_UNIT,\n  heightStep: GRID_BASE_UNIT,\n  widthMultiple: null,\n  heightMultiple: null,\n  minWidthMultiple: 1,\n  maxWidthMultiple: proxyToInfinity,\n  minHeightMultiple: 1,\n  maxHeightMultiple: proxyToInfinity,\n  staticHeight: null,\n  staticHeightMultiple: null,\n  staticWidth: null,\n  staticWidthMultiple: null,\n  onResizeStop: null,\n  onResize: null,\n  onResizeStart: null,\n};\n\n// because columns are not multiples of a single variable (width = n*cols + (n-1) * gutters)\n// we snap to the base unit and then snap to _actual_ column multiples on stop\nconst SNAP_TO_GRID = [GRID_BASE_UNIT, GRID_BASE_UNIT];\nconst HANDLE_CLASSES = {\n  right: 'resizable-container-handle--right',\n  bottom: 'resizable-container-handle--bottom',\n};\nclass ResizableContainer extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isResizing: false,\n    };\n\n    this.handleResizeStart = this.handleResizeStart.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n    this.handleResizeStop = this.handleResizeStop.bind(this);\n  }\n\n  handleResizeStart(event, direction, ref) {\n    const { id, onResizeStart } = this.props;\n\n    if (onResizeStart) {\n      onResizeStart({ id, direction, ref });\n    }\n\n    this.setState(() => ({ isResizing: true }));\n  }\n\n  handleResize(event, direction, ref) {\n    const { onResize, id } = this.props;\n    if (onResize) {\n      onResize({ id, direction, ref });\n    }\n  }\n\n  handleResizeStop(event, direction, ref, delta) {\n    const {\n      id,\n      onResizeStop,\n      widthStep,\n      heightStep,\n      widthMultiple,\n      heightMultiple,\n      adjustableHeight,\n      adjustableWidth,\n      gutterWidth,\n    } = this.props;\n\n    if (onResizeStop) {\n      const nextWidthMultiple =\n        widthMultiple + Math.round(delta.width / (widthStep + gutterWidth));\n      const nextHeightMultiple =\n        heightMultiple + Math.round(delta.height / heightStep);\n\n      onResizeStop({\n        id,\n        widthMultiple: adjustableWidth ? nextWidthMultiple : null,\n        heightMultiple: adjustableHeight ? nextHeightMultiple : null,\n      });\n\n      this.setState(() => ({ isResizing: false }));\n    }\n  }\n\n  render() {\n    const {\n      children,\n      adjustableWidth,\n      adjustableHeight,\n      widthStep,\n      heightStep,\n      widthMultiple,\n      heightMultiple,\n      staticHeight,\n      staticHeightMultiple,\n      staticWidth,\n      staticWidthMultiple,\n      minWidthMultiple,\n      maxWidthMultiple,\n      minHeightMultiple,\n      maxHeightMultiple,\n      gutterWidth,\n      editMode,\n    } = this.props;\n\n    const size = {\n      width: adjustableWidth\n        ? (widthStep + gutterWidth) * widthMultiple - gutterWidth\n        : (staticWidthMultiple && staticWidthMultiple * widthStep) ||\n          staticWidth ||\n          undefined,\n      height: adjustableHeight\n        ? heightStep * heightMultiple\n        : (staticHeightMultiple && staticHeightMultiple * heightStep) ||\n          staticHeight ||\n          undefined,\n    };\n\n    let enableConfig = resizableConfig.notAdjustable;\n\n    if (editMode && adjustableWidth && adjustableHeight) {\n      enableConfig = resizableConfig.widthAndHeight;\n    } else if (editMode && adjustableWidth) {\n      enableConfig = resizableConfig.widthOnly;\n    } else if (editMode && adjustableHeight) {\n      enableConfig = resizableConfig.heightOnly;\n    }\n\n    const { isResizing } = this.state;\n\n    return (\n      <Resizable\n        enable={enableConfig}\n        grid={SNAP_TO_GRID}\n        minWidth={\n          adjustableWidth\n            ? minWidthMultiple * (widthStep + gutterWidth) - gutterWidth\n            : undefined\n        }\n        minHeight={\n          adjustableHeight ? minHeightMultiple * heightStep : undefined\n        }\n        maxWidth={\n          adjustableWidth\n            ? Math.max(\n                size.width,\n                Math.min(\n                  proxyToInfinity,\n                  maxWidthMultiple * (widthStep + gutterWidth) - gutterWidth,\n                ),\n              )\n            : undefined\n        }\n        maxHeight={\n          adjustableHeight\n            ? Math.max(\n                size.height,\n                Math.min(proxyToInfinity, maxHeightMultiple * heightStep),\n              )\n            : undefined\n        }\n        size={size}\n        onResizeStart={this.handleResizeStart}\n        onResize={this.handleResize}\n        onResizeStop={this.handleResizeStop}\n        handleComponent={ResizableHandle}\n        className={cx(\n          'resizable-container',\n          isResizing && 'resizable-container--resizing',\n        )}\n        handleClasses={HANDLE_CLASSES}\n      >\n        {children}\n      </Resizable>\n    );\n  }\n}\n\nResizableContainer.propTypes = propTypes;\nResizableContainer.defaultProps = defaultProps;\n\nexport default ResizableContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { useTheme } from '@superset-ui/core';\nimport { useSelector, connect } from 'react-redux';\n\nimport { getChartIdsInFilterBoxScope } from 'src/dashboard/util/activeDashboardFilters';\nimport Chart from 'src/dashboard/containers/Chart';\nimport AnchorLink from 'src/dashboard/components/AnchorLink';\nimport DeleteComponentButton from 'src/dashboard/components/DeleteComponentButton';\nimport DragDroppable from 'src/dashboard/components/dnd/DragDroppable';\nimport HoverMenu from 'src/dashboard/components/menu/HoverMenu';\nimport ResizableContainer from 'src/dashboard/components/resizable/ResizableContainer';\nimport getChartAndLabelComponentIdFromPath from 'src/dashboard/util/getChartAndLabelComponentIdFromPath';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport { COLUMN_TYPE, ROW_TYPE } from 'src/dashboard/util/componentTypes';\nimport {\n  GRID_BASE_UNIT,\n  GRID_GUTTER_SIZE,\n  GRID_MIN_COLUMN_COUNT,\n  GRID_MIN_ROW_UNITS,\n} from 'src/dashboard/util/constants';\n\nconst CHART_MARGIN = 32;\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  dashboardId: PropTypes.number.isRequired,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  getComponentById: PropTypes.func.isRequired,\n  index: PropTypes.number.isRequired,\n  depth: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  directPathToChild: PropTypes.arrayOf(PropTypes.string),\n  directPathLastUpdated: PropTypes.number,\n  focusedFilterScope: PropTypes.object,\n  fullSizeChartId: PropTypes.oneOf([PropTypes.number, null]),\n\n  // grid related\n  availableColumnCount: PropTypes.number.isRequired,\n  columnWidth: PropTypes.number.isRequired,\n  onResizeStart: PropTypes.func.isRequired,\n  onResize: PropTypes.func.isRequired,\n  onResizeStop: PropTypes.func.isRequired,\n\n  // dnd\n  deleteComponent: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  setFullSizeChartId: PropTypes.func.isRequired,\n  postAddSliceFromDashboard: PropTypes.func,\n};\n\nconst defaultProps = {\n  directPathToChild: [],\n  directPathLastUpdated: 0,\n};\n\n/**\n * Selects the chart scope of the filter input that has focus.\n *\n * @returns {{chartId: number, scope: { scope: string[], immune: string[] }} | null }\n * the scope of the currently focused filter, if any\n */\nfunction selectFocusedFilterScope(dashboardState, dashboardFilters) {\n  if (!dashboardState.focusedFilterField) return null;\n  const { chartId, column } = dashboardState.focusedFilterField;\n  return {\n    chartId,\n    scope: dashboardFilters[chartId].scopes[column],\n  };\n}\n\n/**\n * Renders any styles necessary to highlight the chart's relationship to the focused filter.\n *\n * If there is no focused filter scope (i.e. most of the time), this will be just a pass-through.\n *\n * If the chart is outside the scope of the focused filter, dims the chart.\n *\n * If the chart is in the scope of the focused filter,\n * renders a highlight around the chart.\n *\n * If ChartHolder were a function component, this could be implemented as a hook instead.\n */\nconst FilterFocusHighlight = React.forwardRef(\n  ({ chartId, ...otherProps }, ref) => {\n    const theme = useTheme();\n\n    const nativeFilters = useSelector(state => state.nativeFilters);\n    const dashboardState = useSelector(state => state.dashboardState);\n    const dashboardFilters = useSelector(state => state.dashboardFilters);\n    const focusedFilterScope = selectFocusedFilterScope(\n      dashboardState,\n      dashboardFilters,\n    );\n    const focusedNativeFilterId = nativeFilters.focusedFilterId;\n    if (!(focusedFilterScope || focusedNativeFilterId)) {\n      return <div ref={ref} {...otherProps} />;\n    }\n\n    // we use local styles here instead of a conditionally-applied class,\n    // because adding any conditional class to this container\n    // causes performance issues in Chrome.\n\n    // default to the \"de-emphasized\" state\n    const unfocusedChartStyles = { opacity: 0.3, pointerEvents: 'none' };\n    const focusedChartStyles = {\n      borderColor: theme.colors.primary.light2,\n      opacity: 1,\n      boxShadow: `0px 0px ${theme.gridUnit * 2}px ${theme.colors.primary.base}`,\n      pointerEvents: 'auto',\n    };\n\n    if (focusedNativeFilterId) {\n      if (\n        nativeFilters.filters[focusedNativeFilterId]?.chartsInScope?.includes(\n          chartId,\n        )\n      ) {\n        return <div ref={ref} style={focusedChartStyles} {...otherProps} />;\n      }\n    } else if (\n      chartId === focusedFilterScope.chartId ||\n      getChartIdsInFilterBoxScope({\n        filterScope: focusedFilterScope.scope,\n      }).includes(chartId)\n    ) {\n      return <div ref={ref} style={focusedChartStyles} {...otherProps} />;\n    }\n\n    // inline styles are used here due to a performance issue when adding/changing a class, which causes a reflow\n    return <div ref={ref} style={unfocusedChartStyles} {...otherProps} />;\n  },\n);\n\nclass ChartHolder extends React.Component {\n  static renderInFocusCSS(columnName) {\n    return (\n      <style>\n        {`label[for=${columnName}] + .Select .Select__control {\n                    border-color: #00736a;\n                    transition: border-color 1s ease-in-out;\n           }`}\n      </style>\n    );\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { component, directPathToChild, directPathLastUpdated } = props;\n    const { label: columnName, chart: chartComponentId } =\n      getChartAndLabelComponentIdFromPath(directPathToChild);\n\n    if (\n      directPathLastUpdated !== state.directPathLastUpdated &&\n      component.id === chartComponentId\n    ) {\n      return {\n        outlinedComponentId: component.id,\n        outlinedColumnName: columnName,\n        directPathLastUpdated,\n      };\n    }\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFocused: false,\n      outlinedComponentId: null,\n      outlinedColumnName: null,\n      directPathLastUpdated: 0,\n      extraControls: {},\n    };\n\n    this.handleChangeFocus = this.handleChangeFocus.bind(this);\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n    this.handleUpdateSliceName = this.handleUpdateSliceName.bind(this);\n    this.handleToggleFullSize = this.handleToggleFullSize.bind(this);\n    this.handleExtraControl = this.handleExtraControl.bind(this);\n    this.handlePostTransformProps = this.handlePostTransformProps.bind(this);\n  }\n\n  componentDidMount() {\n    this.hideOutline({}, this.state);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.hideOutline(prevState, this.state);\n  }\n\n  hideOutline(prevState, state) {\n    const { outlinedComponentId: timerKey } = state;\n    const { outlinedComponentId: prevTimerKey } = prevState;\n\n    // because of timeout, there might be multiple charts showing outline\n    if (!!timerKey && !prevTimerKey) {\n      setTimeout(() => {\n        this.setState(() => ({\n          outlinedComponentId: null,\n          outlinedColumnName: null,\n        }));\n      }, 2000);\n    }\n  }\n\n  handleChangeFocus(nextFocus) {\n    this.setState(() => ({ isFocused: nextFocus }));\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, id, parentId } = this.props;\n    deleteComponent(id, parentId);\n  }\n\n  handleUpdateSliceName(nextName) {\n    const { component, updateComponents } = this.props;\n    updateComponents({\n      [component.id]: {\n        ...component,\n        meta: {\n          ...component.meta,\n          sliceNameOverride: nextName,\n        },\n      },\n    });\n  }\n\n  handleToggleFullSize() {\n    const { component, fullSizeChartId, setFullSizeChartId } = this.props;\n    const { chartId } = component.meta;\n    const isFullSize = fullSizeChartId === chartId;\n    setFullSizeChartId(isFullSize ? null : chartId);\n  }\n\n  handleExtraControl(name, value) {\n    this.setState(prevState => ({\n      extraControls: {\n        ...prevState.extraControls,\n        [name]: value,\n      },\n    }));\n  }\n\n  handlePostTransformProps(props) {\n    this.props.postAddSliceFromDashboard();\n    return props;\n  }\n\n  render() {\n    const { isFocused, extraControls } = this.state;\n    const {\n      component,\n      parentComponent,\n      index,\n      depth,\n      availableColumnCount,\n      columnWidth,\n      onResizeStart,\n      onResize,\n      onResizeStop,\n      handleComponentDrop,\n      editMode,\n      isComponentVisible,\n      dashboardId,\n      fullSizeChartId,\n      getComponentById = () => undefined,\n    } = this.props;\n\n    const { chartId } = component.meta;\n    const isFullSize = fullSizeChartId === chartId;\n\n    // inherit the size of parent columns\n    const columnParentWidth = getComponentById(\n      parentComponent.parents?.find(parent => parent.startsWith(COLUMN_TYPE)),\n    )?.meta?.width;\n    let widthMultiple = component.meta.width || GRID_MIN_COLUMN_COUNT;\n    if (parentComponent.type === COLUMN_TYPE) {\n      widthMultiple = parentComponent.meta.width || GRID_MIN_COLUMN_COUNT;\n    } else if (columnParentWidth && widthMultiple > columnParentWidth) {\n      widthMultiple = columnParentWidth;\n    }\n\n    let chartWidth = 0;\n    let chartHeight = 0;\n\n    if (isFullSize) {\n      chartWidth = window.innerWidth - CHART_MARGIN;\n      chartHeight = window.innerHeight - CHART_MARGIN;\n    } else {\n      chartWidth = Math.floor(\n        widthMultiple * columnWidth +\n          (widthMultiple - 1) * GRID_GUTTER_SIZE -\n          CHART_MARGIN,\n      );\n      chartHeight = Math.floor(\n        component.meta.height * GRID_BASE_UNIT - CHART_MARGIN,\n      );\n    }\n\n    return (\n      <DragDroppable\n        component={component}\n        parentComponent={parentComponent}\n        orientation={parentComponent.type === ROW_TYPE ? 'column' : 'row'}\n        index={index}\n        depth={depth}\n        onDrop={handleComponentDrop}\n        disableDragDrop={isFocused}\n        editMode={editMode}\n      >\n        {({ dropIndicatorProps, dragSourceRef }) => (\n          <ResizableContainer\n            id={component.id}\n            adjustableWidth={parentComponent.type === ROW_TYPE}\n            adjustableHeight\n            widthStep={columnWidth}\n            widthMultiple={widthMultiple}\n            heightStep={GRID_BASE_UNIT}\n            heightMultiple={component.meta.height}\n            minWidthMultiple={GRID_MIN_COLUMN_COUNT}\n            minHeightMultiple={GRID_MIN_ROW_UNITS}\n            maxWidthMultiple={availableColumnCount + widthMultiple}\n            onResizeStart={onResizeStart}\n            onResize={onResize}\n            onResizeStop={onResizeStop}\n            editMode={editMode}\n          >\n            <FilterFocusHighlight\n              chartId={chartId}\n              ref={dragSourceRef}\n              data-test=\"dashboard-component-chart-holder\"\n              className={cx(\n                'dashboard-component',\n                'dashboard-component-chart-holder',\n                // The following class is added to support custom dashboard styling via the CSS editor\n                `dashboard-chart-id-${chartId}`,\n                this.state.outlinedComponentId ? 'fade-in' : 'fade-out',\n                isFullSize && 'full-size',\n              )}\n            >\n              {!editMode && (\n                <AnchorLink\n                  id={component.id}\n                  scrollIntoView={\n                    this.state.outlinedComponentId === component.id\n                  }\n                />\n              )}\n              {!!this.state.outlinedComponentId &&\n                ChartHolder.renderInFocusCSS(this.state.outlinedColumnName)}\n              <Chart\n                componentId={component.id}\n                id={component.meta.chartId}\n                dashboardId={dashboardId}\n                width={chartWidth}\n                height={chartHeight}\n                sliceName={\n                  component.meta.sliceNameOverride ||\n                  component.meta.sliceName ||\n                  ''\n                }\n                updateSliceName={this.handleUpdateSliceName}\n                isComponentVisible={isComponentVisible}\n                handleToggleFullSize={this.handleToggleFullSize}\n                isFullSize={isFullSize}\n                setControlValue={this.handleExtraControl}\n                extraControls={extraControls}\n                postTransformProps={this.handlePostTransformProps}\n              />\n              {editMode && (\n                <HoverMenu position=\"top\">\n                  <div data-test=\"dashboard-delete-component-button\">\n                    <DeleteComponentButton\n                      onDelete={this.handleDeleteComponent}\n                    />\n                  </div>\n                </HoverMenu>\n              )}\n            </FilterFocusHighlight>\n\n            {dropIndicatorProps && <div {...dropIndicatorProps} />}\n          </ResizableContainer>\n        )}\n      </DragDroppable>\n    );\n  }\n}\n\nChartHolder.propTypes = propTypes;\nChartHolder.defaultProps = defaultProps;\n\nfunction mapStateToProps(state) {\n  return {\n    directPathToChild: state.dashboardState.directPathToChild,\n    directPathLastUpdated: state.dashboardState.directPathLastUpdated,\n  };\n}\nexport default connect(mapStateToProps)(ChartHolder);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { IN_COMPONENT_ELEMENT_TYPES } from './constants';\n\nexport default function getChartAndLabelComponentIdFromPath(directPathToChild) {\n  const result = {};\n\n  if (directPathToChild.length > 0) {\n    const currentPath = directPathToChild.slice();\n\n    while (currentPath.length) {\n      const componentId = currentPath.pop();\n      const componentType = componentId.split('-')[0];\n\n      result[componentType.toLowerCase()] = componentId;\n      if (!IN_COMPONENT_ELEMENT_TYPES.includes(componentType)) {\n        break;\n      }\n    }\n  }\n\n  return result;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport cx from 'classnames';\nimport { styled, useTheme } from '@superset-ui/core';\nimport { AntdDropdown } from 'src/components';\nimport { Menu } from 'src/components/Menu';\nimport Icons from 'src/components/Icons';\n\nexport interface OptionProps {\n  value: string;\n  label: string;\n  className?: string;\n}\n\nexport type OnChangeHandler = (key: React.Key) => void;\nexport type RenderElementHandler = (option: OptionProps) => JSX.Element;\n\nexport interface PopoverDropdownProps {\n  id: string;\n  options: OptionProps[];\n  onChange: OnChangeHandler;\n  value: string;\n  renderButton?: RenderElementHandler;\n  renderOption?: RenderElementHandler;\n}\n\ninterface HandleSelectProps {\n  key: React.Key;\n}\n\nconst MenuItem = styled(Menu.Item)`\n  &.ant-menu-item {\n    height: auto;\n    line-height: 1.4;\n\n    padding-top: ${({ theme }) => theme.gridUnit}px;\n    padding-bottom: ${({ theme }) => theme.gridUnit}px;\n\n    margin-top: 0;\n    margin-bottom: 0;\n\n    &:not(:last-child) {\n      margin-bottom: 0;\n    }\n\n    &:hover {\n      background: ${({ theme }) => theme.colors.grayscale.light3};\n    }\n\n    &.active {\n      font-weight: ${({ theme }) => theme.typography.weights.bold};\n      background: ${({ theme }) => theme.colors.grayscale.light2};\n    }\n  }\n\n  &.ant-menu-item-selected {\n    color: unset;\n  }\n`;\n\nconst PopoverDropdown = (props: PopoverDropdownProps) => {\n  const {\n    value,\n    options,\n    onChange,\n    renderButton = (option: OptionProps) => option.label,\n    renderOption = (option: OptionProps) => (\n      <div className={option.className}>{option.label}</div>\n    ),\n  } = props;\n\n  const theme = useTheme();\n  const selected = options.find(opt => opt.value === value);\n  return (\n    <AntdDropdown\n      trigger={['click']}\n      overlayStyle={{ zIndex: theme.zIndex.max }}\n      overlay={\n        <Menu onClick={({ key }: HandleSelectProps) => onChange(key)}>\n          {options.map(option => (\n            <MenuItem\n              id=\"menu-item\"\n              key={option.value}\n              className={cx('dropdown-item', {\n                active: option.value === value,\n              })}\n            >\n              {renderOption(option)}\n            </MenuItem>\n          ))}\n        </Menu>\n      }\n    >\n      <div role=\"button\" css={{ display: 'flex', alignItems: 'center' }}>\n        {selected && renderButton(selected)}\n        <Icons.CaretDown\n          iconColor={theme.colors.grayscale.base}\n          css={{ marginTop: theme.gridUnit * 0.5 }}\n        />\n      </div>\n    </AntdDropdown>\n  );\n};\n\nexport default PopoverDropdown;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\n\nimport PopoverDropdown, {\n  OnChangeHandler,\n} from 'src/components/PopoverDropdown';\n\ninterface MarkdownModeDropdownProps {\n  id: string;\n  value: string;\n  onChange: OnChangeHandler;\n}\n\nconst dropdownOptions = [\n  {\n    value: 'edit',\n    label: t('Edit'),\n  },\n  {\n    value: 'preview',\n    label: t('Preview'),\n  },\n];\n\nexport default class MarkdownModeDropdown extends React.PureComponent<MarkdownModeDropdownProps> {\n  render() {\n    const { id, value, onChange } = this.props;\n\n    return (\n      <PopoverDropdown\n        id={id}\n        options={dropdownOptions}\n        value={value}\n        onChange={onChange}\n      />\n    );\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport cx from 'classnames';\n\ntype ShouldFocusContainer = HTMLDivElement & {\n  contains: (event_target: EventTarget & HTMLElement) => Boolean;\n};\n\ninterface WithPopoverMenuProps {\n  children: React.ReactNode;\n  disableClick: Boolean;\n  menuItems: React.ReactNode[];\n  onChangeFocus: (focus: Boolean) => void;\n  isFocused: Boolean;\n  // Event argument is left as \"any\" because of the clash. In defaultProps it seems\n  // like it should be React.FocusEvent<>, however from handleClick() we can also\n  // derive that type is EventListenerOrEventListenerObject.\n  shouldFocus: (event: any, container: ShouldFocusContainer) => Boolean;\n  editMode: Boolean;\n  style: React.CSSProperties;\n}\n\ninterface WithPopoverMenuState {\n  isFocused: Boolean;\n}\n\nexport default class WithPopoverMenu extends React.PureComponent<\n  WithPopoverMenuProps,\n  WithPopoverMenuState\n> {\n  container: ShouldFocusContainer;\n\n  static defaultProps = {\n    children: null,\n    disableClick: false,\n    onChangeFocus: null,\n    menuItems: [],\n    isFocused: false,\n    shouldFocus: (event: any, container: ShouldFocusContainer) =>\n      container?.contains(event.target) ||\n      event.target.id === 'menu-item' ||\n      event.target.parentNode?.id === 'menu-item',\n    style: null,\n  };\n\n  constructor(props: WithPopoverMenuProps) {\n    super(props);\n    this.state = {\n      isFocused: props.isFocused!,\n    };\n    this.setRef = this.setRef.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: WithPopoverMenuProps) {\n    if (nextProps.editMode && nextProps.isFocused && !this.state.isFocused) {\n      document.addEventListener('click', this.handleClick);\n      document.addEventListener('drag', this.handleClick);\n      this.setState({ isFocused: true });\n    } else if (this.state.isFocused && !nextProps.editMode) {\n      document.removeEventListener('click', this.handleClick);\n      document.removeEventListener('drag', this.handleClick);\n      this.setState({ isFocused: false });\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleClick);\n    document.removeEventListener('drag', this.handleClick);\n  }\n\n  setRef(ref: ShouldFocusContainer) {\n    this.container = ref;\n  }\n\n  handleClick(event: any) {\n    if (!this.props.editMode) {\n      return;\n    }\n    const {\n      onChangeFocus,\n      shouldFocus: shouldFocusFunc,\n      disableClick,\n    } = this.props;\n\n    const shouldFocus = shouldFocusFunc(event, this.container);\n\n    if (!disableClick && shouldFocus && !this.state.isFocused) {\n      // if not focused, set focus and add a window event listener to capture outside clicks\n      // this enables us to not set a click listener for ever item on a dashboard\n      document.addEventListener('click', this.handleClick);\n      document.addEventListener('drag', this.handleClick);\n      this.setState(() => ({ isFocused: true }));\n      if (onChangeFocus) {\n        onChangeFocus(true);\n      }\n    } else if (!shouldFocus && this.state.isFocused) {\n      document.removeEventListener('click', this.handleClick);\n      document.removeEventListener('drag', this.handleClick);\n      this.setState(() => ({ isFocused: false }));\n      if (onChangeFocus) {\n        onChangeFocus(false);\n      }\n    }\n  }\n\n  render() {\n    const { children, menuItems, editMode, style } = this.props;\n    const { isFocused } = this.state;\n\n    return (\n      <div\n        ref={this.setRef}\n        onClick={this.handleClick}\n        role=\"none\"\n        className={cx(\n          'with-popover-menu',\n          editMode && isFocused && 'with-popover-menu--focused',\n        )}\n        style={style}\n      >\n        {children}\n        {editMode && isFocused && (menuItems?.length ?? 0) > 0 && (\n          <div className=\"popover-menu\">\n            {menuItems.map((node: React.ReactNode, i: Number) => (\n              <div className=\"menu-item\" key={`menu-item-${i}`}>\n                {node}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\n\nimport { t, SafeMarkdown } from '@superset-ui/core';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { MarkdownEditor } from 'src/components/AsyncAceEditor';\n\nimport DeleteComponentButton from 'src/dashboard/components/DeleteComponentButton';\nimport DragDroppable from 'src/dashboard/components/dnd/DragDroppable';\nimport HoverMenu from 'src/dashboard/components/menu/HoverMenu';\nimport ResizableContainer from 'src/dashboard/components/resizable/ResizableContainer';\nimport MarkdownModeDropdown from 'src/dashboard/components/menu/MarkdownModeDropdown';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport { ROW_TYPE, COLUMN_TYPE } from 'src/dashboard/util/componentTypes';\nimport {\n  GRID_MIN_COLUMN_COUNT,\n  GRID_MIN_ROW_UNITS,\n  GRID_BASE_UNIT,\n} from 'src/dashboard/util/constants';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  depth: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n\n  // from redux\n  logEvent: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  undoLength: PropTypes.number.isRequired,\n  redoLength: PropTypes.number.isRequired,\n\n  // grid related\n  availableColumnCount: PropTypes.number.isRequired,\n  columnWidth: PropTypes.number.isRequired,\n  onResizeStart: PropTypes.func.isRequired,\n  onResize: PropTypes.func.isRequired,\n  onResizeStop: PropTypes.func.isRequired,\n\n  // dnd\n  deleteComponent: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n\n  // HTML sanitization\n  htmlSanitization: PropTypes.bool,\n  htmlSchemaOverrides: PropTypes.object,\n};\n\nconst defaultProps = {};\n\nconst MARKDOWN_PLACE_HOLDER = `# Markdown\n## Markdown\n### Markdown\n\n<br />\n\nClick here to edit [markdown](https://bit.ly/1dQOfRK)`;\n\nconst MARKDOWN_ERROR_MESSAGE = t('This markdown component has an error.');\n\nclass Markdown extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFocused: false,\n      markdownSource: props.component.meta.code,\n      editor: null,\n      editorMode: 'preview',\n      undoLength: props.undoLength,\n      redoLength: props.redoLength,\n    };\n    this.renderStartTime = Logger.getTimestamp();\n\n    this.handleChangeFocus = this.handleChangeFocus.bind(this);\n    this.handleChangeEditorMode = this.handleChangeEditorMode.bind(this);\n    this.handleMarkdownChange = this.handleMarkdownChange.bind(this);\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n    this.handleResizeStart = this.handleResizeStart.bind(this);\n    this.setEditor = this.setEditor.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.logEvent(LOG_ACTIONS_RENDER_CHART, {\n      viz_type: 'markdown',\n      start_offset: this.renderStartTime,\n      ts: new Date().getTime(),\n      duration: Logger.getTimestamp() - this.renderStartTime,\n    });\n  }\n\n  static getDerivedStateFromProps(nextProps, state) {\n    const { hasError, editorMode, markdownSource, undoLength, redoLength } =\n      state;\n    const {\n      component: nextComponent,\n      undoLength: nextUndoLength,\n      redoLength: nextRedoLength,\n    } = nextProps;\n    // user click undo or redo ?\n    if (nextUndoLength !== undoLength || nextRedoLength !== redoLength) {\n      return {\n        ...state,\n        undoLength: nextUndoLength,\n        redoLength: nextRedoLength,\n        markdownSource: nextComponent.meta.code,\n        hasError: false,\n      };\n    }\n    if (\n      !hasError &&\n      editorMode === 'preview' &&\n      nextComponent.meta.code !== markdownSource\n    ) {\n      return {\n        ...state,\n        markdownSource: nextComponent.meta.code,\n      };\n    }\n\n    return state;\n  }\n\n  static getDerivedStateFromError() {\n    return {\n      hasError: true,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.state.editor &&\n      (prevProps.component.meta.width !== this.props.component.meta.width ||\n        prevProps.columnWidth !== this.props.columnWidth)\n    ) {\n      this.state.editor.resize(true);\n    }\n    // pre-load AceEditor when entering edit mode\n    if (this.props.editMode) {\n      MarkdownEditor.preload();\n    }\n  }\n\n  componentDidCatch() {\n    if (this.state.editor && this.state.editorMode === 'preview') {\n      this.props.addDangerToast(\n        t(\n          'This markdown component has an error. Please revert your recent changes.',\n        ),\n      );\n    }\n  }\n\n  setEditor(editor) {\n    editor.getSession().setUseWrapMode(true);\n    this.setState({\n      editor,\n    });\n  }\n\n  handleChangeFocus(nextFocus) {\n    const nextFocused = !!nextFocus;\n    const nextEditMode = nextFocused ? 'edit' : 'preview';\n    this.setState(() => ({ isFocused: nextFocused }));\n    this.handleChangeEditorMode(nextEditMode);\n  }\n\n  handleChangeEditorMode(mode) {\n    const nextState = {\n      ...this.state,\n      editorMode: mode,\n    };\n    if (mode === 'preview') {\n      this.updateMarkdownContent();\n      nextState.hasError = false;\n    }\n\n    this.setState(nextState);\n  }\n\n  updateMarkdownContent() {\n    const { updateComponents, component } = this.props;\n    if (component.meta.code !== this.state.markdownSource) {\n      updateComponents({\n        [component.id]: {\n          ...component,\n          meta: {\n            ...component.meta,\n            code: this.state.markdownSource,\n          },\n        },\n      });\n    }\n  }\n\n  handleMarkdownChange(nextValue) {\n    this.setState({\n      markdownSource: nextValue,\n    });\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, id, parentId } = this.props;\n    deleteComponent(id, parentId);\n  }\n\n  handleResizeStart(e) {\n    const { editorMode } = this.state;\n    const { editMode, onResizeStart } = this.props;\n    const isEditing = editorMode === 'edit';\n    onResizeStart(e);\n    if (editMode && isEditing) {\n      this.updateMarkdownContent();\n    }\n  }\n\n  renderEditMode() {\n    return (\n      <MarkdownEditor\n        onChange={this.handleMarkdownChange}\n        width=\"100%\"\n        height=\"100%\"\n        showGutter={false}\n        editorProps={{ $blockScrolling: true }}\n        value={\n          // this allows \"select all => delete\" to give an empty editor\n          typeof this.state.markdownSource === 'string'\n            ? this.state.markdownSource\n            : MARKDOWN_PLACE_HOLDER\n        }\n        readOnly={false}\n        onLoad={this.setEditor}\n        data-test=\"editor\"\n      />\n    );\n  }\n\n  renderPreviewMode() {\n    const { hasError } = this.state;\n\n    return (\n      <SafeMarkdown\n        source={\n          hasError\n            ? MARKDOWN_ERROR_MESSAGE\n            : this.state.markdownSource || MARKDOWN_PLACE_HOLDER\n        }\n        htmlSanitization={this.props.htmlSanitization}\n        htmlSchemaOverrides={this.props.htmlSchemaOverrides}\n      />\n    );\n  }\n\n  render() {\n    const { isFocused, editorMode } = this.state;\n\n    const {\n      component,\n      parentComponent,\n      index,\n      depth,\n      availableColumnCount,\n      columnWidth,\n      onResize,\n      onResizeStop,\n      handleComponentDrop,\n      editMode,\n    } = this.props;\n\n    // inherit the size of parent columns\n    const widthMultiple =\n      parentComponent.type === COLUMN_TYPE\n        ? parentComponent.meta.width || GRID_MIN_COLUMN_COUNT\n        : component.meta.width || GRID_MIN_COLUMN_COUNT;\n\n    const isEditing = editorMode === 'edit';\n\n    return (\n      <DragDroppable\n        component={component}\n        parentComponent={parentComponent}\n        orientation={parentComponent.type === ROW_TYPE ? 'column' : 'row'}\n        index={index}\n        depth={depth}\n        onDrop={handleComponentDrop}\n        disableDragDrop={isFocused}\n        editMode={editMode}\n      >\n        {({ dropIndicatorProps, dragSourceRef }) => (\n          <WithPopoverMenu\n            onChangeFocus={this.handleChangeFocus}\n            menuItems={[\n              <MarkdownModeDropdown\n                id={`${component.id}-mode`}\n                value={this.state.editorMode}\n                onChange={this.handleChangeEditorMode}\n              />,\n            ]}\n            editMode={editMode}\n          >\n            <div\n              data-test=\"dashboard-markdown-editor\"\n              className={cx(\n                'dashboard-markdown',\n                isEditing && 'dashboard-markdown--editing',\n              )}\n              id={component.id}\n            >\n              <ResizableContainer\n                id={component.id}\n                adjustableWidth={parentComponent.type === ROW_TYPE}\n                adjustableHeight\n                widthStep={columnWidth}\n                widthMultiple={widthMultiple}\n                heightStep={GRID_BASE_UNIT}\n                heightMultiple={component.meta.height}\n                minWidthMultiple={GRID_MIN_COLUMN_COUNT}\n                minHeightMultiple={GRID_MIN_ROW_UNITS}\n                maxWidthMultiple={availableColumnCount + widthMultiple}\n                onResizeStart={this.handleResizeStart}\n                onResize={onResize}\n                onResizeStop={onResizeStop}\n                editMode={isFocused ? false : editMode}\n              >\n                <div\n                  ref={dragSourceRef}\n                  className=\"dashboard-component dashboard-component-chart-holder\"\n                  data-test=\"dashboard-component-chart-holder\"\n                >\n                  {editMode && (\n                    <HoverMenu position=\"top\">\n                      <DeleteComponentButton\n                        onDelete={this.handleDeleteComponent}\n                      />\n                    </HoverMenu>\n                  )}\n                  {editMode && isEditing\n                    ? this.renderEditMode()\n                    : this.renderPreviewMode()}\n                </div>\n              </ResizableContainer>\n            </div>\n            {dropIndicatorProps && <div {...dropIndicatorProps} />}\n          </WithPopoverMenu>\n        )}\n      </DragDroppable>\n    );\n  }\n}\n\nMarkdown.propTypes = propTypes;\nMarkdown.defaultProps = defaultProps;\n\nfunction mapStateToProps(state) {\n  return {\n    undoLength: state.dashboardLayout.past.length,\n    redoLength: state.dashboardLayout.future.length,\n    htmlSanitization: state.common.conf.HTML_SANITIZATION,\n    htmlSchemaOverrides: state.common.conf.HTML_SANITIZATION_SCHEMA_EXTENSIONS,\n  };\n}\nexport default connect(mapStateToProps)(Markdown);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { LegacyRef } from 'react';\nimport { css, styled } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\ninterface DragHandleProps {\n  position: 'left' | 'top';\n  innerRef?: LegacyRef<HTMLDivElement> | undefined;\n}\n\nconst DragHandleContainer = styled.div<{ position: 'left' | 'top' }>`\n  ${({ theme, position }) => css`\n    height: ${theme.gridUnit * 5}px;\n    overflow: hidden;\n    cursor: move;\n    ${position === 'top' &&\n    css`\n      transform: rotate(90deg);\n    `}\n    & path {\n      fill: ${theme.colors.grayscale.base};\n    }\n  `}\n`;\nexport default function DragHandle({\n  position = 'left',\n  innerRef = null,\n}: DragHandleProps) {\n  return (\n    <DragHandleContainer ref={innerRef} position={position}>\n      <Icons.Drag />\n    </DragHandleContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport cx from 'classnames';\n\nimport backgroundStyleOptions from 'src/dashboard/util/backgroundStyleOptions';\nimport PopoverDropdown, {\n  OptionProps,\n  OnChangeHandler,\n} from 'src/components/PopoverDropdown';\n\ninterface BackgroundStyleDropdownProps {\n  id: string;\n  value: string;\n  onChange: OnChangeHandler;\n}\n\nfunction renderButton(option: OptionProps) {\n  return (\n    <div className={cx('background-style-option', option.className)}>\n      {`${option.label} background`}\n    </div>\n  );\n}\n\nfunction renderOption(option: OptionProps) {\n  return (\n    <div className={cx('background-style-option', option.className)}>\n      {option.label}\n    </div>\n  );\n}\n\nexport default class BackgroundStyleDropdown extends React.PureComponent<BackgroundStyleDropdownProps> {\n  render() {\n    const { id, value, onChange } = this.props;\n    return (\n      <PopoverDropdown\n        id={id}\n        options={backgroundStyleOptions}\n        value={value}\n        onChange={onChange}\n        renderButton={renderButton}\n        renderOption={renderOption}\n      />\n    );\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Icons from 'src/components/Icons';\nimport DashboardComponent from 'src/dashboard/containers/DashboardComponent';\nimport DeleteComponentButton from 'src/dashboard/components/DeleteComponentButton';\nimport DragDroppable from 'src/dashboard/components/dnd/DragDroppable';\nimport DragHandle from 'src/dashboard/components/dnd/DragHandle';\nimport HoverMenu from 'src/dashboard/components/menu/HoverMenu';\nimport IconButton from 'src/dashboard/components/IconButton';\nimport ResizableContainer from 'src/dashboard/components/resizable/ResizableContainer';\nimport BackgroundStyleDropdown from 'src/dashboard/components/menu/BackgroundStyleDropdown';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport backgroundStyleOptions from 'src/dashboard/util/backgroundStyleOptions';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport { BACKGROUND_TRANSPARENT } from 'src/dashboard/util/constants';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  depth: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n\n  // grid related\n  availableColumnCount: PropTypes.number.isRequired,\n  columnWidth: PropTypes.number.isRequired,\n  minColumnWidth: PropTypes.number.isRequired,\n  onResizeStart: PropTypes.func.isRequired,\n  onResize: PropTypes.func.isRequired,\n  onResizeStop: PropTypes.func.isRequired,\n\n  // dnd\n  deleteComponent: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {};\n\nclass Column extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFocused: false,\n    };\n    this.handleChangeBackground = this.handleUpdateMeta.bind(\n      this,\n      'background',\n    );\n    this.handleChangeFocus = this.handleChangeFocus.bind(this);\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, id, parentId } = this.props;\n    deleteComponent(id, parentId);\n  }\n\n  handleChangeFocus(nextFocus) {\n    this.setState(() => ({ isFocused: Boolean(nextFocus) }));\n  }\n\n  handleUpdateMeta(metaKey, nextValue) {\n    const { updateComponents, component } = this.props;\n    if (nextValue && component.meta[metaKey] !== nextValue) {\n      updateComponents({\n        [component.id]: {\n          ...component,\n          meta: {\n            ...component.meta,\n            [metaKey]: nextValue,\n          },\n        },\n      });\n    }\n  }\n\n  render() {\n    const {\n      component: columnComponent,\n      parentComponent,\n      index,\n      availableColumnCount,\n      columnWidth,\n      minColumnWidth,\n      depth,\n      onResizeStart,\n      onResize,\n      onResizeStop,\n      handleComponentDrop,\n      editMode,\n      onChangeTab,\n      isComponentVisible,\n    } = this.props;\n\n    const columnItems = columnComponent.children || [];\n    const backgroundStyle = backgroundStyleOptions.find(\n      opt =>\n        opt.value ===\n        (columnComponent.meta.background || BACKGROUND_TRANSPARENT),\n    );\n\n    return (\n      <DragDroppable\n        component={columnComponent}\n        parentComponent={parentComponent}\n        orientation=\"column\"\n        index={index}\n        depth={depth}\n        onDrop={handleComponentDrop}\n        editMode={editMode}\n      >\n        {({ dropIndicatorProps, dragSourceRef }) => (\n          <ResizableContainer\n            id={columnComponent.id}\n            adjustableWidth\n            adjustableHeight={false}\n            widthStep={columnWidth}\n            widthMultiple={columnComponent.meta.width}\n            minWidthMultiple={minColumnWidth}\n            maxWidthMultiple={\n              availableColumnCount + (columnComponent.meta.width || 0)\n            }\n            onResizeStart={onResizeStart}\n            onResize={onResize}\n            onResizeStop={onResizeStop}\n            editMode={editMode}\n          >\n            <WithPopoverMenu\n              isFocused={this.state.isFocused}\n              onChangeFocus={this.handleChangeFocus}\n              disableClick\n              menuItems={[\n                <BackgroundStyleDropdown\n                  id={`${columnComponent.id}-background`}\n                  value={columnComponent.meta.background}\n                  onChange={this.handleChangeBackground}\n                />,\n              ]}\n              editMode={editMode}\n            >\n              {editMode && (\n                <HoverMenu innerRef={dragSourceRef} position=\"top\">\n                  <DragHandle position=\"top\" />\n                  <DeleteComponentButton\n                    onDelete={this.handleDeleteComponent}\n                  />\n                  <IconButton\n                    onClick={this.handleChangeFocus}\n                    icon={<Icons.Cog iconSize=\"xl\" />}\n                  />\n                </HoverMenu>\n              )}\n              <div\n                className={cx(\n                  'grid-column',\n                  columnItems.length === 0 && 'grid-column--empty',\n                  backgroundStyle.className,\n                )}\n              >\n                {columnItems.map((componentId, itemIndex) => (\n                  <DashboardComponent\n                    key={componentId}\n                    id={componentId}\n                    parentId={columnComponent.id}\n                    depth={depth + 1}\n                    index={itemIndex}\n                    availableColumnCount={columnComponent.meta.width}\n                    columnWidth={columnWidth}\n                    onResizeStart={onResizeStart}\n                    onResize={onResize}\n                    onResizeStop={onResizeStop}\n                    isComponentVisible={isComponentVisible}\n                    onChangeTab={onChangeTab}\n                  />\n                ))}\n\n                {dropIndicatorProps && <div {...dropIndicatorProps} />}\n              </div>\n            </WithPopoverMenu>\n          </ResizableContainer>\n        )}\n      </DragDroppable>\n    );\n  }\n}\n\nColumn.propTypes = propTypes;\nColumn.defaultProps = defaultProps;\n\nexport default Column;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport DragDroppable from '../dnd/DragDroppable';\nimport HoverMenu from '../menu/HoverMenu';\nimport DeleteComponentButton from '../DeleteComponentButton';\nimport { componentShape } from '../../util/propShapes';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  depth: PropTypes.number.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  deleteComponent: PropTypes.func.isRequired,\n};\n\nclass Divider extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, id, parentId } = this.props;\n    deleteComponent(id, parentId);\n  }\n\n  render() {\n    const {\n      component,\n      depth,\n      parentComponent,\n      index,\n      handleComponentDrop,\n      editMode,\n    } = this.props;\n\n    return (\n      <DragDroppable\n        component={component}\n        parentComponent={parentComponent}\n        orientation=\"row\"\n        index={index}\n        depth={depth}\n        onDrop={handleComponentDrop}\n        editMode={editMode}\n      >\n        {({ dropIndicatorProps, dragSourceRef }) => (\n          <div ref={dragSourceRef}>\n            {editMode && (\n              <HoverMenu position=\"left\">\n                <DeleteComponentButton onDelete={this.handleDeleteComponent} />\n              </HoverMenu>\n            )}\n\n            <div className=\"dashboard-component dashboard-component-divider\" />\n\n            {dropIndicatorProps && <div {...dropIndicatorProps} />}\n          </div>\n        )}\n      </DragDroppable>\n    );\n  }\n}\n\nDivider.propTypes = propTypes;\n\nexport default Divider;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport PopoverDropdown from 'src/components/PopoverDropdown';\nimport EditableTitle from 'src/components/EditableTitle';\nimport DragDroppable from 'src/dashboard/components/dnd/DragDroppable';\nimport DragHandle from 'src/dashboard/components/dnd/DragHandle';\nimport AnchorLink from 'src/dashboard/components/AnchorLink';\nimport HoverMenu from 'src/dashboard/components/menu/HoverMenu';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport BackgroundStyleDropdown from 'src/dashboard/components/menu/BackgroundStyleDropdown';\nimport DeleteComponentButton from 'src/dashboard/components/DeleteComponentButton';\nimport headerStyleOptions from 'src/dashboard/util/headerStyleOptions';\nimport backgroundStyleOptions from 'src/dashboard/util/backgroundStyleOptions';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport {\n  SMALL_HEADER,\n  BACKGROUND_TRANSPARENT,\n} from 'src/dashboard/util/constants';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  dashboardId: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  depth: PropTypes.number.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n\n  // redux\n  handleComponentDrop: PropTypes.func.isRequired,\n  deleteComponent: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {};\n\nclass Header extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFocused: false,\n    };\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n    this.handleChangeFocus = this.handleChangeFocus.bind(this);\n    this.handleUpdateMeta = this.handleUpdateMeta.bind(this);\n    this.handleChangeSize = this.handleUpdateMeta.bind(this, 'headerSize');\n    this.handleChangeBackground = this.handleUpdateMeta.bind(\n      this,\n      'background',\n    );\n    this.handleChangeText = this.handleUpdateMeta.bind(this, 'text');\n  }\n\n  handleChangeFocus(nextFocus) {\n    this.setState(() => ({ isFocused: nextFocus }));\n  }\n\n  handleUpdateMeta(metaKey, nextValue) {\n    const { updateComponents, component } = this.props;\n    if (nextValue && component.meta[metaKey] !== nextValue) {\n      updateComponents({\n        [component.id]: {\n          ...component,\n          meta: {\n            ...component.meta,\n            [metaKey]: nextValue,\n          },\n        },\n      });\n    }\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, id, parentId } = this.props;\n    deleteComponent(id, parentId);\n  }\n\n  render() {\n    const { isFocused } = this.state;\n\n    const {\n      dashboardId,\n      component,\n      depth,\n      parentComponent,\n      index,\n      handleComponentDrop,\n      editMode,\n    } = this.props;\n\n    const headerStyle = headerStyleOptions.find(\n      opt => opt.value === (component.meta.headerSize || SMALL_HEADER),\n    );\n\n    const rowStyle = backgroundStyleOptions.find(\n      opt =>\n        opt.value === (component.meta.background || BACKGROUND_TRANSPARENT),\n    );\n\n    return (\n      <DragDroppable\n        component={component}\n        parentComponent={parentComponent}\n        orientation=\"row\"\n        index={index}\n        depth={depth}\n        onDrop={handleComponentDrop}\n        disableDragDrop={isFocused}\n        editMode={editMode}\n      >\n        {({ dropIndicatorProps, dragSourceRef }) => (\n          <div ref={dragSourceRef}>\n            {editMode &&\n              depth <= 2 && ( // drag handle looks bad when nested\n                <HoverMenu position=\"left\">\n                  <DragHandle position=\"left\" />\n                </HoverMenu>\n              )}\n            <WithPopoverMenu\n              onChangeFocus={this.handleChangeFocus}\n              menuItems={[\n                <PopoverDropdown\n                  id={`${component.id}-header-style`}\n                  options={headerStyleOptions}\n                  value={component.meta.headerSize}\n                  onChange={this.handleChangeSize}\n                />,\n                <BackgroundStyleDropdown\n                  id={`${component.id}-background`}\n                  value={component.meta.background}\n                  onChange={this.handleChangeBackground}\n                />,\n              ]}\n              editMode={editMode}\n            >\n              <div\n                className={cx(\n                  'dashboard-component',\n                  'dashboard-component-header',\n                  headerStyle.className,\n                  rowStyle.className,\n                )}\n              >\n                {editMode && (\n                  <HoverMenu position=\"top\">\n                    <DeleteComponentButton\n                      onDelete={this.handleDeleteComponent}\n                    />\n                  </HoverMenu>\n                )}\n                <EditableTitle\n                  title={component.meta.text}\n                  canEdit={editMode}\n                  onSaveTitle={this.handleChangeText}\n                  showTooltip={false}\n                />\n                {!editMode && (\n                  <AnchorLink id={component.id} dashboardId={dashboardId} />\n                )}\n              </div>\n            </WithPopoverMenu>\n\n            {dropIndicatorProps && <div {...dropIndicatorProps} />}\n          </div>\n        )}\n      </DragDroppable>\n    );\n  }\n}\n\nHeader.propTypes = propTypes;\nHeader.defaultProps = defaultProps;\n\nexport default Header;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport DragDroppable from 'src/dashboard/components/dnd/DragDroppable';\nimport DragHandle from 'src/dashboard/components/dnd/DragHandle';\nimport DashboardComponent from 'src/dashboard/containers/DashboardComponent';\nimport DeleteComponentButton from 'src/dashboard/components/DeleteComponentButton';\nimport HoverMenu from 'src/dashboard/components/menu/HoverMenu';\nimport Icons from 'src/components/Icons';\nimport IconButton from 'src/dashboard/components/IconButton';\nimport BackgroundStyleDropdown from 'src/dashboard/components/menu/BackgroundStyleDropdown';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport backgroundStyleOptions from 'src/dashboard/util/backgroundStyleOptions';\nimport { BACKGROUND_TRANSPARENT } from 'src/dashboard/util/constants';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  depth: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n\n  // grid related\n  availableColumnCount: PropTypes.number.isRequired,\n  columnWidth: PropTypes.number.isRequired,\n  occupiedColumnCount: PropTypes.number.isRequired,\n  onResizeStart: PropTypes.func.isRequired,\n  onResize: PropTypes.func.isRequired,\n  onResizeStop: PropTypes.func.isRequired,\n\n  // dnd\n  handleComponentDrop: PropTypes.func.isRequired,\n  deleteComponent: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n};\n\nclass Row extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFocused: false,\n    };\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n    this.handleUpdateMeta = this.handleUpdateMeta.bind(this);\n    this.handleChangeBackground = this.handleUpdateMeta.bind(\n      this,\n      'background',\n    );\n    this.handleChangeFocus = this.handleChangeFocus.bind(this);\n  }\n\n  handleChangeFocus(nextFocus) {\n    this.setState(() => ({ isFocused: Boolean(nextFocus) }));\n  }\n\n  handleUpdateMeta(metaKey, nextValue) {\n    const { updateComponents, component } = this.props;\n    if (nextValue && component.meta[metaKey] !== nextValue) {\n      updateComponents({\n        [component.id]: {\n          ...component,\n          meta: {\n            ...component.meta,\n            [metaKey]: nextValue,\n          },\n        },\n      });\n    }\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, component, parentId } = this.props;\n    deleteComponent(component.id, parentId);\n  }\n\n  render() {\n    const {\n      component: rowComponent,\n      parentComponent,\n      index,\n      availableColumnCount,\n      columnWidth,\n      occupiedColumnCount,\n      depth,\n      onResizeStart,\n      onResize,\n      onResizeStop,\n      handleComponentDrop,\n      editMode,\n      onChangeTab,\n      isComponentVisible,\n    } = this.props;\n\n    const rowItems = rowComponent.children || [];\n\n    const backgroundStyle = backgroundStyleOptions.find(\n      opt =>\n        opt.value === (rowComponent.meta.background || BACKGROUND_TRANSPARENT),\n    );\n\n    return (\n      <DragDroppable\n        component={rowComponent}\n        parentComponent={parentComponent}\n        orientation=\"row\"\n        index={index}\n        depth={depth}\n        onDrop={handleComponentDrop}\n        editMode={editMode}\n      >\n        {({ dropIndicatorProps, dragSourceRef }) => (\n          <WithPopoverMenu\n            isFocused={this.state.isFocused}\n            onChangeFocus={this.handleChangeFocus}\n            disableClick\n            menuItems={[\n              <BackgroundStyleDropdown\n                id={`${rowComponent.id}-background`}\n                value={backgroundStyle.value}\n                onChange={this.handleChangeBackground}\n              />,\n            ]}\n            editMode={editMode}\n          >\n            {editMode && (\n              <HoverMenu innerRef={dragSourceRef} position=\"left\">\n                <DragHandle position=\"left\" />\n                <DeleteComponentButton onDelete={this.handleDeleteComponent} />\n                <IconButton\n                  onClick={this.handleChangeFocus}\n                  icon={<Icons.Cog iconSize=\"xl\" />}\n                />\n              </HoverMenu>\n            )}\n            <div\n              className={cx(\n                'grid-row',\n                rowItems.length === 0 && 'grid-row--empty',\n                backgroundStyle.className,\n              )}\n              data-test={`grid-row-${backgroundStyle.className}`}\n            >\n              {rowItems.map((componentId, itemIndex) => (\n                <DashboardComponent\n                  key={componentId}\n                  id={componentId}\n                  parentId={rowComponent.id}\n                  depth={depth + 1}\n                  index={itemIndex}\n                  availableColumnCount={\n                    availableColumnCount - occupiedColumnCount\n                  }\n                  columnWidth={columnWidth}\n                  onResizeStart={onResizeStart}\n                  onResize={onResize}\n                  onResizeStop={onResizeStop}\n                  isComponentVisible={isComponentVisible}\n                  onChangeTab={onChangeTab}\n                />\n              ))}\n\n              {dropIndicatorProps && <div {...dropIndicatorProps} />}\n            </div>\n          </WithPopoverMenu>\n        )}\n      </DragDroppable>\n    );\n  }\n}\n\nRow.propTypes = propTypes;\n\nexport default Row;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { styled, t } from '@superset-ui/core';\n\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport EditableTitle from 'src/components/EditableTitle';\nimport { setEditMode } from 'src/dashboard/actions/dashboardState';\nimport DashboardComponent from 'src/dashboard/containers/DashboardComponent';\nimport AnchorLink from 'src/dashboard/components/AnchorLink';\nimport DragDroppable from 'src/dashboard/components/dnd/DragDroppable';\nimport { componentShape } from 'src/dashboard/util/propShapes';\n\nexport const RENDER_TAB = 'RENDER_TAB';\nexport const RENDER_TAB_CONTENT = 'RENDER_TAB_CONTENT';\n\nconst propTypes = {\n  dashboardId: PropTypes.number.isRequired,\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  depth: PropTypes.number.isRequired,\n  renderType: PropTypes.oneOf([RENDER_TAB, RENDER_TAB_CONTENT]).isRequired,\n  onDropOnTab: PropTypes.func,\n  editMode: PropTypes.bool.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n\n  // grid related\n  availableColumnCount: PropTypes.number,\n  columnWidth: PropTypes.number,\n  onResizeStart: PropTypes.func,\n  onResize: PropTypes.func,\n  onResizeStop: PropTypes.func,\n\n  // redux\n  handleComponentDrop: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n  setDirectPathToChild: PropTypes.func.isRequired,\n  setEditMode: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  availableColumnCount: 0,\n  columnWidth: 0,\n  onDropOnTab() {},\n  onResizeStart() {},\n  onResize() {},\n  onResizeStop() {},\n};\n\nconst TabTitleContainer = styled.div`\n  ${({ isHighlighted, theme: { gridUnit, colors } }) => `\n    padding: ${gridUnit}px ${gridUnit * 2}px;\n    margin: ${-gridUnit}px ${gridUnit * -2}px;\n    transition: box-shadow 0.2s ease-in-out;\n    ${\n      isHighlighted && `box-shadow: 0 0 ${gridUnit}px ${colors.primary.light1};`\n    }\n  `}\n`;\n\nconst renderDraggableContentBottom = dropProps =>\n  dropProps.dropIndicatorProps && (\n    <div className=\"drop-indicator drop-indicator--bottom\" />\n  );\n\nconst renderDraggableContentTop = dropProps =>\n  dropProps.dropIndicatorProps && (\n    <div className=\"drop-indicator drop-indicator--top\" />\n  );\n\nclass Tab extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleChangeText = this.handleChangeText.bind(this);\n    this.handleDrop = this.handleDrop.bind(this);\n    this.handleTopDropTargetDrop = this.handleTopDropTargetDrop.bind(this);\n    this.handleChangeTab = this.handleChangeTab.bind(this);\n  }\n\n  handleChangeTab({ pathToTabIndex }) {\n    this.props.setDirectPathToChild(pathToTabIndex);\n  }\n\n  handleChangeText(nextTabText) {\n    const { updateComponents, component } = this.props;\n    if (nextTabText && nextTabText !== component.meta.text) {\n      updateComponents({\n        [component.id]: {\n          ...component,\n          meta: {\n            ...component.meta,\n            text: nextTabText,\n          },\n        },\n      });\n    }\n  }\n\n  handleDrop(dropResult) {\n    this.props.handleComponentDrop(dropResult);\n    this.props.onDropOnTab(dropResult);\n  }\n\n  handleTopDropTargetDrop(dropResult) {\n    if (dropResult) {\n      this.props.handleComponentDrop({\n        ...dropResult,\n        destination: {\n          ...dropResult.destination,\n          // force appending as the first child if top drop target\n          index: 0,\n        },\n      });\n    }\n  }\n\n  renderTabContent() {\n    const {\n      component: tabComponent,\n      parentComponent: tabParentComponent,\n      depth,\n      availableColumnCount,\n      columnWidth,\n      onResizeStart,\n      onResize,\n      onResizeStop,\n      editMode,\n      isComponentVisible,\n      canEdit,\n      setEditMode,\n      dashboardId,\n    } = this.props;\n\n    const shouldDisplayEmptyState = tabComponent.children.length === 0;\n    return (\n      <div className=\"dashboard-component-tabs-content\">\n        {/* Make top of tab droppable */}\n        {editMode && (\n          <DragDroppable\n            component={tabComponent}\n            parentComponent={tabParentComponent}\n            orientation=\"column\"\n            index={0}\n            depth={depth}\n            onDrop={this.handleTopDropTargetDrop}\n            editMode\n            className=\"empty-droptarget\"\n          >\n            {renderDraggableContentTop}\n          </DragDroppable>\n        )}\n        {shouldDisplayEmptyState && (\n          <EmptyStateMedium\n            title={\n              editMode\n                ? t('Drag and drop components to this tab')\n                : t('There are no components added to this tab')\n            }\n            description={\n              canEdit &&\n              (editMode ? (\n                <span>\n                  {t('You can')}{' '}\n                  <a\n                    href={`/chart/add?dashboard_id=${dashboardId}`}\n                    rel=\"noopener noreferrer\"\n                    target=\"_blank\"\n                  >\n                    {t('create a new chart')}\n                  </a>{' '}\n                  {t('or use existing ones from the panel on the right')}\n                </span>\n              ) : (\n                <span>\n                  {t('You can add the components in the')}{' '}\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    onClick={() => setEditMode(true)}\n                  >\n                    {t('edit mode')}\n                  </span>\n                </span>\n              ))\n            }\n            image=\"chart.svg\"\n          />\n        )}\n        {tabComponent.children.map((componentId, componentIndex) => (\n          <DashboardComponent\n            key={componentId}\n            id={componentId}\n            parentId={tabComponent.id}\n            depth={depth} // see isValidChild.js for why tabs don't increment child depth\n            index={componentIndex}\n            onDrop={this.handleDrop}\n            availableColumnCount={availableColumnCount}\n            columnWidth={columnWidth}\n            onResizeStart={onResizeStart}\n            onResize={onResize}\n            onResizeStop={onResizeStop}\n            isComponentVisible={isComponentVisible}\n            onChangeTab={this.handleChangeTab}\n          />\n        ))}\n        {/* Make bottom of tab droppable */}\n        {editMode && (\n          <DragDroppable\n            component={tabComponent}\n            parentComponent={tabParentComponent}\n            orientation=\"column\"\n            index={tabComponent.children.length}\n            depth={depth}\n            onDrop={this.handleDrop}\n            editMode\n            className=\"empty-droptarget\"\n          >\n            {renderDraggableContentBottom}\n          </DragDroppable>\n        )}\n      </div>\n    );\n  }\n\n  renderTab() {\n    const {\n      component,\n      parentComponent,\n      index,\n      depth,\n      editMode,\n      isFocused,\n      isHighlighted,\n    } = this.props;\n\n    return (\n      <DragDroppable\n        component={component}\n        parentComponent={parentComponent}\n        orientation=\"column\"\n        index={index}\n        depth={depth}\n        onDrop={this.handleDrop}\n        editMode={editMode}\n      >\n        {({ dropIndicatorProps, dragSourceRef }) => (\n          <TabTitleContainer\n            isHighlighted={isHighlighted}\n            className=\"dragdroppable-tab\"\n            ref={dragSourceRef}\n          >\n            <EditableTitle\n              title={component.meta.text}\n              defaultTitle={component.meta.defaultText}\n              placeholder={component.meta.placeholder}\n              canEdit={editMode && isFocused}\n              onSaveTitle={this.handleChangeText}\n              showTooltip={false}\n              editing={editMode && isFocused}\n            />\n            {!editMode && (\n              <AnchorLink\n                id={component.id}\n                dashboardId={this.props.dashboardId}\n                placement={index >= 5 ? 'left' : 'right'}\n              />\n            )}\n\n            {dropIndicatorProps && <div {...dropIndicatorProps} />}\n          </TabTitleContainer>\n        )}\n      </DragDroppable>\n    );\n  }\n\n  render() {\n    const { renderType } = this.props;\n    return renderType === RENDER_TAB\n      ? this.renderTab()\n      : this.renderTabContent();\n  }\n}\n\nTab.propTypes = propTypes;\nTab.defaultProps = defaultProps;\n\nfunction mapStateToProps(state) {\n  return {\n    canEdit: state.dashboardInfo.dash_edit_perm,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      setEditMode,\n    },\n    dispatch,\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tab);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport default function findTabIndexByComponentId({\n  currentComponent,\n  directPathToChild = [],\n}) {\n  if (\n    !currentComponent ||\n    directPathToChild.length === 0 ||\n    directPathToChild.indexOf(currentComponent.id) === -1\n  ) {\n    return -1;\n  }\n\n  const currentComponentIdx = directPathToChild.findIndex(\n    id => id === currentComponent.id,\n  );\n  const nextParentId = directPathToChild[currentComponentIdx + 1];\n  if (currentComponent.children.indexOf(nextParentId) >= 0) {\n    return currentComponent.children.findIndex(\n      childId => childId === nextParentId,\n    );\n  }\n  return -1;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport default function getDirectPathToTabIndex(tabsComponent, tabIndex) {\n  const directPathToFilter = (tabsComponent.parents || []).slice();\n  directPathToFilter.push(tabsComponent.id);\n  directPathToFilter.push(tabsComponent.children[tabIndex]);\n\n  return directPathToFilter;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { IN_COMPONENT_ELEMENT_TYPES } from './constants';\n\nexport default function getLeafComponentIdFromPath(directPathToChild = []) {\n  if (directPathToChild.length > 0) {\n    const currentPath = directPathToChild.slice();\n\n    while (currentPath.length) {\n      const componentId = currentPath.pop();\n      const componentType = componentId && componentId.split('-')[0];\n\n      if (!IN_COMPONENT_ELEMENT_TYPES.includes(componentType)) {\n        return componentId;\n      }\n    }\n  }\n\n  return null;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { styled, t } from '@superset-ui/core';\nimport { connect } from 'react-redux';\nimport { LineEditableTabs } from 'src/components/Tabs';\nimport { LOG_ACTIONS_SELECT_DASHBOARD_TAB } from 'src/logger/LogUtils';\nimport { AntdModal } from 'src/components';\nimport { FILTER_BOX_MIGRATION_STATES } from 'src/explore/constants';\nimport DragDroppable from '../dnd/DragDroppable';\nimport DragHandle from '../dnd/DragHandle';\nimport DashboardComponent from '../../containers/DashboardComponent';\nimport DeleteComponentButton from '../DeleteComponentButton';\nimport HoverMenu from '../menu/HoverMenu';\nimport findTabIndexByComponentId from '../../util/findTabIndexByComponentId';\nimport getDirectPathToTabIndex from '../../util/getDirectPathToTabIndex';\nimport getLeafComponentIdFromPath from '../../util/getLeafComponentIdFromPath';\nimport { componentShape } from '../../util/propShapes';\nimport { NEW_TAB_ID, DASHBOARD_ROOT_ID } from '../../util/constants';\nimport { RENDER_TAB, RENDER_TAB_CONTENT } from './Tab';\nimport { TABS_TYPE, TAB_TYPE } from '../../util/componentTypes';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  parentId: PropTypes.string.isRequired,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  index: PropTypes.number.isRequired,\n  depth: PropTypes.number.isRequired,\n  renderTabContent: PropTypes.bool, // whether to render tabs + content or just tabs\n  editMode: PropTypes.bool.isRequired,\n  renderHoverMenu: PropTypes.bool,\n  directPathToChild: PropTypes.arrayOf(PropTypes.string),\n  filterboxMigrationState: FILTER_BOX_MIGRATION_STATES,\n\n  // actions (from DashboardComponent.jsx)\n  logEvent: PropTypes.func.isRequired,\n  setActiveTabs: PropTypes.func,\n\n  // grid related\n  availableColumnCount: PropTypes.number,\n  columnWidth: PropTypes.number,\n  onResizeStart: PropTypes.func,\n  onResize: PropTypes.func,\n  onResizeStop: PropTypes.func,\n\n  // dnd\n  createComponent: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  onChangeTab: PropTypes.func.isRequired,\n  deleteComponent: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  renderTabContent: true,\n  renderHoverMenu: true,\n  availableColumnCount: 0,\n  columnWidth: 0,\n  directPathToChild: [],\n  filterboxMigrationState: FILTER_BOX_MIGRATION_STATES.NOOP,\n  setActiveTabs() {},\n  onResizeStart() {},\n  onResize() {},\n  onResizeStop() {},\n};\n\nconst StyledTabsContainer = styled.div`\n  width: 100%;\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\n\n  .dashboard-component-tabs-content {\n    min-height: ${({ theme }) => theme.gridUnit * 12}px;\n    margin-top: ${({ theme }) => theme.gridUnit / 4}px;\n    position: relative;\n  }\n\n  .ant-tabs {\n    overflow: visible;\n\n    .ant-tabs-nav-wrap {\n      min-height: ${({ theme }) => theme.gridUnit * 12.5}px;\n    }\n\n    .ant-tabs-content-holder {\n      overflow: visible;\n    }\n  }\n\n  div .ant-tabs-tab-btn {\n    text-transform: none;\n  }\n`;\n\nexport class Tabs extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    const tabIndex = Math.max(\n      0,\n      findTabIndexByComponentId({\n        currentComponent: props.component,\n        directPathToChild: props.directPathToChild,\n      }),\n    );\n    const { children: tabIds } = props.component;\n    const activeKey = tabIds[tabIndex];\n\n    this.state = {\n      tabIndex,\n      activeKey,\n    };\n    this.handleClickTab = this.handleClickTab.bind(this);\n    this.handleDeleteComponent = this.handleDeleteComponent.bind(this);\n    this.handleDeleteTab = this.handleDeleteTab.bind(this);\n    this.handleDropOnTab = this.handleDropOnTab.bind(this);\n    this.handleDrop = this.handleDrop.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.setActiveTabs(this.state.activeKey);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.activeKey !== this.state.activeKey ||\n      prevProps.filterboxMigrationState !== this.props.filterboxMigrationState\n    ) {\n      this.props.setActiveTabs(this.state.activeKey, prevState.activeKey);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const maxIndex = Math.max(0, nextProps.component.children.length - 1);\n    const currTabsIds = this.props.component.children;\n    const nextTabsIds = nextProps.component.children;\n\n    if (this.state.tabIndex > maxIndex) {\n      this.setState(() => ({ tabIndex: maxIndex }));\n    }\n\n    if (nextProps.isComponentVisible) {\n      const nextFocusComponent = getLeafComponentIdFromPath(\n        nextProps.directPathToChild,\n      );\n      const currentFocusComponent = getLeafComponentIdFromPath(\n        this.props.directPathToChild,\n      );\n\n      // If the currently selected component is different than the new one,\n      // or the tab length/order changed, calculate the new tab index and\n      // replace it if it's different than the current one\n      if (\n        nextFocusComponent !== currentFocusComponent ||\n        (nextFocusComponent === currentFocusComponent &&\n          currTabsIds !== nextTabsIds)\n      ) {\n        const nextTabIndex = findTabIndexByComponentId({\n          currentComponent: nextProps.component,\n          directPathToChild: nextProps.directPathToChild,\n        });\n\n        // make sure nextFocusComponent is under this tabs component\n        if (nextTabIndex > -1 && nextTabIndex !== this.state.tabIndex) {\n          this.setState(() => ({\n            tabIndex: nextTabIndex,\n            activeKey: nextTabsIds[nextTabIndex],\n          }));\n        }\n      }\n    }\n  }\n\n  showDeleteConfirmModal = key => {\n    const { component, deleteComponent } = this.props;\n    AntdModal.confirm({\n      title: t('Delete dashboard tab?'),\n      content: (\n        <span>\n          Deleting a tab will remove all content within it. You may still\n          reverse this action with the <b>undo</b> button (cmd + z) until you\n          save your changes.\n        </span>\n      ),\n      onOk: () => {\n        deleteComponent(key, component.id);\n        const tabIndex = component.children.indexOf(key);\n        this.handleDeleteTab(tabIndex);\n      },\n      okType: 'danger',\n      okText: 'DELETE',\n      cancelText: 'CANCEL',\n      icon: null,\n    });\n  };\n\n  handleEdit = (event, action) => {\n    const { component, createComponent } = this.props;\n    if (action === 'add') {\n      // Prevent the tab container to be selected\n      event?.stopPropagation?.();\n\n      createComponent({\n        destination: {\n          id: component.id,\n          type: component.type,\n          index: component.children.length,\n        },\n        dragging: {\n          id: NEW_TAB_ID,\n          type: TAB_TYPE,\n        },\n      });\n    } else if (action === 'remove') {\n      this.showDeleteConfirmModal(event);\n    }\n  };\n\n  handleClickTab(tabIndex) {\n    const { component } = this.props;\n    const { children: tabIds } = component;\n\n    if (tabIndex !== this.state.tabIndex) {\n      const pathToTabIndex = getDirectPathToTabIndex(component, tabIndex);\n      const targetTabId = pathToTabIndex[pathToTabIndex.length - 1];\n      this.props.logEvent(LOG_ACTIONS_SELECT_DASHBOARD_TAB, {\n        target_id: targetTabId,\n        index: tabIndex,\n      });\n\n      this.props.onChangeTab({ pathToTabIndex });\n    }\n    this.setState(() => ({ activeKey: tabIds[tabIndex] }));\n  }\n\n  handleDeleteComponent() {\n    const { deleteComponent, id, parentId } = this.props;\n    deleteComponent(id, parentId);\n  }\n\n  handleDeleteTab(tabIndex) {\n    // If we're removing the currently selected tab,\n    // select the previous one (if any)\n    if (this.state.tabIndex === tabIndex) {\n      this.handleClickTab(Math.max(0, tabIndex - 1));\n    }\n  }\n\n  handleDropOnTab(dropResult) {\n    const { component } = this.props;\n\n    // Ensure dropped tab is visible\n    const { destination } = dropResult;\n    if (destination) {\n      const dropTabIndex =\n        destination.id === component.id\n          ? destination.index // dropped ON tabs\n          : component.children.indexOf(destination.id); // dropped IN tab\n\n      if (dropTabIndex > -1) {\n        setTimeout(() => {\n          this.handleClickTab(dropTabIndex);\n        }, 30);\n      }\n    }\n  }\n\n  handleDrop(dropResult) {\n    if (dropResult.dragging.type !== TABS_TYPE) {\n      this.props.handleComponentDrop(dropResult);\n    }\n  }\n\n  render() {\n    const {\n      depth,\n      component: tabsComponent,\n      parentComponent,\n      index,\n      availableColumnCount,\n      columnWidth,\n      onResizeStart,\n      onResize,\n      onResizeStop,\n      renderTabContent,\n      renderHoverMenu,\n      isComponentVisible: isCurrentTabVisible,\n      editMode,\n      nativeFilters,\n    } = this.props;\n\n    const { children: tabIds } = tabsComponent;\n    const { tabIndex: selectedTabIndex, activeKey } = this.state;\n\n    let tabsToHighlight;\n    if (nativeFilters?.focusedFilterId) {\n      tabsToHighlight =\n        nativeFilters.filters[nativeFilters.focusedFilterId].tabsInScope;\n    }\n    return (\n      <DragDroppable\n        component={tabsComponent}\n        parentComponent={parentComponent}\n        orientation=\"row\"\n        index={index}\n        depth={depth}\n        onDrop={this.handleDrop}\n        editMode={editMode}\n      >\n        {({\n          dropIndicatorProps: tabsDropIndicatorProps,\n          dragSourceRef: tabsDragSourceRef,\n        }) => (\n          <StyledTabsContainer\n            className=\"dashboard-component dashboard-component-tabs\"\n            data-test=\"dashboard-component-tabs\"\n          >\n            {editMode && renderHoverMenu && (\n              <HoverMenu innerRef={tabsDragSourceRef} position=\"left\">\n                <DragHandle position=\"left\" />\n                <DeleteComponentButton onDelete={this.handleDeleteComponent} />\n              </HoverMenu>\n            )}\n\n            <LineEditableTabs\n              id={tabsComponent.id}\n              activeKey={activeKey}\n              onChange={key => {\n                this.handleClickTab(tabIds.indexOf(key));\n              }}\n              onEdit={this.handleEdit}\n              data-test=\"nav-list\"\n              type={editMode ? 'editable-card' : 'card'}\n            >\n              {tabIds.map((tabId, tabIndex) => (\n                <LineEditableTabs.TabPane\n                  key={tabId}\n                  tab={\n                    <DashboardComponent\n                      id={tabId}\n                      parentId={tabsComponent.id}\n                      depth={depth}\n                      index={tabIndex}\n                      renderType={RENDER_TAB}\n                      availableColumnCount={availableColumnCount}\n                      columnWidth={columnWidth}\n                      onDropOnTab={this.handleDropOnTab}\n                      isFocused={activeKey === tabId}\n                      isHighlighted={\n                        activeKey !== tabId && tabsToHighlight?.includes(tabId)\n                      }\n                    />\n                  }\n                >\n                  {renderTabContent && (\n                    <DashboardComponent\n                      id={tabId}\n                      parentId={tabsComponent.id}\n                      depth={depth} // see isValidChild.js for why tabs don't increment child depth\n                      index={tabIndex}\n                      renderType={RENDER_TAB_CONTENT}\n                      availableColumnCount={availableColumnCount}\n                      columnWidth={columnWidth}\n                      onResizeStart={onResizeStart}\n                      onResize={onResize}\n                      onResizeStop={onResizeStop}\n                      onDropOnTab={this.handleDropOnTab}\n                      isComponentVisible={\n                        selectedTabIndex === tabIndex && isCurrentTabVisible\n                      }\n                    />\n                  )}\n                </LineEditableTabs.TabPane>\n              ))}\n            </LineEditableTabs>\n\n            {/* don't indicate that a drop on root is allowed when tabs already exist */}\n            {tabsDropIndicatorProps &&\n              parentComponent.id !== DASHBOARD_ROOT_ID && (\n                <div {...tabsDropIndicatorProps} />\n              )}\n          </StyledTabsContainer>\n        )}\n      </DragDroppable>\n    );\n  }\n}\n\nTabs.propTypes = propTypes;\nTabs.defaultProps = defaultProps;\n\nfunction mapStateToProps(state) {\n  return {\n    nativeFilters: state.nativeFilters,\n    directPathToChild: state.dashboardState.directPathToChild,\n    filterboxMigrationState: state.dashboardState.filterboxMigrationState,\n  };\n}\nexport default connect(mapStateToProps)(Tabs);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  CHART_TYPE,\n  MARKDOWN_TYPE,\n  COLUMN_TYPE,\n  DIVIDER_TYPE,\n  HEADER_TYPE,\n  ROW_TYPE,\n  TAB_TYPE,\n  TABS_TYPE,\n  DYNAMIC_TYPE,\n} from '../../util/componentTypes';\n\nimport ChartHolder from './ChartHolder';\nimport Markdown from './Markdown';\nimport Column from './Column';\nimport Divider from './Divider';\nimport Header from './Header';\nimport Row from './Row';\nimport Tab from './Tab';\nimport TabsConnected from './Tabs';\nimport DynamicComponent from './DynamicComponent';\n\nexport { default as ChartHolder } from './ChartHolder';\nexport { default as Markdown } from './Markdown';\nexport { default as Column } from './Column';\nexport { default as Divider } from './Divider';\nexport { default as Header } from './Header';\nexport { default as Row } from './Row';\nexport { default as Tab } from './Tab';\nexport { default as Tabs } from './Tabs';\nexport { default as DynamicComponent } from './DynamicComponent';\n\nexport const componentLookup = {\n  [CHART_TYPE]: ChartHolder,\n  [MARKDOWN_TYPE]: Markdown,\n  [COLUMN_TYPE]: Column,\n  [DIVIDER_TYPE]: Divider,\n  [HEADER_TYPE]: Header,\n  [ROW_TYPE]: Row,\n  [TAB_TYPE]: Tab,\n  [TABS_TYPE]: TabsConnected,\n  [DYNAMIC_TYPE]: DynamicComponent,\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC, Suspense } from 'react';\nimport { DashboardComponentMetadata, JsonObject, t } from '@superset-ui/core';\nimport backgroundStyleOptions from 'src/dashboard/util/backgroundStyleOptions';\nimport cx from 'classnames';\nimport { useSelector } from 'react-redux';\nimport DragDroppable from '../dnd/DragDroppable';\nimport { COLUMN_TYPE, ROW_TYPE } from '../../util/componentTypes';\nimport WithPopoverMenu from '../menu/WithPopoverMenu';\nimport ResizableContainer from '../resizable/ResizableContainer';\nimport {\n  BACKGROUND_TRANSPARENT,\n  GRID_BASE_UNIT,\n  GRID_MIN_COLUMN_COUNT,\n} from '../../util/constants';\nimport HoverMenu from '../menu/HoverMenu';\nimport DeleteComponentButton from '../DeleteComponentButton';\nimport BackgroundStyleDropdown from '../menu/BackgroundStyleDropdown';\nimport dashboardComponents from '../../../visualizations/presets/dashboardComponents';\nimport { RootState } from '../../types';\n\ntype FilterSummaryType = {\n  component: JsonObject;\n  parentComponent: JsonObject;\n  index: number;\n  depth: number;\n  handleComponentDrop: (...args: any[]) => any;\n  editMode: boolean;\n  columnWidth: number;\n  availableColumnCount: number;\n  onResizeStart: Function;\n  onResizeStop: Function;\n  onResize: Function;\n  deleteComponent: Function;\n  updateComponents: Function;\n  parentId: number;\n  id: number;\n};\n\nconst DynamicComponent: FC<FilterSummaryType> = ({\n  component,\n  parentComponent,\n  index,\n  depth,\n  handleComponentDrop,\n  editMode,\n  columnWidth,\n  availableColumnCount,\n  onResizeStart,\n  onResizeStop,\n  onResize,\n  deleteComponent,\n  parentId,\n  updateComponents,\n  id,\n}) => {\n  // inherit the size of parent columns\n  const widthMultiple =\n    parentComponent.type === COLUMN_TYPE\n      ? parentComponent.meta.width || GRID_MIN_COLUMN_COUNT\n      : component.meta.width || GRID_MIN_COLUMN_COUNT;\n\n  const handleDeleteComponent = () => {\n    deleteComponent(id, parentId);\n  };\n\n  const rowStyle = backgroundStyleOptions.find(\n    opt => opt.value === (component.meta.background || BACKGROUND_TRANSPARENT),\n  );\n\n  const updateMeta = (metaKey: string, nextValue: string | number) => {\n    updateComponents({\n      [component.id]: {\n        ...component,\n        meta: {\n          ...component.meta,\n          [metaKey]: nextValue,\n        },\n      },\n    });\n  };\n\n  const { Component } = dashboardComponents.get(component.meta.componentKey);\n  const dashboardData = useSelector<RootState, DashboardComponentMetadata>(\n    ({ nativeFilters, dataMask }) => ({\n      nativeFilters,\n      dataMask,\n    }),\n  );\n\n  return (\n    <DragDroppable\n      // @ts-ignore\n      component={component}\n      // @ts-ignore\n      parentComponent={parentComponent}\n      orientation={parentComponent.type === ROW_TYPE ? 'column' : 'row'}\n      index={index}\n      depth={depth}\n      onDrop={handleComponentDrop}\n      editMode={editMode}\n    >\n      {({ dropIndicatorProps, dragSourceRef }) => (\n        <WithPopoverMenu\n          menuItems={[\n            <BackgroundStyleDropdown\n              id={`${component.id}-background`}\n              value={component.meta.background}\n              onChange={value => updateMeta('background', value)}\n            />,\n          ]}\n          editMode={editMode}\n        >\n          <div\n            data-test={`dashboard-${component.componentKey}`}\n            className={cx(\n              'dashboard-component',\n              `dashboard-${component.componentKey}`,\n              rowStyle?.className,\n            )}\n            id={component.id}\n          >\n            <ResizableContainer\n              id={component.id}\n              adjustableWidth={parentComponent.type === ROW_TYPE}\n              widthStep={columnWidth}\n              widthMultiple={widthMultiple}\n              heightStep={GRID_BASE_UNIT}\n              adjustableHeight={false}\n              heightMultiple={component.meta.height}\n              minWidthMultiple={GRID_MIN_COLUMN_COUNT}\n              minHeightMultiple={GRID_MIN_COLUMN_COUNT}\n              maxWidthMultiple={availableColumnCount + widthMultiple}\n              onResizeStart={onResizeStart}\n              onResize={onResize}\n              onResizeStop={onResizeStop}\n            >\n              <div\n                ref={dragSourceRef}\n                className=\"dashboard-component\"\n                data-test=\"dashboard-component-chart-holder\"\n              >\n                {editMode && (\n                  <HoverMenu position=\"top\">\n                    <DeleteComponentButton onDelete={handleDeleteComponent} />\n                  </HoverMenu>\n                )}\n                <Suspense fallback={<div>{t('Loading...')}</div>}>\n                  <Component dashboardData={dashboardData} />\n                </Suspense>\n              </div>\n            </ResizableContainer>\n          </div>\n          {dropIndicatorProps && <div {...dropIndicatorProps} />}\n        </WithPopoverMenu>\n      )}\n    </DragDroppable>\n  );\n};\nexport default DynamicComponent;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { logEvent } from 'src/logger/actions';\nimport { addDangerToast } from 'src/components/MessageToasts/actions';\nimport { componentLookup } from 'src/dashboard/components/gridComponents';\nimport getDetailedComponentWidth from 'src/dashboard/util/getDetailedComponentWidth';\nimport { getActiveFilters } from 'src/dashboard/util/activeDashboardFilters';\nimport { componentShape } from 'src/dashboard/util/propShapes';\nimport { COLUMN_TYPE, ROW_TYPE } from 'src/dashboard/util/componentTypes';\nimport {\n  createComponent,\n  deleteComponent,\n  updateComponents,\n  handleComponentDrop,\n} from 'src/dashboard/actions/dashboardLayout';\nimport {\n  setDirectPathToChild,\n  setActiveTabs,\n  setFullSizeChartId,\n  postAddSliceFromDashboard,\n} from 'src/dashboard/actions/dashboardState';\n\nconst propTypes = {\n  id: PropTypes.string,\n  parentId: PropTypes.string,\n  depth: PropTypes.number,\n  index: PropTypes.number,\n  renderHoverMenu: PropTypes.bool,\n  renderTabContent: PropTypes.bool,\n  onChangeTab: PropTypes.func,\n  component: componentShape.isRequired,\n  parentComponent: componentShape.isRequired,\n  createComponent: PropTypes.func.isRequired,\n  deleteComponent: PropTypes.func.isRequired,\n  updateComponents: PropTypes.func.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  directPathToChild: PropTypes.arrayOf(PropTypes.string),\n  directPathLastUpdated: PropTypes.number,\n  dashboardId: PropTypes.number.isRequired,\n  isComponentVisible: PropTypes.bool,\n};\n\nconst defaultProps = {\n  isComponentVisible: true,\n};\n\nfunction mapStateToProps(\n  { dashboardLayout: undoableLayout, dashboardState, dashboardInfo },\n  ownProps,\n) {\n  const dashboardLayout = undoableLayout.present;\n  const { id, parentId } = ownProps;\n  const component = dashboardLayout[id];\n  const props = {\n    component,\n    getComponentById: id => dashboardLayout[id],\n    parentComponent: dashboardLayout[parentId],\n    editMode: dashboardState.editMode,\n    filters: getActiveFilters(),\n    dashboardId: dashboardInfo.id,\n    fullSizeChartId: dashboardState.fullSizeChartId,\n  };\n\n  // rows and columns need more data about their child dimensions\n  // doing this allows us to not pass the entire component lookup to all Components\n  if (component) {\n    const componentType = component.type;\n    if (componentType === ROW_TYPE || componentType === COLUMN_TYPE) {\n      const { occupiedWidth, minimumWidth } = getDetailedComponentWidth({\n        id,\n        components: dashboardLayout,\n      });\n\n      if (componentType === ROW_TYPE) props.occupiedColumnCount = occupiedWidth;\n      if (componentType === COLUMN_TYPE) props.minColumnWidth = minimumWidth;\n    }\n  }\n\n  return props;\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      addDangerToast,\n      createComponent,\n      deleteComponent,\n      updateComponents,\n      handleComponentDrop,\n      setDirectPathToChild,\n      setFullSizeChartId,\n      setActiveTabs,\n      logEvent,\n      postAddSliceFromDashboard,\n    },\n    dispatch,\n  );\n}\n\nclass DashboardComponent extends React.PureComponent {\n  render() {\n    const { component } = this.props;\n    const Component = component ? componentLookup[component.type] : null;\n    return Component ? <Component {...this.props} /> : null;\n  }\n}\n\nDashboardComponent.propTypes = propTypes;\nDashboardComponent.defaultProps = defaultProps;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DashboardComponent);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { DataMaskStateWithId, Filter, FilterState } from '@superset-ui/core';\n\nexport enum TabIds {\n  AllFilters = 'allFilters',\n  FilterSets = 'filterSets',\n}\n\nexport const getOnlyExtraFormData = (data: DataMaskStateWithId) =>\n  Object.values(data).reduce(\n    (prev, next) => ({ ...prev, [next.id]: next.extraFormData }),\n    {},\n  );\n\nexport const checkIsMissingRequiredValue = (\n  filter: Filter,\n  filterState?: FilterState,\n) => {\n  const value = filterState?.value;\n  // TODO: this property should be unhardcoded\n  return (\n    filter.controlValues?.enableEmptyFilter &&\n    (value === null || value === undefined)\n  );\n};\n\nexport const checkIsApplyDisabled = (\n  dataMaskSelected: DataMaskStateWithId,\n  dataMaskApplied: DataMaskStateWithId,\n  filters: Filter[],\n) => {\n  const dataSelectedValues = Object.values(dataMaskSelected);\n  const dataAppliedValues = Object.values(dataMaskApplied);\n  return (\n    areObjectsEqual(\n      getOnlyExtraFormData(dataMaskSelected),\n      getOnlyExtraFormData(dataMaskApplied),\n      { ignoreUndefined: true },\n    ) ||\n    dataSelectedValues.length !== dataAppliedValues.length ||\n    filters.some(filter =>\n      checkIsMissingRequiredValue(\n        filter,\n        dataMaskSelected?.[filter?.id]?.filterState,\n      ),\n    )\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { useSelector } from 'react-redux';\nimport { filter, keyBy } from 'lodash';\nimport {\n  DataMaskState,\n  DataMaskStateWithId,\n  DataMaskWithId,\n  Filter,\n  Filters,\n  FilterSets as FilterSetsType,\n} from '@superset-ui/core';\nimport { useContext, useEffect, useMemo, useState } from 'react';\nimport { ChartsState, RootState } from 'src/dashboard/types';\nimport { MigrationContext } from 'src/dashboard/containers/DashboardPage';\nimport { FILTER_BOX_MIGRATION_STATES } from 'src/explore/constants';\nimport { NATIVE_FILTER_PREFIX } from '../FiltersConfigModal/utils';\n\nexport const useFilterSets = () =>\n  useSelector<any, FilterSetsType>(\n    state => state.nativeFilters.filterSets || {},\n  );\n\nexport const useFilters = () => {\n  const preselectedNativeFilters = useSelector<any, Filters>(\n    state => state.dashboardState?.preselectNativeFilters,\n  );\n  const nativeFilters = useSelector<RootState, Filters>(\n    state => state.nativeFilters.filters,\n  );\n  return useMemo(\n    () =>\n      Object.entries(nativeFilters).reduce(\n        (acc, [filterId, filter]: [string, Filter]) => ({\n          ...acc,\n          [filterId]: {\n            ...filter,\n            preselect: preselectedNativeFilters?.[filterId],\n          },\n        }),\n        {} as Filters,\n      ),\n    [nativeFilters, preselectedNativeFilters],\n  );\n};\n\nexport const useNativeFiltersDataMask = () => {\n  const dataMask = useSelector<RootState, DataMaskStateWithId>(\n    state => state.dataMask,\n  );\n\n  return useMemo(\n    () =>\n      Object.values(dataMask)\n        .filter((item: DataMaskWithId) =>\n          String(item.id).startsWith(NATIVE_FILTER_PREFIX),\n        )\n        .reduce(\n          (prev, next: DataMaskWithId) => ({ ...prev, [next.id]: next }),\n          {},\n        ) as DataMaskStateWithId,\n    [dataMask],\n  );\n};\n\nexport const useFilterUpdates = (\n  dataMaskSelected: DataMaskState,\n  setDataMaskSelected: (arg0: (arg0: DataMaskState) => void) => void,\n) => {\n  const filters = useFilters();\n  const dataMaskApplied = useNativeFiltersDataMask();\n  useEffect(() => {\n    // Remove deleted filters from local state\n    Object.keys(dataMaskSelected).forEach(selectedId => {\n      if (!filters[selectedId]) {\n        setDataMaskSelected(draft => {\n          delete draft[selectedId];\n        });\n      }\n    });\n  }, [dataMaskApplied, dataMaskSelected, filters, setDataMaskSelected]);\n};\n\n// Load filters after charts loaded\nexport const useInitialization = () => {\n  const [isInitialized, setIsInitialized] = useState<boolean>(false);\n  const filters = useFilters();\n  const filterboxMigrationState = useContext(MigrationContext);\n  let charts = useSelector<RootState, ChartsState>(state => state.charts);\n\n  // We need to know how much charts now shown on dashboard to know how many of all charts should be loaded\n  let numberOfLoadingCharts = 0;\n  if (!isInitialized) {\n    // do not load filter_box in reviewing\n    if (filterboxMigrationState === FILTER_BOX_MIGRATION_STATES.REVIEWING) {\n      charts = keyBy(\n        filter(charts, chart => chart.formData?.viz_type !== 'filter_box'),\n        'id',\n      );\n      const numberOfFilterbox = document.querySelectorAll(\n        '[data-test-viz-type=\"filter_box\"]',\n      ).length;\n\n      numberOfLoadingCharts =\n        document.querySelectorAll('[data-ui-anchor=\"chart\"]').length -\n        numberOfFilterbox;\n    } else {\n      numberOfLoadingCharts = document.querySelectorAll(\n        '[data-ui-anchor=\"chart\"]',\n      ).length;\n    }\n  }\n  useEffect(() => {\n    if (isInitialized) {\n      return;\n    }\n\n    if (Object.values(filters).find(({ requiredFirst }) => requiredFirst)) {\n      setIsInitialized(true);\n      return;\n    }\n\n    // For some dashboards may be there are no charts on first page,\n    // so we check up to 1 sec if there is at least on chart to load\n    let filterTimeout: NodeJS.Timeout;\n    if (numberOfLoadingCharts === 0) {\n      filterTimeout = setTimeout(() => {\n        setIsInitialized(true);\n      }, 1000);\n    }\n\n    // @ts-ignore\n    if (numberOfLoadingCharts > 0 && filterTimeout !== undefined) {\n      clearTimeout(filterTimeout);\n    }\n\n    const numberOfLoadedCharts = Object.values(charts).filter(\n      ({ chartStatus }) => chartStatus !== 'loading',\n    ).length;\n    if (\n      numberOfLoadingCharts > 0 &&\n      numberOfLoadedCharts >= numberOfLoadingCharts\n    ) {\n      setIsInitialized(true);\n    }\n  }, [charts, isInitialized, numberOfLoadingCharts]);\n\n  return isInitialized;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo } from 'react';\nimport { useFilterSets } from '../state';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const useFilterSetNameDuplicated = (\n  filterSetName: string,\n  ignoreName?: string,\n) => {\n  const filterSets = useFilterSets();\n  const filterSetFilterValues = Object.values(filterSets);\n  const isFilterSetNameDuplicated = useMemo(\n    () => !!filterSetFilterValues.find(({ name }) => name === filterSetName),\n    [filterSetFilterValues, filterSetName],\n  );\n  if (ignoreName === filterSetName) {\n    return false;\n  }\n  return isFilterSetNameDuplicated;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t, styled } from '@superset-ui/core';\nimport React, { FC } from 'react';\nimport Button from 'src/components/Button';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { APPLY_FILTERS_HINT } from './utils';\nimport { useFilterSetNameDuplicated } from './state';\nimport { getFilterBarTestId } from '..';\n\nexport type FooterProps = {\n  filterSetName: string;\n  disabled: boolean;\n  editMode: boolean;\n  onCancel: () => void;\n  onEdit: () => void;\n  onCreate: () => void;\n};\n\nconst ActionButton = styled.div<{ disabled: boolean }>`\n  display: flex;\n  & button {\n    ${({ disabled }) => `pointer-events: ${disabled ? 'none' : 'all'}`};\n    flex: 1;\n  }\n`;\n\nexport const ActionButtons = styled.div`\n  display: grid;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 10px;\n  grid-template-columns: 1fr 1fr;\n`;\n\nconst Footer: FC<FooterProps> = ({\n  onCancel,\n  editMode,\n  onEdit,\n  onCreate,\n  disabled,\n  filterSetName,\n}) => {\n  const isFilterSetNameDuplicated = useFilterSetNameDuplicated(filterSetName);\n\n  const isCreateDisabled =\n    !filterSetName || isFilterSetNameDuplicated || disabled;\n\n  return (\n    <>\n      {editMode ? (\n        <ActionButtons>\n          <Button\n            buttonStyle=\"tertiary\"\n            buttonSize=\"small\"\n            onClick={onCancel}\n            data-test=\"filter-set-cancel-button\"\n          >\n            {t('Cancel')}\n          </Button>\n          <Tooltip\n            placement=\"right\"\n            title={\n              (!filterSetName && t('Please filter set name')) ||\n              (isFilterSetNameDuplicated &&\n                t('Filter set with this name already exists')) ||\n              (disabled && APPLY_FILTERS_HINT)\n            }\n          >\n            <ActionButton disabled={isCreateDisabled}>\n              <Button\n                disabled={isCreateDisabled}\n                buttonStyle=\"primary\"\n                htmlType=\"submit\"\n                buttonSize=\"small\"\n                onClick={onCreate}\n                {...getFilterBarTestId('create-filter-set-button')}\n              >\n                {t('Create')}\n              </Button>\n            </ActionButton>\n          </Tooltip>\n        </ActionButtons>\n      ) : (\n        <Tooltip placement=\"bottom\" title={disabled && APPLY_FILTERS_HINT}>\n          <ActionButton disabled={disabled}>\n            <Button\n              disabled={disabled}\n              buttonStyle=\"tertiary\"\n              buttonSize=\"small\"\n              onClick={onEdit}\n              {...getFilterBarTestId('new-filter-set-button')}\n            >\n              {t('Create new filter set')}\n            </Button>\n          </ActionButton>\n        </Tooltip>\n      )}\n    </>\n  );\n};\n\nexport default Footer;\n","// This icon file is generated automatically.\nvar CheckOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z\" } }] }, \"name\": \"check\", \"theme\": \"outlined\" };\nexport default CheckOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CheckOutlinedSvg from \"@ant-design/icons-svg/es/asn/CheckOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar CheckOutlined = function CheckOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: CheckOutlinedSvg\n  }));\n};\n\nCheckOutlined.displayName = 'CheckOutlined';\nexport default React.forwardRef(CheckOutlined);","// This icon file is generated automatically.\nvar EllipsisOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z\" } }] }, \"name\": \"ellipsis\", \"theme\": \"outlined\" };\nexport default EllipsisOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EllipsisOutlinedSvg from \"@ant-design/icons-svg/es/asn/EllipsisOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EllipsisOutlined = function EllipsisOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: EllipsisOutlinedSvg\n  }));\n};\n\nEllipsisOutlined.displayName = 'EllipsisOutlined';\nexport default React.forwardRef(EllipsisOutlined);","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC } from 'react';\nimport {\n  DataMaskState,\n  FilterSet,\n  isNativeFilter,\n  styled,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport { Typography, AntdTooltip, AntdCollapse } from 'src/components';\nimport Icons from 'src/components/Icons';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { getFilterValueForDisplay } from './utils';\nimport { useFilters } from '../state';\nimport { getFilterBarTestId } from '../index';\n\nconst FilterHeader = styled.div`\n  display: flex;\n  align-items: center;\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n`;\n\nconst StyledCollapse = styled(AntdCollapse)`\n  &.ant-collapse-ghost > .ant-collapse-item {\n    & > .ant-collapse-content > .ant-collapse-content-box {\n      padding: 0;\n      padding-top: 0;\n      padding-bottom: 0;\n      font-size: ${({ theme }) => theme.typography.sizes.s}px;\n    }\n    & > .ant-collapse-header {\n      padding: 0;\n      display: flex;\n      align-items: center;\n      flex-direction: row-reverse;\n      justify-content: flex-end;\n      max-width: max-content;\n      & .ant-collapse-arrow {\n        position: static;\n        padding-left: ${({ theme }) => theme.gridUnit}px;\n      }\n  }\n`;\n\nconst StyledFilterRow = styled.div`\n  padding-top: ${({ theme }) => theme.gridUnit}px;\n  padding-bottom: ${({ theme }) => theme.gridUnit}px;\n`;\n\nexport type FiltersHeaderProps = {\n  dataMask?: DataMaskState;\n  filterSet?: FilterSet;\n};\n\nconst FiltersHeader: FC<FiltersHeaderProps> = ({ dataMask, filterSet }) => {\n  const theme = useTheme();\n  const filters = useFilters();\n  const filterValues = Object.values(filters).filter(isNativeFilter);\n\n  let resultFilters = filterValues ?? [];\n  if (filterSet?.nativeFilters) {\n    resultFilters = Object.values(filterSet?.nativeFilters).filter(\n      isNativeFilter,\n    );\n  }\n\n  const getFiltersHeader = () => (\n    <FilterHeader>\n      <Typography.Text type=\"secondary\">\n        {t('Filters (%d)', resultFilters.length)}\n      </Typography.Text>\n    </FilterHeader>\n  );\n\n  const getFilterRow = ({ id, name }: { id: string; name: string }) => {\n    const changedFilter =\n      filterSet &&\n      !areObjectsEqual(\n        filters[id]?.controlValues,\n        filterSet?.nativeFilters?.[id]?.controlValues,\n        {\n          ignoreUndefined: true,\n        },\n      );\n    const removedFilter = !Object.keys(filters).includes(id);\n\n    return (\n      <AntdTooltip\n        title={\n          (removedFilter &&\n            t(\n              \"This filter doesn't exist in dashboard. It will not be applied.\",\n            )) ||\n          (changedFilter &&\n            t('Filter metadata changed in dashboard. It will not be applied.'))\n        }\n        placement=\"bottomLeft\"\n        key={id}\n      >\n        <StyledFilterRow data-test=\"filter-info\">\n          <Typography.Text strong delete={removedFilter} mark={changedFilter}>\n            {name}:&nbsp;\n          </Typography.Text>\n          <Typography.Text delete={removedFilter} mark={changedFilter}>\n            {getFilterValueForDisplay(dataMask?.[id]?.filterState?.value) || (\n              <Typography.Text type=\"secondary\">{t('None')}</Typography.Text>\n            )}\n          </Typography.Text>\n        </StyledFilterRow>\n      </AntdTooltip>\n    );\n  };\n\n  const getExpandIcon = ({ isActive }: { isActive: boolean }) => {\n    const color = theme.colors.grayscale.base;\n    const Icon = isActive ? Icons.CaretUpOutlined : Icons.CaretDownOutlined;\n    return <Icon iconColor={color} />;\n  };\n\n  return (\n    <StyledCollapse\n      ghost\n      expandIconPosition=\"right\"\n      defaultActiveKey={!filterSet ? ['filters'] : undefined}\n      expandIcon={getExpandIcon}\n    >\n      <AntdCollapse.Panel\n        {...getFilterBarTestId('collapse-filter-set-description')}\n        header={getFiltersHeader()}\n        key=\"filters\"\n      >\n        {resultFilters.map(getFilterRow)}\n      </AntdCollapse.Panel>\n    </StyledCollapse>\n  );\n};\n\nexport default FiltersHeader;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { AntdDropdown, Typography } from 'src/components';\nimport { Menu } from 'src/components/Menu';\nimport React, { FC } from 'react';\nimport {\n  DataMaskState,\n  FilterSet,\n  HandlerFunction,\n  styled,\n  useTheme,\n  t,\n} from '@superset-ui/core';\nimport { CheckOutlined, EllipsisOutlined } from '@ant-design/icons';\nimport Button from 'src/components/Button';\nimport { Tooltip } from 'src/components/Tooltip';\nimport FiltersHeader from './FiltersHeader';\nimport { getFilterBarTestId } from '..';\n\nconst HeaderButton = styled(Button)`\n  padding: 0;\n`;\n\nconst TitleText = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst IconsBlock = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  & > *,\n  & > button.superset-button {\n    ${({ theme }) => `margin-left: ${theme.gridUnit * 2}px`};\n  }\n`;\n\nexport type FilterSetUnitProps = {\n  editMode?: boolean;\n  isApplied?: boolean;\n  filterSet?: FilterSet;\n  filterSetName?: string;\n  dataMaskSelected?: DataMaskState;\n  setFilterSetName?: (name: string) => void;\n  onDelete?: HandlerFunction;\n  onEdit?: HandlerFunction;\n  onRebuild?: HandlerFunction;\n};\n\nconst FilterSetUnit: FC<FilterSetUnitProps> = ({\n  editMode,\n  setFilterSetName,\n  onDelete,\n  onEdit,\n  filterSetName,\n  dataMaskSelected,\n  filterSet,\n  isApplied,\n  onRebuild,\n}) => {\n  const theme = useTheme();\n\n  const menu = (\n    <Menu>\n      <Menu.Item onClick={onEdit}>{t('Edit')}</Menu.Item>\n      <Menu.Item onClick={onRebuild}>\n        <Tooltip placement=\"right\" title={t('Remove invalid filters')}>\n          {t('Rebuild')}\n        </Tooltip>\n      </Menu.Item>\n      <Menu.Item onClick={onDelete} danger>\n        {t('Delete')}\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <>\n      <TitleText>\n        <Typography.Text\n          strong\n          editable={{\n            editing: editMode,\n            icon: <span />,\n            onChange: setFilterSetName,\n          }}\n        >\n          {filterSet?.name ?? filterSetName}\n        </Typography.Text>\n        <IconsBlock>\n          {isApplied && (\n            <CheckOutlined style={{ color: theme.colors.success.base }} />\n          )}\n          {onDelete && (\n            <AntdDropdown\n              overlay={menu}\n              placement=\"bottomRight\"\n              trigger={['click']}\n            >\n              <HeaderButton\n                onClick={e => {\n                  e.stopPropagation();\n                  e.preventDefault();\n                }}\n                {...getFilterBarTestId('filter-set-menu-button')}\n                buttonStyle=\"link\"\n                buttonSize=\"xsmall\"\n              >\n                <EllipsisOutlined />\n              </HeaderButton>\n            </AntdDropdown>\n          )}\n        </IconsBlock>\n      </TitleText>\n      <FiltersHeader\n        filterSet={filterSet}\n        dataMask={filterSet?.dataMask ?? dataMaskSelected}\n      />\n    </>\n  );\n};\n\nexport default FilterSetUnit;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport {\n  DataMask,\n  DataMaskState,\n  DataMaskWithId,\n  Filter,\n  Filters,\n  FilterSet,\n  HandlerFunction,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport { useDispatch } from 'react-redux';\nimport {\n  createFilterSet,\n  deleteFilterSet,\n  updateFilterSet,\n} from 'src/dashboard/actions/nativeFilters';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { findExistingFilterSet } from './utils';\nimport { useFilters, useNativeFiltersDataMask, useFilterSets } from '../state';\nimport Footer from './Footer';\nimport FilterSetUnit from './FilterSetUnit';\nimport { getFilterBarTestId } from '..';\nimport { TabIds } from '../utils';\n\nconst FilterSetsWrapper = styled.div`\n  display: grid;\n  align-items: center;\n  justify-content: center;\n  grid-template-columns: 1fr;\n  // 108px padding to make room for buttons with position: absolute\n  padding-bottom: ${({ theme }) => theme.gridUnit * 27}px;\n\n  & button.superset-button {\n    margin-left: 0;\n  }\n  & input {\n    width: 100%;\n  }\n`;\n\nconst FilterSetUnitWrapper = styled.div<{\n  onClick?: HandlerFunction;\n  'data-selected'?: boolean;\n}>`\n  ${({ theme, 'data-selected': selected, onClick }) => `\n    display: grid;\n    align-items: center;\n    justify-content: center;\n    grid-template-columns: 1fr;\n    grid-gap: ${theme.gridUnit}px;\n    border-bottom: 1px solid ${theme.colors.grayscale.light2};\n    padding: ${theme.gridUnit * 2}px ${theme.gridUnit * 4}px;\n    cursor: ${!onClick ? 'auto' : 'pointer'};\n    background: ${selected ? theme.colors.primary.light5 : 'transparent'};\n  `}\n`;\n\nexport type FilterSetsProps = {\n  disabled: boolean;\n  tab: TabIds;\n  dataMaskSelected: DataMaskState;\n  onEditFilterSet: (id: number) => void;\n  onFilterSelectionChange: (\n    filter: Pick<Filter, 'id'> & Partial<Filter>,\n    dataMask: Partial<DataMask>,\n  ) => void;\n};\n\nconst DEFAULT_FILTER_SET_NAME = t('New filter set');\n\nconst FilterSets: React.FC<FilterSetsProps> = ({\n  dataMaskSelected,\n  onEditFilterSet,\n  disabled,\n  onFilterSelectionChange,\n  tab,\n}) => {\n  const dispatch = useDispatch();\n  const [filterSetName, setFilterSetName] = useState(DEFAULT_FILTER_SET_NAME);\n  const [editMode, setEditMode] = useState(false);\n  const dataMaskApplied = useNativeFiltersDataMask();\n  const filterSets = useFilterSets();\n  const filterSetFilterValues = Object.values(filterSets);\n  const filters = useFilters();\n  const filterValues = Object.values(filters) as Filter[];\n  const [selectedFiltersSetId, setSelectedFiltersSetId] = useState<\n    number | null\n  >(null);\n\n  useEffect(() => {\n    if (tab === TabIds.AllFilters) {\n      return;\n    }\n    if (!filterSetFilterValues.length) {\n      setSelectedFiltersSetId(null);\n      return;\n    }\n\n    const foundFilterSet = findExistingFilterSet({\n      dataMaskSelected,\n      filterSetFilterValues,\n    });\n\n    setSelectedFiltersSetId(foundFilterSet?.id ?? null);\n  }, [tab, dataMaskSelected, filterSetFilterValues]);\n\n  const isFilterMissingOrContainsInvalidMetadata = (\n    id: string,\n    filterSet?: FilterSet,\n  ) =>\n    !filterValues.find(filter => filter?.id === id) ||\n    !areObjectsEqual(\n      filters[id]?.controlValues,\n      filterSet?.nativeFilters?.[id]?.controlValues,\n      {\n        ignoreUndefined: true,\n      },\n    );\n\n  const takeFilterSet = (id: number, event?: MouseEvent) => {\n    const localTarget = event?.target as HTMLDivElement;\n    if (localTarget) {\n      const parent = localTarget.closest(\n        `[data-anchor=${getFilterBarTestId('filter-set-wrapper', true)}]`,\n      );\n      if (\n        parent?.querySelector('.ant-collapse-header')?.contains(localTarget) ||\n        localTarget?.closest('.ant-dropdown')\n      ) {\n        return;\n      }\n    }\n    setSelectedFiltersSetId(id);\n    if (!id) {\n      return;\n    }\n\n    const filterSet = filterSets[id];\n\n    (Object.values(filterSet?.dataMask) ?? []).forEach(\n      (dataMask: DataMaskWithId) => {\n        const { extraFormData, filterState, id } = dataMask;\n        if (isFilterMissingOrContainsInvalidMetadata(id, filterSet)) {\n          return;\n        }\n        onFilterSelectionChange({ id }, { extraFormData, filterState });\n      },\n    );\n  };\n\n  const handleRebuild = (id: number) => {\n    const filterSet = filterSets[id];\n    // We need remove invalid filters from filter set\n    const newFilters = Object.values(filterSet?.dataMask ?? {})\n      .filter(dataMask => {\n        const { id } = dataMask as DataMaskWithId;\n        return !isFilterMissingOrContainsInvalidMetadata(id, filterSet);\n      })\n      .reduce(\n        (prev, next: DataMaskWithId) => ({\n          ...prev,\n          [next.id]: filters[next.id],\n        }),\n        {},\n      );\n\n    const updatedFilterSet: FilterSet = {\n      ...filterSet,\n      nativeFilters: newFilters as Filters,\n      dataMask: Object.keys(newFilters).reduce(\n        (prev, nextFilterId) => ({\n          ...prev,\n          [nextFilterId]: filterSet.dataMask?.[nextFilterId],\n        }),\n        {},\n      ),\n    };\n    dispatch(updateFilterSet(updatedFilterSet));\n  };\n\n  const handleEdit = (id: number) => {\n    takeFilterSet(id);\n    onEditFilterSet(id);\n  };\n\n  const handleDeleteFilterSet = (filterSetId: number) => {\n    dispatch(deleteFilterSet(filterSetId));\n    if (filterSetId === selectedFiltersSetId) {\n      setSelectedFiltersSetId(null);\n    }\n  };\n\n  const handleCancel = () => {\n    setEditMode(false);\n    setFilterSetName(DEFAULT_FILTER_SET_NAME);\n  };\n\n  const handleCreateFilterSet = () => {\n    const newFilterSet: Omit<FilterSet, 'id'> = {\n      name: filterSetName.trim(),\n      nativeFilters: filters,\n      dataMask: Object.keys(filters).reduce(\n        (prev, nextFilterId) => ({\n          ...prev,\n          [nextFilterId]: dataMaskApplied[nextFilterId],\n        }),\n        {},\n      ),\n    };\n    dispatch(createFilterSet(newFilterSet));\n    setEditMode(false);\n    setFilterSetName(DEFAULT_FILTER_SET_NAME);\n  };\n\n  return (\n    <FilterSetsWrapper>\n      {!selectedFiltersSetId && (\n        <FilterSetUnitWrapper>\n          <FilterSetUnit\n            dataMaskSelected={dataMaskSelected}\n            editMode={editMode}\n            setFilterSetName={setFilterSetName}\n            filterSetName={filterSetName}\n          />\n          <Footer\n            filterSetName={filterSetName.trim()}\n            disabled={disabled}\n            onCancel={handleCancel}\n            editMode={editMode}\n            onEdit={() => setEditMode(true)}\n            onCreate={handleCreateFilterSet}\n          />\n        </FilterSetUnitWrapper>\n      )}\n      {filterSetFilterValues.map(filterSet => (\n        <FilterSetUnitWrapper\n          {...getFilterBarTestId('filter-set-wrapper')}\n          data-anchor={getFilterBarTestId('filter-set-wrapper', true)}\n          data-selected={filterSet.id === selectedFiltersSetId}\n          onClick={\n            (e =>\n              takeFilterSet(filterSet.id, e as MouseEvent)) as HandlerFunction\n          }\n          key={filterSet.id}\n        >\n          <FilterSetUnit\n            isApplied={filterSet.id === selectedFiltersSetId && !disabled}\n            onDelete={() => handleDeleteFilterSet(filterSet.id)}\n            onEdit={() => handleEdit(filterSet.id)}\n            onRebuild={() => handleRebuild(filterSet.id)}\n            dataMaskSelected={dataMaskSelected}\n            filterSet={filterSet}\n          />\n        </FilterSetUnitWrapper>\n      ))}\n    </FilterSetsWrapper>\n  );\n};\n\nexport default FilterSets;\n","// This icon file is generated automatically.\nvar WarningOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z\" } }] }, \"name\": \"warning\", \"theme\": \"outlined\" };\nexport default WarningOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport WarningOutlinedSvg from \"@ant-design/icons-svg/es/asn/WarningOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar WarningOutlined = function WarningOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: WarningOutlinedSvg\n  }));\n};\n\nWarningOutlined.displayName = 'WarningOutlined';\nexport default React.forwardRef(WarningOutlined);","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC, useMemo, useState } from 'react';\nimport { DataMaskState, HandlerFunction, styled, t } from '@superset-ui/core';\nimport { Typography, AntdTooltip } from 'src/components';\nimport { useDispatch } from 'react-redux';\nimport Button from 'src/components/Button';\nimport { updateFilterSet } from 'src/dashboard/actions/nativeFilters';\nimport { WarningOutlined } from '@ant-design/icons';\nimport { ActionButtons } from './Footer';\nimport { useNativeFiltersDataMask, useFilters, useFilterSets } from '../state';\nimport { APPLY_FILTERS_HINT, findExistingFilterSet } from './utils';\nimport { useFilterSetNameDuplicated } from './state';\nimport { getFilterBarTestId } from '../index';\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr;\n  align-items: flex-start;\n  justify-content: flex-start;\n  grid-gap: ${({ theme }) => theme.gridUnit}px;\n  background: ${({ theme }) => theme.colors.primary.light4};\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\nconst Title = styled(Typography.Text)`\n  color: ${({ theme }) => theme.colors.primary.dark2};\n`;\n\nconst Warning = styled(Typography.Text)`\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  & .anticon {\n    padding: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst ActionButton = styled.div<{ disabled?: boolean }>`\n  display: flex;\n  & button {\n    ${({ disabled }) => `pointer-events: ${disabled ? 'none' : 'all'}`};\n    flex: 1;\n  }\n`;\n\nexport type EditSectionProps = {\n  filterSetId: number;\n  dataMaskSelected: DataMaskState;\n  onCancel: HandlerFunction;\n  disabled: boolean;\n};\n\nconst EditSection: FC<EditSectionProps> = ({\n  filterSetId,\n  onCancel,\n  dataMaskSelected,\n  disabled,\n}) => {\n  const dataMaskApplied = useNativeFiltersDataMask();\n  const dispatch = useDispatch();\n  const filterSets = useFilterSets();\n  const filters = useFilters();\n  const filterSetFilterValues = Object.values(filterSets);\n\n  const [filterSetName, setFilterSetName] = useState(\n    filterSets[filterSetId].name,\n  );\n\n  const isFilterSetNameDuplicated = useFilterSetNameDuplicated(\n    filterSetName,\n    filterSets[filterSetId].name,\n  );\n\n  const handleSave = () => {\n    dispatch(\n      updateFilterSet({\n        id: filterSetId,\n        name: filterSetName,\n        nativeFilters: filters,\n        dataMask: { ...dataMaskApplied },\n      }),\n    );\n    onCancel();\n  };\n\n  const foundFilterSet = useMemo(\n    () =>\n      findExistingFilterSet({\n        dataMaskSelected,\n        filterSetFilterValues,\n      }),\n    [dataMaskSelected, filterSetFilterValues],\n  );\n\n  const isDuplicateFilterSet =\n    foundFilterSet && foundFilterSet.id !== filterSetId;\n\n  const resultDisabled =\n    disabled || isDuplicateFilterSet || isFilterSetNameDuplicated;\n\n  return (\n    <Wrapper>\n      <Title strong>{t('Editing filter set:')}</Title>\n      <Title\n        editable={{\n          editing: true,\n          icon: <span />,\n          onChange: setFilterSetName,\n        }}\n      >\n        {filterSetName}\n      </Title>\n      <ActionButtons>\n        <Button\n          ghost\n          buttonStyle=\"tertiary\"\n          buttonSize=\"small\"\n          onClick={onCancel}\n          data-test=\"filter-set-edit-cancel\"\n        >\n          {t('Cancel')}\n        </Button>\n        <AntdTooltip\n          placement=\"right\"\n          title={\n            (isFilterSetNameDuplicated &&\n              t('Filter set with this name already exists')) ||\n            (isDuplicateFilterSet && t('Filter set already exists')) ||\n            (disabled && APPLY_FILTERS_HINT)\n          }\n        >\n          <ActionButton disabled={resultDisabled}>\n            <Button\n              disabled={resultDisabled}\n              buttonStyle=\"primary\"\n              htmlType=\"submit\"\n              buttonSize=\"small\"\n              onClick={handleSave}\n              {...getFilterBarTestId('filter-set-edit-save')}\n            >\n              {t('Save')}\n            </Button>\n          </ActionButton>\n        </AntdTooltip>\n      </ActionButtons>\n      {isDuplicateFilterSet && (\n        <Warning mark>\n          <WarningOutlined />\n          {t('This filter set is identical to: \"%s\"', foundFilterSet?.name)}\n        </Warning>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default EditSection;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setFilterConfiguration } from 'src/dashboard/actions/nativeFilters';\nimport Button from 'src/components/Button';\nimport { FilterConfiguration, styled } from '@superset-ui/core';\nimport { FiltersConfigModal } from 'src/dashboard/components/nativeFilters/FiltersConfigModal/FiltersConfigModal';\nimport { getFilterBarTestId } from '..';\n\nexport interface FCBProps {\n  createNewOnOpen?: boolean;\n  dashboardId?: number;\n}\n\nconst HeaderButton = styled(Button)`\n  padding: 0;\n`;\n\nexport const FilterConfigurationLink: React.FC<FCBProps> = ({\n  createNewOnOpen,\n  dashboardId,\n  children,\n}) => {\n  const dispatch = useDispatch();\n  const [isOpen, setOpen] = useState(false);\n\n  function close() {\n    setOpen(false);\n  }\n\n  async function submit(filterConfig: FilterConfiguration) {\n    dispatch(await setFilterConfiguration(filterConfig));\n    close();\n  }\n\n  return (\n    <>\n      {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}\n      <HeaderButton\n        {...getFilterBarTestId('create-filter')}\n        buttonStyle=\"link\"\n        buttonSize=\"xsmall\"\n        onClick={() => setOpen(true)}\n      >\n        {children}\n      </HeaderButton>\n      <FiltersConfigModal\n        isOpen={isOpen}\n        onSave={submit}\n        onCancel={close}\n        createNewOnOpen={createNewOnOpen}\n        key={`filters-for-${dashboardId}`}\n      />\n    </>\n  );\n};\n\nexport default FilterConfigurationLink;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { css, styled, t, useTheme } from '@superset-ui/core';\nimport React, { FC } from 'react';\nimport Icons from 'src/components/Icons';\nimport Button from 'src/components/Button';\nimport { useSelector } from 'react-redux';\nimport FilterConfigurationLink from 'src/dashboard/components/nativeFilters/FilterBar/FilterConfigurationLink';\nimport { useFilters } from 'src/dashboard/components/nativeFilters/FilterBar/state';\nimport { RootState } from 'src/dashboard/types';\nimport { getFilterBarTestId } from '..';\n\nconst TitleArea = styled.h4`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin: 0;\n  padding: ${({ theme }) => theme.gridUnit * 2}px;\n\n  & > span {\n    flex-grow: 1;\n  }\n`;\n\nconst HeaderButton = styled(Button)`\n  padding: 0;\n`;\n\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit}px\n    ${({ theme }) => theme.gridUnit * 2}px;\n`;\n\ntype HeaderProps = {\n  toggleFiltersBar: (arg0: boolean) => void;\n};\n\nconst AddFiltersButtonContainer = styled.div`\n  ${({ theme }) => css`\n    margin-top: ${theme.gridUnit * 2}px;\n\n    & button > [role='img']:first-of-type {\n      margin-right: ${theme.gridUnit}px;\n      line-height: 0;\n    }\n\n    span[role='img'] {\n      padding-bottom: 1px;\n    }\n\n    .ant-btn > .anticon + span {\n      margin-left: 0;\n    }\n  `}\n`;\n\nconst Header: FC<HeaderProps> = ({ toggleFiltersBar }) => {\n  const theme = useTheme();\n  const filters = useFilters();\n  const filterValues = Object.values(filters);\n  const canEdit = useSelector<RootState, boolean>(\n    ({ dashboardInfo }) => dashboardInfo.dash_edit_perm,\n  );\n  const dashboardId = useSelector<RootState, number>(\n    ({ dashboardInfo }) => dashboardInfo.id,\n  );\n\n  return (\n    <Wrapper>\n      <TitleArea>\n        <span>{t('Filters')}</span>\n        <HeaderButton\n          {...getFilterBarTestId('collapse-button')}\n          buttonStyle=\"link\"\n          buttonSize=\"xsmall\"\n          onClick={() => toggleFiltersBar(false)}\n        >\n          <Icons.Expand iconColor={theme.colors.grayscale.base} />\n        </HeaderButton>\n      </TitleArea>\n      {canEdit && (\n        <AddFiltersButtonContainer>\n          <FilterConfigurationLink\n            dashboardId={dashboardId}\n            createNewOnOpen={filterValues.length === 0}\n          >\n            <Icons.PlusSmall /> {t('Add/Edit Filters')}\n          </FilterConfigurationLink>\n        </AddFiltersButtonContainer>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default Header;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n// Internally, the portalNode must be for either HTML or SVG elements\nvar ELEMENT_TYPE_HTML = 'html';\nvar ELEMENT_TYPE_SVG = 'svg';\n// ReactDOM can handle several different namespaces, but they're not exported publicly\n// https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/packages/react-dom/src/shared/DOMNamespaces.js#L8-L10\nvar SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nvar validateElementType = function (domElement, elementType) {\n    if (elementType === ELEMENT_TYPE_HTML) {\n        return domElement instanceof HTMLElement;\n    }\n    if (elementType === ELEMENT_TYPE_SVG) {\n        return domElement instanceof SVGElement;\n    }\n    throw new Error(\"Unrecognized element type \\\"\" + elementType + \"\\\" for validateElementType.\");\n};\n// This is the internal implementation: the public entry points set elementType to an appropriate value\nvar createPortalNode = function (elementType) {\n    var initialProps = {};\n    var parent;\n    var lastPlaceholder;\n    var element;\n    if (elementType === ELEMENT_TYPE_HTML) {\n        element = document.createElement('div');\n    }\n    else if (elementType === ELEMENT_TYPE_SVG) {\n        element = document.createElementNS(SVG_NAMESPACE, 'g');\n    }\n    else {\n        throw new Error(\"Invalid element type \\\"\" + elementType + \"\\\" for createPortalNode: must be \\\"html\\\" or \\\"svg\\\".\");\n    }\n    var portalNode = {\n        element: element,\n        elementType: elementType,\n        setPortalProps: function (props) {\n            initialProps = props;\n        },\n        getInitialPortalProps: function () {\n            return initialProps;\n        },\n        mount: function (newParent, newPlaceholder) {\n            if (newPlaceholder === lastPlaceholder) {\n                // Already mounted - noop.\n                return;\n            }\n            portalNode.unmount();\n            // To support SVG and other non-html elements, the portalNode's elementType needs to match\n            // the elementType it's being rendered into\n            if (newParent !== parent) {\n                if (!validateElementType(newParent, elementType)) {\n                    throw new Error(\"Invalid element type for portal: \\\"\" + elementType + \"\\\" portalNodes must be used with \" + elementType + \" elements, but OutPortal is within <\" + newParent.tagName + \">.\");\n                }\n            }\n            newParent.replaceChild(portalNode.element, newPlaceholder);\n            parent = newParent;\n            lastPlaceholder = newPlaceholder;\n        },\n        unmount: function (expectedPlaceholder) {\n            if (expectedPlaceholder && expectedPlaceholder !== lastPlaceholder) {\n                // Skip unmounts for placeholders that aren't currently mounted\n                // They will have been automatically unmounted already by a subsequent mount()\n                return;\n            }\n            if (parent && lastPlaceholder) {\n                parent.replaceChild(lastPlaceholder, portalNode.element);\n                parent = undefined;\n                lastPlaceholder = undefined;\n            }\n        }\n    };\n    return portalNode;\n};\nvar InPortal = /** @class */ (function (_super) {\n    __extends(InPortal, _super);\n    function InPortal(props) {\n        var _this = _super.call(this, props) || this;\n        _this.addPropsChannel = function () {\n            Object.assign(_this.props.node, {\n                setPortalProps: function (props) {\n                    // Rerender the child node here if/when the out portal props change\n                    _this.setState({ nodeProps: props });\n                }\n            });\n        };\n        _this.state = {\n            nodeProps: _this.props.node.getInitialPortalProps(),\n        };\n        return _this;\n    }\n    InPortal.prototype.componentDidMount = function () {\n        this.addPropsChannel();\n    };\n    InPortal.prototype.componentDidUpdate = function () {\n        this.addPropsChannel();\n    };\n    InPortal.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, children = _a.children, node = _a.node;\n        return ReactDOM.createPortal(React.Children.map(children, function (child) {\n            if (!React.isValidElement(child))\n                return child;\n            return React.cloneElement(child, _this.state.nodeProps);\n        }), node.element);\n    };\n    return InPortal;\n}(React.PureComponent));\nvar OutPortal = /** @class */ (function (_super) {\n    __extends(OutPortal, _super);\n    function OutPortal(props) {\n        var _this = _super.call(this, props) || this;\n        _this.placeholderNode = React.createRef();\n        _this.passPropsThroughPortal();\n        return _this;\n    }\n    OutPortal.prototype.passPropsThroughPortal = function () {\n        var propsForTarget = Object.assign({}, this.props, { node: undefined });\n        this.props.node.setPortalProps(propsForTarget);\n    };\n    OutPortal.prototype.componentDidMount = function () {\n        var node = this.props.node;\n        this.currentPortalNode = node;\n        var placeholder = this.placeholderNode.current;\n        var parent = placeholder.parentNode;\n        node.mount(parent, placeholder);\n        this.passPropsThroughPortal();\n    };\n    OutPortal.prototype.componentDidUpdate = function () {\n        // We re-mount on update, just in case we were unmounted (e.g. by\n        // a second OutPortal, which has now been removed)\n        var node = this.props.node;\n        // If we're switching portal nodes, we need to clean up the current one first.\n        if (this.currentPortalNode && node !== this.currentPortalNode) {\n            this.currentPortalNode.unmount(this.placeholderNode.current);\n            this.currentPortalNode = node;\n        }\n        var placeholder = this.placeholderNode.current;\n        var parent = placeholder.parentNode;\n        node.mount(parent, placeholder);\n        this.passPropsThroughPortal();\n    };\n    OutPortal.prototype.componentWillUnmount = function () {\n        var node = this.props.node;\n        node.unmount(this.placeholderNode.current);\n    };\n    OutPortal.prototype.render = function () {\n        // Render a placeholder to the DOM, so we can get a reference into\n        // our location in the DOM, and swap it out for the portaled node.\n        // A <div> placeholder works fine even for SVG.\n        return React.createElement(\"div\", { ref: this.placeholderNode });\n    };\n    return OutPortal;\n}(React.PureComponent));\nvar createHtmlPortalNode = createPortalNode.bind(null, ELEMENT_TYPE_HTML);\nvar createSvgPortalNode = createPortalNode.bind(null, ELEMENT_TYPE_SVG);\nexport { createHtmlPortalNode, createSvgPortalNode, InPortal, OutPortal, };\n//# sourceMappingURL=index.js.map","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { debounce } from 'lodash';\nimport { Dispatch } from 'react';\nimport {\n  setFocusedNativeFilter,\n  unsetFocusedNativeFilter,\n} from 'src/dashboard/actions/nativeFilters';\n\nexport const dispatchFocusAction = debounce(\n  (dispatch: Dispatch<any>, id?: string) => {\n    if (id) {\n      dispatch(setFocusedNativeFilter(id));\n    } else {\n      dispatch(unsetFocusedNativeFilter());\n    }\n  },\n  300,\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  QueryFormData,\n  SuperChart,\n  DataMask,\n  t,\n  styled,\n  Behavior,\n  ChartDataResponseResult,\n  JsonObject,\n  getChartMetadataRegistry,\n} from '@superset-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { isEqual, isEqualWith } from 'lodash';\nimport { getChartDataRequest } from 'src/components/Chart/chartAction';\nimport Loading from 'src/components/Loading';\nimport BasicErrorAlert from 'src/components/ErrorMessage/BasicErrorAlert';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport { waitForAsyncData } from 'src/middleware/asyncEvent';\nimport { ClientErrorObject } from 'src/utils/getClientErrorObject';\nimport { RootState } from 'src/dashboard/types';\nimport { onFiltersRefreshSuccess } from 'src/dashboard/actions/dashboardState';\nimport { dispatchFocusAction } from './utils';\nimport { FilterProps } from './types';\nimport { getFormData } from '../../utils';\nimport { useFilterDependencies } from './state';\nimport { checkIsMissingRequiredValue } from '../utils';\n\nconst HEIGHT = 32;\n\n// Overrides superset-ui height with min-height\nconst StyledDiv = styled.div`\n  & > div {\n    height: auto !important;\n    min-height: ${HEIGHT}px;\n  }\n`;\n\nconst queriesDataPlaceholder = [{ data: [{}] }];\nconst behaviors = [Behavior.NATIVE_FILTER];\n\nconst useShouldFilterRefresh = () => {\n  const isDashboardRefreshing = useSelector<RootState, boolean>(\n    state => state.dashboardState.isRefreshing,\n  );\n  const isFilterRefreshing = useSelector<RootState, boolean>(\n    state => state.dashboardState.isFiltersRefreshing,\n  );\n\n  // trigger filter requests only after charts requests were triggered\n  return !isDashboardRefreshing && isFilterRefreshing;\n};\n\nconst FilterValue: React.FC<FilterProps> = ({\n  dataMaskSelected,\n  filter,\n  directPathToChild,\n  onFilterSelectionChange,\n  inView = true,\n  showOverflow,\n  parentRef,\n  setFilterActive,\n}) => {\n  const { id, targets, filterType, adhoc_filters, time_range } = filter;\n  const metadata = getChartMetadataRegistry().get(filterType);\n  const dependencies = useFilterDependencies(id, dataMaskSelected);\n  const shouldRefresh = useShouldFilterRefresh();\n  const [state, setState] = useState<ChartDataResponseResult[]>([]);\n  const [error, setError] = useState<string>('');\n  const [formData, setFormData] = useState<Partial<QueryFormData>>({\n    inView: false,\n  });\n  const [ownState, setOwnState] = useState<JsonObject>({});\n  const [inViewFirstTime, setInViewFirstTime] = useState(inView);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [target] = targets;\n  const {\n    datasetId,\n    column = {},\n  }: Partial<{ datasetId: number; column: { name?: string } }> = target;\n  const { name: groupby } = column;\n  const hasDataSource = !!datasetId;\n  const [isLoading, setIsLoading] = useState<boolean>(hasDataSource);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const dispatch = useDispatch();\n\n  const handleFilterLoadFinish = useCallback(() => {\n    setIsRefreshing(false);\n    setIsLoading(false);\n    if (shouldRefresh) {\n      dispatch(onFiltersRefreshSuccess());\n    }\n  }, [dispatch, shouldRefresh]);\n\n  useEffect(() => {\n    if (!inViewFirstTime && inView) {\n      setInViewFirstTime(true);\n    }\n  }, [inView, inViewFirstTime, setInViewFirstTime]);\n\n  useEffect(() => {\n    if (!inViewFirstTime) {\n      return;\n    }\n    const newFormData = getFormData({\n      ...filter,\n      datasetId,\n      dependencies,\n      groupby,\n      adhoc_filters,\n      time_range,\n    });\n    const filterOwnState = filter.dataMask?.ownState || {};\n    // TODO: We should try to improve our useEffect hooks to depend more on\n    // granular information instead of big objects that require deep comparison.\n    const customizer = (\n      objValue: Partial<QueryFormData>,\n      othValue: Partial<QueryFormData>,\n      key: string,\n    ) => (key === 'url_params' ? true : undefined);\n    if (\n      !isRefreshing &&\n      (!isEqualWith(formData, newFormData, customizer) ||\n        !isEqual(ownState, filterOwnState) ||\n        shouldRefresh)\n    ) {\n      setFormData(newFormData);\n      setOwnState(filterOwnState);\n      if (!hasDataSource) {\n        return;\n      }\n      setIsRefreshing(true);\n      getChartDataRequest({\n        formData: newFormData,\n        force: false,\n        requestParams: { dashboardId: 0 },\n        ownState: filterOwnState,\n      })\n        .then(({ response, json }) => {\n          if (isFeatureEnabled(FeatureFlag.GLOBAL_ASYNC_QUERIES)) {\n            // deal with getChartDataRequest transforming the response data\n            const result = 'result' in json ? json.result[0] : json;\n\n            if (response.status === 200) {\n              setState([result]);\n              handleFilterLoadFinish();\n            } else if (response.status === 202) {\n              waitForAsyncData(result)\n                .then((asyncResult: ChartDataResponseResult[]) => {\n                  setState(asyncResult);\n                  handleFilterLoadFinish();\n                })\n                .catch((error: ClientErrorObject) => {\n                  setError(\n                    error.message || error.error || t('Check configuration'),\n                  );\n                  handleFilterLoadFinish();\n                });\n            } else {\n              throw new Error(\n                `Received unexpected response status (${response.status}) while fetching chart data`,\n              );\n            }\n          } else {\n            setState(json.result);\n            setError('');\n            handleFilterLoadFinish();\n          }\n        })\n        .catch((error: Response) => {\n          setError(error.statusText);\n          handleFilterLoadFinish();\n        });\n    }\n  }, [\n    inViewFirstTime,\n    dependencies,\n    datasetId,\n    groupby,\n    handleFilterLoadFinish,\n    JSON.stringify(filter),\n    hasDataSource,\n    isRefreshing,\n    shouldRefresh,\n  ]);\n\n  useEffect(() => {\n    if (directPathToChild?.[0] === filter.id) {\n      inputRef?.current?.focus();\n    }\n  }, [inputRef, directPathToChild, filter.id]);\n\n  const setDataMask = useCallback(\n    (dataMask: DataMask) => onFilterSelectionChange(filter, dataMask),\n    [filter, onFilterSelectionChange],\n  );\n\n  const setFocusedFilter = useCallback(\n    () => dispatchFocusAction(dispatch, id),\n    [dispatch, id],\n  );\n  const unsetFocusedFilter = useCallback(\n    () => dispatchFocusAction(dispatch),\n    [dispatch],\n  );\n\n  const hooks = useMemo(\n    () => ({\n      setDataMask,\n      setFocusedFilter,\n      unsetFocusedFilter,\n      setFilterActive,\n    }),\n    [setDataMask, setFilterActive, setFocusedFilter, unsetFocusedFilter],\n  );\n\n  const isMissingRequiredValue = checkIsMissingRequiredValue(\n    filter,\n    filter.dataMask?.filterState,\n  );\n\n  const filterState = useMemo(\n    () => ({\n      ...filter.dataMask?.filterState,\n      validateStatus: isMissingRequiredValue && 'error',\n    }),\n    [filter.dataMask?.filterState, isMissingRequiredValue],\n  );\n\n  if (error) {\n    return (\n      <BasicErrorAlert\n        title={t('Cannot load filter')}\n        body={error}\n        level=\"error\"\n      />\n    );\n  }\n\n  return (\n    <StyledDiv data-test=\"form-item-value\">\n      {isLoading ? (\n        <Loading position=\"inline-centered\" />\n      ) : (\n        <SuperChart\n          height={HEIGHT}\n          width=\"100%\"\n          showOverflow={showOverflow}\n          formData={formData}\n          parentRef={parentRef}\n          inputRef={inputRef}\n          // For charts that don't have datasource we need workaround for empty placeholder\n          queriesData={hasDataSource ? state : queriesDataPlaceholder}\n          chartType={filterType}\n          behaviors={behaviors}\n          filterState={filterState}\n          ownState={filter.dataMask?.ownState}\n          enableNoResults={metadata?.enableNoResults}\n          isRefreshing={isRefreshing}\n          hooks={hooks}\n        />\n      )}\n    </StyledDiv>\n  );\n};\nexport default FilterValue;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  DataMaskStateWithId,\n  ensureIsArray,\n  ExtraFormData,\n} from '@superset-ui/core';\nimport { mergeExtraFormData } from '../../utils';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function useFilterDependencies(\n  id: string,\n  dataMaskSelected?: DataMaskStateWithId,\n): ExtraFormData {\n  const dependencyIds = useSelector<any, string[] | undefined>(\n    state => state.nativeFilters.filters[id]?.cascadeParentIds,\n  );\n  return useMemo(() => {\n    let dependencies = {};\n    ensureIsArray(dependencyIds).forEach(parentId => {\n      const parentState = dataMaskSelected?.[parentId];\n      dependencies = mergeExtraFormData(\n        dependencies,\n        parentState?.extraFormData,\n      );\n    });\n    return dependencies;\n  }, [dataMaskSelected, dependencyIds]);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Filter, t } from '@superset-ui/core';\nimport { useSelector } from 'react-redux';\nimport {\n  ChartsState,\n  Layout,\n  LayoutItem,\n  RootState,\n} from 'src/dashboard/types';\nimport { DASHBOARD_ROOT_ID } from 'src/dashboard/util/constants';\nimport { CHART_TYPE } from 'src/dashboard/util/componentTypes';\nimport { useMemo } from 'react';\n\nconst extractTabLabel = (tab?: LayoutItem) =>\n  tab?.meta?.text || tab?.meta?.defaultText || '';\nconst extractChartLabel = (chart?: LayoutItem) =>\n  chart?.meta?.sliceNameOverride || chart?.meta?.sliceName || chart?.id || '';\n\nconst useCharts = () => {\n  const charts = useSelector<RootState, ChartsState>(state => state.charts);\n  return useMemo(() => Object.values(charts), [charts]);\n};\n\nexport const useFilterScope = (filter: Filter) => {\n  const layout = useSelector<RootState, Layout>(\n    state => state.dashboardLayout.present,\n  );\n  const charts = useCharts();\n\n  return useMemo(() => {\n    let topLevelTabs: string[] | undefined;\n    const topElementId = layout[DASHBOARD_ROOT_ID].children[0];\n    if (topElementId.startsWith('TABS-')) {\n      topLevelTabs = layout[topElementId].children;\n    }\n\n    // no charts in scope\n    if (filter.scope.rootPath.length === 0) {\n      return undefined;\n    }\n\n    // all charts in scope\n    // no charts excluded and no top level tabs\n    // OR no charts excluded and every top level tab is in rootPath\n    if (\n      filter.scope.excluded.length === 0 &&\n      (filter.scope.rootPath[0] === DASHBOARD_ROOT_ID ||\n        (topLevelTabs &&\n          topLevelTabs.every(topLevelTab =>\n            filter.scope.rootPath.includes(topLevelTab),\n          )))\n    ) {\n      return { all: [t('All charts')] };\n    }\n\n    // no charts excluded and not every top level tab in scope\n    // returns \"TAB1, TAB2\"\n    if (filter.scope.excluded.length === 0 && topLevelTabs) {\n      return {\n        tabs: filter.scope.rootPath\n          .map(tabId => extractTabLabel(layout[tabId]))\n          .filter(Boolean),\n      };\n    }\n\n    const layoutCharts = Object.values(layout).filter(\n      layoutElement => layoutElement.type === CHART_TYPE,\n    );\n\n    // no top level tabs, charts excluded\n    // returns \"CHART1, CHART2\"\n    if (filter.scope.rootPath[0] === DASHBOARD_ROOT_ID) {\n      return {\n        charts: charts\n          .filter(chart => !filter.scope.excluded.includes(chart.id))\n          .map(chart => {\n            const layoutElement = layoutCharts.find(\n              layoutChart => layoutChart.meta.chartId === chart.id,\n            );\n            return extractChartLabel(layoutElement);\n          })\n          .filter(Boolean),\n      };\n    }\n\n    // top level tabs, charts excluded\n    // returns \"TAB1, TAB2, CHART1\"\n    if (topLevelTabs) {\n      // We start assuming that all charts are in scope for all tabs in the root path\n      const topLevelTabsInFullScope = [...filter.scope.rootPath];\n      const layoutChartElementsInTabsInScope = layoutCharts.filter(element =>\n        element.parents.some(parent =>\n          topLevelTabsInFullScope.includes(parent),\n        ),\n      );\n      // Exclude the tabs that contain excluded charts\n      filter.scope.excluded.forEach(chartId => {\n        const excludedIndex = topLevelTabsInFullScope.findIndex(tabId =>\n          layoutChartElementsInTabsInScope\n            .find(chart => chart.meta.chartId === chartId)\n            ?.parents.includes(tabId),\n        );\n        if (excludedIndex > -1) {\n          topLevelTabsInFullScope.splice(excludedIndex, 1);\n        }\n      });\n      // Handle charts that are in scope but belong to excluded tabs.\n      const chartsInExcludedTabs = charts\n        .filter(chart => !filter.scope.excluded.includes(chart.id))\n        .reduce((acc: LayoutItem[], chart) => {\n          const layoutChartElementInExcludedTab =\n            layoutChartElementsInTabsInScope.find(\n              element =>\n                element.meta.chartId === chart.id &&\n                element.parents.every(\n                  parent => !topLevelTabsInFullScope.includes(parent),\n                ),\n            );\n          if (layoutChartElementInExcludedTab) {\n            acc.push(layoutChartElementInExcludedTab);\n          }\n          return acc;\n        }, []);\n      // Join tab names and chart names\n      return {\n        tabs: topLevelTabsInFullScope\n          .map(tabId => extractTabLabel(layout[tabId]))\n          .filter(Boolean),\n        charts: chartsInExcludedTabs.map(extractChartLabel).filter(Boolean),\n      };\n    }\n\n    return undefined;\n  }, [charts, filter.scope.excluded, filter.scope.rootPath, layout]);\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { css, styled } from '@superset-ui/core';\n\nexport const Row = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    align-items: center;\n    margin: ${theme.gridUnit}px 0;\n    font-size: ${theme.typography.sizes.s}px;\n\n    &:first-of-type {\n      margin-top: 0;\n    }\n\n    &:last-of-type {\n      margin-bottom: 0;\n    }\n\n    & .ant-tooltip-open {\n      display: inline-flex;\n    }\n  `};\n`;\n\nexport const RowLabel = styled.span`\n  ${({ theme }) => css`\n    color: ${theme.colors.grayscale.base};\n    padding-right: ${theme.gridUnit * 4}px;\n    margin-right: auto;\n    text-transform: uppercase;\n    white-space: nowrap;\n  `};\n`;\n\nexport const RowValue = styled.div`\n  ${({ theme }) => css`\n    color: ${theme.colors.grayscale.dark1};\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    display: inline;\n  `};\n`;\n\nexport const FilterName = styled.span`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nexport const DependencyItem = styled.span`\n  text-decoration: underline;\n  cursor: pointer;\n`;\n\nexport const RowTruncationCount = styled.span`\n  ${({ theme }) => css`\n    color: ${theme.colors.primary.base};\n  `}\n`;\n\nexport const TooltipList = styled.ul`\n  ${({ theme }) => css`\n    padding-left: ${theme.gridUnit * 3}px;\n    margin-bottom: 0;\n  `};\n`;\n\nexport const TooltipSectionLabel = styled.span`\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n`;\n\nexport const TooltipTrigger = styled.div`\n  min-width: 0;\n  display: inline-flex;\n  white-space: nowrap;\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { RefObject, useLayoutEffect, useState, useRef } from 'react';\n\nexport const useTruncation = (elementRef: RefObject<HTMLElement>) => {\n  const [elementsTruncated, setElementsTruncated] = useState(0);\n  const [hasHiddenElements, setHasHiddenElements] = useState(false);\n\n  const previousEffectInfoRef = useRef({\n    scrollWidth: 0,\n    parentElementWidth: 0,\n  });\n\n  useLayoutEffect(() => {\n    const currentElement = elementRef.current;\n    if (!currentElement) {\n      return;\n    }\n\n    const { scrollWidth, clientWidth, childNodes } = currentElement;\n\n    // By using the result of this effect to truncate content\n    // we're effectively changing it's size.\n    // That will trigger another pass at this effect.\n    // Depending on the content elements width, that second rerender could\n    // yield a different truncate count, thus potentially leading to a\n    // rendering loop.\n    // There's only a need to recompute if the parent width or the width of\n    // the child nodes changes.\n    const previousEffectInfo = previousEffectInfoRef.current;\n    const parentElementWidth = currentElement.parentElement?.clientWidth || 0;\n    previousEffectInfoRef.current = {\n      scrollWidth,\n      parentElementWidth,\n    };\n\n    if (\n      previousEffectInfo.parentElementWidth === parentElementWidth &&\n      previousEffectInfo.scrollWidth === scrollWidth\n    ) {\n      return;\n    }\n\n    if (scrollWidth > clientWidth) {\n      // \"...\" is around 6px wide\n      const maxWidth = clientWidth - 6;\n      const elementsCount = childNodes.length;\n      let width = 0;\n      let i = 0;\n      while (width < maxWidth) {\n        width += (childNodes[i] as HTMLElement).offsetWidth;\n        i += 1;\n      }\n      if (i === elementsCount) {\n        setElementsTruncated(1);\n        setHasHiddenElements(false);\n      } else {\n        setElementsTruncated(elementsCount - i);\n        setHasHiddenElements(true);\n      }\n    } else {\n      setElementsTruncated(0);\n    }\n  }, [\n    elementRef.current?.offsetWidth,\n    elementRef.current?.clientWidth,\n    elementRef,\n  ]);\n\n  return [elementsTruncated, hasHiddenElements];\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { TooltipProps } from 'antd/lib/tooltip';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { TooltipTrigger } from './Styles';\n\nexport const TooltipWithTruncation = ({\n  title,\n  children,\n  ...props\n}: TooltipProps) => (\n  <Tooltip\n    title={title}\n    placement=\"bottom\"\n    overlayClassName=\"filter-card-tooltip\"\n    {...props}\n  >\n    <TooltipTrigger>{children}</TooltipTrigger>\n  </Tooltip>\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo, useRef } from 'react';\nimport { t } from '@superset-ui/core';\nimport { useFilterScope } from './useFilterScope';\nimport {\n  Row,\n  RowLabel,\n  RowTruncationCount,\n  RowValue,\n  TooltipList,\n  TooltipSectionLabel,\n} from './Styles';\nimport { useTruncation } from './useTruncation';\nimport { FilterCardRowProps } from './types';\nimport { TooltipWithTruncation } from './TooltipWithTruncation';\n\nconst getTooltipSection = (items: string[] | undefined, label: string) =>\n  Array.isArray(items) && items.length > 0 ? (\n    <>\n      <TooltipSectionLabel>{label}:</TooltipSectionLabel>\n      <TooltipList>\n        {items.map(item => (\n          <li>{item}</li>\n        ))}\n      </TooltipList>\n    </>\n  ) : null;\n\nexport const ScopeRow = React.memo(({ filter }: FilterCardRowProps) => {\n  const scope = useFilterScope(filter);\n  const scopeRef = useRef<HTMLDivElement>(null);\n\n  const [elementsTruncated, hasHiddenElements] = useTruncation(scopeRef);\n  const tooltipText = useMemo(() => {\n    if (elementsTruncated === 0 || !scope) {\n      return null;\n    }\n    if (scope.all) {\n      return <span>{t('All charts')}</span>;\n    }\n    return (\n      <div>\n        {getTooltipSection(scope.tabs, t('Tabs'))}\n        {getTooltipSection(scope.charts, t('Charts'))}\n      </div>\n    );\n  }, [elementsTruncated, scope]);\n\n  return (\n    <Row>\n      <RowLabel>{t('Scope')}</RowLabel>\n      <TooltipWithTruncation title={tooltipText}>\n        <RowValue ref={scopeRef}>\n          {scope\n            ? Object.values(scope)\n                .flat()\n                .map((element, index) => (\n                  <span>{index === 0 ? element : `, ${element}`}</span>\n                ))\n            : t('None')}\n        </RowValue>\n        {hasHiddenElements > 0 && (\n          <RowTruncationCount>+{elementsTruncated}</RowTruncationCount>\n        )}\n      </TooltipWithTruncation>\n    </Row>\n  );\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { css, t, useTheme } from '@superset-ui/core';\nimport { setDirectPathToChild } from 'src/dashboard/actions/dashboardState';\nimport Icons from 'src/components/Icons';\nimport {\n  DependencyItem,\n  Row,\n  RowLabel,\n  RowTruncationCount,\n  RowValue,\n  TooltipList,\n} from './Styles';\nimport { useFilterDependencies } from './useFilterDependencies';\nimport { useTruncation } from './useTruncation';\nimport { DependencyValueProps, FilterCardRowProps } from './types';\nimport { TooltipWithTruncation } from './TooltipWithTruncation';\n\nconst DependencyValue = ({\n  dependency,\n  hasSeparator,\n}: DependencyValueProps) => {\n  const dispatch = useDispatch();\n  const handleClick = useCallback(() => {\n    dispatch(setDirectPathToChild([dependency.id]));\n  }, [dependency.id, dispatch]);\n  return (\n    <span>\n      {hasSeparator && <span>, </span>}\n      <DependencyItem role=\"button\" onClick={handleClick} tabIndex={0}>\n        {dependency.name}\n      </DependencyItem>\n    </span>\n  );\n};\n\nexport const DependenciesRow = React.memo(({ filter }: FilterCardRowProps) => {\n  const dependencies = useFilterDependencies(filter);\n  const dependenciesRef = useRef<HTMLDivElement>(null);\n  const [elementsTruncated, hasHiddenElements] = useTruncation(dependenciesRef);\n  const theme = useTheme();\n\n  const tooltipText = useMemo(\n    () =>\n      elementsTruncated > 0 && dependencies ? (\n        <TooltipList>\n          {dependencies.map(dependency => (\n            <li>\n              <DependencyValue dependency={dependency} />\n            </li>\n          ))}\n        </TooltipList>\n      ) : null,\n    [elementsTruncated, dependencies],\n  );\n\n  if (!Array.isArray(dependencies) || dependencies.length === 0) {\n    return null;\n  }\n  return (\n    <Row>\n      <RowLabel\n        css={css`\n          display: inline-flex;\n          align-items: center;\n        `}\n      >\n        {t('Dependent on')}{' '}\n        <TooltipWithTruncation\n          title={t(\n            'Filter only displays values relevant to selections made in other filters.',\n          )}\n        >\n          <Icons.Info\n            iconSize=\"m\"\n            iconColor={theme.colors.grayscale.light1}\n            css={css`\n              margin-left: ${theme.gridUnit}px;\n            `}\n          />\n        </TooltipWithTruncation>\n      </RowLabel>\n      <TooltipWithTruncation title={tooltipText}>\n        <RowValue ref={dependenciesRef}>\n          {dependencies.map((dependency, index) => (\n            <DependencyValue\n              dependency={dependency}\n              hasSeparator={index !== 0}\n            />\n          ))}\n        </RowValue>\n        {hasHiddenElements && (\n          <RowTruncationCount>+{elementsTruncated}</RowTruncationCount>\n        )}\n      </TooltipWithTruncation>\n    </Row>\n  );\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ensureIsArray, Filter } from '@superset-ui/core';\nimport { useSelector } from 'react-redux';\nimport { RootState } from 'src/dashboard/types';\n\nexport const useFilterDependencies = (filter: Filter) => {\n  const filterDependencyIds = ensureIsArray(filter.cascadeParentIds);\n  return useSelector<RootState, Filter[]>(state => {\n    if (filterDependencyIds.length === 0) {\n      return [];\n    }\n    return filterDependencyIds.reduce((acc: Filter[], filterDependencyId) => {\n      acc.push(state.nativeFilters.filters[filterDependencyId] as Filter);\n      return acc;\n    }, []);\n  });\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useRef } from 'react';\nimport { css, SupersetTheme } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { Row, FilterName } from './Styles';\nimport { FilterCardRowProps } from './types';\nimport { useTruncation } from './useTruncation';\nimport { TooltipWithTruncation } from './TooltipWithTruncation';\n\nexport const NameRow = ({ filter }: FilterCardRowProps) => {\n  const filterNameRef = useRef<HTMLElement>(null);\n  const [elementsTruncated] = useTruncation(filterNameRef);\n  return (\n    <Row\n      css={(theme: SupersetTheme) =>\n        css`\n          margin-bottom: ${theme.gridUnit * 3}px;\n        `\n      }\n    >\n      <Icons.FilterSmall\n        css={(theme: SupersetTheme) =>\n          css`\n            margin-right: ${theme.gridUnit}px;\n          `\n        }\n      />\n      <TooltipWithTruncation title={elementsTruncated ? filter.name : null}>\n        <FilterName ref={filterNameRef}>{filter.name}</FilterName>\n      </TooltipWithTruncation>\n    </Row>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport { getChartMetadataRegistry, t } from '@superset-ui/core';\nimport { Row, RowLabel, RowValue } from './Styles';\nimport { FilterCardRowProps } from './types';\n\nexport const TypeRow = ({ filter }: FilterCardRowProps) => {\n  const metadata = useMemo(\n    () => getChartMetadataRegistry().get(filter.filterType),\n    [filter.filterType],\n  );\n  return (\n    <Row>\n      <RowLabel>{t('Filter type')}</RowLabel>\n      <RowValue>{metadata?.name}</RowValue>\n    </Row>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { Filter } from '@superset-ui/core';\nimport { ScopeRow } from './ScopeRow';\nimport { DependenciesRow } from './DependenciesRow';\nimport { NameRow } from './NameRow';\nimport { TypeRow } from './TypeRow';\n\nexport const FilterCardContent = ({ filter }: { filter: Filter }) => (\n  <div>\n    <NameRow filter={filter} />\n    <TypeRow filter={filter} />\n    <ScopeRow filter={filter} />\n    <DependenciesRow filter={filter} />\n  </div>\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Popover from 'src/components/Popover';\nimport { FilterCardContent } from './FilterCardContent';\nimport { FilterCardProps } from './types';\n\nexport const FilterCard = ({\n  children,\n  filter,\n  getPopupContainer,\n  isVisible: externalIsVisible = true,\n}: FilterCardProps) => {\n  const [internalIsVisible, setInternalIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (!externalIsVisible) {\n      setInternalIsVisible(false);\n    }\n  }, [externalIsVisible]);\n  return (\n    <Popover\n      placement=\"right\"\n      overlayClassName=\"filter-card-popover\"\n      mouseEnterDelay={0.2}\n      mouseLeaveDelay={0.2}\n      onVisibleChange={visible => {\n        setInternalIsVisible(externalIsVisible && visible);\n      }}\n      visible={externalIsVisible && internalIsVisible}\n      content={<FilterCardContent filter={filter} />}\n      getPopupContainer={getPopupContainer ?? (() => document.body)}\n      destroyTooltipOnHide\n    >\n      {children}\n    </Popover>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useContext, useMemo, useState } from 'react';\nimport { styled, SupersetTheme } from '@superset-ui/core';\nimport { FormItem as StyledFormItem, Form } from 'src/components/Form';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { checkIsMissingRequiredValue } from '../utils';\nimport FilterValue from './FilterValue';\nimport { FilterProps } from './types';\nimport { FilterCard } from '../../FilterCard';\nimport { FilterBarScrollContext } from '../index';\n\nconst StyledIcon = styled.div`\n  position: absolute;\n  right: 0;\n`;\n\nconst StyledFilterControlTitle = styled.h4`\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  color: ${({ theme }) => theme.colors.grayscale.dark1};\n  margin: 0;\n  overflow-wrap: break-word;\n`;\n\nconst StyledFilterControlTitleBox = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: ${({ theme }) => theme.gridUnit}px;\n`;\n\nconst StyledFilterControlContainer = styled(Form)`\n  width: 100%;\n  && .ant-form-item-label > label {\n    text-transform: none;\n    width: 100%;\n    padding-right: ${({ theme }) => theme.gridUnit * 11}px;\n  }\n  .ant-form-item-tooltip {\n    margin-bottom: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst FormItem = styled(StyledFormItem)`\n  .ant-form-item-label {\n    label.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n      &::after {\n        display: none;\n      }\n    }\n  }\n`;\n\nconst ToolTipContainer = styled.div`\n  font-size: ${({ theme }) => theme.typography.sizes.m}px;\n  display: flex;\n`;\n\nconst RequiredFieldIndicator = () => (\n  <span\n    css={(theme: SupersetTheme) => ({\n      color: theme.colors.error.base,\n      fontSize: `${theme.typography.sizes.s}px`,\n      paddingLeft: '1px',\n    })}\n  >\n    *\n  </span>\n);\n\nconst DescriptionToolTip = ({ description }: { description: string }) => (\n  <ToolTipContainer>\n    <Tooltip\n      title={description}\n      placement=\"right\"\n      overlayInnerStyle={{\n        display: '-webkit-box',\n        overflow: 'hidden',\n        WebkitLineClamp: 20,\n        WebkitBoxOrient: 'vertical',\n        textOverflow: 'ellipsis',\n      }}\n    >\n      <i\n        className=\"fa fa-info-circle text-muted\"\n        css={(theme: SupersetTheme) => ({\n          paddingLeft: `${theme.gridUnit}px`,\n          cursor: 'pointer',\n        })}\n      />\n    </Tooltip>\n  </ToolTipContainer>\n);\n\nconst FilterControl: React.FC<FilterProps> = ({\n  dataMaskSelected,\n  filter,\n  icon,\n  onFilterSelectionChange,\n  directPathToChild,\n  inView,\n  showOverflow,\n  parentRef,\n}) => {\n  const [isFilterActive, setIsFilterActive] = useState(false);\n\n  const { name = '<undefined>' } = filter;\n\n  const isMissingRequiredValue = checkIsMissingRequiredValue(\n    filter,\n    filter.dataMask?.filterState,\n  );\n  const isRequired = !!filter.controlValues?.enableEmptyFilter;\n\n  const label = useMemo(\n    () => (\n      <StyledFilterControlTitleBox>\n        <StyledFilterControlTitle data-test=\"filter-control-name\">\n          {name}\n        </StyledFilterControlTitle>\n        {isRequired && <RequiredFieldIndicator />}\n        {filter.description && filter.description.trim() && (\n          <DescriptionToolTip description={filter.description} />\n        )}\n        <StyledIcon data-test=\"filter-icon\">{icon}</StyledIcon>\n      </StyledFilterControlTitleBox>\n    ),\n    [name, isRequired, filter.description, icon],\n  );\n\n  const isScrolling = useContext(FilterBarScrollContext);\n\n  return (\n    <StyledFilterControlContainer layout=\"vertical\">\n      <FilterCard filter={filter} isVisible={!isFilterActive && !isScrolling}>\n        <div>\n          <FormItem\n            label={label}\n            required={filter?.controlValues?.enableEmptyFilter}\n            validateStatus={isMissingRequiredValue ? 'error' : undefined}\n          >\n            <FilterValue\n              dataMaskSelected={dataMaskSelected}\n              filter={filter}\n              showOverflow={showOverflow}\n              directPathToChild={directPathToChild}\n              onFilterSelectionChange={onFilterSelectionChange}\n              inView={inView}\n              parentRef={parentRef}\n              setFilterActive={setIsFilterActive}\n            />\n          </FormItem>\n        </div>\n      </FilterCard>\n    </StyledFilterControlContainer>\n  );\n};\n\nexport default React.memo(FilterControl);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FC, useCallback, useMemo } from 'react';\nimport { css } from '@emotion/react';\nimport {\n  DataMask,\n  DataMaskStateWithId,\n  Filter,\n  isFilterDivider,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport {\n  createHtmlPortalNode,\n  InPortal,\n  OutPortal,\n} from 'react-reverse-portal';\nimport { AntdCollapse } from 'src/components';\nimport {\n  useDashboardHasTabs,\n  useSelectFiltersInScope,\n} from 'src/dashboard/components/nativeFilters/state';\nimport { useFilters } from '../state';\nimport FilterControl from './FilterControl';\n\nconst Wrapper = styled.div`\n  padding: ${({ theme }) => theme.gridUnit * 4}px;\n  // 108px padding to make room for buttons with position: absolute\n  padding-bottom: ${({ theme }) => theme.gridUnit * 27}px;\n`;\n\ntype FilterControlsProps = {\n  directPathToChild?: string[];\n  dataMaskSelected: DataMaskStateWithId;\n  onFilterSelectionChange: (filter: Filter, dataMask: DataMask) => void;\n};\n\nconst FilterControls: FC<FilterControlsProps> = ({\n  directPathToChild,\n  dataMaskSelected,\n  onFilterSelectionChange,\n}) => {\n  const filters = useFilters();\n  const filterValues = useMemo(() => Object.values(filters), [filters]);\n  const portalNodes = useMemo(() => {\n    const nodes = new Array(filterValues.length);\n    for (let i = 0; i < filterValues.length; i += 1) {\n      nodes[i] = createHtmlPortalNode();\n    }\n    return nodes;\n  }, [filterValues.length]);\n\n  const filtersWithValues = useMemo(\n    () =>\n      filterValues.map(filter => ({\n        ...filter,\n        dataMask: dataMaskSelected[filter.id],\n      })),\n    [filterValues, dataMaskSelected],\n  );\n  const filterIds = new Set(filtersWithValues.map(item => item.id));\n\n  const [filtersInScope, filtersOutOfScope] =\n    useSelectFiltersInScope(filtersWithValues);\n  const dashboardHasTabs = useDashboardHasTabs();\n  const showCollapsePanel = dashboardHasTabs && filtersWithValues.length > 0;\n\n  const filterControlFactory = useCallback(\n    index => {\n      const filter = filtersWithValues[index];\n      if (isFilterDivider(filter)) {\n        return (\n          <div>\n            <h3>{filter.title}</h3>\n            <p>{filter.description}</p>\n          </div>\n        );\n      }\n      return (\n        <FilterControl\n          dataMaskSelected={dataMaskSelected}\n          filter={filter}\n          directPathToChild={directPathToChild}\n          onFilterSelectionChange={onFilterSelectionChange}\n          inView={false}\n        />\n      );\n    },\n    [\n      filtersWithValues,\n      JSON.stringify(dataMaskSelected),\n      directPathToChild,\n      onFilterSelectionChange,\n    ],\n  );\n  return (\n    <Wrapper>\n      {portalNodes\n        .filter((node, index) => filterIds.has(filterValues[index].id))\n        .map((node, index) => (\n          <InPortal node={node}>{filterControlFactory(index)}</InPortal>\n        ))}\n      {filtersInScope.map(filter => {\n        const index = filterValues.findIndex(f => f.id === filter.id);\n        return <OutPortal node={portalNodes[index]} inView />;\n      })}\n      {showCollapsePanel && (\n        <AntdCollapse\n          ghost\n          bordered\n          expandIconPosition=\"right\"\n          collapsible={filtersOutOfScope.length === 0 ? 'disabled' : undefined}\n          css={theme => css`\n            &.ant-collapse {\n              margin-top: ${filtersInScope.length > 0\n                ? theme.gridUnit * 6\n                : 0}px;\n              & > .ant-collapse-item {\n                & > .ant-collapse-header {\n                  padding-left: 0;\n                  padding-bottom: ${theme.gridUnit * 2}px;\n\n                  & > .ant-collapse-arrow {\n                    right: ${theme.gridUnit}px;\n                  }\n                }\n\n                & .ant-collapse-content-box {\n                  padding: ${theme.gridUnit * 4}px 0 0;\n                }\n              }\n            }\n          `}\n        >\n          <AntdCollapse.Panel\n            header={t('Filters out of scope (%d)', filtersOutOfScope.length)}\n            key=\"1\"\n          >\n            {filtersOutOfScope.map(filter => {\n              const index = filtersWithValues.findIndex(\n                f => f.id === filter.id,\n              );\n              return <OutPortal node={portalNodes[index]} inView />;\n            })}\n          </AntdCollapse.Panel>\n        </AntdCollapse>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default React.memo(FilterControls);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo } from 'react';\nimport {\n  css,\n  DataMaskState,\n  DataMaskStateWithId,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport { isNullish } from 'src/utils/common';\nimport { OPEN_FILTER_BAR_WIDTH } from 'src/dashboard/constants';\nimport { rgba } from 'emotion-rgba';\nimport { getFilterBarTestId } from '../index';\n\ninterface ActionButtonsProps {\n  onApply: () => void;\n  onClearAll: () => void;\n  dataMaskSelected: DataMaskState;\n  dataMaskApplied: DataMaskStateWithId;\n  isApplyDisabled: boolean;\n}\n\nconst ActionButtonsContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    position: fixed;\n    z-index: 100;\n\n    // filter bar width minus 1px for border\n    width: ${OPEN_FILTER_BAR_WIDTH - 1}px;\n    bottom: 0;\n\n    padding: ${theme.gridUnit * 4}px;\n    padding-top: ${theme.gridUnit * 6}px;\n\n    background: linear-gradient(\n      ${rgba(theme.colors.grayscale.light5, 0)},\n      ${theme.colors.grayscale.light5} ${theme.opacity.mediumLight}\n    );\n\n    pointer-events: none;\n\n    & > button {\n      pointer-events: auto;\n    }\n\n    & > .filter-apply-button {\n      margin-bottom: ${theme.gridUnit * 3}px;\n    }\n\n    && > .filter-clear-all-button {\n      color: ${theme.colors.grayscale.base};\n      margin-left: 0;\n      &:hover {\n        color: ${theme.colors.primary.dark1};\n      }\n\n      &[disabled],\n      &[disabled]:hover {\n        color: ${theme.colors.grayscale.light1};\n      }\n    }\n  `};\n`;\n\nexport const ActionButtons = ({\n  onApply,\n  onClearAll,\n  dataMaskApplied,\n  dataMaskSelected,\n  isApplyDisabled,\n}: ActionButtonsProps) => {\n  const isClearAllEnabled = useMemo(\n    () =>\n      Object.values(dataMaskApplied).some(\n        filter =>\n          !isNullish(dataMaskSelected[filter.id]?.filterState?.value) ||\n          (!dataMaskSelected[filter.id] &&\n            !isNullish(filter.filterState?.value)),\n      ),\n    [dataMaskApplied, dataMaskSelected],\n  );\n\n  return (\n    <ActionButtonsContainer>\n      <Button\n        disabled={isApplyDisabled}\n        buttonStyle=\"primary\"\n        htmlType=\"submit\"\n        className=\"filter-apply-button\"\n        onClick={onApply}\n        {...getFilterBarTestId('apply-button')}\n      >\n        {t('Apply filters')}\n      </Button>\n      <Button\n        disabled={!isClearAllEnabled}\n        buttonStyle=\"link\"\n        buttonSize=\"small\"\n        className=\"filter-clear-all-button\"\n        onClick={onClearAll}\n        {...getFilterBarTestId('clear-button')}\n      >\n        {t('Clear all')}\n      </Button>\n    </ActionButtonsContainer>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint-disable no-param-reassign */\nimport throttle from 'lodash/throttle';\nimport React, {\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n  useRef,\n  createContext,\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport cx from 'classnames';\nimport {\n  DataMaskStateWithId,\n  DataMaskWithId,\n  Filter,\n  DataMask,\n  HandlerFunction,\n  styled,\n  t,\n  SLOW_DEBOUNCE,\n  isNativeFilter,\n} from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\nimport { AntdTabs } from 'src/components';\nimport { useHistory } from 'react-router-dom';\nimport { usePrevious } from 'src/hooks/usePrevious';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport { updateDataMask, clearDataMask } from 'src/dataMask/actions';\nimport { useImmer } from 'use-immer';\nimport { isEmpty, isEqual, debounce } from 'lodash';\nimport { testWithId } from 'src/utils/testUtils';\nimport Loading from 'src/components/Loading';\nimport { getInitialDataMask } from 'src/dataMask/reducer';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { EmptyStateSmall } from 'src/components/EmptyState';\nimport { useTabId } from 'src/hooks/useTabId';\nimport { RootState } from 'src/dashboard/types';\nimport { checkIsApplyDisabled, TabIds } from './utils';\nimport FilterSets from './FilterSets';\nimport {\n  useNativeFiltersDataMask,\n  useFilters,\n  useFilterSets,\n  useFilterUpdates,\n  useInitialization,\n} from './state';\nimport { createFilterKey, updateFilterKey } from './keyValue';\nimport EditSection from './FilterSets/EditSection';\nimport Header from './Header';\nimport FilterControls from './FilterControls/FilterControls';\nimport { ActionButtons } from './ActionButtons';\n\nexport const FILTER_BAR_TEST_ID = 'filter-bar';\nexport const getFilterBarTestId = testWithId(FILTER_BAR_TEST_ID);\n\nconst BarWrapper = styled.div<{ width: number }>`\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n\n  & .ant-tabs-top > .ant-tabs-nav {\n    margin: 0;\n  }\n  &.open {\n    width: ${({ width }) => width}px; // arbitrary...\n  }\n`;\n\nconst Bar = styled.div<{ width: number }>`\n  & .ant-typography-edit-content {\n    left: 0;\n    margin-top: 0;\n    width: 100%;\n  }\n  position: absolute;\n  top: 0;\n  left: 0;\n  flex-direction: column;\n  flex-grow: 1;\n  width: ${({ width }) => width}px;\n  background: ${({ theme }) => theme.colors.grayscale.light5};\n  border-right: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  border-bottom: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  min-height: 100%;\n  display: none;\n  &.open {\n    display: flex;\n  }\n`;\n\nconst CollapsedBar = styled.div<{ offset: number }>`\n  position: absolute;\n  top: ${({ offset }) => offset}px;\n  left: 0;\n  height: 100%;\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\n  display: none;\n  text-align: center;\n  &.open {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n  svg {\n    cursor: pointer;\n  }\n`;\n\nconst StyledCollapseIcon = styled(Icons.Collapse)`\n  color: ${({ theme }) => theme.colors.primary.base};\n  margin-bottom: ${({ theme }) => theme.gridUnit * 3}px;\n`;\n\nconst StyledFilterIcon = styled(Icons.Filter)`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst StyledTabs = styled(AntdTabs)`\n  & .ant-tabs-nav-list {\n    width: 100%;\n  }\n  & .ant-tabs-tab {\n    display: flex;\n    justify-content: center;\n    margin: 0;\n    flex: 1;\n  }\n\n  & > .ant-tabs-nav .ant-tabs-nav-operations {\n    display: none;\n  }\n`;\n\nconst FilterBarEmptyStateContainer = styled.div`\n  margin-top: ${({ theme }) => theme.gridUnit * 8}px;\n`;\n\nexport interface FiltersBarProps {\n  filtersOpen: boolean;\n  toggleFiltersBar: any;\n  directPathToChild?: string[];\n  width: number;\n  height: number | string;\n  offset: number;\n}\n\nconst EXCLUDED_URL_PARAMS: string[] = [\n  URL_PARAMS.nativeFilters.name,\n  URL_PARAMS.permalinkKey.name,\n];\n\nconst publishDataMask = debounce(\n  async (\n    history,\n    dashboardId,\n    updateKey,\n    dataMaskSelected: DataMaskStateWithId,\n    tabId,\n  ) => {\n    const { location } = history;\n    const { search } = location;\n    const previousParams = new URLSearchParams(search);\n    const newParams = new URLSearchParams();\n    let dataMaskKey: string | null;\n    previousParams.forEach((value, key) => {\n      if (!EXCLUDED_URL_PARAMS.includes(key)) {\n        newParams.append(key, value);\n      }\n    });\n\n    const nativeFiltersCacheKey = getUrlParam(URL_PARAMS.nativeFiltersKey);\n    const dataMask = JSON.stringify(dataMaskSelected);\n    if (\n      updateKey &&\n      nativeFiltersCacheKey &&\n      (await updateFilterKey(\n        dashboardId,\n        dataMask,\n        nativeFiltersCacheKey,\n        tabId,\n      ))\n    ) {\n      dataMaskKey = nativeFiltersCacheKey;\n    } else {\n      dataMaskKey = await createFilterKey(dashboardId, dataMask, tabId);\n    }\n    if (dataMaskKey) {\n      newParams.set(URL_PARAMS.nativeFiltersKey.name, dataMaskKey);\n    }\n\n    // pathname could be updated somewhere else through window.history\n    // keep react router history in sync with window history\n    history.location.pathname = window.location.pathname;\n    history.replace({\n      search: newParams.toString(),\n    });\n  },\n  SLOW_DEBOUNCE,\n);\n\nexport const FilterBarScrollContext = createContext(false);\nconst FilterBar: React.FC<FiltersBarProps> = ({\n  filtersOpen,\n  toggleFiltersBar,\n  directPathToChild,\n  width,\n  height,\n  offset,\n}) => {\n  const history = useHistory();\n  const dataMaskApplied: DataMaskStateWithId = useNativeFiltersDataMask();\n  const [editFilterSetId, setEditFilterSetId] = useState<number | null>(null);\n  const [dataMaskSelected, setDataMaskSelected] =\n    useImmer<DataMaskStateWithId>(dataMaskApplied);\n  const dispatch = useDispatch();\n  const [updateKey, setUpdateKey] = useState(0);\n  const tabId = useTabId();\n  const filterSets = useFilterSets();\n  const filterSetFilterValues = Object.values(filterSets);\n  const [tab, setTab] = useState(TabIds.AllFilters);\n  const filters = useFilters();\n  const previousFilters = usePrevious(filters);\n  const filterValues = Object.values(filters);\n  const nativeFilterValues = filterValues.filter(isNativeFilter);\n  const dashboardId = useSelector<any, string>(\n    ({ dashboardInfo }) => dashboardInfo?.id,\n  );\n  const canEdit = useSelector<RootState, boolean>(\n    ({ dashboardInfo }) => dashboardInfo.dash_edit_perm,\n  );\n\n  const [isScrolling, setIsScrolling] = useState(false);\n  const timeout = useRef<any>();\n\n  const handleFilterSelectionChange = useCallback(\n    (\n      filter: Pick<Filter, 'id'> & Partial<Filter>,\n      dataMask: Partial<DataMask>,\n    ) => {\n      setDataMaskSelected(draft => {\n        // force instant updating on initialization for filters with `requiredFirst` is true or instant filters\n        if (\n          // filterState.value === undefined - means that value not initialized\n          dataMask.filterState?.value !== undefined &&\n          dataMaskSelected[filter.id]?.filterState?.value === undefined &&\n          filter.requiredFirst\n        ) {\n          dispatch(updateDataMask(filter.id, dataMask));\n        }\n\n        draft[filter.id] = {\n          ...(getInitialDataMask(filter.id) as DataMaskWithId),\n          ...dataMask,\n        };\n      });\n    },\n    [dataMaskSelected, dispatch, setDataMaskSelected],\n  );\n\n  useEffect(() => {\n    if (previousFilters) {\n      const updates = {};\n      Object.values(filters).forEach(currentFilter => {\n        const previousFilter = previousFilters?.[currentFilter.id];\n        if (!previousFilter) {\n          return;\n        }\n        const currentType = currentFilter.filterType;\n        const currentTargets = currentFilter.targets;\n        const currentDataMask = currentFilter.defaultDataMask;\n        const previousType = previousFilter?.filterType;\n        const previousTargets = previousFilter?.targets;\n        const previousDataMask = previousFilter?.defaultDataMask;\n        const typeChanged = currentType !== previousType;\n        const targetsChanged = !isEqual(currentTargets, previousTargets);\n        const dataMaskChanged = !isEqual(currentDataMask, previousDataMask);\n\n        if (typeChanged || targetsChanged || dataMaskChanged) {\n          updates[currentFilter.id] = getInitialDataMask(currentFilter.id);\n        }\n      });\n\n      if (!isEmpty(updates)) {\n        setDataMaskSelected(draft => ({ ...draft, ...updates }));\n        Object.keys(updates).forEach(key => dispatch(clearDataMask(key)));\n      }\n    }\n  }, [JSON.stringify(filters), JSON.stringify(previousFilters)]);\n\n  const dataMaskAppliedText = JSON.stringify(dataMaskApplied);\n\n  useEffect(() => {\n    setDataMaskSelected(() => dataMaskApplied);\n  }, [dataMaskAppliedText, setDataMaskSelected]);\n\n  useEffect(() => {\n    publishDataMask(history, dashboardId, updateKey, dataMaskApplied, tabId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dashboardId, dataMaskAppliedText, history, updateKey, tabId]);\n\n  const handleApply = useCallback(() => {\n    const filterIds = Object.keys(dataMaskSelected);\n    setUpdateKey(1);\n    filterIds.forEach(filterId => {\n      if (dataMaskSelected[filterId]) {\n        dispatch(updateDataMask(filterId, dataMaskSelected[filterId]));\n      }\n    });\n  }, [dataMaskSelected, dispatch]);\n\n  const handleClearAll = useCallback(() => {\n    const filterIds = Object.keys(dataMaskSelected);\n    filterIds.forEach(filterId => {\n      if (dataMaskSelected[filterId]) {\n        dispatch(clearDataMask(filterId));\n        setDataMaskSelected(draft => {\n          if (draft[filterId].filterState?.value !== undefined) {\n            draft[filterId].filterState!.value = undefined;\n          }\n        });\n      }\n    });\n  }, [dataMaskSelected, dispatch, setDataMaskSelected]);\n\n  const openFiltersBar = useCallback(\n    () => toggleFiltersBar(true),\n    [toggleFiltersBar],\n  );\n\n  const onScroll = useCallback(\n    throttle(() => {\n      clearTimeout(timeout.current);\n      setIsScrolling(true);\n      timeout.current = setTimeout(() => {\n        setIsScrolling(false);\n      }, 300);\n    }, 200),\n    [],\n  );\n\n  useEffect(() => {\n    document.onscroll = onScroll;\n    return () => {\n      document.onscroll = null;\n    };\n  }, [onScroll]);\n\n  useFilterUpdates(dataMaskSelected, setDataMaskSelected);\n  const isApplyDisabled = checkIsApplyDisabled(\n    dataMaskSelected,\n    dataMaskApplied,\n    nativeFilterValues,\n  );\n  const isInitialized = useInitialization();\n  const tabPaneStyle = useMemo(\n    () => ({ overflow: 'auto', height, overscrollBehavior: 'contain' }),\n    [height],\n  );\n\n  const numberOfFilters = nativeFilterValues.length;\n\n  return (\n    <FilterBarScrollContext.Provider value={isScrolling}>\n      <BarWrapper\n        {...getFilterBarTestId()}\n        className={cx({ open: filtersOpen })}\n        width={width}\n      >\n        <CollapsedBar\n          {...getFilterBarTestId('collapsable')}\n          className={cx({ open: !filtersOpen })}\n          onClick={openFiltersBar}\n          offset={offset}\n        >\n          <StyledCollapseIcon\n            {...getFilterBarTestId('expand-button')}\n            iconSize=\"l\"\n          />\n          <StyledFilterIcon\n            {...getFilterBarTestId('filter-icon')}\n            iconSize=\"l\"\n          />\n        </CollapsedBar>\n        <Bar className={cx({ open: filtersOpen })} width={width}>\n          <Header toggleFiltersBar={toggleFiltersBar} />\n          {!isInitialized ? (\n            <div css={{ height }}>\n              <Loading />\n            </div>\n          ) : isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS_SET) ? (\n            <StyledTabs\n              centered\n              onChange={setTab as HandlerFunction}\n              defaultActiveKey={TabIds.AllFilters}\n              activeKey={editFilterSetId ? TabIds.AllFilters : undefined}\n            >\n              <AntdTabs.TabPane\n                tab={t('All filters (%(filterCount)d)', {\n                  filterCount: numberOfFilters,\n                })}\n                key={TabIds.AllFilters}\n                css={tabPaneStyle}\n              >\n                {editFilterSetId && (\n                  <EditSection\n                    dataMaskSelected={dataMaskSelected}\n                    disabled={!isApplyDisabled}\n                    onCancel={() => setEditFilterSetId(null)}\n                    filterSetId={editFilterSetId}\n                  />\n                )}\n                {filterValues.length === 0 ? (\n                  <FilterBarEmptyStateContainer>\n                    <EmptyStateSmall\n                      title={t('No filters are currently added')}\n                      image=\"filter.svg\"\n                      description={\n                        canEdit &&\n                        t(\n                          'Click the button above to add a filter to the dashboard',\n                        )\n                      }\n                    />\n                  </FilterBarEmptyStateContainer>\n                ) : (\n                  <FilterControls\n                    dataMaskSelected={dataMaskSelected}\n                    directPathToChild={directPathToChild}\n                    onFilterSelectionChange={handleFilterSelectionChange}\n                  />\n                )}\n              </AntdTabs.TabPane>\n              <AntdTabs.TabPane\n                disabled={!!editFilterSetId}\n                tab={t('Filter sets (%(filterSetCount)d)', {\n                  filterSetCount: filterSetFilterValues.length,\n                })}\n                key={TabIds.FilterSets}\n                css={tabPaneStyle}\n              >\n                <FilterSets\n                  onEditFilterSet={setEditFilterSetId}\n                  disabled={!isApplyDisabled}\n                  dataMaskSelected={dataMaskSelected}\n                  tab={tab}\n                  onFilterSelectionChange={handleFilterSelectionChange}\n                />\n              </AntdTabs.TabPane>\n            </StyledTabs>\n          ) : (\n            <div css={tabPaneStyle} onScroll={onScroll}>\n              {filterValues.length === 0 ? (\n                <FilterBarEmptyStateContainer>\n                  <EmptyStateSmall\n                    title={t('No filters are currently added')}\n                    image=\"filter.svg\"\n                    description={\n                      canEdit &&\n                      t(\n                        'Click the button above to add a filter to the dashboard',\n                      )\n                    }\n                  />\n                </FilterBarEmptyStateContainer>\n              ) : (\n                <FilterControls\n                  dataMaskSelected={dataMaskSelected}\n                  directPathToChild={directPathToChild}\n                  onFilterSelectionChange={handleFilterSelectionChange}\n                />\n              )}\n            </div>\n          )}\n          <ActionButtons\n            onApply={handleApply}\n            onClearAll={handleClearAll}\n            dataMaskSelected={dataMaskSelected}\n            dataMaskApplied={dataMaskApplied}\n            isApplyDisabled={isApplyDisabled}\n          />\n        </Bar>\n      </BarWrapper>\n    </FilterBarScrollContext.Provider>\n  );\n};\nexport default React.memo(FilterBar);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DASHBOARD_GRID_ID,\n  DASHBOARD_ROOT_ID,\n} from 'src/dashboard/util/constants';\nimport { DashboardLayout } from 'src/dashboard/types';\nimport findTabIndexByComponentId from 'src/dashboard/util/findTabIndexByComponentId';\n\nexport const getRootLevelTabsComponent = (dashboardLayout: DashboardLayout) => {\n  const dashboardRoot = dashboardLayout[DASHBOARD_ROOT_ID];\n  const rootChildId = dashboardRoot?.children[0];\n  return rootChildId === DASHBOARD_GRID_ID\n    ? dashboardLayout[DASHBOARD_ROOT_ID]\n    : dashboardLayout[rootChildId];\n};\n\nexport const shouldFocusTabs = (\n  event: { target: { className: string } },\n  container: { contains: (arg0: any) => any },\n) =>\n  // don't focus the tabs when we click on a tab\n  event.target.className === 'ant-tabs-nav-wrap' ||\n  container.contains(event.target);\n\nexport const getRootLevelTabIndex = (\n  dashboardLayout: DashboardLayout,\n  directPathToChild: string[],\n): number =>\n  Math.max(\n    0,\n    findTabIndexByComponentId({\n      currentComponent: getRootLevelTabsComponent(dashboardLayout),\n      directPathToChild,\n    }),\n  );\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { styled, t } from '@superset-ui/core';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport { componentShape } from '../util/propShapes';\nimport DashboardComponent from '../containers/DashboardComponent';\nimport DragDroppable from './dnd/DragDroppable';\nimport { GRID_GUTTER_SIZE, GRID_COLUMN_COUNT } from '../util/constants';\nimport { TAB_TYPE } from '../util/componentTypes';\n\nconst propTypes = {\n  depth: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  gridComponent: componentShape.isRequired,\n  handleComponentDrop: PropTypes.func.isRequired,\n  isComponentVisible: PropTypes.bool.isRequired,\n  resizeComponent: PropTypes.func.isRequired,\n  setDirectPathToChild: PropTypes.func.isRequired,\n  width: PropTypes.number.isRequired,\n  dashboardId: PropTypes.number,\n};\n\nconst defaultProps = {};\n\nconst renderDraggableContentBottom = dropProps =>\n  dropProps.dropIndicatorProps && (\n    <div className=\"drop-indicator drop-indicator--bottom\" />\n  );\n\nconst renderDraggableContentTop = dropProps =>\n  dropProps.dropIndicatorProps && (\n    <div className=\"drop-indicator drop-indicator--top\" />\n  );\n\nconst DashboardEmptyStateContainer = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nclass DashboardGrid extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isResizing: false,\n      rowGuideTop: null,\n    };\n\n    this.handleResizeStart = this.handleResizeStart.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n    this.handleResizeStop = this.handleResizeStop.bind(this);\n    this.handleTopDropTargetDrop = this.handleTopDropTargetDrop.bind(this);\n    this.getRowGuidePosition = this.getRowGuidePosition.bind(this);\n    this.setGridRef = this.setGridRef.bind(this);\n    this.handleChangeTab = this.handleChangeTab.bind(this);\n  }\n\n  getRowGuidePosition(resizeRef) {\n    if (resizeRef && this.grid) {\n      return (\n        resizeRef.getBoundingClientRect().bottom -\n        this.grid.getBoundingClientRect().top -\n        2\n      );\n    }\n    return null;\n  }\n\n  setGridRef(ref) {\n    this.grid = ref;\n  }\n\n  handleResizeStart({ ref, direction }) {\n    let rowGuideTop = null;\n    if (direction === 'bottom' || direction === 'bottomRight') {\n      rowGuideTop = this.getRowGuidePosition(ref);\n    }\n\n    this.setState(() => ({\n      isResizing: true,\n      rowGuideTop,\n    }));\n  }\n\n  handleResize({ ref, direction }) {\n    if (direction === 'bottom' || direction === 'bottomRight') {\n      this.setState(() => ({ rowGuideTop: this.getRowGuidePosition(ref) }));\n    }\n  }\n\n  handleResizeStop({ id, widthMultiple: width, heightMultiple: height }) {\n    this.props.resizeComponent({ id, width, height });\n\n    this.setState(() => ({\n      isResizing: false,\n      rowGuideTop: null,\n    }));\n  }\n\n  handleTopDropTargetDrop(dropResult) {\n    if (dropResult) {\n      this.props.handleComponentDrop({\n        ...dropResult,\n        destination: {\n          ...dropResult.destination,\n          // force appending as the first child if top drop target\n          index: 0,\n        },\n      });\n    }\n  }\n\n  handleChangeTab({ pathToTabIndex }) {\n    this.props.setDirectPathToChild(pathToTabIndex);\n  }\n\n  render() {\n    const {\n      gridComponent,\n      handleComponentDrop,\n      depth,\n      width,\n      isComponentVisible,\n      editMode,\n      canEdit,\n      setEditMode,\n      dashboardId,\n    } = this.props;\n    const columnPlusGutterWidth =\n      (width + GRID_GUTTER_SIZE) / GRID_COLUMN_COUNT;\n\n    const columnWidth = columnPlusGutterWidth - GRID_GUTTER_SIZE;\n    const { isResizing, rowGuideTop } = this.state;\n\n    const shouldDisplayEmptyState = gridComponent?.children?.length === 0;\n    const shouldDisplayTopLevelTabEmptyState =\n      shouldDisplayEmptyState && gridComponent.type === TAB_TYPE;\n\n    const dashboardEmptyState = editMode && (\n      <EmptyStateBig\n        title={t('Drag and drop components and charts to the dashboard')}\n        description={t(\n          'You can create a new chart or use existing ones from the panel on the right',\n        )}\n        buttonText={\n          <>\n            <i className=\"fa fa-plus\" />\n            {t('Create a new chart')}\n          </>\n        }\n        buttonAction={() => {\n          window.open(\n            `/chart/add?dashboard_id=${dashboardId}`,\n            '_blank',\n            'noopener noreferrer',\n          );\n        }}\n        image=\"chart.svg\"\n      />\n    );\n\n    const topLevelTabEmptyState = editMode ? (\n      <EmptyStateBig\n        title={t('Drag and drop components to this tab')}\n        description={t(\n          `You can create a new chart or use existing ones from the panel on the right`,\n        )}\n        buttonText={\n          <>\n            <i className=\"fa fa-plus\" />\n            {t('Create a new chart')}\n          </>\n        }\n        buttonAction={() => {\n          window.open(\n            `/chart/add?dashboard_id=${dashboardId}`,\n            '_blank',\n            'noopener noreferrer',\n          );\n        }}\n        image=\"chart.svg\"\n      />\n    ) : (\n      <EmptyStateBig\n        title={t('There are no components added to this tab')}\n        description={\n          canEdit && t('You can add the components in the edit mode.')\n        }\n        buttonText={canEdit && t('Edit the dashboard')}\n        buttonAction={\n          canEdit &&\n          (() => {\n            setEditMode(true);\n          })\n        }\n        image=\"chart.svg\"\n      />\n    );\n\n    return width < 100 ? null : (\n      <>\n        {shouldDisplayEmptyState && (\n          <DashboardEmptyStateContainer>\n            {shouldDisplayTopLevelTabEmptyState\n              ? topLevelTabEmptyState\n              : dashboardEmptyState}\n          </DashboardEmptyStateContainer>\n        )}\n        <div className=\"dashboard-grid\" ref={this.setGridRef}>\n          <div className=\"grid-content\" data-test=\"grid-content\">\n            {/* make the area above components droppable */}\n            {editMode && (\n              <DragDroppable\n                component={gridComponent}\n                depth={depth}\n                parentComponent={null}\n                index={0}\n                orientation=\"column\"\n                onDrop={this.handleTopDropTargetDrop}\n                className=\"empty-droptarget\"\n                editMode\n              >\n                {renderDraggableContentBottom}\n              </DragDroppable>\n            )}\n            {gridComponent?.children?.map((id, index) => (\n              <DashboardComponent\n                key={id}\n                id={id}\n                parentId={gridComponent.id}\n                depth={depth + 1}\n                index={index}\n                availableColumnCount={GRID_COLUMN_COUNT}\n                columnWidth={columnWidth}\n                isComponentVisible={isComponentVisible}\n                onResizeStart={this.handleResizeStart}\n                onResize={this.handleResize}\n                onResizeStop={this.handleResizeStop}\n                onChangeTab={this.handleChangeTab}\n              />\n            ))}\n            {/* make the area below components droppable */}\n            {editMode && gridComponent?.children?.length > 0 && (\n              <DragDroppable\n                component={gridComponent}\n                depth={depth}\n                parentComponent={null}\n                index={gridComponent.children.length}\n                orientation=\"column\"\n                onDrop={handleComponentDrop}\n                className=\"empty-droptarget\"\n                editMode\n              >\n                {renderDraggableContentTop}\n              </DragDroppable>\n            )}\n            {isResizing &&\n              Array(GRID_COLUMN_COUNT)\n                .fill(null)\n                .map((_, i) => (\n                  <div\n                    key={`grid-column-${i}`}\n                    className=\"grid-column-guide\"\n                    style={{\n                      left: i * GRID_GUTTER_SIZE + i * columnWidth,\n                      width: columnWidth,\n                    }}\n                  />\n                ))}\n            {isResizing && rowGuideTop && (\n              <div\n                className=\"grid-row-guide\"\n                style={{\n                  top: rowGuideTop,\n                  width,\n                }}\n              />\n            )}\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nDashboardGrid.propTypes = propTypes;\nDashboardGrid.defaultProps = defaultProps;\n\nexport default DashboardGrid;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport DashboardGrid from '../components/DashboardGrid';\n\nimport {\n  handleComponentDrop,\n  resizeComponent,\n} from '../actions/dashboardLayout';\nimport { setDirectPathToChild, setEditMode } from '../actions/dashboardState';\n\nfunction mapStateToProps({ dashboardState, dashboardInfo }) {\n  return {\n    editMode: dashboardState.editMode,\n    canEdit: dashboardInfo.dash_edit_perm,\n    dashboardId: dashboardInfo.id,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      handleComponentDrop,\n      resizeComponent,\n      setDirectPathToChild,\n      setEditMode,\n    },\n    dispatch,\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DashboardGrid);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// ParentSize uses resize observer so the dashboard will update size\n// when its container size changes, due to e.g., builder side panel opening\nimport React, { FC, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  FeatureFlag,\n  Filter,\n  Filters,\n  isFeatureEnabled,\n} from '@superset-ui/core';\nimport { ParentSize } from '@vx/responsive';\nimport pick from 'lodash/pick';\nimport Tabs from 'src/components/Tabs';\nimport DashboardGrid from 'src/dashboard/containers/DashboardGrid';\nimport {\n  ChartsState,\n  DashboardLayout,\n  LayoutItem,\n  RootState,\n} from 'src/dashboard/types';\nimport {\n  DASHBOARD_GRID_ID,\n  DASHBOARD_ROOT_DEPTH,\n} from 'src/dashboard/util/constants';\nimport { getChartIdsInFilterScope } from 'src/dashboard/util/getChartIdsInFilterScope';\nimport findTabIndexByComponentId from 'src/dashboard/util/findTabIndexByComponentId';\nimport { setInScopeStatusOfFilters } from 'src/dashboard/actions/nativeFilters';\nimport { getRootLevelTabIndex, getRootLevelTabsComponent } from './utils';\nimport { findTabsWithChartsInScope } from '../nativeFilters/utils';\nimport { NATIVE_FILTER_DIVIDER_PREFIX } from '../nativeFilters/FiltersConfigModal/utils';\n\ntype DashboardContainerProps = {\n  topLevelTabs?: LayoutItem;\n};\n\nconst useNativeFilterScopes = () => {\n  const nativeFilters = useSelector<RootState, Filters>(\n    state => state.nativeFilters?.filters,\n  );\n  return useMemo(\n    () =>\n      nativeFilters\n        ? Object.values(nativeFilters).map((filter: Filter) =>\n            pick(filter, ['id', 'scope', 'type']),\n          )\n        : [],\n    [JSON.stringify(nativeFilters)],\n  );\n};\n\nconst DashboardContainer: FC<DashboardContainerProps> = ({ topLevelTabs }) => {\n  const nativeFilterScopes = useNativeFilterScopes();\n  const dispatch = useDispatch();\n\n  const dashboardLayout = useSelector<RootState, DashboardLayout>(\n    state => state.dashboardLayout.present,\n  );\n  const directPathToChild = useSelector<RootState, string[]>(\n    state => state.dashboardState.directPathToChild,\n  );\n  const charts = useSelector<RootState, ChartsState>(state => state.charts);\n\n  const tabIndex = useMemo(() => {\n    const nextTabIndex = findTabIndexByComponentId({\n      currentComponent: getRootLevelTabsComponent(dashboardLayout),\n      directPathToChild,\n    });\n\n    return nextTabIndex > -1\n      ? nextTabIndex\n      : getRootLevelTabIndex(dashboardLayout, directPathToChild);\n  }, [dashboardLayout, directPathToChild]);\n\n  useEffect(() => {\n    if (\n      !isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS) ||\n      nativeFilterScopes.length === 0\n    ) {\n      return;\n    }\n    const scopes = nativeFilterScopes.map(filterScope => {\n      if (filterScope.id.startsWith(NATIVE_FILTER_DIVIDER_PREFIX)) {\n        return {\n          filterId: filterScope.id,\n          tabsInScope: [],\n          chartsInScope: [],\n        };\n      }\n      const chartsInScope: number[] = getChartIdsInFilterScope(\n        filterScope.scope,\n        charts,\n        dashboardLayout,\n      );\n      const tabsInScope = findTabsWithChartsInScope(\n        dashboardLayout,\n        chartsInScope,\n      );\n      return {\n        filterId: filterScope.id,\n        tabsInScope: Array.from(tabsInScope),\n        chartsInScope,\n      };\n    });\n    dispatch(setInScopeStatusOfFilters(scopes));\n  }, [nativeFilterScopes, dashboardLayout, dispatch]);\n\n  const childIds: string[] = topLevelTabs\n    ? topLevelTabs.children\n    : [DASHBOARD_GRID_ID];\n\n  const min = Math.min(tabIndex, childIds.length - 1);\n  const activeKey = min === 0 ? DASHBOARD_GRID_ID : min.toString();\n\n  return (\n    <div className=\"grid-container\" data-test=\"grid-container\">\n      <ParentSize>\n        {({ width }) => (\n          /*\n            We use a TabContainer irrespective of whether top-level tabs exist to maintain\n            a consistent React component tree. This avoids expensive mounts/unmounts of\n            the entire dashboard upon adding/removing top-level tabs, which would otherwise\n            happen because of React's diffing algorithm\n          */\n          <Tabs\n            id={DASHBOARD_GRID_ID}\n            activeKey={activeKey}\n            renderTabBar={() => <></>}\n            fullWidth={false}\n            animated={false}\n            allowOverflow\n          >\n            {childIds.map((id, index) => (\n              // Matching the key of the first TabPane irrespective of topLevelTabs\n              // lets us keep the same React component tree when !!topLevelTabs changes.\n              // This avoids expensive mounts/unmounts of the entire dashboard.\n              <Tabs.TabPane\n                key={index === 0 ? DASHBOARD_GRID_ID : index.toString()}\n              >\n                <DashboardGrid\n                  gridComponent={dashboardLayout[id]}\n                  // see isValidChild for why tabs do not increment the depth of their children\n                  depth={DASHBOARD_ROOT_DEPTH + 1} // (topLevelTabs ? 0 : 1)}\n                  width={width}\n                  isComponentVisible={index === tabIndex}\n                />\n              </Tabs.TabPane>\n            ))}\n          </Tabs>\n        )}\n      </ParentSize>\n    </div>\n  );\n};\n\nexport default DashboardContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { NativeFilterScope } from '@superset-ui/core';\nimport { CHART_TYPE } from './componentTypes';\nimport { ChartsState, Layout } from '../types';\n\nexport function getChartIdsInFilterScope(\n  filterScope: NativeFilterScope,\n  charts: ChartsState,\n  layout: Layout,\n) {\n  const layoutItems = Object.values(layout);\n  return Object.values(charts)\n    .filter(\n      chart =>\n        !filterScope.excluded.includes(chart.id) &&\n        layoutItems\n          .find(\n            layoutItem =>\n              layoutItem?.type === CHART_TYPE &&\n              layoutItem.meta?.chartId === chart.id,\n          )\n          ?.parents?.some(elementId =>\n            filterScope.rootPath.includes(elementId),\n          ),\n    )\n    .map(chart => chart.id);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport cx from 'classnames';\nimport React, {\n  FC,\n  useCallback,\n  useEffect,\n  useState,\n  useMemo,\n  useRef,\n} from 'react';\nimport { JsonObject, styled, css, t } from '@superset-ui/core';\nimport { Global } from '@emotion/react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport BuilderComponentPane from 'src/dashboard/components/BuilderComponentPane';\nimport DashboardHeader from 'src/dashboard/containers/DashboardHeader';\nimport Icons from 'src/components/Icons';\nimport IconButton from 'src/dashboard/components/IconButton';\nimport DragDroppable from 'src/dashboard/components/dnd/DragDroppable';\nimport DashboardComponent from 'src/dashboard/containers/DashboardComponent';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport getDirectPathToTabIndex from 'src/dashboard/util/getDirectPathToTabIndex';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { DashboardLayout, RootState } from 'src/dashboard/types';\nimport {\n  setDirectPathToChild,\n  setEditMode,\n} from 'src/dashboard/actions/dashboardState';\nimport { useElementOnScreen } from 'src/hooks/useElementOnScreen';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport {\n  deleteTopLevelTabs,\n  handleComponentDrop,\n} from 'src/dashboard/actions/dashboardLayout';\nimport {\n  DASHBOARD_GRID_ID,\n  DASHBOARD_ROOT_ID,\n  DASHBOARD_ROOT_DEPTH,\n  DashboardStandaloneMode,\n} from 'src/dashboard/util/constants';\nimport FilterBar from 'src/dashboard/components/nativeFilters/FilterBar';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport {\n  BUILDER_SIDEPANEL_WIDTH,\n  CLOSED_FILTER_BAR_WIDTH,\n  FILTER_BAR_HEADER_HEIGHT,\n  FILTER_BAR_TABS_HEIGHT,\n  MAIN_HEADER_HEIGHT,\n  OPEN_FILTER_BAR_WIDTH,\n} from 'src/dashboard/constants';\nimport { shouldFocusTabs, getRootLevelTabsComponent } from './utils';\nimport DashboardContainer from './DashboardContainer';\nimport { useNativeFilters } from './state';\n\ntype DashboardBuilderProps = {};\n\nconst StyledDiv = styled.div`\n  display: grid;\n  grid-template-columns: auto 1fr;\n  grid-template-rows: auto 1fr;\n  flex: 1;\n  /* Special cases */\n\n  /* A row within a column has inset hover menu */\n  .dragdroppable-column .dragdroppable-row .hover-menu--left {\n    left: -12px;\n    background: ${({ theme }) => theme.colors.grayscale.light5};\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n\n  .dashboard-component-tabs {\n    position: relative;\n  }\n\n  /* A column within a column or tabs has inset hover menu */\n  .dragdroppable-column .dragdroppable-column .hover-menu--top,\n  .dashboard-component-tabs .dragdroppable-column .hover-menu--top {\n    top: -12px;\n    background: ${({ theme }) => theme.colors.grayscale.light5};\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n  }\n\n  /* move Tabs hover menu to top near actual Tabs */\n  .dashboard-component-tabs > .hover-menu-container > .hover-menu--left {\n    top: 0;\n    transform: unset;\n    background: transparent;\n  }\n\n  /* push Chart actions to upper right */\n  .dragdroppable-column .dashboard-component-chart-holder .hover-menu--top,\n  .dragdroppable .dashboard-component-header .hover-menu--top {\n    right: 8px;\n    top: 8px;\n    background: transparent;\n    border: none;\n    transform: unset;\n    left: unset;\n  }\n  div:hover > .hover-menu-container .hover-menu,\n  .hover-menu-container .hover-menu:hover {\n    opacity: 1;\n  }\n`;\n\n// @z-index-above-dashboard-charts + 1 = 11\nconst FiltersPanel = styled.div`\n  grid-column: 1;\n  grid-row: 1 / span 2;\n  z-index: 11;\n`;\n\nconst StickyPanel = styled.div<{ width: number }>`\n  position: sticky;\n  top: -1px;\n  width: ${({ width }) => width}px;\n  flex: 0 0 ${({ width }) => width}px;\n`;\n\n// @z-index-above-dashboard-popovers (99) + 1 = 100\nconst StyledHeader = styled.div`\n  grid-column: 2;\n  grid-row: 1;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n`;\n\nconst StyledContent = styled.div<{\n  fullSizeChartId: number | null;\n}>`\n  grid-column: 2;\n  grid-row: 2;\n  // @z-index-above-dashboard-header (100) + 1 = 101\n  ${({ fullSizeChartId }) => fullSizeChartId && `z-index: 101;`}\n`;\n\nconst StyledDashboardContent = styled.div<{\n  dashboardFiltersOpen: boolean;\n  editMode: boolean;\n  nativeFiltersEnabled: boolean;\n}>`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  height: auto;\n  flex: 1;\n\n  .grid-container .dashboard-component-tabs {\n    box-shadow: none;\n    padding-left: 0;\n  }\n\n  .grid-container {\n    /* without this, the grid will not get smaller upon toggling the builder panel on */\n    width: 0;\n    flex: 1;\n    position: relative;\n    margin-top: ${({ theme }) => theme.gridUnit * 6}px;\n    margin-right: ${({ theme }) => theme.gridUnit * 8}px;\n    margin-bottom: ${({ theme }) => theme.gridUnit * 6}px;\n    margin-left: ${({\n      theme,\n      dashboardFiltersOpen,\n      editMode,\n      nativeFiltersEnabled,\n    }) => {\n      if (!dashboardFiltersOpen && !editMode && nativeFiltersEnabled) {\n        return 0;\n      }\n      return theme.gridUnit * 8;\n    }}px;\n\n    ${({ editMode, theme }) =>\n      editMode &&\n      `\n      max-width: calc(100% - ${\n        BUILDER_SIDEPANEL_WIDTH + theme.gridUnit * 16\n      }px);\n    `}\n  }\n\n  .dashboard-builder-sidepane {\n    width: ${BUILDER_SIDEPANEL_WIDTH}px;\n    z-index: 1;\n  }\n\n  .dashboard-component-chart-holder {\n    // transitionable traits to show filter relevance\n    transition: opacity ${({ theme }) => theme.transitionTiming}s,\n      border-color ${({ theme }) => theme.transitionTiming}s,\n      box-shadow ${({ theme }) => theme.transitionTiming}s;\n    border: 0 solid transparent;\n  }\n`;\n\nconst DashboardBuilder: FC<DashboardBuilderProps> = () => {\n  const dispatch = useDispatch();\n  const uiConfig = useUiConfig();\n\n  const dashboardLayout = useSelector<RootState, DashboardLayout>(\n    state => state.dashboardLayout.present,\n  );\n  const editMode = useSelector<RootState, boolean>(\n    state => state.dashboardState.editMode,\n  );\n  const canEdit = useSelector<RootState, boolean>(\n    ({ dashboardInfo }) => dashboardInfo.dash_edit_perm,\n  );\n  const directPathToChild = useSelector<RootState, string[]>(\n    state => state.dashboardState.directPathToChild,\n  );\n  const fullSizeChartId = useSelector<RootState, number | null>(\n    state => state.dashboardState.fullSizeChartId,\n  );\n\n  const handleChangeTab = useCallback(\n    ({ pathToTabIndex }: { pathToTabIndex: string[] }) => {\n      dispatch(setDirectPathToChild(pathToTabIndex));\n    },\n    [dispatch],\n  );\n\n  const handleDeleteTopLevelTabs = useCallback(() => {\n    dispatch(deleteTopLevelTabs());\n\n    const firstTab = getDirectPathToTabIndex(\n      getRootLevelTabsComponent(dashboardLayout),\n      0,\n    );\n    dispatch(setDirectPathToChild(firstTab));\n  }, [dashboardLayout, dispatch]);\n\n  const handleDrop = useCallback(\n    dropResult => dispatch(handleComponentDrop(dropResult)),\n    [dispatch],\n  );\n\n  const headerRef = React.useRef<HTMLDivElement>(null);\n  const dashboardRoot = dashboardLayout[DASHBOARD_ROOT_ID];\n  const rootChildId = dashboardRoot?.children[0];\n  const topLevelTabs =\n    rootChildId !== DASHBOARD_GRID_ID\n      ? dashboardLayout[rootChildId]\n      : undefined;\n  const standaloneMode = getUrlParam(URL_PARAMS.standalone);\n  const isReport = standaloneMode === DashboardStandaloneMode.REPORT;\n  const hideDashboardHeader =\n    uiConfig.hideTitle ||\n    standaloneMode === DashboardStandaloneMode.HIDE_NAV_AND_TITLE ||\n    isReport;\n  const [barTopOffset, setBarTopOffset] = useState(0);\n\n  useEffect(() => {\n    setBarTopOffset(headerRef.current?.getBoundingClientRect()?.height || 0);\n\n    let observer: ResizeObserver;\n    if (typeof global.ResizeObserver !== 'undefined' && headerRef.current) {\n      observer = new ResizeObserver(entries => {\n        setBarTopOffset(\n          current => entries?.[0]?.contentRect?.height || current,\n        );\n      });\n\n      observer.observe(headerRef.current);\n    }\n\n    return () => {\n      observer?.disconnect();\n    };\n  }, []);\n\n  const {\n    showDashboard,\n    dashboardFiltersOpen,\n    toggleDashboardFiltersOpen,\n    nativeFiltersEnabled,\n  } = useNativeFilters();\n\n  const filterBarWidth = dashboardFiltersOpen\n    ? OPEN_FILTER_BAR_WIDTH\n    : CLOSED_FILTER_BAR_WIDTH;\n\n  const [containerRef, isSticky] = useElementOnScreen<HTMLDivElement>({\n    threshold: [1],\n  });\n\n  const filterSetEnabled = isFeatureEnabled(\n    FeatureFlag.DASHBOARD_NATIVE_FILTERS_SET,\n  );\n\n  const offset =\n    FILTER_BAR_HEADER_HEIGHT +\n    (isSticky || standaloneMode ? 0 : MAIN_HEADER_HEIGHT) +\n    (filterSetEnabled ? FILTER_BAR_TABS_HEIGHT : 0);\n\n  const filterBarHeight = `calc(100vh - ${offset}px)`;\n  const filterBarOffset = dashboardFiltersOpen ? 0 : barTopOffset + 20;\n\n  const draggableStyle = useMemo(\n    () => ({\n      marginLeft:\n        dashboardFiltersOpen || editMode || !nativeFiltersEnabled ? 0 : -32,\n    }),\n    [dashboardFiltersOpen, editMode, nativeFiltersEnabled],\n  );\n\n  // If a new tab was added, update the directPathToChild to reflect it\n  const currentTopLevelTabs = useRef(topLevelTabs);\n  useEffect(() => {\n    const currentTabsLength = currentTopLevelTabs.current?.children?.length;\n    const newTabsLength = topLevelTabs?.children?.length;\n\n    if (\n      currentTabsLength !== undefined &&\n      newTabsLength !== undefined &&\n      newTabsLength > currentTabsLength\n    ) {\n      const lastTab = getDirectPathToTabIndex(\n        getRootLevelTabsComponent(dashboardLayout),\n        newTabsLength - 1,\n      );\n      dispatch(setDirectPathToChild(lastTab));\n    }\n\n    currentTopLevelTabs.current = topLevelTabs;\n  }, [topLevelTabs]);\n\n  const renderDraggableContent = useCallback(\n    ({ dropIndicatorProps }: { dropIndicatorProps: JsonObject }) => (\n      <div>\n        {!hideDashboardHeader && <DashboardHeader />}\n        {dropIndicatorProps && <div {...dropIndicatorProps} />}\n        {!isReport && topLevelTabs && !uiConfig.hideNav && (\n          <WithPopoverMenu\n            shouldFocus={shouldFocusTabs}\n            menuItems={[\n              <IconButton\n                icon={<Icons.FallOutlined iconSize=\"xl\" />}\n                label=\"Collapse tab content\"\n                onClick={handleDeleteTopLevelTabs}\n              />,\n            ]}\n            editMode={editMode}\n          >\n            {/* @ts-ignore */}\n            <DashboardComponent\n              id={topLevelTabs?.id}\n              parentId={DASHBOARD_ROOT_ID}\n              depth={DASHBOARD_ROOT_DEPTH + 1}\n              index={0}\n              renderTabContent={false}\n              renderHoverMenu={false}\n              onChangeTab={handleChangeTab}\n            />\n          </WithPopoverMenu>\n        )}\n      </div>\n    ),\n    [\n      editMode,\n      handleChangeTab,\n      handleDeleteTopLevelTabs,\n      hideDashboardHeader,\n      isReport,\n      topLevelTabs,\n      uiConfig.hideNav,\n    ],\n  );\n\n  return (\n    <StyledDiv>\n      {nativeFiltersEnabled && !editMode && (\n        <FiltersPanel>\n          <StickyPanel ref={containerRef} width={filterBarWidth}>\n            <ErrorBoundary>\n              <FilterBar\n                filtersOpen={dashboardFiltersOpen}\n                toggleFiltersBar={toggleDashboardFiltersOpen}\n                directPathToChild={directPathToChild}\n                width={filterBarWidth}\n                height={filterBarHeight}\n                offset={filterBarOffset}\n              />\n            </ErrorBoundary>\n          </StickyPanel>\n        </FiltersPanel>\n      )}\n      <StyledHeader ref={headerRef}>\n        {/* @ts-ignore */}\n        <DragDroppable\n          data-test=\"top-level-tabs\"\n          component={dashboardRoot}\n          parentComponent={null}\n          depth={DASHBOARD_ROOT_DEPTH}\n          index={0}\n          orientation=\"column\"\n          onDrop={handleDrop}\n          editMode={editMode}\n          // you cannot drop on/displace tabs if they already exist\n          disableDragDrop={!!topLevelTabs}\n          style={draggableStyle}\n        >\n          {renderDraggableContent}\n        </DragDroppable>\n      </StyledHeader>\n      <StyledContent fullSizeChartId={fullSizeChartId}>\n        <Global\n          styles={css`\n            // @z-index-above-dashboard-header (100) + 1 = 101\n            ${fullSizeChartId &&\n            `div > .filterStatusPopover.ant-popover{z-index: 101}`}\n          `}\n        />\n        {!editMode &&\n          !topLevelTabs &&\n          dashboardLayout[DASHBOARD_GRID_ID]?.children?.length === 0 && (\n            <EmptyStateBig\n              title={t('There are no charts added to this dashboard')}\n              description={\n                canEdit &&\n                t(\n                  'Go to the edit mode to configure the dashboard and add charts',\n                )\n              }\n              buttonText={canEdit && t('Edit the dashboard')}\n              buttonAction={() => dispatch(setEditMode(true))}\n              image=\"dashboard.svg\"\n            />\n          )}\n        <div\n          data-test=\"dashboard-content\"\n          className={cx('dashboard', editMode && 'dashboard--editing')}\n        >\n          <StyledDashboardContent\n            className=\"dashboard-content\"\n            dashboardFiltersOpen={dashboardFiltersOpen}\n            editMode={editMode}\n            nativeFiltersEnabled={nativeFiltersEnabled}\n          >\n            {showDashboard ? (\n              <DashboardContainer topLevelTabs={topLevelTabs} />\n            ) : (\n              <Loading />\n            )}\n            {editMode && (\n              <BuilderComponentPane\n                isStandalone={!!standaloneMode}\n                topOffset={barTopOffset}\n              />\n            )}\n          </StyledDashboardContent>\n        </div>\n      </StyledContent>\n    </StyledDiv>\n  );\n};\n\nexport default DashboardBuilder;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useSelector } from 'react-redux';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport { useCallback, useEffect, useState, useContext } from 'react';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { RootState } from 'src/dashboard/types';\nimport { MigrationContext } from 'src/dashboard/containers/DashboardPage';\nimport {\n  useFilters,\n  useNativeFiltersDataMask,\n} from '../nativeFilters/FilterBar/state';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const useNativeFilters = () => {\n  const filterboxMigrationState = useContext(MigrationContext);\n  const [isInitialized, setIsInitialized] = useState(false);\n  const showNativeFilters = useSelector<RootState, boolean>(\n    state =>\n      (getUrlParam(URL_PARAMS.showFilters) ?? true) &&\n      state.dashboardInfo.metadata?.show_native_filters,\n  );\n  const canEdit = useSelector<RootState, boolean>(\n    ({ dashboardInfo }) => dashboardInfo.dash_edit_perm,\n  );\n\n  const filters = useFilters();\n  const filterValues = Object.values(filters);\n  const expandFilters = getUrlParam(URL_PARAMS.expandFilters);\n  const [dashboardFiltersOpen, setDashboardFiltersOpen] = useState(\n    expandFilters ?? !!filterValues.length,\n  );\n\n  const nativeFiltersEnabled =\n    showNativeFilters &&\n    isFeatureEnabled(FeatureFlag.DASHBOARD_NATIVE_FILTERS) &&\n    (canEdit || (!canEdit && filterValues.length !== 0));\n\n  const requiredFirstFilter = filterValues.filter(\n    filter => filter.requiredFirst,\n  );\n  const dataMask = useNativeFiltersDataMask();\n  const showDashboard =\n    isInitialized ||\n    !nativeFiltersEnabled ||\n    !(\n      nativeFiltersEnabled &&\n      requiredFirstFilter.length &&\n      requiredFirstFilter.find(\n        ({ id }) => dataMask[id]?.filterState?.value === undefined,\n      )\n    );\n\n  const toggleDashboardFiltersOpen = useCallback(\n    (visible?: boolean) => {\n      setDashboardFiltersOpen(visible ?? !dashboardFiltersOpen);\n    },\n    [dashboardFiltersOpen],\n  );\n\n  useEffect(() => {\n    if (\n      expandFilters === false ||\n      (filterValues.length === 0 &&\n        nativeFiltersEnabled &&\n        ['CONVERTED', 'REVIEWING', 'NOOP'].includes(filterboxMigrationState))\n    ) {\n      toggleDashboardFiltersOpen(false);\n    } else {\n      toggleDashboardFiltersOpen(true);\n    }\n  }, [filterValues.length, filterboxMigrationState]);\n\n  useEffect(() => {\n    if (showDashboard) {\n      setIsInitialized(true);\n    }\n  }, [showDashboard]);\n\n  return {\n    showDashboard,\n    dashboardFiltersOpen,\n    toggleDashboardFiltersOpen,\n    nativeFiltersEnabled,\n  };\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState, RefObject } from 'react';\n\nexport function useElementOnScreen<T extends Element>(\n  options: IntersectionObserverInit,\n): [RefObject<T>, boolean] {\n  const containerRef = useRef<T>(null);\n  const [isSticky, setIsSticky] = useState(false);\n\n  const callback = (entries: IntersectionObserverEntry[]) => {\n    const [entry] = entries;\n    setIsSticky(entry.intersectionRatio < 1);\n  };\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(callback, options);\n    const element = containerRef.current;\n    if (element) {\n      observer.observe(element);\n    }\n    return () => {\n      if (element) {\n        observer.unobserve(element);\n      }\n    };\n  }, [containerRef, options]);\n\n  return [containerRef, isSticky];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { CHART_TYPE, MARKDOWN_TYPE, DYNAMIC_TYPE } from './componentTypes';\n\nconst USER_CONTENT_COMPONENT_TYPE: string[] = [\n  CHART_TYPE,\n  MARKDOWN_TYPE,\n  DYNAMIC_TYPE,\n];\nexport default function isDashboardEmpty(layout: any): boolean {\n  // has at least one chart or markdown component\n  return !Object.values(layout).some(\n    ({ type }: { type?: string }) =>\n      type && USER_CONTENT_COMPONENT_TYPE.includes(type),\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { JsonObject } from '@superset-ui/core';\nimport { areObjectsEqual } from '../../../reduxUtils';\n\nexport const arrayDiff = (a: string[], b: string[]) => [\n  ...a.filter(x => !b.includes(x)),\n  ...b.filter(x => !a.includes(x)),\n];\n\nexport const getAffectedOwnDataCharts = (\n  ownDataCharts: JsonObject,\n  appliedOwnDataCharts: JsonObject,\n) => {\n  const chartIds = Object.keys(ownDataCharts);\n  const appliedChartIds = Object.keys(appliedOwnDataCharts);\n  const affectedIds: string[] = arrayDiff(chartIds, appliedChartIds).filter(\n    id => ownDataCharts[id] || appliedOwnDataCharts[id],\n  );\n  const checkForUpdateIds = new Set<string>([...chartIds, ...appliedChartIds]);\n  checkForUpdateIds.forEach(chartId => {\n    if (\n      !areObjectsEqual(ownDataCharts[chartId], appliedOwnDataCharts[chartId])\n    ) {\n      affectedIds.push(chartId);\n    }\n  });\n  return [...new Set(affectedIds)];\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { isFeatureEnabled, t, FeatureFlag } from '@superset-ui/core';\n\nimport { PluginContext } from 'src/components/DynamicPlugins';\nimport Loading from 'src/components/Loading';\nimport getChartIdsFromLayout from '../util/getChartIdsFromLayout';\nimport getLayoutComponentFromChartId from '../util/getLayoutComponentFromChartId';\nimport DashboardBuilder from './DashboardBuilder/DashboardBuilder';\nimport {\n  chartPropShape,\n  slicePropShape,\n  dashboardInfoPropShape,\n  dashboardStatePropShape,\n} from '../util/propShapes';\nimport {\n  LOG_ACTIONS_HIDE_BROWSER_TAB,\n  LOG_ACTIONS_MOUNT_DASHBOARD,\n  Logger,\n} from '../../logger/LogUtils';\nimport { areObjectsEqual } from '../../reduxUtils';\n\nimport '../stylesheets/index.less';\nimport getLocationHash from '../util/getLocationHash';\nimport isDashboardEmpty from '../util/isDashboardEmpty';\nimport { getAffectedOwnDataCharts } from '../util/charts/getOwnDataCharts';\n\nconst propTypes = {\n  actions: PropTypes.shape({\n    addSliceToDashboard: PropTypes.func.isRequired,\n    removeSliceFromDashboard: PropTypes.func.isRequired,\n    triggerQuery: PropTypes.func.isRequired,\n    logEvent: PropTypes.func.isRequired,\n    clearDataMaskState: PropTypes.func.isRequired,\n  }).isRequired,\n  dashboardInfo: dashboardInfoPropShape.isRequired,\n  dashboardState: dashboardStatePropShape.isRequired,\n  charts: PropTypes.objectOf(chartPropShape).isRequired,\n  slices: PropTypes.objectOf(slicePropShape).isRequired,\n  activeFilters: PropTypes.object.isRequired,\n  chartConfiguration: PropTypes.object.isRequired,\n  datasources: PropTypes.object.isRequired,\n  ownDataCharts: PropTypes.object.isRequired,\n  layout: PropTypes.object.isRequired,\n  impressionId: PropTypes.string.isRequired,\n  initMessages: PropTypes.array,\n  timeout: PropTypes.number,\n  userId: PropTypes.string,\n};\n\nconst defaultProps = {\n  initMessages: [],\n  timeout: 60,\n  userId: '',\n};\n\nclass Dashboard extends React.PureComponent {\n  static contextType = PluginContext;\n\n  static onBeforeUnload(hasChanged) {\n    if (hasChanged) {\n      window.addEventListener('beforeunload', Dashboard.unload);\n    } else {\n      window.removeEventListener('beforeunload', Dashboard.unload);\n    }\n  }\n\n  static unload() {\n    const message = t('You have unsaved changes.');\n    window.event.returnValue = message; // Gecko + IE\n    return message; // Gecko + Webkit, Safari, Chrome etc.\n  }\n\n  constructor(props) {\n    super(props);\n    this.appliedFilters = props.activeFilters ?? {};\n    this.appliedOwnDataCharts = props.ownDataCharts ?? {};\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n  }\n\n  componentDidMount() {\n    const appContainer = document.getElementById('app');\n    const bootstrapData = appContainer?.getAttribute('data-bootstrap') || '{}';\n    const { dashboardState, layout } = this.props;\n    const eventData = {\n      is_soft_navigation: Logger.timeOriginOffset > 0,\n      is_edit_mode: dashboardState.editMode,\n      mount_duration: Logger.getTimestamp(),\n      is_empty: isDashboardEmpty(layout),\n      is_published: dashboardState.isPublished,\n      bootstrap_data_length: bootstrapData.length,\n    };\n    const directLinkComponentId = getLocationHash();\n    if (directLinkComponentId) {\n      eventData.target_id = directLinkComponentId;\n    }\n    this.props.actions.logEvent(LOG_ACTIONS_MOUNT_DASHBOARD, eventData);\n\n    // Handle browser tab visibility change\n    if (document.visibilityState === 'hidden') {\n      this.visibilityEventData = {\n        start_offset: Logger.getTimestamp(),\n        ts: new Date().getTime(),\n      };\n    }\n    window.addEventListener('visibilitychange', this.onVisibilityChange);\n    this.applyCharts();\n  }\n\n  componentDidUpdate() {\n    this.applyCharts();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const currentChartIds = getChartIdsFromLayout(this.props.layout);\n    const nextChartIds = getChartIdsFromLayout(nextProps.layout);\n\n    if (this.props.dashboardInfo.id !== nextProps.dashboardInfo.id) {\n      // single-page-app navigation check\n      return;\n    }\n\n    if (currentChartIds.length < nextChartIds.length) {\n      const newChartIds = nextChartIds.filter(\n        key => currentChartIds.indexOf(key) === -1,\n      );\n      newChartIds.forEach(newChartId =>\n        this.props.actions.addSliceToDashboard(\n          newChartId,\n          getLayoutComponentFromChartId(nextProps.layout, newChartId),\n        ),\n      );\n    } else if (currentChartIds.length > nextChartIds.length) {\n      // remove chart\n      const removedChartIds = currentChartIds.filter(\n        key => nextChartIds.indexOf(key) === -1,\n      );\n      removedChartIds.forEach(removedChartId =>\n        this.props.actions.removeSliceFromDashboard(removedChartId),\n      );\n    }\n  }\n\n  applyCharts() {\n    const { hasUnsavedChanges, editMode } = this.props.dashboardState;\n\n    const { appliedFilters, appliedOwnDataCharts } = this;\n    const { activeFilters, ownDataCharts, chartConfiguration } = this.props;\n    if (\n      isFeatureEnabled(FeatureFlag.DASHBOARD_CROSS_FILTERS) &&\n      !chartConfiguration\n    ) {\n      // For a first loading we need to wait for cross filters charts data loaded to get all active filters\n      // for correct comparing  of filters to avoid unnecessary requests\n      return;\n    }\n\n    if (\n      !editMode &&\n      (!areObjectsEqual(appliedOwnDataCharts, ownDataCharts, {\n        ignoreUndefined: true,\n      }) ||\n        !areObjectsEqual(appliedFilters, activeFilters, {\n          ignoreUndefined: true,\n        }))\n    ) {\n      this.applyFilters();\n    }\n\n    if (hasUnsavedChanges) {\n      Dashboard.onBeforeUnload(true);\n    } else {\n      Dashboard.onBeforeUnload(false);\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('visibilitychange', this.onVisibilityChange);\n    this.props.actions.clearDataMaskState();\n  }\n\n  onVisibilityChange() {\n    if (document.visibilityState === 'hidden') {\n      // from visible to hidden\n      this.visibilityEventData = {\n        start_offset: Logger.getTimestamp(),\n        ts: new Date().getTime(),\n      };\n    } else if (document.visibilityState === 'visible') {\n      // from hidden to visible\n      const logStart = this.visibilityEventData.start_offset;\n      this.props.actions.logEvent(LOG_ACTIONS_HIDE_BROWSER_TAB, {\n        ...this.visibilityEventData,\n        duration: Logger.getTimestamp() - logStart,\n      });\n    }\n  }\n\n  // return charts in array\n  getAllCharts() {\n    return Object.values(this.props.charts);\n  }\n\n  applyFilters() {\n    const { appliedFilters } = this;\n    const { activeFilters, ownDataCharts } = this.props;\n\n    // refresh charts if a filter was removed, added, or changed\n    const currFilterKeys = Object.keys(activeFilters);\n    const appliedFilterKeys = Object.keys(appliedFilters);\n\n    const allKeys = new Set(currFilterKeys.concat(appliedFilterKeys));\n    const affectedChartIds = getAffectedOwnDataCharts(\n      ownDataCharts,\n      this.appliedOwnDataCharts,\n    );\n    [...allKeys].forEach(filterKey => {\n      if (\n        !currFilterKeys.includes(filterKey) &&\n        appliedFilterKeys.includes(filterKey)\n      ) {\n        // filterKey is removed?\n        affectedChartIds.push(...appliedFilters[filterKey].scope);\n      } else if (!appliedFilterKeys.includes(filterKey)) {\n        // filterKey is newly added?\n        affectedChartIds.push(...activeFilters[filterKey].scope);\n      } else {\n        // if filterKey changes value,\n        // update charts in its scope\n        if (\n          !areObjectsEqual(\n            appliedFilters[filterKey].values,\n            activeFilters[filterKey].values,\n            {\n              ignoreUndefined: true,\n            },\n          )\n        ) {\n          affectedChartIds.push(...activeFilters[filterKey].scope);\n        }\n\n        // if filterKey changes scope,\n        // update all charts in its scope\n        if (\n          !areObjectsEqual(\n            appliedFilters[filterKey].scope,\n            activeFilters[filterKey].scope,\n          )\n        ) {\n          const chartsInScope = (activeFilters[filterKey].scope || []).concat(\n            appliedFilters[filterKey].scope || [],\n          );\n          affectedChartIds.push(...chartsInScope);\n        }\n      }\n    });\n\n    // remove dup in affectedChartIds\n    this.refreshCharts([...new Set(affectedChartIds)]);\n    this.appliedFilters = activeFilters;\n    this.appliedOwnDataCharts = ownDataCharts;\n  }\n\n  refreshCharts(ids) {\n    ids.forEach(id => {\n      this.props.actions.triggerQuery(true, id);\n    });\n  }\n\n  render() {\n    if (this.context.loading) {\n      return <Loading />;\n    }\n    return (\n      <>\n        <DashboardBuilder />\n      </>\n    );\n  }\n}\n\nDashboard.propTypes = propTypes;\nDashboard.defaultProps = defaultProps;\n\nexport default Dashboard;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { CHART_TYPE } from './componentTypes';\n\nexport default function getLayoutComponentFromChartId(layout, chartId) {\n  return Object.values(layout).find(\n    currentComponent =>\n      currentComponent &&\n      currentComponent.type === CHART_TYPE &&\n      currentComponent.meta &&\n      currentComponent.meta.chartId === chartId,\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { RootState } from 'src/dashboard/types';\nimport Dashboard from 'src/dashboard/components/Dashboard';\nimport {\n  addSliceToDashboard,\n  removeSliceFromDashboard,\n} from 'src/dashboard/actions/dashboardState';\nimport { setDatasources } from 'src/dashboard/actions/datasources';\n\nimport { triggerQuery } from 'src/components/Chart/chartAction';\nimport { logEvent } from 'src/logger/actions';\nimport { getActiveFilters } from 'src/dashboard/util/activeDashboardFilters';\nimport {\n  getAllActiveFilters,\n  getRelevantDataMask,\n} from 'src/dashboard/util/activeAllDashboardFilters';\nimport { clearDataMaskState } from '../../dataMask/actions';\n\nfunction mapStateToProps(state: RootState) {\n  const {\n    datasources,\n    sliceEntities,\n    charts,\n    dataMask,\n    dashboardInfo,\n    dashboardState,\n    dashboardLayout,\n    impressionId,\n    nativeFilters,\n  } = state;\n\n  return {\n    initMessages: dashboardInfo.common?.flash_messages,\n    timeout: dashboardInfo.common?.conf?.SUPERSET_WEBSERVER_TIMEOUT,\n    userId: dashboardInfo.userId,\n    dashboardInfo,\n    dashboardState,\n    charts,\n    datasources,\n    // filters prop: a map structure for all the active filter_box's values and scope in this dashboard,\n    // for each filter field. map key is [chartId_column]\n    // When dashboard is first loaded into browser,\n    // its value is from preselect_filters that dashboard owner saved in dashboard's meta data\n    // When user start interacting with dashboard, it will be user picked values from all filter_box\n    activeFilters: {\n      ...getActiveFilters(),\n      ...getAllActiveFilters({\n        // eslint-disable-next-line camelcase\n        chartConfiguration: dashboardInfo.metadata?.chart_configuration,\n        nativeFilters: nativeFilters.filters,\n        dataMask,\n        layout: dashboardLayout.present,\n      }),\n    },\n    chartConfiguration: dashboardInfo.metadata?.chart_configuration,\n    ownDataCharts: getRelevantDataMask(dataMask, 'ownState'),\n    slices: sliceEntities.slices,\n    layout: dashboardLayout.present,\n    impressionId,\n  };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n  return {\n    actions: bindActionCreators(\n      {\n        setDatasources,\n        clearDataMaskState,\n        addSliceToDashboard,\n        removeSliceFromDashboard,\n        triggerQuery,\n        logEvent,\n      },\n      dispatch,\n    ),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\n","import n,{freeze as r}from\"immer\";import{useState as t,useCallback as o,useMemo as f,useReducer as u}from\"react\";function i(f){var u=t(function(){return r(\"function\"==typeof f?f():f,!0)}),i=u[1];return[u[0],o(function(t){i(\"function\"==typeof t?n(t):r(t))},[])]}function e(r,t,o){var i=f(function(){return n(r)},[r]);return u(i,t,o)}export{i as useImmer,e as useImmerReducer};\n//# sourceMappingURL=use-immer.module.js.map\n"],"names":["module","exports","__esModule","obj","keys","target","i","indexOf","Object","prototype","hasOwnProperty","call","$Object","it","key","getOwnPropertyDescriptor","$export","core","fails","KEY","exec","fn","exp","S","F","toIObject","$getOwnPropertyDescriptor","toObject","$getPrototypeOf","$keys","arrayMap","baseGet","baseIteratee","baseMap","baseSortBy","baseUnary","compareMultiple","identity","isArray","collection","iteratees","orders","length","iteratee","value","index","result","object","other","array","comparer","sort","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","setToArray","comparator","includes","isCommon","seen","set","outer","computed","seenIndex","push","isSymbol","valIsDefined","undefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","compareAscending","objCriteria","criteria","othCriteria","ordersLength","Set","noop","values","baseFlatten","map","baseIsEqual","customizer","baseOrderBy","baseRest","isIterateeCall","sortBy","baseUniq","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","now","process","hr","uptime","Date","getTime","this","root","window","g","vendors","suffix","raf","caf","last","id","queue","callback","_now","next","Math","max","setTimeout","cp","slice","cancelled","e","round","handle","cancel","apply","arguments","polyfill","requestAnimationFrame","cancelAnimationFrame","t","n","r","o","l","m","c","d","defineProperty","enumerable","get","Symbol","toStringTag","create","bind","default","p","s","self","a","Function","clear","delete","has","__data__","Array","join","toString","u","f","h","b","y","v","x","nodeType","Buffer","isBuffer","webpackPolyfill","deprecate","paths","children","isTypedArray","crypto","msCrypto","getRandomValues","Uint8Array","k","_","O","j","w","C","E","P","N","size","splice","pop","RegExp","replace","test","IE_PROTO","hash","string","add","valueOf","byteLength","byteOffset","buffer","name","message","forEach","constructor","propertyIsEnumerable","getOwnPropertySymbols","String","require","types","binding","ArrayBuffer","resolve","Error","isRequired","bool","func","number","symbol","any","arrayOf","element","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","iterator","assign","configurable","writable","ReferenceError","setPrototypeOf","getPrototypeOf","__proto__","TypeError","PureComponent","props","title","createElement","type","flatNodes","concat","filter","disabled","noCascade","nodeHasChildren","label","parent","isParent","isLeaf","showCheckbox","getDisabledState","treeDepth","flattenNodes","Boolean","expanded","toggleNode","toggleChecked","A","T","R","updateDeterminateProperty","indeterminate","checkbox","ref","I","L","check","uncheck","halfCheck","expandClose","expandOpen","expandAll","collapseAll","parentClose","parentOpen","leaf","z","toggle","q","D","M","B","U","H","onCheck","onClick","onExpand","Component","checked","getCheckState","expandOnClick","optimisticToggle","expandDisabled","lang","className","renderCollapseIcon","icons","icon","onKeyPress","role","tabIndex","treeId","split","htmlFor","onChange","renderCheckboxIcon","showNodeIcon","renderNodeIcon","renderCheckboxLabel","renderBareLabel","renderCollapseButton","renderLabel","renderChildren","V","$","W","J","K","G","Y","te","Q","X","Z","ee","ne","nodes","deserializeLists","state","model","prevProps","onNodeClick","onExpandAll","onCollapseAll","setProps","clone","getNode","serializeList","expandAllNodes","isEveryChildChecked","isSomeChildChecked","every","checkState","some","onlyLeafCheckboxes","showNodeTitle","defaultProps","renderTreeNodes","determineShallowCheckState","showExpandAll","nameAsArray","renderArrayHiddenInput","renderJoinedHiddenInput","nativeCheckboxes","renderExpandAll","renderHiddenInput","_typeof","isFunction","input","isPlainObject","isObjectLike","proto","getDecoratedComponent","instanceRef","currentRef","current","decoratedRef","isRefable","render","_item$$$typeof","item","$$typeof","isRefForwardingComponent","_classCallCheck","instance","Constructor","_defineProperties","descriptor","_createClass","protoProps","staticProps","Disposable","action","isDisposed","dispose","isDisposable","empty","CompositeDisposable","_len","disposables","_key","shouldDispose","idx","len","currentDisposables","_i","_i2","SerialDisposable","old","_arrayLikeToArray","arr","arr2","_setPrototypeOf","_possibleConstructorReturn","_assertThisInitialized","_getPrototypeOf","decorateHandler","_ref","DecoratedComponent","createHandler","createMonitor","createConnector","registerHandler","containerDisplayName","getType","collect","_options$arePropsEqua","options","arePropsEqual","Decorated","displayName","DragDropContainer","_React$Component","subClass","superClass","_inherits","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","_this","handleChange","nextState","getCurrentState","setState","disposable","receiveProps","handlerId","nextProps","currentType","handler","receiveType","handlerMonitor","manager","handlerConnector","_registerHandler2","_arrayWithHoles","_arr","_n","_d","_e","_s","done","err","_iterableToArrayLimit","minLen","from","_unsupportedIterableToArray","_nonIterableRest","unregister","receiveHandlerId","unsubscribe","getMonitor","subscribeToStateChange","handlerIds","setDisposable","hooks","_this2","DndContext","_ref2","dragDropManager","receiveDragDropManager","_this2$handlerConnect","reconnect","getBackend","isValidType","allowArray","ALLOWED_SPEC_METHODS","REQUIRED_SPEC_METHODS","SourceImpl","spec","monitor","beginDrag","canDrag","globalMonitor","sourceId","isDragging","getSourceId","endDrag","createSourceFactory","DragSource","createSource","backend","SourceConnector","DragSourceMonitorImpl","TargetImpl","canDrop","hover","drop","createTargetFactory","DropTarget","createTarget","DropTargetMonitorImpl","TargetConnector","DragLayer","DragLayerContainer","isCurrentlyMounted","unsubscribeFromOffsetChange","unsubscribeFromStateChange","subscribeToOffsetChange","componentWillMount","getDerivedStateFromProps","componentWillReceiveProps","prevState","componentWillUpdate","__reactInternalSnapshotFlag","__reactInternalSnapshot","getSnapshotBeforeUpdate","isReactComponent","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","UNSAFE_componentWillMount","UNSAFE_componentWillReceiveProps","UNSAFE_componentWillUpdate","componentName","newApiName","componentDidUpdate","maybeSnapshot","snapshot","__suppressDeprecationWarning","defineProperties","_react","_react2","_interopRequireDefault","_propTypes2","_util","Search","_Component","searchTerm","updateSearch","_props","inputClassName","caseSensitive","sortResults","throttle","filterKeys","fuzzy","inputProps","_objectWithoutProperties","placeholder","_throttleTimeout","clearTimeout","_props2","createFilter","propTypes","getValuesForKey","searchStrings","term","toLowerCase","terms","currentKeys","searchedField","_fuse2","flatten","reduce","flat","toFlatten","results","tmp","parseInt","isNaN","res","toArray","strings","exactMatch","toJS","fuse","shouldSort","search","deepValue","location","distance","threshold","maxPatternLength","tokenSeparator","findAllMatches","minMatchCharLength","getFn","sortFn","score","tokenize","matchAllTokens","includeMatches","includeScore","verbose","isCaseSensitive","setCollection","_processKeys","list","_keyWeights","_keyNames","weight","min","limit","_log","_prepareSearchers","tokenSearchers","fullSearcher","_search","_computeScore","_sort","_format","_analyze","record","resultMap","arrayIndex","pattern","isMatch","matchedIndices","output","Number","EPSILON","pow","JSON","stringify","matches","indices","console","log","patternAlphabet","match","errors","currentLocation","expectedLocation","lastIndexOf","floor","charAt","abs","isString","isNum","_extends","source","_raf2","Container","_PureComponent","_temp","args","events","subscribers","rafHandle","subscribe","notifySubscribers","evt","framePending","currentTarget","_this$node$getBoundin","getBoundingClientRect","top","bottom","distanceFromTop","distanceFromBottom","eventSource","document","body","getParent","event","addEventListener","_this3","removeEventListener","_this4","onScroll","onTouchStart","onTouchMove","onTouchEnd","childContextTypes","_reactDom2","Sticky","isSticky","wasSticky","style","handleContainerEvent","context","preventingStickyStateChanges","relative","scrollTop","offsetTop","placeholderClientRect","calculatedHeight","content","height","bottomDifference","bottomOffset","topOffset","scrollHeight","position","offsetParent","left","width","disableHardwareAcceleration","transform","paddingBottom","disableCompensation","cloneElement","findDOMNode","contextTypes","_Sticky2","_Container2","initialRecords","records","UiOverrideRegistry","getUiOverrideRegistry","StyledCertifiedBadge","EditableTitle","canEdit","editing","extraClasses","multiLine","noPermitTooltip","onSaveTitle","showTooltip","defaultTitle","certifiedBy","certificationDetails","onClickTitle","rest","isEditing","setIsEditing","useState","currentTitle","setCurrentTitle","lastTitle","setLastTitle","contentBoundingRect","setContentBoundingRect","contentRef","useRef","handleClick","contentBounding","handleBlur","formattedTitle","trim","handleKeyDown","stopPropagation","preventDefault","ev","handleKeyPress","useEffect","focus","setSelectionRange","scrollLeft","scrollWidth","editStyle","titleComponent","onKeyDown","onBlur","css","details","getChartIdsFromLayout","layout","chartIds","currentComponent","CHART_TYPE","meta","chartId","_defineProperty","ParentSize","resize","debounceTime","animationFrameID","_proto","componentDidMount","resizeObserver","entries","entry","_entry$contentRect","contentRect","observe","componentWillUnmount","disconnect","_this$props","parentSizeStyles","restProps","excluded","sourceKeys","_objectWithoutPropertiesLoose","setTarget","List","_React$PureComponent","_ret","_cellRenderer","rowIndex","isScrolling","isVisible","rowRenderer","_setRef","Grid","_onScroll","_ref3","clientHeight","_onSectionRendered","_ref4","rowOverscanStartIndex","rowOverscanStopIndex","rowStartIndex","rowStopIndex","onRowsRendered","overscanStartIndex","overscanStopIndex","startIndex","stopIndex","forceUpdate","_ref5","alignment","getOffsetForCell","columnIndex","_ref6","invalidateCellSizeAfterRender","measureAllCells","_ref7","_ref7$columnIndex","_ref7$rowIndex","recomputeGridSize","scrollToPosition","scrollToCell","noRowsRenderer","scrollToIndex","classNames","autoContainerWidth","cellRenderer","columnWidth","columnCount","noContentRenderer","onSectionRendered","scrollToRow","autoHeight","estimatedRowSize","overscanIndicesGetter","accessibilityOverscanIndicesGetter","overscanRowCount","scrollToAlignment","datasourceUrl","datasourceName","innerRef","isSelected","lastModified","sliceName","visType","Styled","styled","theme","colors","grayscale","light2","gridUnit","light5","light4","typography","weights","bold","normal","base","sizes","AddSliceCard","cx","href","staticCardStyles","pointerEvents","zIndex","dragItem","slices","slicePropShape","currentOffset","AddSliceDragPreview","parentType","NEW_COMPONENT_SOURCE_TYPE","slice_name","changed_on_humanized","viz_type","datasource_url","datasource_name","getItem","getSourceClientOffset","emptyImage","depthOne","depthThree","depthFour","depthFive","parentMaxDepthLookup","isValidChild","child","childType","parentDepth","maxParentDepth","DROP_TOP","DROP_RIGHT","DROP_BOTTOM","DROP_LEFT","scrollTopDashboardInterval","CACHED_CLIENT_OFFSET","getDropPosition","depth","componentDepth","parentComponent","component","orientation","isDraggingOverShallow","draggingItem","validChild","validSibling","TAB_TYPE","TABS_TYPE","hasChildren","childDropOrientation","siblingDropOrientation","refBoundingRect","clientOffset","getClientOffset","deltaTop","deltaBottom","deltaLeft","deltaRight","right","delta","refMiddleX","refMiddleY","mounted","dropPosition","scroll","setupScroll","documentElement","clearScroll","setInterval","clearInterval","behavior","handleScroll","DASHBOARD_ROOT_TYPE","dropIndicator","TYPE","dragConfig","disableDragDrop","parentId","connect","dragSourceRef","dragSource","dragPreviewRef","dragPreview","dropConfig","handleHover","dropResult","getDropResult","destination","componentIndex","onDrop","dropAsChildOrSibling","dragging","nextIndex","handleDrop","droppableRef","dropTarget","isDraggingOver","isOver","shallow","componentShape","editMode","useEmptyDragPreview","UnwrappedDragDroppable","React","super","setRef","Image","src","captureDraggingState","dropIndicatorProps","childProps","fetchAllSlices","isLoading","lastUpdated","errorMessage","userId","selectedSliceIds","filterboxMigrationState","FILTER_BOX_MIGRATION_STATES","dashboardId","innerHeight","KEYS_TO_FILTERS","KEYS_TO_SORT","changed_on","Controls","StyledSelect","Select","NewChartButtonContainer","NewChartButton","Button","SliceAdder","attr","desc","filteredSlices","selectedSliceIdsSet","searchUpdated","handleSelect","slicesRequest","isFeatureEnabled","FeatureFlag","sortByComparator","abort","getFilteredSortedSlices","cellData","slice_id","NEW_CHART_ID","DragDroppable","NEW_COMPONENTS_SOURCE_ID","slicesListHeight","buttonStyle","buttonSize","open","Icons","Input","Loading","rowCount","rowHeight","sliceEntities","dashboardInfo","dashboardState","ownProps","sliceIds","dispatch","bindActionCreators","registryGetAll","registryKeys","registry","registryDelete","keyToDelete","registryGet","initComponents","metadata","loadComponent","registrySetComponent","getAll","DraggableNewComponent","DraggableNewColumn","NEW_COLUMN_ID","COLUMN_TYPE","DraggableNewDivider","NEW_DIVIDER_ID","DIVIDER_TYPE","DraggableNewHeader","NEW_HEADER_ID","HEADER_TYPE","DraggableNewRow","NEW_ROW_ID","ROW_TYPE","DraggableNewTabs","NEW_TABS_ID","NEW_MARKDOWN_ID","MARKDOWN_TYPE","componentKey","iconName","BuilderComponentPaneTabs","DashboardBuilderSidepane","isStandalone","Infinity","pageYOffset","hasHeader","withHeaderTopOffset","tab","NewDynamicComponent","copyMenuItemTitle","emailMenuItemTitle","emailSubject","emailBody","addDangerToast","addSuccessToast","dashboardComponentId","async","generateUrl","nativeFiltersKey","filterState","Menu","selectable","copy","error","logging","encodedBody","encodeURIComponent","encodedSubject","StyledWrapper","light1","initialCss","triggerNode","templates","CssEditor","changeCss","changeCssTemplate","AceCssEditor","renderTemplateSelector","menu","template","overlay","placement","ModalTrigger","modalTitle","modalBody","minLines","maxLines","editorProps","$blockScrolling","enableLiveAutocompletion","StyledModalTrigger","RefreshWarningContainer","RefreshIntervalModal","modalRef","refreshFrequency","handleFrequencyChange","onSave","onCancel","close","refreshLimit","refreshWarning","showRefreshWarning","Form","ariaLabel","sortComparator","Alert","modalFooter","saveType","colorNamespace","colorScheme","shouldPersistRefreshFrequency","SaveModal","modal","newDashName","dashboardTitle","duplicateSlices","handleSaveTypeChange","handleNameChange","saveDashboard","setModalRef","toggleDuplicateSlices","positions","customCss","currentRefreshFrequency","lastModifiedTime","refresh_frequency","data","certified_by","certification_details","dashboard_title","duplicate_slices","last_modified_time","owners","roles","then","resp","json","Radio","canOverwrite","onFocus","Checkbox","FILTER_SCOPE_CONTAINER_TYPES","traverse","currentNode","components","filterFields","selectedChartId","chartNode","filterField","childNodeTree","text","getFilterScopeNodesTree","DASHBOARD_ROOT_ID","getFilterScopeParentNodes","depthLimit","parentNodes","getKeyForFilterScopeTree","activeFilterField","checkedFilterFields","safeStringify","getSelectedChartIdForFilterScopeTree","getChartIdAndColumnFromFilterKey","filterKey","buildFilterScopeTreeEntry","filterScopeMap","editingList","checkedChartIdSet","nodesFiltered","getTabChildrenScope","tabScopes","parentNodeValue","forceAggregate","hasChartSiblings","tabChildren","immuneChartSiblings","scope","immuneChartIdsFromTabsNotInScope","tabs","tabsInScope","chartsNotInScope","subTab","subTabChildren","getImmuneChartIdsFromTabsNotInScope","immuneChartIdsFromTabsInScope","immune","componentsInScope","filterId","checkedChartIds","currentValue","chartChildren","chartsImmune","getFilterScopeFromNodesTree","ChartIcon","primary","updatedChildren","renderFilterScopeTreeNodes","filterScopeSelectorTreeNodePropShape","NOOP","FilterScopeTree","treeIcons","FilterFieldItem","renderFilterFieldTreeNodes","activeKey","FilterFieldTree","dashboardFilters","dashboardFilterPropShape","updateDashboardFiltersScope","setUnsavedChanges","onCloseModal","ActionsContainer","light3","FilterScopeSelector","filterFieldNodes","allFilters","dashboardFilter","filterName","columns","labels","column","getDashboardFilterKey","ALL_FILTERS_ROOT","getFilterFieldNodesTree","filtersNodes","allfilterFields","defaultFilterKey","mapByChartId","columnName","chartIdsInFilterScope","getChartIdsInFilterBoxScope","filterScope","scopes","expandedFilterIds","filterScopeTreeEntry","showSelector","searchText","filterNodes","onChangeFilterField","onCheckFilterScope","onExpandFilterScope","onSearchInputChange","onCheckFilterField","onExpandFilterField","onClose","updatedEntry","updatedFilterScopeMap","checkedChartIdsByFilterField","updatedCheckedIds","getRevertedFilterScope","nextActiveFilterField","currentActiveFilterField","filterTree","allFilterFieldScopes","updater","filtered","toLocaleLowerCase","renderFilterFieldList","renderFilterScopeTree","renderEditingFiltersName","currentFilterLabels","dashboardLayout","present","FilterScopeModalBody","padding","FilterScopeModal","handleCloseModal","filterScopeProps","FilterScope","getDashboardUrl","pathname","filters","standalone","newSearchParams","URLSearchParams","serializeActiveFilterValues","dataMaskKey","hashSection","dataMask","updateCss","forceRefreshAllCharts","setRefreshFrequency","startPeriodicRender","userCanEdit","userCanShare","userCanSave","userCanCurate","expandedSlices","showPropertiesModal","manageEmbedded","MENU_KEYS","HeaderActionsDropdown","reload","cssTemplates","showReportSubMenu","changeRefreshInterval","handleMenuClick","setShowReportSubMenu","SupersetClient","endpoint","row","template_name","catch","injectCustomCss","show","refreshInterval","isPersistent","domEvent","querySelector","visibility","downloadAsImage","url","getActiveFilters","getUrlParam","URL_PARAMS","setIsDropdownVisible","isDropdownVisible","SAVE_TYPE_NEWDASHBOARD","HeaderReportDropdown","useTextMenu","isPublished","savePublished","canSave","draftButtonTooltip","draftDivTooltip","publishedTooltip","PublishedStatus","togglePublished","Tooltip","Label","onUndo","onRedo","UndoRedoKeyListeners","handleKeydown","ctrlKey","metaKey","isZChar","keyCode","isYChar","isEditingMarkdown","isEditingTitle","stopPeriodicRender","refreshTimer","uiOverrideRegistry","stringToList","stringyList","ButtonRow","DashboardEmbedControls","onHide","addInfoToast","ready","setReady","loading","setLoading","embedded","setEmbedded","allowedDomains","setAllowedDomains","isDirty","allowed_domains","enableEmbedded","useCallback","makeApi","method","finally","disableEmbedded","Modal","okType","onOk","status","docsDescription","docsUrl","uuid","rel","InfoTooltipWithTrigger","tooltip","DashboardEmbedModal","hideFooter","addWarningToast","user","UserWithPermissionsAndRoles","charts","chartPropShape","setColorSchemeAndUnsavedChanges","isStarred","fetchFaveStar","fetchCharts","saveFaveStar","updateDashboardTitle","setEditMode","showBuilderPane","logEvent","hasUnsavedChanges","maxUndoHistoryExceeded","onRefresh","undoLength","redoLength","setMaxUndoHistoryExceeded","maxUndoHistoryToast","dashboardInfoChanged","dashboardTitleChanged","headerContainerStyle","editButtonStyle","dark2","actionButtonsStyle","StyledUndoRedoButton","AntdButton","undoRedoStyle","undoRedoEmphasized","undoRedoDisabled","saveBtnStyle","discardBtnStyle","Header","URL","searchParams","showEmbedModal","showingEmbedModal","hideEmbedModal","didNotifyMaxUndoHistoryToast","emphasizeUndo","emphasizeRedo","showingPropertiesModal","handleChangeText","handleCtrlZ","handleCtrlY","toggleEditMode","forceRefresh","overwriteDashboard","hidePropertiesModal","UNDO_LIMIT","ctrlYTimeout","ctrlZTimeout","nextText","visible","chartList","LOG_ACTIONS_FORCE_REFRESH_DASHBOARD","force","interval","chartCount","intervalMessage","predefinedValue","PeriodicRefreshOptions","option","moment","humanize","periodicRender","setPeriodicRunner","timed_refresh_immune_slices","affectedCharts","chart","LOG_ACTIONS_PERIODIC_RENDER_DASHBOARD","common","conf","DASHBOARD_AUTO_REFRESH_MODE","LOG_ACTIONS_TOGGLE_EDIT_DASHBOARD","edit_mode","slug","currentColorScheme","color_scheme","currentColorNamespace","color_namespace","currentSharedLabelColors","getSharedLabelColor","getColorMap","shared_label_colors","positionJSONLength","SUPERSET_DASHBOARD_POSITION_DATA_LIMIT","DASHBOARD_POSITION_DATA_LIMIT","SAVE_TYPE_OVERWRITE","dash_edit_perm","is_managed_externally","dash_share_perm","userCanSaveAs","dash_save_perm","findPermission","SUPERSET_DASHBOARD_PERIODICAL_REFRESH_LIMIT","SUPERSET_DASHBOARD_PERIODICAL_REFRESH_WARNING_MESSAGE","PageHeaderWithActions","editableTitleProps","certificatiedBadgeProps","faveStarProps","itemId","titlePanelAdditionalItems","rightPanelAdditionalItems","iconSize","discardChanges","menuDropdownProps","getPopupContainer","closest","onVisibleChange","additionalActionsMenu","showFaveStar","showTitlePanelItems","PropertiesModal","onSubmit","updates","parse","jsonMetadata","onlyApply","styles","isDashboardLoading","chartUpdateStartTime","chartUpdateEndTime","undoableLayout","reports","past","future","DASHBOARD_HEADER_ID","undoLayoutAction","redoLayoutAction","saveDashboardRequest","updateDataMask","fetchUISpecificReport","DashboardHeader","StyledDiv","StyledSpan","getEffectiveExtraFilters","col","op","val","findAffectedCharts","activeFilters","extraFormData","getRelevantDataMask","prop","prev","getAllActiveFilters","chartConfiguration","nativeFilters","crossFilters","rootPath","layoutItemId","cachedFiltersByChart","cachedFormdataByChart","ScopingType","isShowTypeInTree","formData","buildTree","treeItem","validNodes","initiallyExcludedCharts","buildTreeLeafTitle","itemToPass","sliceNameOverride","defaultText","currentTreeItem","checkTreeItem","checkedItems","items","parents","addInvisibleParents","getDefaultScopeValue","isScopingAll","hasTooltip","tooltipTitle","formScope","initialScope","updateFormValues","expandedKeys","setExpandedKeys","treeData","currentChartId","tree","useMemo","acc","cur","useFilterScopeTree","autoExpandParent","setAutoExpandParent","checkedKeys","getTreeCheckedItems","checkable","checkedItemParents","p1","p2","find","isExcluded","findFilterScope","Wrapper","CleanFormItem","pathToFormValue","formScopingType","formFilterScope","initialFilterScope","initialScopingType","hasScopeBeenModified","setHasScopeBeenModified","onUpdateFormValues","formValues","updateScopes","newScope","scoping","useComponentDidUpdate","initialValue","all","specific","hidden","FILTERS_FIELD_NAME","FILTER_SUPPORTED_TYPES","filter_time","filter_timegrain","filter_timecolumn","filter_select","filter_range","useForceUpdate","updateState","setNativeFilterFieldValues","form","formFilters","getFieldValue","setFields","datasetToSelectOption","table_name","hasTemporalColumns","dataset","columnTypes","ensureIsArray","column_types","doesColumnMatchFilterType","filterType","type_generic","formScoping","setFieldsValue","setCrossFilterFieldValues","defaultFilterConfiguration","useFilterConfiguration","native_filter_configuration","useDashboardLayout","useDashboardHasTabs","FILTER_TYPE","DragIcon","shouldForwardProp","propName","onRearrange","filterIds","drag","useDrag","useDrop","accept","dragIndex","hoverIndex","hoverBoundingRect","hoverMiddleY","hoverClientY","alt","viewBox","FilterTitle","borderRadius","dark1","secondary","StyledTrashIcon","StyledWarning","forwardRef","getFilterTitle","onRemove","restoreFilter","currentFilterId","removedFilters","erroredFilters","isRemoved","isErrored","isActive","renderComponent","renderFilterGroups","StyledAddBox","TabsContainer","onAdd","filtersContainerRef","mode","handleOnAdd","getElementById","navList","getElementsByClassName","arrow","trigger","overflowY","marginLeft","ContentHolder","TitlesContainer","active","display","StyledContainer","level","StyledContent","StyledTitle","BasicErrorAlert","iconColor","cacheWrapper","cache","keyFn","ChildrenContainer","CollapsibleControl","isChecked","setIsChecked","localCache","Map","cachedSupersetGet","ColumnSelect","allowClear","filterValues","formField","datasetId","setColumns","resetColumnField","touched","column_name","currentFilterType","currentColumn","useChangeEffect","previous","lookupValue","badResponse","getClientErrorObject","errorText","notFoundContent","showSearch","DatasetSelect","getErrorMessage","page","pageSize","searchColumn","query","opr","page_size","order_column","order_direction","response","totalCount","count","hasDefaultValue","hasDataset","setDataMask","enableNoResults","formFilter","queriesData","defaultValueQueriesData","defaultDataMask","isMissingRequiredValue","SuperChart","appSection","behaviors","chartType","validateMessage","validateStatus","RemovedContent","MainPanel","AddFilter","DeleteFilter","RowPanel","Row","availableFilters","selection","onDelete","labelInValue","dependencies","onDependenciesChange","rows","setRows","updateRows","newRows","findIndex","availableFilter","getDependencySuggestion","hasAvailableFilters","hasDependencies","newDependencies","TabPane","StyledRowContainer","controlsOrder","StyledFormItem","StyledRowFormItem","StyledRowSubFormItem","StyledLabel","DefaultValueContainer","RefreshIcon","StyledCollapse","Collapse","StyledTabs","StyledAsterisk","FilterTabs","configuration","FilterPanels","settings","FILTERS_WITH_ADHOC_FILTERS","FILTER_TYPE_NAME_MAPPING","FiltersConfigForm","filterToEdit","getAvailableFilters","activeFilterPanelKeys","handleActiveFilterPanelChange","setErroredFilters","validateDependencies","setError","metrics","setMetrics","activeTabKey","setActiveTabKey","undoFormValues","setUndoFormValues","datasetDetails","setDatasetDetails","defaultFormFilter","cascadeParentIds","nativeFilterItems","nativeFilterVizTypes","loadedDatasets","datasources","doLoadedDatasetsHaveTemporalColumns","showTimeRangePicker","currentDataset","datasourceCount","targets","datasets","mostUsedDataset","maxCount","datasource","controlItems","mainControlItems","removed","controlConfig","controlPanelSections","controlSetRows","getControlItems","mapControlItems","mapMainControlItems","mainControlItem","controlValues","config","initColumn","requiredFirst","rules","required","multiple","controlItem","renderTrigger","affectsDataMask","valuePropName","colon","resetConfig","description","getControlItemsMap","hasColumn","groupby","hasMetrics","hasFilledDataset","hasAdditionalFilters","canDependOnOtherFilters","isDataDirty","setNativeFilterFieldValuesWrapper","dependenciesDefaultValues","dependency","dependenciesText","refreshHandler","extra_form_data","getChartDataRequest","requestParams","asyncResult","setErrorWrapper","statusText","newFormData","defaultValueTooltip","setHasDefaultValue","enableEmptyFilter","defaultToFirstItem","setHasPartialDefaultValue","setIsRequired","setDefaultValueTooltip","useDefaultValue","showDataset","formChanged","hasPreFilter","adhoc_filters","time_range","hasEnableSingleValue","enableSingleValue","enableSingleMaxValue","hasSorting","sortAscending","showDefaultValue","onSortChanged","onEnableSingleValueChanged","validatePreFilter","validateFields","hasTimeRange","hasAdhoc","initialDefaultValue","preFilterValidator","Promise","reject","datasource_type","useImperativeHandle","changeTab","useBackendFormUpdate","chartDatasetUid","centered","forceRender","getFiltersConfigModalTestId","mappedName","isDisabled","customLabel","expandIconPosition","header","validator","AdhocFilterControl","filterable","savedMetrics","DateFilterControl","timeRange","granularity_sqla","is_dttm","sortMetric","metric","metric_name","verbose_name","SingleValueType","formValidationFields","getFieldsError","prevErroredFilters","CancelConfirmationAlert","onConfirm","onDismiss","closable","handleSave","onConfirmCancel","saveAlertVisible","componentId","divider","whitespace","StyledModalWrapper","StyledModalBody","StyledForm","ALLOW_DEPENDENCIES","FiltersConfigModal","isOpen","initialFilterId","createNewOnOpen","configFormRef","filterConfig","filterConfigMap","useFilterConfigMap","newFilterIds","setNewFilterIds","setRemovedFilters","setSaveAlertVisible","isPending","initialCurrentFilterId","setCurrentFilterId","setFormValues","unsavedFiltersIds","removal","timerId","getInitialFilterOrder","orderedFilters","setOrderedFilters","getActiveFilterPanelKey","activeFilterPanelKey","setActiveFilterPanelKey","addFilter","newFilterId","wasOpen","usePrevious","useOpenModal","currentFilterRemoved","nextFilterId","useRemoveCurrentFilter","handleRemoveItem","resetForm","isSaving","resetFields","changed","formValue","canBeUsedAsDependency","handleErroredFilters","erroredFiltersIds","field","cleanDeletedParents","handleConfirmCancel","handleCancel","initialOrder","didChangeOrder","isFieldsTouched","buildDependencyMap","dependencyMap","formItem","configItem","possibleDependencies","found","onValuesChange","changes","didChangeFilterName","didChangeSectionTitle","maskClosable","destroyOnClose","footer","ErrorBoundary","targetIndex","newOrderedFilter","startsWith","getForm","chartConfig","chart_configuration","preserve","VerticalDotsContainer","RefreshTooltip","VerticalDotsTrigger","dropdownIconsStyles","SliceHeaderControls","toggleControls","refreshChart","showControls","showCrossFilterScopingModal","updatedDttm","toggleExpandSlice","logExploreChart","exportCSV","handleToggleFullSize","exportFullCSV","isFullSize","cachedDttm","supersetCanShare","isCached","crossFilterItems","isTable","isCrossFilter","canEmitCrossFilter","form_data","emit_filter","cachedWhen","itemCachedDttm","fromNow","updatedWhen","refreshTooltipData","itemCached","refreshTooltip","fullscreenLabel","chartStatus","lineHeight","isDescriptionExpanded","supersetCanExplore","onExploreChart","ViewQueryModal","latestQueryFormData","draggable","resizable","responsive","queryFormData","queryForce","dataSize","isRequest","supersetCanCSV","fontSize","AntdIcon","Pill","alert","Title","color","ItemIcon","Item","Reset","Indent","Panel","FilterValue","FilterIndicatorText","APPLY_FILTERS_HINT","getFilterValueForDisplay","findExistingFilterSet","filterSetFilterValues","dataMaskSelected","dataMaskFromFilterSet","dataMaskSelectedEntries","filterFromSelectedFilters","isEqual","ignoreUndefined","ignoreNull","hasSamePropsNumber","indicator","path","resultValue","SearchOutlined","appliedCrossFilterIndicators","appliedIndicators","incompatibleIndicators","unsetIndicators","onHighlightFilterSource","setVisible","activeTabs","once","getDefaultActivePanel","activePanels","setActivePanels","indicatorKey","ghost","light","panels","fill","success","Popover","overlayClassName","IndicatorStatus","TIME_GRANULARITY_FIELDS","extractLabel","selectIndicatorValue","columnKey","arrValues","isDateFilter","timeGranularityMap","time_grain_sqla","granularity","getAppliedColumns","queriesResponse","applied_filters","getRejectedColumns","rejected_filters","cachedIndicatorsForChart","cachedDashboardFilterDataForChart","cachedNativeIndicatorsForChart","cachedNativeFilterDataForChart","defaultChartConfig","indicatorsInitialState","FiltersBadge","nativeIndicators","setNativeIndicators","dashboardIndicators","setDashboardIndicators","prevChart","prevChartStatus","prevDashboardFilters","prevDatasources","showIndicators","appliedColumns","rejectedColumns","matchingFilters","matchingDatasources","datasourceId","cachedFilterData","indicators","filterDataSource","getStatus","Applied","Incompatible","Unset","directPathToFilter","selectIndicatorsForChartFromFilter","localeCompare","selectIndicatorsForChart","prevNativeFilters","prevDashboardLayout","prevDataMask","prevChartConfig","hasValue","CrossFilterApplied","nativeFilterIndicators","nativeFilter","chartsInScope","crossFilterIndicators","dashboardLayoutValues","chartLayoutItem","layoutItem","elementId","filtersState","dashboardLayoutItem","selectNativeIndicatorsForChart","statuses","sortByStatus","ind1","ind2","isInactive","DetailsPanel","annotationsLoading","annotationsError","CrossFilterIcon","updateSliceName","annotationQuery","annotationError","isExpanded","sliceCanEdit","uiConfig","headerTooltip","setHeaderTooltip","headerRef","crossFilterValue","handleClickTitle","headerElement","offsetWidth","offsetHeight","emptyText","hideChartControls","MissingChart","isComponentVisible","setControlValue","labelColors","sharedLabelColors","timeout","maxRows","changeFilter","setFocusedFilterField","unsetFocusedFilterField","ownState","postTransformProps","datasetsStatus","SHOULD_UPDATE_ON_PROP_CHANGES","OVERFLOWABLE_VIZ_TYPES","ChartOverlay","SliceContainer","Chart","LOG_ACTIONS_EXPLORE_DASHBOARD_CHART","is_cached","lastTabId","localStorage","nextTabId","postFormData","mountExploreUrl","descriptionHeight","handleFilterMenuOpen","handleFilterMenuClose","setDescriptionRef","setHeaderRef","getChartHeight","getDescriptionHeight","shouldComponentUpdate","triggerQuery","resizeTimeout","areObjectsEqual","cacheBusterProp","descriptionRef","headerHeight","getHeaderHeight","computedStyle","getComputedStyle","getPropertyValue","marginBottom","newSelectedValues","LOG_ACTIONS_CHANGE_DASHBOARD_FILTER","isFullCSV","LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART","exportChart","row_limit","resultType","resultFormat","LOG_ACTIONS_FORCE_REFRESH_CHART","isDeactivatedViz","cached_dttm","isOverflowable","initialValues","isFilterBox","getFilterValuesByFilterId","description_markeddown","dangerouslySetInnerHTML","__html","ChartContainer","onFilterMenuOpen","onFilterMenuClose","annotationData","chartAlert","vizType","EMPTY_OBJECT","chartQueries","extraControls","PLACEHOLDER_DATASOURCE","label_colors","sliceId","cachedFormData","extraData","filterIdsAppliedOnChart","extra_filters","getFormDataWithExtraFilters","getAppliedFilterValues","SUPERSET_WEBSERVER_TIMEOUT","superset_can_explore","superset_can_share","superset_can_csv","slice_can_edit","SQL_MAX_ROW","updateComponents","URLShortLinkButton","anchorLinkId","emailContent","shortUrl","setShortUrl","emailLink","CopyToClipboard","copyNode","getCopyUrl","AnchorLink","scrollIntoView","showShortLinkButton","scrollAnchorIntoView","block","getLocationHash","HoverStyleOverrides","HoverMenu","bottomRight","adjustableWidthAndHeight","topRight","bottomLeft","topLeft","widthAndHeight","widthOnly","heightOnly","notAdjustable","proxyToInfinity","MAX_VALUE","adjustableWidth","adjustableHeight","gutterWidth","widthStep","heightStep","widthMultiple","heightMultiple","minWidthMultiple","maxWidthMultiple","minHeightMultiple","maxHeightMultiple","staticHeight","staticHeightMultiple","staticWidth","staticWidthMultiple","onResizeStop","onResize","onResizeStart","GRID_GUTTER_SIZE","GRID_BASE_UNIT","SNAP_TO_GRID","HANDLE_CLASSES","ResizableContainer","isResizing","handleResizeStart","handleResize","handleResizeStop","direction","nextWidthMultiple","nextHeightMultiple","enableConfig","resizableConfig","enable","grid","minWidth","minHeight","maxWidth","maxHeight","handleComponent","ResizableHandle","handleClasses","getComponentById","directPathToChild","directPathLastUpdated","focusedFilterScope","fullSizeChartId","availableColumnCount","deleteComponent","handleComponentDrop","setFullSizeChartId","postAddSliceFromDashboard","FilterFocusHighlight","otherProps","useTheme","useSelector","focusedFilterField","selectFocusedFilterScope","focusedNativeFilterId","focusedFilterId","focusedChartStyles","borderColor","opacity","boxShadow","ChartHolder","chartComponentId","currentPath","componentType","IN_COMPONENT_ELEMENT_TYPES","getChartAndLabelComponentIdFromPath","outlinedComponentId","outlinedColumnName","isFocused","handleChangeFocus","handleDeleteComponent","handleUpdateSliceName","handleExtraControl","handlePostTransformProps","hideOutline","timerKey","prevTimerKey","nextFocus","nextName","columnParentWidth","GRID_MIN_COLUMN_COUNT","chartWidth","chartHeight","innerWidth","GRID_MIN_ROW_UNITS","renderInFocusCSS","MenuItem","renderButton","renderOption","selected","opt","overlayStyle","marginTop","dropdownOptions","MarkdownModeDropdown","WithPopoverMenu","container","onChangeFocus","shouldFocus","shouldFocusFunc","disableClick","menuItems","contains","parentNode","htmlSanitization","htmlSchemaOverrides","MARKDOWN_PLACE_HOLDER","MARKDOWN_ERROR_MESSAGE","Markdown","markdownSource","code","editor","editorMode","renderStartTime","Logger","handleChangeEditorMode","handleMarkdownChange","setEditor","LOG_ACTIONS_RENDER_CHART","start_offset","ts","duration","hasError","nextComponent","nextUndoLength","nextRedoLength","MarkdownEditor","componentDidCatch","getSession","setUseWrapMode","nextFocused","nextEditMode","updateMarkdownContent","nextValue","renderEditMode","showGutter","readOnly","onLoad","renderPreviewMode","SafeMarkdown","HTML_SANITIZATION","HTML_SANITIZATION_SCHEMA_EXTENSIONS","DragHandleContainer","DragHandle","BackgroundStyleDropdown","backgroundStyleOptions","minColumnWidth","Column","handleChangeBackground","handleUpdateMeta","columnComponent","onChangeTab","columnItems","backgroundStyle","background","BACKGROUND_TRANSPARENT","itemIndex","Divider","handleChangeSize","headerStyle","headerStyleOptions","headerSize","SMALL_HEADER","rowStyle","occupiedColumnCount","rowComponent","rowItems","RENDER_TAB","RENDER_TAB_CONTENT","renderType","onDropOnTab","setDirectPathToChild","TabTitleContainer","isHighlighted","renderDraggableContentBottom","dropProps","renderDraggableContentTop","Tab","handleTopDropTargetDrop","handleChangeTab","pathToTabIndex","nextTabText","renderTabContent","tabComponent","tabParentComponent","shouldDisplayEmptyState","EmptyState","image","renderTab","findTabIndexByComponentId","currentComponentIdx","nextParentId","childId","getDirectPathToTabIndex","tabsComponent","getLeafComponentIdFromPath","renderHoverMenu","setActiveTabs","createComponent","StyledTabsContainer","Tabs","showDeleteConfirmModal","AntdModal","handleDeleteTab","okText","cancelText","handleEdit","NEW_TAB_ID","tabIds","handleClickTab","handleDropOnTab","maxIndex","currTabsIds","nextTabsIds","nextFocusComponent","currentFocusComponent","nextTabIndex","targetTabId","LOG_ACTIONS_SELECT_DASHBOARD_TAB","target_id","dropTabIndex","isCurrentTabVisible","selectedTabIndex","tabsToHighlight","tabsDropIndicatorProps","tabsDragSourceRef","onEdit","tabId","componentLookup","TabsConnected","DYNAMIC_TYPE","dashboardData","updateMeta","Suspense","fallback","DashboardComponent","occupiedWidth","minimumWidth","getDetailedComponentWidth","TabIds","getOnlyExtraFormData","checkIsMissingRequiredValue","useFilterSets","filterSets","useFilters","preselectedNativeFilters","preselectNativeFilters","preselect","useNativeFiltersDataMask","useFilterSetNameDuplicated","filterSetName","ignoreName","isFilterSetNameDuplicated","ActionButton","ActionButtons","onCreate","isCreateDisabled","htmlType","getFilterBarTestId","FilterHeader","StyledFilterRow","filterSet","resultFilters","defaultActiveKey","expandIcon","Icon","changedFilter","removedFilter","strong","mark","HeaderButton","TitleText","IconsBlock","setFilterSetName","isApplied","onRebuild","danger","editable","FilterSetsWrapper","FilterSetUnitWrapper","DEFAULT_FILTER_SET_NAME","onEditFilterSet","onFilterSelectionChange","dataMaskApplied","selectedFiltersSetId","setSelectedFiltersSetId","AllFilters","foundFilterSet","isFilterMissingOrContainsInvalidMetadata","takeFilterSet","localTarget","newFilterSet","handleDeleteFilterSet","filterSetId","newFilters","updatedFilterSet","handleRebuild","Warning","isDuplicateFilterSet","resultDisabled","setOpen","TitleArea","AddFiltersButtonContainer","toggleFiltersBar","extendStatics","__extends","__","ELEMENT_TYPE_HTML","ELEMENT_TYPE_SVG","createPortalNode","elementType","lastPlaceholder","initialProps","createElementNS","portalNode","setPortalProps","getInitialPortalProps","mount","newParent","newPlaceholder","unmount","domElement","HTMLElement","SVGElement","validateElementType","tagName","replaceChild","expectedPlaceholder","InPortal","addPropsChannel","nodeProps","_a","OutPortal","placeholderNode","passPropsThroughPortal","propsForTarget","currentPortalNode","createHtmlPortalNode","dispatchFocusAction","queriesDataPlaceholder","inView","showOverflow","parentRef","setFilterActive","dependencyIds","parentState","useFilterDependencies","shouldRefresh","isDashboardRefreshing","isRefreshing","isFilterRefreshing","isFiltersRefreshing","useShouldFilterRefresh","setFormData","setOwnState","inViewFirstTime","setInViewFirstTime","inputRef","hasDataSource","setIsLoading","setIsRefreshing","handleFilterLoadFinish","filterOwnState","objValue","othValue","setFocusedFilter","unsetFocusedFilter","extractTabLabel","extractChartLabel","RowLabel","RowValue","FilterName","DependencyItem","RowTruncationCount","TooltipList","TooltipSectionLabel","TooltipTrigger","useTruncation","elementRef","elementsTruncated","setElementsTruncated","hasHiddenElements","setHasHiddenElements","previousEffectInfoRef","parentElementWidth","useLayoutEffect","currentElement","clientWidth","childNodes","previousEffectInfo","parentElement","elementsCount","TooltipWithTruncation","getTooltipSection","ScopeRow","useCharts","topLevelTabs","topElementId","topLevelTab","layoutCharts","layoutElement","layoutChart","topLevelTabsInFullScope","layoutChartElementsInTabsInScope","excludedIndex","chartsInExcludedTabs","layoutChartElementInExcludedTab","useFilterScope","scopeRef","tooltipText","DependencyValue","hasSeparator","DependenciesRow","filterDependencyIds","filterDependencyId","dependenciesRef","NameRow","filterNameRef","TypeRow","FilterCardContent","FilterCard","externalIsVisible","internalIsVisible","setInternalIsVisible","mouseEnterDelay","mouseLeaveDelay","destroyTooltipOnHide","StyledIcon","StyledFilterControlTitle","StyledFilterControlTitleBox","StyledFilterControlContainer","FormItem","ToolTipContainer","RequiredFieldIndicator","paddingLeft","DescriptionToolTip","overlayInnerStyle","overflow","WebkitLineClamp","WebkitBoxOrient","textOverflow","cursor","FilterControl","isFilterActive","setIsFilterActive","useContext","FilterBarScrollContext","FilterControls","portalNodes","filtersWithValues","filtersInScope","filtersOutOfScope","dashboardHasTabs","isFilterInScope","selectChartTabParents","useSelectChartTabParents","tabParents","useIsFilterInScope","useSelectFiltersInScope","showCollapsePanel","filterControlFactory","bordered","collapsible","ActionButtonsContainer","rgba","mediumLight","onApply","onClearAll","isApplyDisabled","isClearAllEnabled","BarWrapper","Bar","CollapsedBar","offset","StyledCollapseIcon","StyledFilterIcon","FilterBarEmptyStateContainer","EXCLUDED_URL_PARAMS","publishDataMask","history","updateKey","previousParams","newParams","append","nativeFiltersCacheKey","createContext","FilterBar","filtersOpen","editFilterSetId","setEditFilterSetId","setDataMaskSelected","setUpdateKey","useTabId","setTab","previousFilters","nativeFilterValues","setIsScrolling","handleFilterSelectionChange","draft","currentFilter","previousFilter","currentTargets","currentDataMask","previousType","previousTargets","previousDataMask","typeChanged","targetsChanged","dataMaskChanged","dataMaskAppliedText","handleApply","handleClearAll","openFiltersBar","onscroll","selectedId","useFilterUpdates","dataSelectedValues","dataAppliedValues","checkIsApplyDisabled","isInitialized","setIsInitialized","MigrationContext","numberOfLoadingCharts","numberOfFilterbox","querySelectorAll","filterTimeout","numberOfLoadedCharts","useInitialization","tabPaneStyle","overscrollBehavior","numberOfFilters","Provider","filterCount","filterSetCount","FilterSets","getRootLevelTabsComponent","dashboardRoot","rootChildId","shouldFocusTabs","gridComponent","resizeComponent","DashboardEmptyStateContainer","DashboardGrid","rowGuideTop","getRowGuidePosition","setGridRef","resizeRef","GRID_COLUMN_COUNT","shouldDisplayTopLevelTabEmptyState","dashboardEmptyState","buttonText","buttonAction","topLevelTabEmptyState","nativeFilterScopes","useNativeFilterScopes","getRootLevelTabIndex","layoutItems","getChartIdsInFilterScope","childIds","renderTabBar","fullWidth","animated","allowOverflow","FiltersPanel","StickyPanel","StyledHeader","StyledDashboardContent","dashboardFiltersOpen","nativeFiltersEnabled","transitionTiming","handleDeleteTopLevelTabs","firstTab","standaloneMode","isReport","hideDashboardHeader","hideTitle","barTopOffset","setBarTopOffset","observer","ResizeObserver","showDashboard","toggleDashboardFiltersOpen","showNativeFilters","show_native_filters","expandFilters","setDashboardFiltersOpen","requiredFirstFilter","useNativeFilters","filterBarWidth","containerRef","setIsSticky","intersectionRatio","IntersectionObserver","unobserve","useElementOnScreen","filterSetEnabled","filterBarHeight","filterBarOffset","draggableStyle","currentTopLevelTabs","currentTabsLength","newTabsLength","lastTab","renderDraggableContent","hideNav","USER_CONTENT_COMPONENT_TYPE","isDashboardEmpty","actions","addSliceToDashboard","removeSliceFromDashboard","clearDataMaskState","dashboardInfoPropShape","dashboardStatePropShape","ownDataCharts","impressionId","initMessages","Dashboard","hasChanged","unload","returnValue","appliedFilters","appliedOwnDataCharts","onVisibilityChange","appContainer","bootstrapData","getAttribute","eventData","is_soft_navigation","is_edit_mode","mount_duration","is_empty","is_published","bootstrap_data_length","directLinkComponentId","LOG_ACTIONS_MOUNT_DASHBOARD","visibilityState","visibilityEventData","applyCharts","currentChartIds","nextChartIds","newChartId","removedChartId","applyFilters","onBeforeUnload","logStart","LOG_ACTIONS_HIDE_BROWSER_TAB","getAllCharts","currFilterKeys","appliedFilterKeys","allKeys","affectedChartIds","appliedChartIds","affectedIds","getAffectedOwnDataCharts","refreshCharts","ids","contextType","PluginContext","flash_messages","setDatasources"],"sourceRoot":""}