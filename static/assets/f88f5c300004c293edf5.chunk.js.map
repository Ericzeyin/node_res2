{"version":3,"file":"f88f5c300004c293edf5.chunk.js","mappings":"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","sources":["webpack://superset/./node_modules/lodash/_baseUniq.js","webpack://superset/./node_modules/lodash/_createSet.js","webpack://superset/./node_modules/lodash/uniqBy.js","webpack://superset/./src/components/ImportModal/styles.ts","webpack://superset/./src/components/ImportModal/ErrorAlert.tsx","webpack://superset/./src/components/ImportModal/index.tsx","webpack://superset/./src/views/CRUD/chart/ChartList.tsx"],"sourcesContent":["var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","var baseIteratee = require('./_baseIteratee'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * This method is like `_.uniq` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * uniqueness is computed. The order of result values is determined by the\n * order they occur in the array. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nfunction uniqBy(array, iteratee) {\n  return (array && array.length) ? baseUniq(array, baseIteratee(iteratee, 2)) : [];\n}\n\nmodule.exports = uniqBy;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { css, SupersetTheme } from '@superset-ui/core';\n\nexport const antdWarningAlertStyles = (theme: SupersetTheme) => css`\n  border: 1px solid ${theme.colors.warning.light1};\n  padding: ${theme.gridUnit * 4}px;\n  margin: ${theme.gridUnit * 4}px 0;\n  color: ${theme.colors.warning.dark2};\n\n  .ant-alert-message {\n    margin: 0;\n  }\n\n  .ant-alert-description {\n    font-size: ${theme.typography.sizes.s + 1}px;\n    line-height: ${theme.gridUnit * 4}px;\n\n    .ant-alert-icon {\n      margin-right: ${theme.gridUnit * 2.5}px;\n      font-size: ${theme.typography.sizes.l + 1}px;\n      position: relative;\n      top: ${theme.gridUnit / 4}px;\n    }\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { FunctionComponent } from 'react';\nimport { t, SupersetTheme } from '@superset-ui/core';\n\nimport { getDatabaseDocumentationLinks } from 'src/views/CRUD/hooks';\nimport Alert from 'src/components/Alert';\nimport { antdWarningAlertStyles } from './styles';\n\nconst supersetTextDocs = getDatabaseDocumentationLinks();\nexport const DOCUMENTATION_LINK = supersetTextDocs\n  ? supersetTextDocs.support\n  : 'https://superset.apache.org/docs/databases/installing-database-drivers';\n\nexport interface IProps {\n  errorMessage: string;\n  showDbInstallInstructions: boolean;\n}\n\nconst ErrorAlert: FunctionComponent<IProps> = ({\n  errorMessage,\n  showDbInstallInstructions,\n}) => (\n  <Alert\n    closable={false}\n    css={(theme: SupersetTheme) => antdWarningAlertStyles(theme)}\n    type=\"error\"\n    showIcon\n    message={errorMessage}\n    description={\n      showDbInstallInstructions ? (\n        <>\n          <br />\n          {t(\n            'Database driver for importing maybe not installed. Visit the Superset documentation page for installation instructions:',\n          )}\n          <a\n            href={DOCUMENTATION_LINK}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"additional-fields-alert-description\"\n          >\n            {t('here')}\n          </a>\n          .\n        </>\n      ) : (\n        ''\n      )\n    }\n  />\n);\n\nexport default ErrorAlert;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { FunctionComponent, useEffect, useState } from 'react';\nimport { UploadChangeParam, UploadFile } from 'antd/lib/upload/interface';\nimport { styled, t } from '@superset-ui/core';\n\nimport Button from 'src/components/Button';\nimport Modal from 'src/components/Modal';\nimport { Upload } from 'src/components';\nimport { useImportResource } from 'src/views/CRUD/hooks';\nimport { ImportResourceName } from 'src/views/CRUD/types';\nimport ErrorAlert from './ErrorAlert';\n\nconst HelperMessage = styled.div`\n  display: block;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n  font-size: ${({ theme }) => theme.typography.sizes.s}px;\n`;\n\nconst StyledInputContainer = styled.div`\n  padding-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 2}px;\n\n  & > div {\n    margin: ${({ theme }) => theme.gridUnit}px 0;\n  }\n\n  &.extra-container {\n    padding-top: 8px;\n  }\n\n  .confirm-overwrite {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2}px;\n  }\n\n  .input-container {\n    display: flex;\n    align-items: center;\n\n    label {\n      display: flex;\n      margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n\n    i {\n      margin: 0 ${({ theme }) => theme.gridUnit}px;\n    }\n  }\n\n  input,\n  textarea {\n    flex: 1 1 auto;\n  }\n\n  textarea {\n    height: 160px;\n    resize: none;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    color: ${({ theme }) => theme.colors.grayscale.light1};\n  }\n\n  textarea,\n  input[type='text'],\n  input[type='number'] {\n    padding: ${({ theme }) => theme.gridUnit * 1.5}px\n      ${({ theme }) => theme.gridUnit * 2}px;\n    border-style: none;\n    border: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-radius: ${({ theme }) => theme.gridUnit}px;\n\n    &[name='name'] {\n      flex: 0 1 auto;\n      width: 40%;\n    }\n\n    &[name='sqlalchemy_uri'] {\n      margin-right: ${({ theme }) => theme.gridUnit * 3}px;\n    }\n  }\n`;\n\nexport interface ImportModelsModalProps {\n  resourceName: ImportResourceName;\n  resourceLabel: string;\n  passwordsNeededMessage: string;\n  confirmOverwriteMessage: string;\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  onModelImport: () => void;\n  show: boolean;\n  onHide: () => void;\n  passwordFields?: string[];\n  setPasswordFields?: (passwordFields: string[]) => void;\n}\n\nconst ImportModelsModal: FunctionComponent<ImportModelsModalProps> = ({\n  resourceName,\n  resourceLabel,\n  passwordsNeededMessage,\n  confirmOverwriteMessage,\n  onModelImport,\n  show,\n  onHide,\n  passwordFields = [],\n  setPasswordFields = () => {},\n}) => {\n  const [isHidden, setIsHidden] = useState<boolean>(true);\n  const [passwords, setPasswords] = useState<Record<string, string>>({});\n  const [needsOverwriteConfirm, setNeedsOverwriteConfirm] =\n    useState<boolean>(false);\n  const [confirmedOverwrite, setConfirmedOverwrite] = useState<boolean>(false);\n  const [fileList, setFileList] = useState<UploadFile[]>([]);\n  const [importingModel, setImportingModel] = useState<boolean>(false);\n  const [errorMessage, setErrorMessage] = useState<string>();\n\n  const clearModal = () => {\n    setFileList([]);\n    setPasswordFields([]);\n    setPasswords({});\n    setNeedsOverwriteConfirm(false);\n    setConfirmedOverwrite(false);\n    setImportingModel(false);\n    setErrorMessage('');\n  };\n\n  const handleErrorMsg = (msg: string) => {\n    setErrorMessage(msg);\n  };\n\n  const {\n    state: { alreadyExists, passwordsNeeded },\n    importResource,\n  } = useImportResource(resourceName, resourceLabel, handleErrorMsg);\n\n  useEffect(() => {\n    setPasswordFields(passwordsNeeded);\n    if (passwordsNeeded.length > 0) {\n      setImportingModel(false);\n    }\n  }, [passwordsNeeded, setPasswordFields]);\n\n  useEffect(() => {\n    setNeedsOverwriteConfirm(alreadyExists.length > 0);\n    if (alreadyExists.length > 0) {\n      setImportingModel(false);\n    }\n  }, [alreadyExists, setNeedsOverwriteConfirm]);\n\n  // Functions\n  const hide = () => {\n    setIsHidden(true);\n    onHide();\n    clearModal();\n  };\n\n  const onUpload = () => {\n    if (!(fileList[0]?.originFileObj instanceof File)) {\n      return;\n    }\n\n    setImportingModel(true);\n    importResource(\n      fileList[0].originFileObj,\n      passwords,\n      confirmedOverwrite,\n    ).then(result => {\n      if (result) {\n        clearModal();\n        onModelImport();\n      }\n    });\n  };\n\n  const changeFile = (info: UploadChangeParam) => {\n    setFileList([\n      {\n        ...info.file,\n        status: 'done',\n      },\n    ]);\n  };\n\n  const removeFile = (removedFile: UploadFile) => {\n    setFileList(fileList.filter(file => file.uid !== removedFile.uid));\n    return false;\n  };\n\n  const confirmOverwrite = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const targetValue = (event.currentTarget?.value as string) ?? '';\n    setConfirmedOverwrite(targetValue.toUpperCase() === t('OVERWRITE'));\n  };\n\n  const renderPasswordFields = () => {\n    if (passwordFields.length === 0) {\n      return null;\n    }\n\n    return (\n      <>\n        <h5>Database passwords</h5>\n        <HelperMessage>{passwordsNeededMessage}</HelperMessage>\n        {passwordFields.map(fileName => (\n          <StyledInputContainer key={`password-for-${fileName}`}>\n            <div className=\"control-label\">\n              {fileName}\n              <span className=\"required\">*</span>\n            </div>\n            <input\n              name={`password-${fileName}`}\n              autoComplete={`password-${fileName}`}\n              type=\"password\"\n              value={passwords[fileName]}\n              onChange={event =>\n                setPasswords({ ...passwords, [fileName]: event.target.value })\n              }\n            />\n          </StyledInputContainer>\n        ))}\n      </>\n    );\n  };\n\n  const renderOverwriteConfirmation = () => {\n    if (!needsOverwriteConfirm) {\n      return null;\n    }\n\n    return (\n      <>\n        <StyledInputContainer>\n          <div className=\"confirm-overwrite\">{confirmOverwriteMessage}</div>\n          <div className=\"control-label\">\n            {t('Type \"%s\" to confirm', t('OVERWRITE'))}\n          </div>\n          <input\n            data-test=\"overwrite-modal-input\"\n            id=\"overwrite\"\n            type=\"text\"\n            onChange={confirmOverwrite}\n          />\n        </StyledInputContainer>\n      </>\n    );\n  };\n\n  // Show/hide\n  if (isHidden && show) {\n    setIsHidden(false);\n  }\n\n  return (\n    <Modal\n      name=\"model\"\n      className=\"import-model-modal\"\n      disablePrimaryButton={\n        fileList.length === 0 ||\n        (needsOverwriteConfirm && !confirmedOverwrite) ||\n        importingModel\n      }\n      onHandledPrimaryAction={onUpload}\n      onHide={hide}\n      primaryButtonName={needsOverwriteConfirm ? t('Overwrite') : t('Import')}\n      primaryButtonType={needsOverwriteConfirm ? 'danger' : 'primary'}\n      width=\"750px\"\n      show={show}\n      title={<h4>{t('Import %s', resourceLabel)}</h4>}\n    >\n      <StyledInputContainer>\n        <Upload\n          name=\"modelFile\"\n          id=\"modelFile\"\n          data-test=\"model-file-input\"\n          accept=\".yaml,.json,.yml,.zip\"\n          fileList={fileList}\n          onChange={changeFile}\n          onRemove={removeFile}\n          // upload is handled by hook\n          customRequest={() => {}}\n          disabled={importingModel}\n        >\n          <Button loading={importingModel}>Select file</Button>\n        </Upload>\n      </StyledInputContainer>\n      {errorMessage && (\n        <ErrorAlert\n          errorMessage={errorMessage}\n          showDbInstallInstructions={passwordFields.length > 0}\n        />\n      )}\n      {renderPasswordFields()}\n      {renderOverwriteConfirmation()}\n    </Modal>\n  );\n};\n\nexport default ImportModelsModal;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  getChartMetadataRegistry,\n  styled,\n  SupersetClient,\n  t,\n} from '@superset-ui/core';\nimport React, { useState, useMemo, useCallback } from 'react';\nimport rison from 'rison';\nimport { uniqBy } from 'lodash';\nimport moment from 'moment';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport {\n  createErrorHandler,\n  createFetchRelated,\n  handleChartDelete,\n} from 'src/views/CRUD/utils';\nimport {\n  useChartEditModal,\n  useFavoriteStatus,\n  useListViewResource,\n} from 'src/views/CRUD/hooks';\nimport handleResourceExport from 'src/utils/export';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport SubMenu, { SubMenuProps } from 'src/views/components/SubMenu';\nimport FaveStar from 'src/components/FaveStar';\nimport ListView, {\n  Filter,\n  FilterOperator,\n  Filters,\n  ListViewProps,\n  SelectOption,\n} from 'src/components/ListView';\nimport Loading from 'src/components/Loading';\nimport { dangerouslyGetItemDoNotUse } from 'src/utils/localStorageHelpers';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport PropertiesModal from 'src/explore/components/PropertiesModal';\nimport ImportModelsModal from 'src/components/ImportModal/index';\nimport Chart from 'src/types/Chart';\nimport { Tooltip } from 'src/components/Tooltip';\nimport Icons from 'src/components/Icons';\nimport { nativeFilterGate } from 'src/dashboard/components/nativeFilters/utils';\nimport setupPlugins from 'src/setup/setupPlugins';\nimport InfoTooltip from 'src/components/InfoTooltip';\nimport CertifiedBadge from 'src/components/CertifiedBadge';\nimport { bootstrapData } from 'src/preamble';\nimport Owner from 'src/types/Owner';\nimport ChartCard from './ChartCard';\n\nconst FlexRowContainer = styled.div`\n  align-items: center;\n  display: flex;\n\n  a {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    line-height: 1.2;\n  }\n\n  svg {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst PAGE_SIZE = 25;\nconst PASSWORDS_NEEDED_MESSAGE = t(\n  'The passwords for the databases below are needed in order to ' +\n    'import them together with the charts. Please note that the ' +\n    '\"Secure Extra\" and \"Certificate\" sections of ' +\n    'the database configuration are not present in export files, and ' +\n    'should be added manually after the import if they are needed.',\n);\nconst CONFIRM_OVERWRITE_MESSAGE = t(\n  'You are importing one or more charts that already exist. ' +\n    'Overwriting might cause you to lose some of your work. Are you ' +\n    'sure you want to overwrite?',\n);\n\nsetupPlugins();\nconst registry = getChartMetadataRegistry();\n\nconst createFetchDatasets = async (\n  filterValue = '',\n  page: number,\n  pageSize: number,\n) => {\n  // add filters if filterValue\n  const filters = filterValue\n    ? { filters: [{ col: 'table_name', opr: 'sw', value: filterValue }] }\n    : {};\n  const queryParams = rison.encode({\n    columns: ['datasource_name', 'datasource_id'],\n    keys: ['none'],\n    order_column: 'table_name',\n    order_direction: 'asc',\n    page,\n    page_size: pageSize,\n    ...filters,\n  });\n\n  const { json = {} } = await SupersetClient.get({\n    endpoint: `/api/v1/dataset/?q=${queryParams}`,\n  });\n\n  const datasets = json?.result?.map(\n    ({ table_name: tableName, id }: { table_name: string; id: number }) => ({\n      label: tableName,\n      value: id,\n    }),\n  );\n\n  return {\n    data: uniqBy<SelectOption>(datasets, 'value'),\n    totalCount: json?.count,\n  };\n};\n\ninterface ChartListProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  user: {\n    userId: string | number;\n    firstName: string;\n    lastName: string;\n  };\n}\n\nconst Actions = styled.div`\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nfunction ChartList(props: ChartListProps) {\n  const {\n    addDangerToast,\n    addSuccessToast,\n    user: { userId },\n  } = props;\n\n  const {\n    state: {\n      loading,\n      resourceCount: chartCount,\n      resourceCollection: charts,\n      bulkSelectEnabled,\n    },\n    setResourceCollection: setCharts,\n    hasPerm,\n    fetchData,\n    toggleBulkSelect,\n    refreshData,\n  } = useListViewResource<Chart>('chart', t('chart'), addDangerToast);\n\n  const chartIds = useMemo(() => charts.map(c => c.id), [charts]);\n\n  const [saveFavoriteStatus, favoriteStatus] = useFavoriteStatus(\n    'chart',\n    chartIds,\n    addDangerToast,\n  );\n  const {\n    sliceCurrentlyEditing,\n    handleChartUpdated,\n    openChartEditModal,\n    closeChartEditModal,\n  } = useChartEditModal(setCharts, charts);\n\n  const [importingChart, showImportModal] = useState<boolean>(false);\n  const [passwordFields, setPasswordFields] = useState<string[]>([]);\n  const [preparingExport, setPreparingExport] = useState<boolean>(false);\n\n  // TODO: Fix usage of localStorage keying on the user id\n  const userSettings = dangerouslyGetItemDoNotUse(userId?.toString(), null) as {\n    thumbnails: boolean;\n  };\n\n  const openChartImportModal = () => {\n    showImportModal(true);\n  };\n\n  const closeChartImportModal = () => {\n    showImportModal(false);\n  };\n\n  const handleChartImport = () => {\n    showImportModal(false);\n    refreshData();\n    addSuccessToast(t('Chart imported'));\n  };\n\n  const canCreate = hasPerm('can_write');\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canExport =\n    hasPerm('can_export') && isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT);\n  const initialSort = [{ id: 'changed_on_delta_humanized', desc: true }];\n  const enableBroadUserAccess =\n    bootstrapData?.common?.conf?.ENABLE_BROAD_ACTIVITY_ACCESS;\n  const handleBulkChartExport = (chartsToExport: Chart[]) => {\n    const ids = chartsToExport.map(({ id }) => id);\n    handleResourceExport('chart', ids, () => {\n      setPreparingExport(false);\n    });\n    setPreparingExport(true);\n  };\n  const changedByName = (lastSavedBy: Owner) =>\n    lastSavedBy?.first_name\n      ? `${lastSavedBy?.first_name} ${lastSavedBy?.last_name}`\n      : null;\n\n  function handleBulkChartDelete(chartsToDelete: Chart[]) {\n    SupersetClient.delete({\n      endpoint: `/api/v1/chart/?q=${rison.encode(\n        chartsToDelete.map(({ id }) => id),\n      )}`,\n    }).then(\n      ({ json = {} }) => {\n        refreshData();\n        addSuccessToast(json.message);\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t('There was an issue deleting the selected charts: %s', errMsg),\n        ),\n      ),\n    );\n  }\n\n  const columns = useMemo(\n    () => [\n      {\n        Cell: ({\n          row: {\n            original: { id },\n          },\n        }: any) =>\n          userId && (\n            <FaveStar\n              itemId={id}\n              saveFaveStar={saveFavoriteStatus}\n              isStarred={favoriteStatus[id]}\n            />\n          ),\n        Header: '',\n        id: 'id',\n        disableSortBy: true,\n        size: 'xs',\n        hidden: !userId,\n      },\n      {\n        Cell: ({\n          row: {\n            original: {\n              url,\n              slice_name: sliceName,\n              certified_by: certifiedBy,\n              certification_details: certificationDetails,\n              description,\n            },\n          },\n        }: any) => (\n          <FlexRowContainer>\n            <a href={url} data-test={`${sliceName}-list-chart-title`}>\n              {certifiedBy && (\n                <>\n                  <CertifiedBadge\n                    certifiedBy={certifiedBy}\n                    details={certificationDetails}\n                  />{' '}\n                </>\n              )}\n              {sliceName}\n            </a>\n            {description && (\n              <InfoTooltip tooltip={description} viewBox=\"0 -1 24 24\" />\n            )}\n          </FlexRowContainer>\n        ),\n        Header: t('Chart'),\n        accessor: 'slice_name',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { viz_type: vizType },\n          },\n        }: any) => registry.get(vizType)?.name || vizType,\n        Header: t('Visualization type'),\n        accessor: 'viz_type',\n        size: 'xxl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: {\n              datasource_name_text: dsNameTxt,\n              datasource_url: dsUrl,\n            },\n          },\n        }: any) => <a href={dsUrl}>{dsNameTxt}</a>,\n        Header: t('Dataset'),\n        accessor: 'datasource_id',\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: {\n              last_saved_by: lastSavedBy,\n              changed_by_url: changedByUrl,\n            },\n          },\n        }: any) =>\n          enableBroadUserAccess ? (\n            <a href={changedByUrl}>{changedByName(lastSavedBy)}</a>\n          ) : (\n            <>{changedByName(lastSavedBy)}</>\n          ),\n        Header: t('Modified by'),\n        accessor: 'last_saved_by.first_name',\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { last_saved_at: lastSavedAt },\n          },\n        }: any) => (\n          <span className=\"no-wrap\">\n            {lastSavedAt ? moment.utc(lastSavedAt).fromNow() : null}\n          </span>\n        ),\n        Header: t('Last modified'),\n        accessor: 'last_saved_at',\n        size: 'xl',\n      },\n      {\n        accessor: 'owners',\n        hidden: true,\n        disableSortBy: true,\n      },\n      {\n        Cell: ({\n          row: {\n            original: { created_by: createdBy },\n          },\n        }: any) =>\n          createdBy ? `${createdBy.first_name} ${createdBy.last_name}` : '',\n        Header: t('Created by'),\n        accessor: 'created_by',\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          const handleDelete = () =>\n            handleChartDelete(\n              original,\n              addSuccessToast,\n              addDangerToast,\n              refreshData,\n            );\n          const openEditModal = () => openChartEditModal(original);\n          const handleExport = () => handleBulkChartExport([original]);\n          if (!canEdit && !canDelete && !canExport) {\n            return null;\n          }\n\n          return (\n            <Actions className=\"actions\">\n              {canDelete && (\n                <ConfirmStatusChange\n                  title={t('Please confirm')}\n                  description={\n                    <>\n                      {t('Are you sure you want to delete')}{' '}\n                      <b>{original.slice_name}</b>?\n                    </>\n                  }\n                  onConfirm={handleDelete}\n                >\n                  {confirmDelete => (\n                    <Tooltip\n                      id=\"delete-action-tooltip\"\n                      title={t('Delete')}\n                      placement=\"bottom\"\n                    >\n                      <span\n                        data-test=\"trash\"\n                        role=\"button\"\n                        tabIndex={0}\n                        className=\"action-button\"\n                        onClick={confirmDelete}\n                      >\n                        <Icons.Trash />\n                      </span>\n                    </Tooltip>\n                  )}\n                </ConfirmStatusChange>\n              )}\n              {canExport && (\n                <Tooltip\n                  id=\"export-action-tooltip\"\n                  title={t('Export')}\n                  placement=\"bottom\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className=\"action-button\"\n                    onClick={handleExport}\n                  >\n                    <Icons.Share />\n                  </span>\n                </Tooltip>\n              )}\n              {canEdit && (\n                <Tooltip\n                  id=\"edit-action-tooltip\"\n                  title={t('Edit')}\n                  placement=\"bottom\"\n                >\n                  <span\n                    role=\"button\"\n                    tabIndex={0}\n                    className=\"action-button\"\n                    onClick={openEditModal}\n                  >\n                    <Icons.EditAlt data-test=\"edit-alt\" />\n                  </span>\n                </Tooltip>\n              )}\n            </Actions>\n          );\n        },\n        Header: t('Actions'),\n        id: 'actions',\n        disableSortBy: true,\n        hidden: !canEdit && !canDelete,\n      },\n    ],\n    [\n      userId,\n      canEdit,\n      canDelete,\n      canExport,\n      saveFavoriteStatus,\n      favoriteStatus,\n      refreshData,\n      addSuccessToast,\n      addDangerToast,\n    ],\n  );\n\n  const favoritesFilter: Filter = useMemo(\n    () => ({\n      Header: t('Favorite'),\n      id: 'id',\n      urlDisplay: 'favorite',\n      input: 'select',\n      operator: FilterOperator.chartIsFav,\n      unfilteredLabel: t('Any'),\n      selects: [\n        { label: t('Yes'), value: true },\n        { label: t('No'), value: false },\n      ],\n    }),\n    [],\n  );\n\n  const filters: Filters = useMemo(\n    () => [\n      {\n        Header: t('Owner'),\n        id: 'owners',\n        input: 'select',\n        operator: FilterOperator.relationManyMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'chart',\n          'owners',\n          createErrorHandler(errMsg =>\n            addDangerToast(\n              t(\n                'An error occurred while fetching chart owners values: %s',\n                errMsg,\n              ),\n            ),\n          ),\n          props.user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Created by'),\n        id: 'created_by',\n        input: 'select',\n        operator: FilterOperator.relationOneMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'chart',\n          'created_by',\n          createErrorHandler(errMsg =>\n            addDangerToast(\n              t(\n                'An error occurred while fetching chart created by values: %s',\n                errMsg,\n              ),\n            ),\n          ),\n          props.user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Chart type'),\n        id: 'viz_type',\n        input: 'select',\n        operator: FilterOperator.equals,\n        unfilteredLabel: t('All'),\n        selects: registry\n          .keys()\n          .filter(k => nativeFilterGate(registry.get(k)?.behaviors || []))\n          .map(k => ({ label: registry.get(k)?.name || k, value: k }))\n          .sort((a, b) => {\n            if (!a.label || !b.label) {\n              return 0;\n            }\n\n            if (a.label > b.label) {\n              return 1;\n            }\n            if (a.label < b.label) {\n              return -1;\n            }\n\n            return 0;\n          }),\n      },\n      {\n        Header: t('Dataset'),\n        id: 'datasource_id',\n        input: 'select',\n        operator: FilterOperator.equals,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchDatasets,\n        paginate: true,\n      },\n      ...(userId ? [favoritesFilter] : []),\n      {\n        Header: t('Certified'),\n        id: 'id',\n        urlDisplay: 'certified',\n        input: 'select',\n        operator: FilterOperator.chartIsCertified,\n        unfilteredLabel: t('Any'),\n        selects: [\n          { label: t('Yes'), value: true },\n          { label: t('No'), value: false },\n        ],\n      },\n      {\n        Header: t('Search'),\n        id: 'slice_name',\n        input: 'search',\n        operator: FilterOperator.chartAllText,\n      },\n    ],\n    [addDangerToast, favoritesFilter, props.user],\n  );\n\n  const sortTypes = [\n    {\n      desc: false,\n      id: 'slice_name',\n      label: t('Alphabetical'),\n      value: 'alphabetical',\n    },\n    {\n      desc: true,\n      id: 'changed_on_delta_humanized',\n      label: t('Recently modified'),\n      value: 'recently_modified',\n    },\n    {\n      desc: false,\n      id: 'changed_on_delta_humanized',\n      label: t('Least recently modified'),\n      value: 'least_recently_modified',\n    },\n  ];\n\n  const renderCard = useCallback(\n    (chart: Chart) => (\n      <ChartCard\n        chart={chart}\n        showThumbnails={\n          userSettings\n            ? userSettings.thumbnails\n            : isFeatureEnabled(FeatureFlag.THUMBNAILS)\n        }\n        hasPerm={hasPerm}\n        openChartEditModal={openChartEditModal}\n        bulkSelectEnabled={bulkSelectEnabled}\n        addDangerToast={addDangerToast}\n        addSuccessToast={addSuccessToast}\n        refreshData={refreshData}\n        userId={userId}\n        loading={loading}\n        favoriteStatus={favoriteStatus[chart.id]}\n        saveFavoriteStatus={saveFavoriteStatus}\n        handleBulkChartExport={handleBulkChartExport}\n      />\n    ),\n    [\n      addDangerToast,\n      addSuccessToast,\n      bulkSelectEnabled,\n      favoriteStatus,\n      hasPerm,\n      loading,\n    ],\n  );\n\n  const subMenuButtons: SubMenuProps['buttons'] = [];\n  if (canDelete || canExport) {\n    subMenuButtons.push({\n      name: t('Bulk select'),\n      buttonStyle: 'secondary',\n      'data-test': 'bulk-select',\n      onClick: toggleBulkSelect,\n    });\n  }\n  if (canCreate) {\n    subMenuButtons.push({\n      name: (\n        <>\n          <i className=\"fa fa-plus\" /> {t('Chart')}\n        </>\n      ),\n      buttonStyle: 'primary',\n      onClick: () => {\n        window.location.assign('/chart/add');\n      },\n    });\n\n    if (isFeatureEnabled(FeatureFlag.VERSIONED_EXPORT)) {\n      subMenuButtons.push({\n        name: (\n          <Tooltip\n            id=\"import-tooltip\"\n            title={t('Import charts')}\n            placement=\"bottomRight\"\n          >\n            <Icons.Import data-test=\"import-button\" />\n          </Tooltip>\n        ),\n        buttonStyle: 'link',\n        onClick: openChartImportModal,\n      });\n    }\n  }\n  return (\n    <>\n      <SubMenu name={t('Charts')} buttons={subMenuButtons} />\n      {sliceCurrentlyEditing && (\n        <PropertiesModal\n          onHide={closeChartEditModal}\n          onSave={handleChartUpdated}\n          show\n          slice={sliceCurrentlyEditing}\n        />\n      )}\n      <ConfirmStatusChange\n        title={t('Please confirm')}\n        description={t('Are you sure you want to delete the selected charts?')}\n        onConfirm={handleBulkChartDelete}\n      >\n        {confirmDelete => {\n          const bulkActions: ListViewProps['bulkActions'] = [];\n          if (canDelete) {\n            bulkActions.push({\n              key: 'delete',\n              name: t('Delete'),\n              type: 'danger',\n              onSelect: confirmDelete,\n            });\n          }\n          if (canExport) {\n            bulkActions.push({\n              key: 'export',\n              name: t('Export'),\n              type: 'primary',\n              onSelect: handleBulkChartExport,\n            });\n          }\n          return (\n            <ListView<Chart>\n              bulkActions={bulkActions}\n              bulkSelectEnabled={bulkSelectEnabled}\n              cardSortSelectOptions={sortTypes}\n              className=\"chart-list-view\"\n              columns={columns}\n              count={chartCount}\n              data={charts}\n              disableBulkSelect={toggleBulkSelect}\n              fetchData={fetchData}\n              filters={filters}\n              initialSort={initialSort}\n              loading={loading}\n              pageSize={PAGE_SIZE}\n              renderCard={renderCard}\n              showThumbnails={\n                userSettings\n                  ? userSettings.thumbnails\n                  : isFeatureEnabled(FeatureFlag.THUMBNAILS)\n              }\n              defaultViewMode={\n                isFeatureEnabled(FeatureFlag.LISTVIEWS_DEFAULT_CARD_VIEW)\n                  ? 'card'\n                  : 'table'\n              }\n            />\n          );\n        }}\n      </ConfirmStatusChange>\n\n      <ImportModelsModal\n        resourceName=\"chart\"\n        resourceLabel={t('chart')}\n        passwordsNeededMessage={PASSWORDS_NEEDED_MESSAGE}\n        confirmOverwriteMessage={CONFIRM_OVERWRITE_MESSAGE}\n        addDangerToast={addDangerToast}\n        addSuccessToast={addSuccessToast}\n        onModelImport={handleChartImport}\n        show={importingChart}\n        onHide={closeChartImportModal}\n        passwordFields={passwordFields}\n        setPasswordFields={setPasswordFields}\n      />\n      {preparingExport && <Loading />}\n    </>\n  );\n}\n\nexport default withToasts(ChartList);\n"],"names":["SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","setToArray","module","exports","array","iteratee","comparator","index","includes","length","isCommon","result","seen","set","outer","value","computed","seenIndex","push","Set","noop","values","baseIteratee","baseUniq","supersetTextDocs","DOCUMENTATION_LINK","support","errorMessage","showDbInstallInstructions","Alert","closable","css","theme","colors","warning","light1","gridUnit","dark2","typography","sizes","s","l","antdWarningAlertStyles","type","showIcon","message","description","t","href","target","rel","className","HelperMessage","style","grayscale","base","StyledInputContainer","light2","resourceName","resourceLabel","passwordsNeededMessage","confirmOverwriteMessage","onModelImport","show","onHide","passwordFields","setPasswordFields","isHidden","setIsHidden","useState","passwords","setPasswords","needsOverwriteConfirm","setNeedsOverwriteConfirm","confirmedOverwrite","setConfirmedOverwrite","fileList","setFileList","importingModel","setImportingModel","setErrorMessage","clearModal","state","alreadyExists","passwordsNeeded","importResource","msg","useEffect","Modal","name","disablePrimaryButton","onHandledPrimaryAction","originFileObj","File","then","primaryButtonName","primaryButtonType","width","title","id","accept","onChange","info","file","status","onRemove","removedFile","filter","uid","customRequest","disabled","Button","loading","map","fileName","key","autoComplete","event","targetValue","currentTarget","toUpperCase","FlexRowContainer","PASSWORDS_NEEDED_MESSAGE","CONFIRM_OVERWRITE_MESSAGE","registry","createFetchDatasets","async","filterValue","page","pageSize","filters","col","opr","queryParams","columns","keys","order_column","order_direction","page_size","json","endpoint","datasets","table_name","tableName","label","data","totalCount","count","Actions","props","addDangerToast","addSuccessToast","user","userId","resourceCount","chartCount","resourceCollection","charts","bulkSelectEnabled","setResourceCollection","setCharts","hasPerm","fetchData","toggleBulkSelect","refreshData","chartIds","useMemo","c","saveFavoriteStatus","favoriteStatus","sliceCurrentlyEditing","handleChartUpdated","openChartEditModal","closeChartEditModal","importingChart","showImportModal","preparingExport","setPreparingExport","userSettings","toString","canCreate","canEdit","canDelete","canExport","initialSort","desc","enableBroadUserAccess","b","conf","ENABLE_BROAD_ACTIVITY_ACCESS","handleBulkChartExport","chartsToExport","ids","changedByName","lastSavedBy","first_name","last_name","Cell","row","original","itemId","saveFaveStar","isStarred","Header","disableSortBy","size","hidden","url","slice_name","sliceName","certified_by","certifiedBy","certification_details","certificationDetails","details","tooltip","viewBox","accessor","viz_type","vizType","get","datasource_name_text","dsNameTxt","datasource_url","dsUrl","last_saved_by","changed_by_url","changedByUrl","last_saved_at","lastSavedAt","fromNow","created_by","createdBy","onConfirm","confirmDelete","placement","role","tabIndex","onClick","favoritesFilter","urlDisplay","input","operator","unfilteredLabel","selects","fetchSelects","errMsg","paginate","k","behaviors","sort","a","sortTypes","renderCard","useCallback","chart","showThumbnails","thumbnails","subMenuButtons","buttonStyle","window","location","assign","buttons","onSave","slice","chartsToDelete","bulkActions","onSelect","cardSortSelectOptions","disableBulkSelect","defaultViewMode"],"sourceRoot":""}