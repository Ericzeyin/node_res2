{"version":3,"file":"explore.93219041722c414a70f1.entry.js","mappings":"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K,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAA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AAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,wB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","sources":["webpack://superset/webpack/runtime/chunk loaded","webpack://superset/webpack/runtime/create fake namespace object","webpack://superset/webpack/runtime/load script","webpack://superset/webpack/runtime/css loading","webpack://superset/./src/utils/DebouncedMessageQueue.js","webpack://superset/./src/middleware/loggerMiddleware.js","webpack://superset/./src/components/MessageToasts/getToastsFromPyFlashMessages.js","webpack://superset/./src/explore/actions/saveModalActions.js","webpack://superset/./src/explore/actions/exploreActions.ts","webpack://superset/./src/explore/reducers/index.js","webpack://superset/./src/explore/reducers/saveModalReducer.js","webpack://superset/./src/explore/reducers/exploreReducer.js","webpack://superset/./src/components/MessageToasts/reducers.js","webpack://superset/./src/reports/reducers/reports.js","webpack://superset/./src/components/MessageToasts/Toast.tsx","webpack://superset/./src/components/MessageToasts/ToastPresenter.tsx","webpack://superset/./src/components/MessageToasts/ToastContainer.tsx","webpack://superset/./src/components/CachedLabel/TooltipContent.tsx","webpack://superset/./src/components/CachedLabel/index.tsx","webpack://superset/./src/components/Timer/index.tsx","webpack://superset/./src/explore/components/ChartPills.tsx","webpack://superset/./src/explore/components/ExploreAlert.tsx","webpack://superset/./src/explore/components/ExploreChartPanel.jsx","webpack://superset/./src/explore/components/RunQueryButton/index.tsx","webpack://superset/./src/explore/components/ControlPanelsContainer.tsx","webpack://superset/./src/explore/components/SaveModal.tsx","webpack://superset/./src/explore/components/DatasourcePanel/DatasourcePanelDragOption/index.tsx","webpack://superset/./src/explore/components/DatasourcePanel/index.tsx","webpack://superset/./src/utils/getControlsForVizType.js","webpack://superset/./src/components/AlteredSliceTag/index.jsx","webpack://superset/./src/explore/components/PropertiesModal/index.tsx","webpack://superset/./src/explore/components/ExploreChartHeader/index.jsx","webpack://superset/./src/explore/components/ExploreViewContainer/index.jsx","webpack://superset/./src/explore/App.jsx","webpack://superset/./src/explore/index.jsx","webpack://superset/./src/explore/reducers/getInitialState.ts","webpack://superset/./src/reports/actions/reports.js","webpack://superset/./node_modules/match-sorter/dist/match-sorter.esm.js","webpack://superset/./node_modules/remove-accents/index.js","webpack://superset/./src/hooks/apiResources/charts.ts","webpack://superset/./src/hooks/apiResources/dashboards.ts","webpack://superset/./src/hooks/useComponentDidMount/useComponentDidMount.ts","webpack://superset/./src/utils/localStorageHelpers.ts","webpack://superset/webpack/bootstrap","webpack://superset/webpack/runtime/amd define","webpack://superset/webpack/runtime/amd options","webpack://superset/webpack/runtime/compat get default export","webpack://superset/webpack/runtime/define property getters","webpack://superset/webpack/runtime/ensure chunk","webpack://superset/webpack/runtime/get javascript chunk filename","webpack://superset/webpack/runtime/get mini-css chunk filename","webpack://superset/webpack/runtime/global","webpack://superset/webpack/runtime/harmony module decorator","webpack://superset/webpack/runtime/hasOwnProperty shorthand","webpack://superset/webpack/runtime/make namespace object","webpack://superset/webpack/runtime/node module decorator","webpack://superset/webpack/runtime/publicPath","webpack://superset/webpack/runtime/jsonp chunk loading","webpack://superset/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"superset:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var createStylesheet = (chunkId, fullhref, resolve, reject) => {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = (event) => {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tlinkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tdocument.head.appendChild(linkTag);\n\treturn linkTag;\n};\nvar findStylesheet = (href, fullhref) => {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = (chunkId) => {\n\treturn new Promise((resolve, reject) => {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t9782: 0,\n\t5296: 0\n};\n\n__webpack_require__.f.miniCss = (chunkId, promises) => {\n\tvar cssChunks = {\"137\":1,\"380\":1,\"1261\":1,\"1877\":1,\"3036\":1,\"4194\":1,\"4237\":1,\"4494\":1,\"5378\":1,\"5566\":1,\"6871\":1,\"8623\":1,\"8650\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, (e) => {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { debounce } from 'lodash';\n\nclass DebouncedMessageQueue {\n  constructor({\n    callback = () => {},\n    sizeThreshold = 1000,\n    delayThreshold = 1000,\n  }) {\n    this.queue = [];\n    this.sizeThreshold = sizeThreshold;\n    this.delayThrehold = delayThreshold;\n\n    this.trigger = debounce(this.trigger.bind(this), this.delayThrehold);\n    this.callback = callback;\n  }\n\n  append(eventData) {\n    this.queue.push(eventData);\n    this.trigger();\n  }\n\n  trigger() {\n    if (this.queue.length > 0) {\n      const events = this.queue.splice(0, this.sizeThreshold);\n      this.callback.call(null, events);\n\n      // If there are remaining items, call it again.\n      if (this.queue.length > 0) {\n        this.trigger();\n      }\n    }\n  }\n}\n\nexport default DebouncedMessageQueue;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable camelcase */\n/* eslint prefer-const: 2 */\nimport shortid from 'shortid';\nimport { SupersetClient } from '@superset-ui/core';\n\nimport { safeStringify } from '../utils/safeStringify';\nimport { LOG_EVENT } from '../logger/actions';\nimport { LOG_EVENT_TYPE_TIMING } from '../logger/LogUtils';\nimport DebouncedMessageQueue from '../utils/DebouncedMessageQueue';\n\nconst LOG_ENDPOINT = '/superset/log/?explode=events';\nconst sendBeacon = events => {\n  if (events.length <= 0) {\n    return;\n  }\n\n  let endpoint = LOG_ENDPOINT;\n  const { source, source_id } = events[0];\n  // backend logs treat these request params as first-class citizens\n  if (source === 'dashboard') {\n    endpoint += `&dashboard_id=${source_id}`;\n  } else if (source === 'slice') {\n    endpoint += `&slice_id=${source_id}`;\n  }\n\n  if (navigator.sendBeacon) {\n    const formData = new FormData();\n    formData.append('events', safeStringify(events));\n    navigator.sendBeacon(endpoint, formData);\n  } else {\n    SupersetClient.post({\n      endpoint,\n      postPayload: { events },\n      parseMethod: null,\n    });\n  }\n};\n\n// beacon API has data size limit = 2^16.\n// assume avg each log entry has 2^6 characters\nconst MAX_EVENTS_PER_REQUEST = 1024;\nconst logMessageQueue = new DebouncedMessageQueue({\n  callback: sendBeacon,\n  sizeThreshold: MAX_EVENTS_PER_REQUEST,\n  delayThreshold: 1000,\n});\nlet lastEventId = 0;\nconst loggerMiddleware = store => next => action => {\n  if (action.type !== LOG_EVENT) {\n    return next(action);\n  }\n\n  const { dashboardInfo, explore, impressionId, dashboardLayout } =\n    store.getState();\n  let logMetadata = {\n    impression_id: impressionId,\n    version: 'v2',\n  };\n  if (dashboardInfo) {\n    logMetadata = {\n      source: 'dashboard',\n      source_id: dashboardInfo.id,\n      ...logMetadata,\n    };\n  } else if (explore) {\n    logMetadata = {\n      source: 'explore',\n      source_id: explore.slice ? explore.slice.slice_id : 0,\n      ...logMetadata,\n    };\n  }\n\n  const { eventName } = action.payload;\n  let { eventData = {} } = action.payload;\n  eventData = {\n    ...logMetadata,\n    ts: new Date().getTime(),\n    event_name: eventName,\n    ...eventData,\n  };\n  if (LOG_EVENT_TYPE_TIMING.has(eventName)) {\n    eventData = {\n      ...eventData,\n      event_type: 'timing',\n      trigger_event: lastEventId,\n    };\n  } else {\n    lastEventId = shortid.generate();\n    eventData = {\n      ...eventData,\n      event_type: 'user',\n      event_id: lastEventId,\n      visibility: document.visibilityState,\n    };\n  }\n\n  if (eventData.target_id && dashboardLayout?.present?.[eventData.target_id]) {\n    const { meta } = dashboardLayout.present[eventData.target_id];\n    // chart name or tab/header text\n    eventData.target_name = meta.chartId ? meta.sliceName : meta.text;\n  }\n\n  logMessageQueue.append(eventData);\n  return eventData;\n};\n\nexport default loggerMiddleware;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { addToast } from './actions';\nimport { ToastType } from './types';\n\nexport default function toastsFromPyFlashMessages(flashMessages = []) {\n  const toasts = [];\n\n  flashMessages.forEach(([messageType, message]) => {\n    const toastType =\n      messageType === 'danger'\n        ? ToastType.DANGER\n        : (messageType === 'success' && ToastType.SUCCESS) || ToastType.INFO;\n\n    const toast = addToast({\n      text: message,\n      toastType,\n    }).payload;\n\n    toasts.push(toast);\n  });\n\n  return toasts;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetClient } from '@superset-ui/core';\nimport { buildV1ChartDataPayload, getExploreUrl } from '../exploreUtils';\n\nexport const FETCH_DASHBOARDS_SUCCEEDED = 'FETCH_DASHBOARDS_SUCCEEDED';\nexport function fetchDashboardsSucceeded(choices) {\n  return { type: FETCH_DASHBOARDS_SUCCEEDED, choices };\n}\n\nexport const FETCH_DASHBOARDS_FAILED = 'FETCH_DASHBOARDS_FAILED';\nexport function fetchDashboardsFailed(userId) {\n  return { type: FETCH_DASHBOARDS_FAILED, userId };\n}\n\nexport function fetchDashboards(userId) {\n  return function fetchDashboardsThunk(dispatch) {\n    return SupersetClient.get({\n      endpoint: `/dashboardasync/api/read?_flt_0_owners=${userId}`,\n    })\n      .then(({ json }) => {\n        const choices = json.pks.map((id, index) => ({\n          value: id,\n          label: (json.result[index] || {}).dashboard_title,\n        }));\n\n        return dispatch(fetchDashboardsSucceeded(choices));\n      })\n      .catch(() => dispatch(fetchDashboardsFailed(userId)));\n  };\n}\n\nexport const SAVE_SLICE_FAILED = 'SAVE_SLICE_FAILED';\nexport function saveSliceFailed() {\n  return { type: SAVE_SLICE_FAILED };\n}\nexport const SAVE_SLICE_SUCCESS = 'SAVE_SLICE_SUCCESS';\nexport function saveSliceSuccess(data) {\n  return { type: SAVE_SLICE_SUCCESS, data };\n}\n\nexport const REMOVE_SAVE_MODAL_ALERT = 'REMOVE_SAVE_MODAL_ALERT';\nexport function removeSaveModalAlert() {\n  return { type: REMOVE_SAVE_MODAL_ALERT };\n}\n\nexport function saveSlice(formData, requestParams) {\n  return dispatch => {\n    const url = getExploreUrl({\n      formData,\n      endpointType: 'base',\n      force: false,\n      curUrl: null,\n      requestParams,\n    });\n\n    // Save the query context so we can re-generate the data from Python\n    // for alerts and reports\n    const queryContext = buildV1ChartDataPayload({\n      formData,\n      force: false,\n      resultFormat: 'json',\n      resultType: 'full',\n    });\n\n    return SupersetClient.post({\n      url,\n      postPayload: { form_data: formData, query_context: queryContext },\n    })\n      .then(response => {\n        dispatch(saveSliceSuccess(response.json));\n        return response.json;\n      })\n      .catch(() => dispatch(saveSliceFailed()));\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport { Dataset } from '@superset-ui/chart-controls';\nimport {\n  t,\n  SupersetClient,\n  DatasourceType,\n  QueryFormData,\n} from '@superset-ui/core';\nimport { Dispatch } from 'redux';\nimport {\n  addDangerToast,\n  toastActions,\n} from 'src/components/MessageToasts/actions';\nimport { Slice } from 'src/types/Chart';\n\nconst FAVESTAR_BASE_URL = '/superset/favstar/slice';\n\nexport const SET_DATASOURCE_TYPE = 'SET_DATASOURCE_TYPE';\nexport function setDatasourceType(datasourceType: DatasourceType) {\n  return { type: SET_DATASOURCE_TYPE, datasourceType };\n}\n\nexport const SET_DATASOURCE = 'SET_DATASOURCE';\nexport function setDatasource(datasource: Dataset) {\n  return { type: SET_DATASOURCE, datasource };\n}\n\nexport const SET_DATASOURCES = 'SET_DATASOURCES';\nexport function setDatasources(datasources: Dataset[]) {\n  return { type: SET_DATASOURCES, datasources };\n}\n\nexport const POST_DATASOURCE_STARTED = 'POST_DATASOURCE_STARTED';\nexport const FETCH_DATASOURCE_SUCCEEDED = 'FETCH_DATASOURCE_SUCCEEDED';\nexport function fetchDatasourceSucceeded() {\n  return { type: FETCH_DATASOURCE_SUCCEEDED };\n}\n\nexport const FETCH_DATASOURCES_STARTED = 'FETCH_DATASOURCES_STARTED';\nexport function fetchDatasourcesStarted() {\n  return { type: FETCH_DATASOURCES_STARTED };\n}\n\nexport const FETCH_DATASOURCES_SUCCEEDED = 'FETCH_DATASOURCES_SUCCEEDED';\nexport function fetchDatasourcesSucceeded() {\n  return { type: FETCH_DATASOURCES_SUCCEEDED };\n}\n\nexport const TOGGLE_FAVE_STAR = 'TOGGLE_FAVE_STAR';\nexport function toggleFaveStar(isStarred: boolean) {\n  return { type: TOGGLE_FAVE_STAR, isStarred };\n}\n\nexport const FETCH_FAVE_STAR = 'FETCH_FAVE_STAR';\nexport function fetchFaveStar(sliceId: string) {\n  return function (dispatch: Dispatch) {\n    SupersetClient.get({\n      endpoint: `${FAVESTAR_BASE_URL}/${sliceId}/count/`,\n    }).then(({ json }) => {\n      if (json.count > 0) {\n        dispatch(toggleFaveStar(true));\n      }\n    });\n  };\n}\n\nexport const SAVE_FAVE_STAR = 'SAVE_FAVE_STAR';\nexport function saveFaveStar(sliceId: string, isStarred: boolean) {\n  return function (dispatch: Dispatch) {\n    const urlSuffix = isStarred ? 'unselect' : 'select';\n    SupersetClient.get({\n      endpoint: `${FAVESTAR_BASE_URL}/${sliceId}/${urlSuffix}/`,\n    })\n      .then(() => dispatch(toggleFaveStar(!isStarred)))\n      .catch(() => {\n        dispatch(\n          addDangerToast(t('An error occurred while starring this chart')),\n        );\n      });\n  };\n}\n\nexport const SET_FIELD_VALUE = 'SET_FIELD_VALUE';\nexport function setControlValue(\n  controlName: string,\n  value: any,\n  validationErrors?: any[],\n) {\n  return { type: SET_FIELD_VALUE, controlName, value, validationErrors };\n}\n\nexport const SET_EXPLORE_CONTROLS = 'UPDATE_EXPLORE_CONTROLS';\nexport function setExploreControls(formData: QueryFormData) {\n  return { type: SET_EXPLORE_CONTROLS, formData };\n}\n\nexport const UPDATE_CHART_TITLE = 'UPDATE_CHART_TITLE';\nexport function updateChartTitle(sliceName: string) {\n  return { type: UPDATE_CHART_TITLE, sliceName };\n}\n\nexport const CREATE_NEW_SLICE = 'CREATE_NEW_SLICE';\nexport function createNewSlice(\n  can_add: boolean,\n  can_download: boolean,\n  can_overwrite: boolean,\n  slice: Slice,\n  form_data: QueryFormData,\n) {\n  return {\n    type: CREATE_NEW_SLICE,\n    can_add,\n    can_download,\n    can_overwrite,\n    slice,\n    form_data,\n  };\n}\n\nexport const SLICE_UPDATED = 'SLICE_UPDATED';\nexport function sliceUpdated(slice: Slice) {\n  return { type: SLICE_UPDATED, slice };\n}\n\nexport const SET_FORCE_QUERY = 'SET_FORCE_QUERY';\nexport function setForceQuery(force: boolean) {\n  return {\n    type: SET_FORCE_QUERY,\n    force,\n  };\n}\n\nexport const exploreActions = {\n  ...toastActions,\n  setDatasourceType,\n  setDatasource,\n  setDatasources,\n  fetchDatasourcesStarted,\n  fetchDatasourcesSucceeded,\n  toggleFaveStar,\n  fetchFaveStar,\n  saveFaveStar,\n  setControlValue,\n  setExploreControls,\n  updateChartTitle,\n  createNewSlice,\n  sliceUpdated,\n  setForceQuery,\n};\n\nexport type ExploreActions = typeof exploreActions;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { combineReducers } from 'redux';\n\nimport reports from 'src/reports/reducers/reports';\nimport charts from 'src/components/Chart/chartReducer';\nimport dataMask from 'src/dataMask/reducer';\nimport messageToasts from 'src/components/MessageToasts/reducers';\nimport saveModal from './saveModalReducer';\nimport explore from './exploreReducer';\n\nconst impressionId = (state = '') => state;\n\nexport default combineReducers({\n  charts,\n  saveModal,\n  dataMask,\n  explore,\n  impressionId,\n  messageToasts,\n  reports,\n});\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport * as actions from '../actions/saveModalActions';\n\nexport default function saveModalReducer(state = {}, action) {\n  const actionHandlers = {\n    [actions.FETCH_DASHBOARDS_SUCCEEDED]() {\n      return { ...state, dashboards: action.choices };\n    },\n    [actions.FETCH_DASHBOARDS_FAILED]() {\n      return {\n        ...state,\n        saveModalAlert: `fetching dashboards failed for ${action.userId}`,\n      };\n    },\n    [actions.SAVE_SLICE_FAILED]() {\n      return { ...state, saveModalAlert: 'Failed to save slice' };\n    },\n    [actions.SAVE_SLICE_SUCCESS](data) {\n      return { ...state, data };\n    },\n    [actions.REMOVE_SAVE_MODAL_ALERT]() {\n      return { ...state, saveModalAlert: null };\n    },\n  };\n\n  if (action.type in actionHandlers) {\n    return actionHandlers[action.type]();\n  }\n  return state;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport { ensureIsArray } from '@superset-ui/core';\nimport { DYNAMIC_PLUGIN_CONTROLS_READY } from 'src/components/Chart/chartAction';\nimport { DEFAULT_TIME_RANGE } from 'src/explore/constants';\nimport { getControlsState } from 'src/explore/store';\nimport {\n  getControlConfig,\n  getControlStateFromControlConfig,\n  getControlValuesCompatibleWithDatasource,\n  StandardizedFormData,\n} from 'src/explore/controlUtils';\nimport * as actions from 'src/explore/actions/exploreActions';\n\nexport default function exploreReducer(state = {}, action) {\n  const actionHandlers = {\n    [DYNAMIC_PLUGIN_CONTROLS_READY]() {\n      return {\n        ...state,\n        controls: action.controlsState,\n      };\n    },\n    [actions.TOGGLE_FAVE_STAR]() {\n      return {\n        ...state,\n        isStarred: action.isStarred,\n      };\n    },\n    [actions.POST_DATASOURCE_STARTED]() {\n      return {\n        ...state,\n        isDatasourceMetaLoading: true,\n      };\n    },\n    [actions.SET_DATASOURCE]() {\n      const newFormData = { ...state.form_data };\n      if (action.datasource.type !== state.datasource.type) {\n        if (action.datasource.type === 'table') {\n          newFormData.granularity_sqla = action.datasource.granularity_sqla;\n          newFormData.time_grain_sqla = action.datasource.time_grain_sqla;\n          delete newFormData.druid_time_origin;\n          delete newFormData.granularity;\n        } else {\n          newFormData.druid_time_origin = action.datasource.druid_time_origin;\n          newFormData.granularity = action.datasource.granularity;\n          delete newFormData.granularity_sqla;\n          delete newFormData.time_grain_sqla;\n        }\n      }\n\n      const controls = { ...state.controls };\n      const controlsTransferred = [];\n      if (\n        action.datasource.id !== state.datasource.id ||\n        action.datasource.type !== state.datasource.type\n      ) {\n        // reset time range filter to default\n        newFormData.time_range = DEFAULT_TIME_RANGE;\n\n        // reset control values for column/metric related controls\n        Object.entries(controls).forEach(([controlName, controlState]) => {\n          if (\n            // for direct column select controls\n            controlState.valueKey === 'column_name' ||\n            // for all other controls\n            'savedMetrics' in controlState ||\n            'columns' in controlState ||\n            ('options' in controlState && !Array.isArray(controlState.options))\n          ) {\n            controls[controlName] = {\n              ...controlState,\n            };\n            newFormData[controlName] = getControlValuesCompatibleWithDatasource(\n              action.datasource,\n              controlState,\n              controlState.value,\n            );\n            if (\n              ensureIsArray(newFormData[controlName]).length > 0 &&\n              newFormData[controlName] !== controls[controlName].default\n            ) {\n              controlsTransferred.push(controlName);\n            }\n          }\n        });\n      }\n\n      const newState = {\n        ...state,\n        controls,\n        datasource: action.datasource,\n        datasource_id: action.datasource.id,\n        datasource_type: action.datasource.type,\n      };\n      return {\n        ...newState,\n        form_data: newFormData,\n        controls: getControlsState(newState, newFormData),\n        controlsTransferred,\n      };\n    },\n    [actions.FETCH_DATASOURCES_STARTED]() {\n      return {\n        ...state,\n        isDatasourcesLoading: true,\n      };\n    },\n    [actions.SET_DATASOURCES]() {\n      return {\n        ...state,\n        datasources: action.datasources,\n      };\n    },\n    [actions.SET_FIELD_VALUE]() {\n      const { controlName, value, validationErrors } = action;\n      let new_form_data = { ...state.form_data, [controlName]: value };\n      const old_metrics_data = state.form_data.metrics;\n      const new_column_config = state.form_data.column_config;\n\n      const vizType = new_form_data.viz_type;\n\n      // if the controlName is metrics, and the metric column name is updated,\n      // need to update column config as well to keep the previou config.\n      if (controlName === 'metrics' && old_metrics_data && new_column_config) {\n        value.forEach((item, index) => {\n          if (\n            item?.label !== old_metrics_data[index]?.label &&\n            !!new_column_config[old_metrics_data[index]?.label]\n          ) {\n            new_column_config[item.label] =\n              new_column_config[old_metrics_data[index].label];\n\n            delete new_column_config[old_metrics_data[index].label];\n          }\n        });\n        new_form_data.column_config = new_column_config;\n      }\n\n      // Use the processed control config (with overrides and everything)\n      // if `controlName` does not existing in current controls,\n      const controlConfig =\n        state.controls[action.controlName] ||\n        getControlConfig(action.controlName, vizType) ||\n        {};\n\n      // will call validators again\n      const control = {\n        ...getControlStateFromControlConfig(controlConfig, state, action.value),\n      };\n\n      const column_config = {\n        ...state.controls.column_config,\n        ...(new_column_config && { value: new_column_config }),\n      };\n\n      const newState = {\n        ...state,\n        controls: {\n          ...state.controls,\n          [controlName]: control,\n          ...(controlName === 'metrics' && { column_config }),\n        },\n      };\n\n      const rerenderedControls = {};\n      if (Array.isArray(control.rerender)) {\n        control.rerender.forEach(controlName => {\n          rerenderedControls[controlName] = {\n            ...getControlStateFromControlConfig(\n              newState.controls[controlName],\n              newState,\n              newState.controls[controlName].value,\n            ),\n          };\n        });\n      }\n\n      // combine newly detected errors with errors from `onChange` event of\n      // each control component (passed via reducer action).\n      const errors = control.validationErrors || [];\n      (validationErrors || []).forEach(err => {\n        // skip duplicated errors\n        if (!errors.includes(err)) {\n          errors.push(err);\n        }\n      });\n      const hasErrors = errors && errors.length > 0;\n\n      const isVizSwitch =\n        action.controlName === 'viz_type' &&\n        action.value !== state.controls.viz_type.value;\n      let currentControlsState = state.controls;\n      if (isVizSwitch) {\n        // get StandardizedFormData from source form_data\n        const sfd = new StandardizedFormData(state.form_data);\n        const transformed = sfd.transform(action.value, state);\n        new_form_data = transformed.formData;\n        currentControlsState = transformed.controlsState;\n      }\n\n      return {\n        ...state,\n        form_data: new_form_data,\n        triggerRender: control.renderTrigger && !hasErrors,\n        controls: {\n          ...currentControlsState,\n          [action.controlName]: {\n            ...control,\n            validationErrors: errors,\n          },\n          ...rerenderedControls,\n        },\n      };\n    },\n    [actions.SET_EXPLORE_CONTROLS]() {\n      return {\n        ...state,\n        controls: getControlsState(state, action.formData),\n      };\n    },\n    [actions.UPDATE_CHART_TITLE]() {\n      return {\n        ...state,\n        sliceName: action.sliceName,\n      };\n    },\n    [actions.CREATE_NEW_SLICE]() {\n      return {\n        ...state,\n        slice: action.slice,\n        controls: getControlsState(state, action.form_data),\n        can_add: action.can_add,\n        can_download: action.can_download,\n        can_overwrite: action.can_overwrite,\n      };\n    },\n    [actions.SLICE_UPDATED]() {\n      return {\n        ...state,\n        slice: {\n          ...state.slice,\n          ...action.slice,\n          owners: action.slice.owners ?? null,\n        },\n        sliceName: action.slice.slice_name ?? state.sliceName,\n      };\n    },\n    [actions.SET_FORCE_QUERY]() {\n      return {\n        ...state,\n        force: action.force,\n      };\n    },\n  };\n\n  if (action.type in actionHandlers) {\n    return actionHandlers[action.type]();\n  }\n  return state;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ADD_TOAST, REMOVE_TOAST } from './actions';\n\nexport default function messageToastsReducer(toasts = [], action) {\n  switch (action.type) {\n    case ADD_TOAST: {\n      const { payload: toast } = action;\n      const result = toasts.slice();\n      if (!toast.noDuplicate || !result.find(x => x.text === toast.text)) {\n        return [toast, ...toasts];\n      }\n      return toasts;\n    }\n\n    case REMOVE_TOAST: {\n      const {\n        payload: { id },\n      } = action;\n      return [...toasts].filter(toast => toast.id !== id);\n    }\n\n    default:\n      return toasts;\n  }\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable camelcase */\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { SET_REPORT, ADD_REPORT, EDIT_REPORT } from '../actions/reports';\n\nexport default function reportsReducer(state = {}, action) {\n  const actionHandlers = {\n    [SET_REPORT]() {\n      const { report, resourceId, creationMethod, filterField } = action;\n      // For now report count should only be one, but we are checking in case\n      // functionality changes.\n      const reportObject = report.result?.find(\n        report => report[filterField] === resourceId,\n      );\n\n      if (reportObject) {\n        return {\n          ...state,\n          [creationMethod]: {\n            ...state[creationMethod],\n            [resourceId]: reportObject,\n          },\n        };\n      }\n      if (state?.[creationMethod]?.[resourceId]) {\n        // remove the empty report from state\n        const newState = { ...state };\n        delete newState[creationMethod][resourceId];\n        return newState;\n      }\n      return { ...state };\n    },\n\n    [ADD_REPORT]() {\n      const { result, id } = action.json;\n      const report = { ...result, id };\n      const reportTypeId = report.dashboard || report.chart;\n      // this is the id of either the chart or the dashboard associated with the report.\n\n      return {\n        ...state,\n        [report.creation_method]: {\n          ...state[report.creation_method],\n          [reportTypeId]: report,\n        },\n      };\n    },\n\n    [EDIT_REPORT]() {\n      const report = {\n        ...action.json.result,\n        id: action.json.id,\n      };\n      const reportTypeId = report.dashboard || report.chart;\n\n      return {\n        ...state,\n        [report.creation_method]: {\n          ...state[report.creation_method],\n          [reportTypeId]: report,\n        },\n      };\n    },\n  };\n\n  if (action.type in actionHandlers) {\n    return actionHandlers[action.type]();\n  }\n  return state;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { styled, css, SupersetTheme } from '@superset-ui/core';\nimport cx from 'classnames';\nimport Interweave from 'interweave';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Icons from 'src/components/Icons';\nimport { ToastType, ToastMeta } from './types';\n\nconst ToastContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  span {\n    padding: 0 11px;\n  }\n`;\n\nconst StyledIcon = (theme: SupersetTheme) => css`\n  min-width: ${theme.gridUnit * 5}px;\n  color: ${theme.colors.grayscale.base};\n`;\n\ninterface ToastPresenterProps {\n  toast: ToastMeta;\n  onCloseToast: (id: string) => void;\n}\n\nexport default function Toast({ toast, onCloseToast }: ToastPresenterProps) {\n  const hideTimer = useRef<ReturnType<typeof setTimeout>>();\n  const [visible, setVisible] = useState(false);\n  const showToast = () => {\n    setVisible(true);\n  };\n\n  const handleClosePress = useCallback(() => {\n    if (hideTimer.current) {\n      clearTimeout(hideTimer.current);\n    }\n    // Wait for the transition\n    setVisible(() => {\n      setTimeout(() => {\n        onCloseToast(toast.id);\n      }, 150);\n      return false;\n    });\n  }, [onCloseToast, toast.id]);\n\n  useEffect(() => {\n    setTimeout(showToast);\n\n    if (toast.duration > 0) {\n      hideTimer.current = setTimeout(handleClosePress, toast.duration);\n    }\n    return () => {\n      if (hideTimer.current) {\n        clearTimeout(hideTimer.current);\n      }\n    };\n  }, [handleClosePress, toast.duration]);\n\n  let className = 'toast--success';\n  let icon = <Icons.CircleCheckSolid css={theme => StyledIcon(theme)} />;\n\n  if (toast.toastType === ToastType.WARNING) {\n    icon = <Icons.WarningSolid css={StyledIcon} />;\n    className = 'toast--warning';\n  } else if (toast.toastType === ToastType.DANGER) {\n    icon = <Icons.ErrorSolid css={StyledIcon} />;\n    className = 'toast--danger';\n  } else if (toast.toastType === ToastType.INFO) {\n    icon = <Icons.InfoSolid css={StyledIcon} />;\n    className = 'toast--info';\n  }\n\n  return (\n    <ToastContainer\n      className={cx('alert', 'toast', visible && 'toast--visible', className)}\n      data-test=\"toast-container\"\n      role=\"alert\"\n    >\n      {icon}\n      <Interweave content={toast.text} noHtml={!toast.allowHtml} />\n      <i\n        className=\"fa fa-close pull-right pointer\"\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleClosePress}\n        aria-label=\"Close\"\n        data-test=\"close-button\"\n      />\n    </ToastContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { styled } from '@superset-ui/core';\nimport { ToastMeta } from 'src/components/MessageToasts/types';\nimport Toast from './Toast';\n\nexport interface VisualProps {\n  position: 'bottom' | 'top';\n}\n\nconst StyledToastPresenter = styled.div<VisualProps>`\n  max-width: 600px;\n  position: fixed;\n  ${({ position }) => (position === 'bottom' ? 'bottom' : 'top')}: 0px;\n  right: 0px;\n  margin-right: 50px;\n  margin-bottom: 50px;\n  z-index: ${({ theme }) => theme.zIndex.max};\n  word-break: break-word;\n\n  .toast {\n    background: ${({ theme }) => theme.colors.grayscale.dark1};\n    border-radius: ${({ theme }) => theme.borderRadius};\n    box-shadow: 0 2px 4px 0\n      fade(\n        ${({ theme }) => theme.colors.grayscale.dark2},\n        ${({ theme }) => theme.opacity.mediumLight}\n      );\n    color: ${({ theme }) => theme.colors.grayscale.light5};\n    opacity: 0;\n    position: relative;\n    transform: translateY(-100%);\n    white-space: pre-line;\n    will-change: transform, opacity;\n    transition: transform ${({ theme }) => theme.transitionTiming}s,\n      opacity ${({ theme }) => theme.transitionTiming}s;\n\n    &:after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 6px;\n      height: 100%;\n    }\n  }\n\n  .toast > button {\n    color: ${({ theme }) => theme.colors.grayscale.light5};\n    opacity: 1;\n  }\n\n  .toast--visible {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\n\ntype ToastPresenterProps = Partial<VisualProps> & {\n  toasts: Array<ToastMeta>;\n  removeToast: () => any;\n};\n\nexport default function ToastPresenter({\n  toasts,\n  removeToast,\n  position = 'bottom',\n}: ToastPresenterProps) {\n  return (\n    <>\n      {toasts.length > 0 && (\n        <StyledToastPresenter id=\"toast-presenter\" position={position}>\n          {toasts.map(toast => (\n            <Toast key={toast.id} toast={toast} onCloseToast={removeToast} />\n          ))}\n        </StyledToastPresenter>\n      )}\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport ToastPresenter from './ToastPresenter';\n\nimport { removeToast } from './actions';\n\nconst ToastContainer = connect(\n  ({ messageToasts: toasts }: any) => ({ toasts }),\n  dispatch => bindActionCreators({ removeToast }, dispatch),\n)(ToastPresenter);\n\nexport default ToastContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport moment from 'moment';\nimport { t } from '@superset-ui/core';\n\ninterface Props {\n  cachedTimestamp?: string;\n}\nexport const TooltipContent: React.FC<Props> = ({ cachedTimestamp }) => {\n  const cachedText = cachedTimestamp ? (\n    <span>\n      {t('Loaded data cached')}\n      <b> {moment.utc(cachedTimestamp).fromNow()}</b>\n    </span>\n  ) : (\n    t('Loaded from cache')\n  );\n\n  return (\n    <span data-test=\"tooltip-content\">\n      {cachedText}. {t('Click to force-refresh')}\n    </span>\n  );\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState } from 'react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { TooltipContent } from './TooltipContent';\n\nexport interface CacheLabelProps {\n  onClick?: React.MouseEventHandler<HTMLElement>;\n  cachedTimestamp?: string;\n  className?: string;\n}\n\nconst CacheLabel: React.FC<CacheLabelProps> = ({\n  className,\n  onClick,\n  cachedTimestamp,\n}) => {\n  const [hovered, setHovered] = useState(false);\n\n  const labelType = hovered ? 'primary' : 'default';\n  return (\n    <Tooltip\n      title={<TooltipContent cachedTimestamp={cachedTimestamp} />}\n      id=\"cache-desc-tooltip\"\n    >\n      <Label\n        className={`${className}`}\n        type={labelType}\n        onClick={onClick}\n        onMouseOver={() => setHovered(true)}\n        onMouseOut={() => setHovered(false)}\n      >\n        {t('Cached')} <i className=\"fa fa-refresh\" />\n      </Label>\n    </Tooltip>\n  );\n};\n\nexport default CacheLabel;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { styled } from '@superset-ui/core';\nimport Label, { Type } from 'src/components/Label';\n\nimport { now, fDuration } from 'src/utils/dates';\n\nexport interface TimerProps {\n  endTime?: number;\n  isRunning: boolean;\n  startTime?: number;\n  status?: Type;\n}\n\nconst TimerLabel = styled(Label)`\n  text-align: left;\n`;\n\nexport default function Timer({\n  endTime,\n  isRunning,\n  startTime,\n  status = 'success',\n}: TimerProps) {\n  const [clockStr, setClockStr] = useState('00:00:00.00');\n  const timer = useRef<ReturnType<typeof setInterval>>();\n\n  useEffect(() => {\n    const stopTimer = () => {\n      if (timer.current) {\n        clearInterval(timer.current);\n        timer.current = undefined;\n      }\n    };\n\n    if (isRunning) {\n      timer.current = setInterval(() => {\n        if (startTime) {\n          const endDttm = endTime || now();\n          if (startTime < endDttm) {\n            setClockStr(fDuration(startTime, endDttm));\n          }\n          if (!isRunning) {\n            stopTimer();\n          }\n        }\n      }, 30);\n    }\n    return stopTimer;\n  }, [endTime, isRunning, startTime]);\n\n  return (\n    <TimerLabel type={status} role=\"timer\">\n      {clockStr}\n    </TimerLabel>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { forwardRef, RefObject } from 'react';\nimport { css, QueryData, SupersetTheme } from '@superset-ui/core';\nimport RowCountLabel from 'src/explore/components/RowCountLabel';\nimport CachedLabel from 'src/components/CachedLabel';\nimport Timer from 'src/components/Timer';\n\nenum CHART_STATUS_MAP {\n  failed = 'danger',\n  loading = 'warning',\n  success = 'success',\n}\n\nexport type ChartPillsProps = {\n  queriesResponse: QueryData[];\n  chartStatus: keyof typeof CHART_STATUS_MAP;\n  chartUpdateStartTime: number;\n  chartUpdateEndTime: number;\n  refreshCachedQuery: () => void;\n  rowLimit: string | number;\n};\n\nexport const ChartPills = forwardRef(\n  (\n    {\n      queriesResponse,\n      chartStatus,\n      chartUpdateStartTime,\n      chartUpdateEndTime,\n      refreshCachedQuery,\n      rowLimit,\n    }: ChartPillsProps,\n    ref: RefObject<HTMLDivElement>,\n  ) => {\n    const isLoading = chartStatus === 'loading';\n    const firstQueryResponse = queriesResponse?.[0];\n    return (\n      <div ref={ref}>\n        <div\n          css={(theme: SupersetTheme) => css`\n            display: flex;\n            justify-content: flex-end;\n            padding-bottom: ${theme.gridUnit * 4}px;\n            & .ant-tag:last-of-type {\n              margin: 0;\n            }\n          `}\n        >\n          {!isLoading && firstQueryResponse && (\n            <RowCountLabel\n              rowcount={Number(firstQueryResponse.rowcount) || 0}\n              limit={Number(rowLimit) || 0}\n            />\n          )}\n          {!isLoading && firstQueryResponse?.is_cached && (\n            <CachedLabel\n              onClick={refreshCachedQuery}\n              cachedTimestamp={firstQueryResponse.cached_dttm}\n            />\n          )}\n          <Timer\n            startTime={chartUpdateStartTime}\n            endTime={chartUpdateEndTime}\n            isRunning={isLoading}\n            status={CHART_STATUS_MAP[chartStatus]}\n          />\n        </div>\n      </div>\n    );\n  },\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { forwardRef, RefObject } from 'react';\nimport { css, styled } from '@superset-ui/core';\nimport Button from 'src/components/Button';\n\ninterface ControlPanelAlertProps {\n  title: string;\n  bodyText: string;\n  primaryButtonAction?: (e: React.MouseEvent) => void;\n  secondaryButtonAction?: (e: React.MouseEvent) => void;\n  primaryButtonText?: string;\n  secondaryButtonText?: string;\n  type: 'info' | 'warning';\n  className?: string;\n}\n\nconst AlertContainer = styled.div`\n  ${({ theme }) => css`\n    margin: ${theme.gridUnit * 4}px;\n    padding: ${theme.gridUnit * 4}px;\n\n    border: 1px solid ${theme.colors.info.base};\n    background-color: ${theme.colors.info.light2};\n    border-radius: 2px;\n\n    color: ${theme.colors.info.dark2};\n    font-size: ${theme.typography.sizes.m}px;\n\n    p {\n      margin-bottom: ${theme.gridUnit}px;\n    }\n\n    & a,\n    & span[role='button'] {\n      color: inherit;\n      text-decoration: underline;\n      &:hover {\n        color: ${theme.colors.info.dark1};\n      }\n    }\n\n    &.alert-type-warning {\n      border-color: ${theme.colors.alert.base};\n      background-color: ${theme.colors.alert.light2};\n\n      p {\n        color: ${theme.colors.alert.dark2};\n      }\n\n      & a:hover,\n      & span[role='button']:hover {\n        color: ${theme.colors.alert.dark1};\n      }\n    }\n  `}\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  button {\n    line-height: 1;\n  }\n`;\n\nconst Title = styled.p`\n  font-weight: ${({ theme }) => theme.typography.weights.bold};\n`;\n\nexport const ExploreAlert = forwardRef(\n  (\n    {\n      title,\n      bodyText,\n      primaryButtonAction,\n      secondaryButtonAction,\n      primaryButtonText,\n      secondaryButtonText,\n      type = 'info',\n      className = '',\n    }: ControlPanelAlertProps,\n    ref: RefObject<HTMLDivElement>,\n  ) => (\n    <AlertContainer className={`alert-type-${type} ${className}`} ref={ref}>\n      <Title>{title}</Title>\n      <p>{bodyText}</p>\n      {primaryButtonText && primaryButtonAction && (\n        <ButtonContainer>\n          {secondaryButtonAction && secondaryButtonText && (\n            <Button\n              buttonStyle=\"link\"\n              buttonSize=\"small\"\n              onClick={secondaryButtonAction}\n            >\n              {secondaryButtonText}\n            </Button>\n          )}\n          <Button\n            buttonStyle={type === 'warning' ? 'warning' : 'primary'}\n            buttonSize=\"small\"\n            onClick={primaryButtonAction}\n          >\n            {primaryButtonText}\n          </Button>\n        </ButtonContainer>\n      )}\n    </AlertContainer>\n  ),\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Split from 'react-split';\nimport {\n  css,\n  ensureIsArray,\n  styled,\n  SupersetClient,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport { useResizeDetector } from 'react-resize-detector';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport ChartContainer from 'src/components/Chart/ChartContainer';\nimport {\n  getItem,\n  setItem,\n  LocalStorageKeys,\n} from 'src/utils/localStorageHelpers';\nimport { DataTablesPane } from './DataTablesPane';\nimport { buildV1ChartDataPayload } from '../exploreUtils';\nimport { ChartPills } from './ChartPills';\nimport { ExploreAlert } from './ExploreAlert';\nimport { getChartRequiredFieldsMissingMessage } from '../../utils/getChartRequiredFieldsMissingMessage';\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  onQuery: PropTypes.func,\n  can_overwrite: PropTypes.bool.isRequired,\n  can_download: PropTypes.bool.isRequired,\n  datasource: PropTypes.object,\n  dashboardId: PropTypes.number,\n  column_formats: PropTypes.object,\n  containerId: PropTypes.string.isRequired,\n  isStarred: PropTypes.bool.isRequired,\n  slice: PropTypes.object,\n  sliceName: PropTypes.string,\n  table_name: PropTypes.string,\n  vizType: PropTypes.string.isRequired,\n  form_data: PropTypes.object,\n  ownState: PropTypes.object,\n  standalone: PropTypes.number,\n  force: PropTypes.bool,\n  timeout: PropTypes.number,\n  chartIsStale: PropTypes.bool,\n  chart: chartPropShape,\n  errorMessage: PropTypes.node,\n  triggerRender: PropTypes.bool,\n};\n\nconst GUTTER_SIZE_FACTOR = 1.25;\n\nconst INITIAL_SIZES = [100, 0];\nconst MIN_SIZES = [300, 65];\nconst DEFAULT_SOUTH_PANE_HEIGHT_PERCENT = 40;\n\nconst Styles = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  align-content: stretch;\n  overflow: auto;\n  box-shadow: none;\n  height: 100%;\n\n  & > div {\n    height: 100%;\n  }\n\n  .gutter {\n    border-top: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    border-bottom: 1px solid ${({ theme }) => theme.colors.grayscale.light2};\n    width: ${({ theme }) => theme.gridUnit * 9}px;\n    margin: ${({ theme }) => theme.gridUnit * GUTTER_SIZE_FACTOR}px auto;\n  }\n\n  .gutter.gutter-vertical {\n    cursor: row-resize;\n  }\n\n  .ant-collapse {\n    .ant-tabs {\n      height: 100%;\n      .ant-tabs-nav {\n        padding-left: ${({ theme }) => theme.gridUnit * 5}px;\n        margin: 0;\n      }\n      .ant-tabs-content-holder {\n        overflow: hidden;\n        .ant-tabs-content {\n          height: 100%;\n        }\n      }\n    }\n  }\n`;\n\nconst ExploreChartPanel = ({\n  chart,\n  slice,\n  vizType,\n  ownState,\n  triggerRender,\n  force,\n  datasource,\n  errorMessage,\n  form_data: formData,\n  onQuery,\n  actions,\n  timeout,\n  standalone,\n  chartIsStale,\n  chartAlert,\n}) => {\n  const theme = useTheme();\n  const gutterMargin = theme.gridUnit * GUTTER_SIZE_FACTOR;\n  const gutterHeight = theme.gridUnit * GUTTER_SIZE_FACTOR;\n  const {\n    width: chartPanelWidth,\n    height: chartPanelHeight,\n    ref: chartPanelRef,\n  } = useResizeDetector({\n    refreshMode: 'debounce',\n    refreshRate: 300,\n  });\n  const [splitSizes, setSplitSizes] = useState(\n    getItem(LocalStorageKeys.chart_split_sizes, INITIAL_SIZES),\n  );\n\n  const showAlertBanner =\n    !chartAlert &&\n    chartIsStale &&\n    chart.chartStatus !== 'failed' &&\n    ensureIsArray(chart.queriesResponse).length > 0;\n\n  const updateQueryContext = useCallback(\n    async function fetchChartData() {\n      if (slice && slice.query_context === null) {\n        const queryContext = buildV1ChartDataPayload({\n          formData: slice.form_data,\n          force,\n          resultFormat: 'json',\n          resultType: 'full',\n          setDataMask: null,\n          ownState: null,\n        });\n\n        await SupersetClient.put({\n          endpoint: `/api/v1/chart/${slice.slice_id}`,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            query_context: JSON.stringify(queryContext),\n            query_context_generation: true,\n          }),\n        });\n      }\n    },\n    [slice],\n  );\n\n  useEffect(() => {\n    updateQueryContext();\n  }, [updateQueryContext]);\n\n  useEffect(() => {\n    setItem(LocalStorageKeys.chart_split_sizes, splitSizes);\n  }, [splitSizes]);\n\n  const onDragEnd = useCallback(sizes => {\n    setSplitSizes(sizes);\n  }, []);\n\n  const refreshCachedQuery = useCallback(() => {\n    actions.setForceQuery(true);\n    actions.postChartFormData(\n      formData,\n      true,\n      timeout,\n      chart.id,\n      undefined,\n      ownState,\n    );\n    actions.updateQueryFormData(formData, chart.id);\n  }, [actions, chart.id, formData, ownState, timeout]);\n\n  const onCollapseChange = useCallback(isOpen => {\n    let splitSizes;\n    if (!isOpen) {\n      splitSizes = INITIAL_SIZES;\n    } else {\n      splitSizes = [\n        100 - DEFAULT_SOUTH_PANE_HEIGHT_PERCENT,\n        DEFAULT_SOUTH_PANE_HEIGHT_PERCENT,\n      ];\n    }\n    setSplitSizes(splitSizes);\n  }, []);\n\n  const renderChart = useCallback(\n    () => (\n      <div\n        css={css`\n          min-height: 0;\n          flex: 1;\n          overflow: auto;\n        `}\n        ref={chartPanelRef}\n      >\n        {chartPanelWidth && chartPanelHeight && (\n          <ChartContainer\n            width={Math.floor(chartPanelWidth)}\n            height={chartPanelHeight}\n            ownState={ownState}\n            annotationData={chart.annotationData}\n            chartAlert={chart.chartAlert}\n            chartStackTrace={chart.chartStackTrace}\n            chartId={chart.id}\n            chartStatus={chart.chartStatus}\n            triggerRender={triggerRender}\n            force={force}\n            datasource={datasource}\n            errorMessage={errorMessage}\n            formData={formData}\n            latestQueryFormData={chart.latestQueryFormData}\n            onQuery={onQuery}\n            queriesResponse={chart.queriesResponse}\n            chartIsStale={chartIsStale}\n            setControlValue={actions.setControlValue}\n            timeout={timeout}\n            triggerQuery={chart.triggerQuery}\n            vizType={vizType}\n          />\n        )}\n      </div>\n    ),\n    [\n      actions.setControlValue,\n      chart.annotationData,\n      chart.chartAlert,\n      chart.chartStackTrace,\n      chart.chartStatus,\n      chart.id,\n      chart.latestQueryFormData,\n      chart.queriesResponse,\n      chart.triggerQuery,\n      chartIsStale,\n      chartPanelHeight,\n      chartPanelRef,\n      chartPanelWidth,\n      datasource,\n      errorMessage,\n      force,\n      formData,\n      onQuery,\n      ownState,\n      timeout,\n      triggerRender,\n      vizType,\n    ],\n  );\n\n  const panelBody = useMemo(\n    () => (\n      <div\n        className=\"panel-body\"\n        css={css`\n          display: flex;\n          flex-direction: column;\n        `}\n      >\n        {showAlertBanner && (\n          <ExploreAlert\n            title={\n              errorMessage\n                ? t('Required control values have been removed')\n                : t('Your chart is not up to date')\n            }\n            bodyText={\n              errorMessage ? (\n                getChartRequiredFieldsMissingMessage(false)\n              ) : (\n                <span>\n                  {t(\n                    'You updated the values in the control panel, but the chart was not updated automatically. Run the query by clicking on the \"Update chart\" button or',\n                  )}{' '}\n                  <span role=\"button\" tabIndex={0} onClick={onQuery}>\n                    {t('click here')}\n                  </span>\n                  .\n                </span>\n              )\n            }\n            type=\"warning\"\n            css={theme => css`\n              margin: 0 0 ${theme.gridUnit * 4}px 0;\n            `}\n          />\n        )}\n        <ChartPills\n          queriesResponse={chart.queriesResponse}\n          chartStatus={chart.chartStatus}\n          chartUpdateStartTime={chart.chartUpdateStartTime}\n          chartUpdateEndTime={chart.chartUpdateEndTime}\n          refreshCachedQuery={refreshCachedQuery}\n          rowLimit={formData?.row_limit}\n        />\n        {renderChart()}\n      </div>\n    ),\n    [\n      showAlertBanner,\n      errorMessage,\n      onQuery,\n      chart.queriesResponse,\n      chart.chartStatus,\n      chart.chartUpdateStartTime,\n      chart.chartUpdateEndTime,\n      refreshCachedQuery,\n      formData?.row_limit,\n      renderChart,\n    ],\n  );\n\n  const standaloneChartBody = useMemo(() => renderChart(), [renderChart]);\n\n  const [queryFormData, setQueryFormData] = useState(chart.latestQueryFormData);\n\n  useEffect(() => {\n    // only update when `latestQueryFormData` changes AND `triggerRender`\n    // is false. No update should be done when only `triggerRender` changes,\n    // as this can trigger a query downstream based on incomplete form data.\n    // (`latestQueryFormData` is only updated when a a valid request has been\n    // triggered).\n    if (!triggerRender) {\n      setQueryFormData(chart.latestQueryFormData);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [chart.latestQueryFormData]);\n\n  const elementStyle = useCallback(\n    (dimension, elementSize, gutterSize) => ({\n      [dimension]: `calc(${elementSize}% - ${gutterSize + gutterMargin}px)`,\n    }),\n    [gutterMargin],\n  );\n\n  if (standalone) {\n    // dom manipulation hack to get rid of the boostrap theme's body background\n    const standaloneClass = 'background-transparent';\n    const bodyClasses = document.body.className.split(' ');\n    if (!bodyClasses.includes(standaloneClass)) {\n      document.body.className += ` ${standaloneClass}`;\n    }\n    return standaloneChartBody;\n  }\n\n  return (\n    <Styles className=\"panel panel-default chart-container\">\n      {vizType === 'filter_box' ? (\n        panelBody\n      ) : (\n        <Split\n          sizes={splitSizes}\n          minSize={MIN_SIZES}\n          direction=\"vertical\"\n          gutterSize={gutterHeight}\n          onDragEnd={onDragEnd}\n          elementStyle={elementStyle}\n          expandToMin\n        >\n          {panelBody}\n          <DataTablesPane\n            ownState={ownState}\n            queryFormData={queryFormData}\n            datasource={datasource}\n            queryForce={force}\n            onCollapseChange={onCollapseChange}\n            chartStatus={chart.chartStatus}\n            errorMessage={errorMessage}\n            actions={actions}\n          />\n        </Split>\n      )}\n    </Styles>\n  );\n};\n\nExploreChartPanel.propTypes = propTypes;\n\nexport default ExploreChartPanel;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { ReactNode } from 'react';\nimport { t } from '@superset-ui/core';\nimport Button from 'src/components/Button';\n\nexport type RunQueryButtonProps = {\n  loading: boolean;\n  onQuery: () => void;\n  onStop: () => void;\n  errorMessage: ReactNode;\n  isNewChart: boolean;\n  canStopQuery: boolean;\n  chartIsStale: boolean;\n};\n\nexport const RunQueryButton = ({\n  loading,\n  onQuery,\n  onStop,\n  errorMessage,\n  isNewChart,\n  canStopQuery,\n  chartIsStale,\n}: RunQueryButtonProps) =>\n  loading ? (\n    <Button onClick={onStop} buttonStyle=\"warning\" disabled={!canStopQuery}>\n      <i className=\"fa fa-stop-circle-o\" /> {t('Stop')}\n    </Button>\n  ) : (\n    <Button\n      onClick={onQuery}\n      buttonStyle={chartIsStale ? 'primary' : 'secondary'}\n      disabled={!!errorMessage}\n      data-test=\"run-query-button\"\n    >\n      {isNewChart ? t('Create chart') : t('Update chart')}\n    </Button>\n  );\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport React, {\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  ensureIsArray,\n  t,\n  styled,\n  getChartControlPanelRegistry,\n  QueryFormData,\n  DatasourceType,\n  css,\n  SupersetTheme,\n} from '@superset-ui/core';\nimport {\n  ControlPanelSectionConfig,\n  ControlState,\n  CustomControlItem,\n  Dataset,\n  ExpandedControlItem,\n  InfoTooltipWithTrigger,\n  sections,\n} from '@superset-ui/chart-controls';\n\nimport Collapse from 'src/components/Collapse';\nimport Tabs from 'src/components/Tabs';\nimport { PluginContext } from 'src/components/DynamicPlugins';\nimport Loading from 'src/components/Loading';\n\nimport { usePrevious } from 'src/hooks/usePrevious';\nimport { getSectionsToRender } from 'src/explore/controlUtils';\nimport { ExploreActions } from 'src/explore/actions/exploreActions';\nimport { ExplorePageState } from 'src/explore/reducers/getInitialState';\nimport { ChartState } from 'src/explore/types';\nimport { Tooltip } from 'src/components/Tooltip';\n\nimport { rgba } from 'emotion-rgba';\nimport ControlRow from './ControlRow';\nimport Control from './Control';\nimport { ExploreAlert } from './ExploreAlert';\nimport { RunQueryButton } from './RunQueryButton';\n\nexport type ControlPanelsContainerProps = {\n  exploreState: ExplorePageState['explore'];\n  actions: ExploreActions;\n  datasource_type: DatasourceType;\n  chart: ChartState;\n  controls: Record<string, ControlState>;\n  form_data: QueryFormData;\n  isDatasourceMetaLoading: boolean;\n  errorMessage: ReactNode;\n  onQuery: () => void;\n  onStop: () => void;\n  canStopQuery: boolean;\n  chartIsStale: boolean;\n};\n\nexport type ExpandedControlPanelSectionConfig = Omit<\n  ControlPanelSectionConfig,\n  'controlSetRows'\n> & {\n  controlSetRows: ExpandedControlItem[][];\n};\n\nconst actionButtonsContainerStyles = (theme: SupersetTheme) => css`\n  display: flex;\n  position: sticky;\n  bottom: 0;\n  flex-direction: column;\n  align-items: center;\n  padding: ${theme.gridUnit * 4}px;\n  z-index: 999;\n  background: linear-gradient(\n    ${rgba(theme.colors.grayscale.light5, 0)},\n    ${theme.colors.grayscale.light5} ${theme.opacity.mediumLight}\n  );\n\n  & > button {\n    min-width: 156px;\n  }\n`;\n\nconst Styles = styled.div`\n  position: relative;\n  height: 100%;\n  width: 100%;\n\n  // Resizable add overflow-y: auto as a style to this div\n  // To override it, we need to use !important\n  overflow: visible !important;\n  #controlSections {\n    height: 100%;\n    overflow: visible;\n  }\n  .nav-tabs {\n    flex: 0 0 1;\n  }\n  .tab-content {\n    overflow: auto;\n    flex: 1 1 100%;\n  }\n  .Select__menu {\n    max-width: 100%;\n  }\n  .type-label {\n    margin-right: ${({ theme }) => theme.gridUnit * 3}px;\n    width: ${({ theme }) => theme.gridUnit * 7}px;\n    display: inline-block;\n    text-align: center;\n    font-weight: ${({ theme }) => theme.typography.weights.bold};\n  }\n`;\n\nconst ControlPanelsTabs = styled(Tabs)`\n  ${({ theme, fullWidth }) => css`\n    height: 100%;\n    overflow: visible;\n    .ant-tabs-nav {\n      margin-bottom: 0;\n    }\n    .ant-tabs-nav-list {\n      width: ${fullWidth ? '100%' : '50%'};\n    }\n    .ant-tabs-tabpane {\n      height: 100%;\n    }\n    .ant-tabs-content-holder {\n      padding-top: ${theme.gridUnit * 4}px;\n    }\n\n    .ant-collapse-ghost > .ant-collapse-item {\n      &:not(:last-child) {\n        border-bottom: 1px solid ${theme.colors.grayscale.light3};\n      }\n\n      & > .ant-collapse-header {\n        font-size: ${theme.typography.sizes.s}px;\n      }\n\n      & > .ant-collapse-content > .ant-collapse-content-box {\n        padding-bottom: 0;\n        font-size: ${theme.typography.sizes.s}px;\n      }\n    }\n  `}\n`;\n\nconst isTimeSection = (section: ControlPanelSectionConfig): boolean =>\n  !!section.label &&\n  (sections.legacyRegularTime.label === section.label ||\n    sections.legacyTimeseriesTime.label === section.label);\n\nconst hasTimeColumn = (datasource: Dataset): boolean =>\n  datasource?.columns?.some(c => c.is_dttm) ||\n  datasource.type === DatasourceType.Druid;\n\nconst sectionsToExpand = (\n  sections: ControlPanelSectionConfig[],\n  datasource: Dataset,\n): string[] =>\n  // avoid expanding time section if datasource doesn't include time column\n  sections.reduce(\n    (acc, section) =>\n      section.expanded && (!isTimeSection(section) || hasTimeColumn(datasource))\n        ? [...acc, String(section.label)]\n        : acc,\n    [] as string[],\n  );\n\nfunction getState(\n  vizType: string,\n  datasource: Dataset,\n  datasourceType: DatasourceType,\n) {\n  const querySections: ControlPanelSectionConfig[] = [];\n  const customizeSections: ControlPanelSectionConfig[] = [];\n\n  getSectionsToRender(vizType, datasourceType).forEach(section => {\n    // if at least one control in the section is not `renderTrigger`\n    // or asks to be displayed at the Data tab\n    if (\n      section.tabOverride === 'data' ||\n      section.controlSetRows.some(rows =>\n        rows.some(\n          control =>\n            control &&\n            typeof control === 'object' &&\n            'config' in control &&\n            control.config &&\n            (!control.config.renderTrigger ||\n              control.config.tabOverride === 'data'),\n        ),\n      )\n    ) {\n      querySections.push(section);\n    } else {\n      customizeSections.push(section);\n    }\n  });\n  const expandedQuerySections: string[] = sectionsToExpand(\n    querySections,\n    datasource,\n  );\n  const expandedCustomizeSections: string[] = sectionsToExpand(\n    customizeSections,\n    datasource,\n  );\n  return {\n    expandedQuerySections,\n    expandedCustomizeSections,\n    querySections,\n    customizeSections,\n  };\n}\n\nexport const ControlPanelsContainer = (props: ControlPanelsContainerProps) => {\n  const pluginContext = useContext(PluginContext);\n\n  const prevState = usePrevious(props.exploreState);\n  const prevDatasource = usePrevious(props.exploreState.datasource);\n\n  const [showDatasourceAlert, setShowDatasourceAlert] = useState(false);\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (\n      prevDatasource &&\n      (props.exploreState.datasource?.id !== prevDatasource.id ||\n        props.exploreState.datasource?.type !== prevDatasource.type)\n    ) {\n      setShowDatasourceAlert(true);\n      containerRef.current?.scrollTo(0, 0);\n    }\n  }, [\n    props.exploreState.datasource?.id,\n    props.exploreState.datasource?.type,\n    prevDatasource,\n  ]);\n\n  const {\n    expandedQuerySections,\n    expandedCustomizeSections,\n    querySections,\n    customizeSections,\n  } = useMemo(\n    () =>\n      getState(\n        props.form_data.viz_type,\n        props.exploreState.datasource,\n        props.datasource_type,\n      ),\n    [\n      props.exploreState.datasource,\n      props.form_data.viz_type,\n      props.datasource_type,\n    ],\n  );\n\n  const resetTransferredControls = useCallback(() => {\n    ensureIsArray(props.exploreState.controlsTransferred).forEach(controlName =>\n      props.actions.setControlValue(\n        controlName,\n        props.controls[controlName].default,\n      ),\n    );\n  }, [props.actions, props.exploreState.controlsTransferred, props.controls]);\n\n  const handleClearFormClick = useCallback(() => {\n    resetTransferredControls();\n    setShowDatasourceAlert(false);\n  }, [resetTransferredControls]);\n\n  const handleContinueClick = useCallback(() => {\n    setShowDatasourceAlert(false);\n  }, []);\n\n  const shouldRecalculateControlState = ({\n    name,\n    config,\n  }: CustomControlItem): boolean => {\n    const { controls, chart, exploreState } = props;\n\n    return Boolean(\n      config.shouldMapStateToProps?.(\n        prevState || exploreState,\n        exploreState,\n        controls[name],\n        chart,\n      ),\n    );\n  };\n\n  const renderControl = ({ name, config }: CustomControlItem) => {\n    const { controls, chart, exploreState } = props;\n    const { visibility } = config;\n\n    // If the control item is not an object, we have to look up the control data from\n    // the centralized controls file.\n    // When it is an object we read control data straight from `config` instead\n    const controlData = {\n      ...config,\n      ...controls[name],\n      ...(shouldRecalculateControlState({ name, config })\n        ? config?.mapStateToProps?.(exploreState, controls[name], chart)\n        : // for other controls, `mapStateToProps` is already run in\n          // controlUtils/getControlState.ts\n          undefined),\n      name,\n    };\n    const { validationErrors, ...restProps } = controlData as ControlState & {\n      validationErrors?: any[];\n    };\n\n    const isVisible = visibility\n      ? visibility.call(config, props, controlData)\n      : undefined;\n\n    return (\n      <Control\n        key={`control-${name}`}\n        name={name}\n        validationErrors={validationErrors}\n        actions={props.actions}\n        isVisible={isVisible}\n        {...restProps}\n      />\n    );\n  };\n\n  const renderControlPanelSection = (\n    section: ExpandedControlPanelSectionConfig,\n  ) => {\n    const { controls } = props;\n    const { label, description } = section;\n\n    // Section label can be a ReactNode but in some places we want to\n    // have a string ID. Using forced type conversion for now,\n    // should probably add a `id` field to sections in the future.\n    const sectionId = String(label);\n\n    const hasErrors = section.controlSetRows.some(rows =>\n      rows.some(item => {\n        const controlName =\n          typeof item === 'string'\n            ? item\n            : item && 'name' in item\n            ? item.name\n            : null;\n        return (\n          controlName &&\n          controlName in controls &&\n          controls[controlName].validationErrors &&\n          controls[controlName].validationErrors.length > 0\n        );\n      }),\n    );\n    const PanelHeader = () => (\n      <span data-test=\"collapsible-control-panel-header\">\n        <span>{label}</span>{' '}\n        {description && (\n          // label is only used in tooltip id (should probably call this prop `id`)\n          <InfoTooltipWithTrigger label={sectionId} tooltip={description} />\n        )}\n        {hasErrors && (\n          <InfoTooltipWithTrigger\n            label=\"validation-errors\"\n            bsStyle=\"danger\"\n            tooltip=\"This section contains validation errors\"\n          />\n        )}\n      </span>\n    );\n\n    return (\n      <Collapse.Panel\n        css={theme => css`\n          margin-bottom: 0;\n          box-shadow: none;\n\n          &:last-child {\n            padding-bottom: ${theme.gridUnit * 16}px;\n            border-bottom: 0;\n          }\n\n          .panel-body {\n            margin-left: ${theme.gridUnit * 4}px;\n            padding-bottom: 0;\n          }\n\n          span.label {\n            display: inline-block;\n          }\n        `}\n        header={<PanelHeader />}\n        key={sectionId}\n      >\n        {section.controlSetRows.map((controlSets, i) => {\n          const renderedControls = controlSets\n            .map(controlItem => {\n              if (!controlItem) {\n                // When the item is invalid\n                return null;\n              }\n              if (React.isValidElement(controlItem)) {\n                // When the item is a React element\n                return controlItem;\n              }\n              if (\n                controlItem.name &&\n                controlItem.config &&\n                controlItem.name !== 'datasource'\n              ) {\n                return renderControl(controlItem);\n              }\n              return null;\n            })\n            .filter(x => x !== null);\n          // don't show the row if it is empty\n          if (renderedControls.length === 0) {\n            return null;\n          }\n          return (\n            <ControlRow\n              key={`controlsetrow-${i}`}\n              controls={renderedControls}\n            />\n          );\n        })}\n      </Collapse.Panel>\n    );\n  };\n\n  const hasControlsTransferred =\n    ensureIsArray(props.exploreState.controlsTransferred).length > 0;\n\n  const DatasourceAlert = useCallback(\n    () =>\n      hasControlsTransferred ? (\n        <ExploreAlert\n          title={t('Keep control settings?')}\n          bodyText={t(\n            \"You've changed datasets. Any controls with data (columns, metrics) that match this new dataset have been retained.\",\n          )}\n          primaryButtonAction={handleContinueClick}\n          secondaryButtonAction={handleClearFormClick}\n          primaryButtonText={t('Continue')}\n          secondaryButtonText={t('Clear form')}\n          type=\"info\"\n        />\n      ) : (\n        <ExploreAlert\n          title={t('No form settings were maintained')}\n          bodyText={t(\n            'We were unable to carry over any controls when switching to this new dataset.',\n          )}\n          primaryButtonAction={handleContinueClick}\n          primaryButtonText={t('Continue')}\n          type=\"warning\"\n        />\n      ),\n    [handleClearFormClick, handleContinueClick, hasControlsTransferred],\n  );\n\n  const dataTabTitle = useMemo(\n    () => (\n      <>\n        <span>{t('Data')}</span>\n        {props.errorMessage && (\n          <span\n            css={(theme: SupersetTheme) => css`\n              font-size: ${theme.typography.sizes.xs}px;\n              margin-left: ${theme.gridUnit * 2}px;\n            `}\n          >\n            {' '}\n            <Tooltip\n              id=\"query-error-tooltip\"\n              placement=\"right\"\n              title={props.errorMessage}\n            >\n              <i className=\"fa fa-exclamation-circle text-danger fa-lg\" />\n            </Tooltip>\n          </span>\n        )}\n      </>\n    ),\n    [props.errorMessage],\n  );\n\n  const controlPanelRegistry = getChartControlPanelRegistry();\n  if (\n    !controlPanelRegistry.has(props.form_data.viz_type) &&\n    pluginContext.loading\n  ) {\n    return <Loading />;\n  }\n\n  const showCustomizeTab = customizeSections.length > 0;\n\n  return (\n    <Styles ref={containerRef}>\n      <ControlPanelsTabs\n        id=\"controlSections\"\n        data-test=\"control-tabs\"\n        fullWidth={showCustomizeTab}\n        allowOverflow={false}\n      >\n        <Tabs.TabPane key=\"query\" tab={dataTabTitle}>\n          <Collapse\n            defaultActiveKey={expandedQuerySections}\n            expandIconPosition=\"right\"\n            ghost\n          >\n            {showDatasourceAlert && <DatasourceAlert />}\n            {querySections.map(renderControlPanelSection)}\n          </Collapse>\n        </Tabs.TabPane>\n        {showCustomizeTab && (\n          <Tabs.TabPane key=\"display\" tab={t('Customize')}>\n            <Collapse\n              defaultActiveKey={expandedCustomizeSections}\n              expandIconPosition=\"right\"\n              ghost\n            >\n              {customizeSections.map(renderControlPanelSection)}\n            </Collapse>\n          </Tabs.TabPane>\n        )}\n      </ControlPanelsTabs>\n      <div css={actionButtonsContainerStyles}>\n        <RunQueryButton\n          onQuery={props.onQuery}\n          onStop={props.onStop}\n          errorMessage={props.errorMessage}\n          loading={props.chart.chartStatus === 'loading'}\n          isNewChart={!props.chart.queriesResponse}\n          canStopQuery={props.canStopQuery}\n          chartIsStale={props.chartIsStale}\n        />\n      </div>\n    </Styles>\n  );\n};\n\nexport default ControlPanelsContainer;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport React from 'react';\nimport { Input } from 'src/components/Input';\nimport { Form, FormItem } from 'src/components/Form';\nimport Alert from 'src/components/Alert';\nimport { JsonObject, t, styled } from '@superset-ui/core';\nimport Modal from 'src/components/Modal';\nimport { Radio } from 'src/components/Radio';\nimport Button from 'src/components/Button';\nimport { Select } from 'src/components';\nimport { SelectValue } from 'antd/lib/select';\nimport { connect } from 'react-redux';\n\n// Session storage key for recent dashboard\nconst SK_DASHBOARD_ID = 'save_chart_recent_dashboard';\n\ntype SaveModalProps = {\n  onHide: () => void;\n  actions: Record<string, any>;\n  form_data?: Record<string, any>;\n  userId: number;\n  dashboards: Array<any>;\n  alert?: string;\n  sliceName?: string;\n  slice?: Record<string, any>;\n  datasource?: Record<string, any>;\n  dashboardId: '' | number | null;\n};\n\ntype ActionType = 'overwrite' | 'saveas';\n\ntype SaveModalState = {\n  saveToDashboardId: number | string | null;\n  newSliceName?: string;\n  newDashboardName?: string;\n  alert: string | null;\n  action: ActionType;\n};\n\nexport const StyledModal = styled(Modal)`\n  .ant-modal-body {\n    overflow: visible;\n  }\n`;\n\nclass SaveModal extends React.Component<SaveModalProps, SaveModalState> {\n  constructor(props: SaveModalProps) {\n    super(props);\n    this.state = {\n      saveToDashboardId: null,\n      newSliceName: props.sliceName,\n      alert: null,\n      action: this.canOverwriteSlice() ? 'overwrite' : 'saveas',\n    };\n    this.onDashboardSelectChange = this.onDashboardSelectChange.bind(this);\n    this.onSliceNameChange = this.onSliceNameChange.bind(this);\n    this.changeAction = this.changeAction.bind(this);\n    this.saveOrOverwrite = this.saveOrOverwrite.bind(this);\n    this.isNewDashboard = this.isNewDashboard.bind(this);\n  }\n\n  isNewDashboard(): boolean {\n    return !!(!this.state.saveToDashboardId && this.state.newDashboardName);\n  }\n\n  canOverwriteSlice(): boolean {\n    return (\n      this.props.slice?.owners?.includes(this.props.userId) &&\n      !this.props.slice?.is_managed_externally\n    );\n  }\n\n  componentDidMount() {\n    this.props.actions.fetchDashboards(this.props.userId).then(() => {\n      const dashboardIds = this.props.dashboards.map(\n        dashboard => dashboard.value,\n      );\n      const lastDashboard = sessionStorage.getItem(SK_DASHBOARD_ID);\n      let recentDashboard = lastDashboard && parseInt(lastDashboard, 10);\n\n      if (this.props.dashboardId) {\n        recentDashboard = this.props.dashboardId;\n      }\n\n      if (\n        recentDashboard !== null &&\n        dashboardIds.indexOf(recentDashboard) !== -1\n      ) {\n        this.setState({\n          saveToDashboardId: recentDashboard,\n        });\n      }\n    });\n  }\n\n  onSliceNameChange(event: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({ newSliceName: event.target.value });\n  }\n\n  onDashboardSelectChange(selected: SelectValue) {\n    const newDashboardName = selected ? String(selected) : undefined;\n    const saveToDashboardId =\n      selected && typeof selected === 'number' ? selected : null;\n    this.setState({ saveToDashboardId, newDashboardName });\n  }\n\n  changeAction(action: ActionType) {\n    this.setState({ action });\n  }\n\n  saveOrOverwrite(gotodash: boolean) {\n    this.setState({ alert: null });\n    this.props.actions.removeSaveModalAlert();\n    const sliceParams: Record<string, any> = {};\n\n    if (this.props.slice && this.props.slice.slice_id) {\n      sliceParams.slice_id = this.props.slice.slice_id;\n    }\n    if (sliceParams.action === 'saveas') {\n      if (this.state.newSliceName === '') {\n        this.setState({ alert: t('Please enter a chart name') });\n        return;\n      }\n    }\n    sliceParams.action = this.state.action;\n    sliceParams.slice_name = this.state.newSliceName;\n    sliceParams.save_to_dashboard_id = this.state.saveToDashboardId;\n    sliceParams.new_dashboard_name = this.state.newDashboardName;\n    const { url_params, ...formData } = this.props.form_data || {};\n\n    this.props.actions\n      .saveSlice(formData, sliceParams)\n      .then((data: JsonObject) => {\n        if (data.dashboard_id === null) {\n          sessionStorage.removeItem(SK_DASHBOARD_ID);\n        } else {\n          sessionStorage.setItem(SK_DASHBOARD_ID, data.dashboard_id);\n        }\n        // Go to new slice url or dashboard url\n        let url = gotodash ? data.dashboard_url : data.slice.slice_url;\n        if (url_params) {\n          const prefix = url.includes('?') ? '&' : '?';\n          url = `${url}${prefix}${new URLSearchParams(url_params).toString()}`;\n        }\n        window.location.assign(url);\n      });\n    this.props.onHide();\n  }\n\n  removeAlert() {\n    if (this.props.alert) {\n      this.props.actions.removeSaveModalAlert();\n    }\n    this.setState({ alert: null });\n  }\n\n  render() {\n    const dashboardSelectValue =\n      this.state.saveToDashboardId || this.state.newDashboardName;\n    return (\n      <StyledModal\n        show\n        onHide={this.props.onHide}\n        title={t('Save chart')}\n        footer={\n          <div data-test=\"save-modal-footer\">\n            <Button\n              id=\"btn_cancel\"\n              buttonSize=\"small\"\n              onClick={this.props.onHide}\n            >\n              {t('Cancel')}\n            </Button>\n            <Button\n              id=\"btn_modal_save_goto_dash\"\n              buttonSize=\"small\"\n              disabled={\n                !this.state.newSliceName ||\n                (!this.state.saveToDashboardId && !this.state.newDashboardName)\n              }\n              onClick={() => this.saveOrOverwrite(true)}\n            >\n              {this.isNewDashboard()\n                ? t('Save & go to new dashboard')\n                : t('Save & go to dashboard')}\n            </Button>\n            <Button\n              id=\"btn_modal_save\"\n              buttonSize=\"small\"\n              buttonStyle=\"primary\"\n              onClick={() => this.saveOrOverwrite(false)}\n              disabled={!this.state.newSliceName}\n              data-test=\"btn-modal-save\"\n            >\n              {!this.canOverwriteSlice() && this.props.slice\n                ? t('Save as new chart')\n                : this.isNewDashboard()\n                ? t('Save to new dashboard')\n                : t('Save')}\n            </Button>\n          </div>\n        }\n      >\n        <Form data-test=\"save-modal-body\" layout=\"vertical\">\n          {(this.state.alert || this.props.alert) && (\n            <Alert\n              type=\"warning\"\n              message={\n                <>\n                  {this.state.alert ? this.state.alert : this.props.alert}\n                  <i\n                    role=\"button\"\n                    aria-label=\"Remove alert\"\n                    tabIndex={0}\n                    className=\"fa fa-close pull-right\"\n                    onClick={this.removeAlert.bind(this)}\n                    style={{ cursor: 'pointer' }}\n                  />\n                </>\n              }\n            />\n          )}\n          <FormItem data-test=\"radio-group\">\n            <Radio\n              id=\"overwrite-radio\"\n              disabled={!this.canOverwriteSlice()}\n              checked={this.state.action === 'overwrite'}\n              onChange={() => this.changeAction('overwrite')}\n              data-test=\"save-overwrite-radio\"\n            >\n              {t('Save (Overwrite)')}\n            </Radio>\n            <Radio\n              id=\"saveas-radio\"\n              data-test=\"saveas-radio\"\n              checked={this.state.action === 'saveas'}\n              onChange={() => this.changeAction('saveas')}\n            >\n              {t('Save as...')}\n            </Radio>\n          </FormItem>\n          <hr />\n          <FormItem label={t('Chart name')} required>\n            <Input\n              name=\"new_slice_name\"\n              type=\"text\"\n              placeholder=\"Name\"\n              value={this.state.newSliceName}\n              onChange={this.onSliceNameChange}\n              data-test=\"new-chart-name\"\n            />\n          </FormItem>\n          <FormItem\n            label={t('Add to dashboard')}\n            data-test=\"save-chart-modal-select-dashboard-form\"\n          >\n            <Select\n              allowClear\n              allowNewOptions\n              ariaLabel={t('Select a dashboard')}\n              options={this.props.dashboards}\n              onChange={this.onDashboardSelectChange}\n              value={dashboardSelectValue || undefined}\n              placeholder={\n                <div>\n                  <b>{t('Select')}</b>\n                  {t(' a dashboard OR ')}\n                  <b>{t('create')}</b>\n                  {t(' a new one')}\n                </div>\n              }\n            />\n          </FormItem>\n        </Form>\n      </StyledModal>\n    );\n  }\n}\n\nfunction mapStateToProps({\n  explore,\n  saveModal,\n}: Record<string, any>): Partial<SaveModalProps> {\n  return {\n    datasource: explore.datasource,\n    slice: explore.slice,\n    userId: explore.user?.userId,\n    dashboards: saveModal.dashboards,\n    alert: saveModal.saveModalAlert,\n  };\n}\n\nexport default connect(mapStateToProps, () => ({}))(SaveModal);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { useDrag } from 'react-dnd';\nimport { css, Metric, styled } from '@superset-ui/core';\nimport { ColumnMeta } from '@superset-ui/chart-controls';\nimport { DndItemType } from 'src/explore/components/DndItemType';\nimport {\n  StyledColumnOption,\n  StyledMetricOption,\n} from 'src/explore/components/optionRenderers';\nimport Icons from 'src/components/Icons';\n\nimport { DatasourcePanelDndItem } from '../types';\n\nconst DatasourceItemContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    height: ${theme.gridUnit * 6}px;\n    padding: 0 ${theme.gridUnit}px;\n\n    // hack to make the drag preview image corners rounded\n    transform: translate(0, 0);\n    background-color: inherit;\n    border-radius: 4px;\n\n    > div {\n      min-width: 0;\n      margin-right: ${theme.gridUnit * 2}px;\n    }\n  `}\n`;\n\ninterface DatasourcePanelDragOptionProps extends DatasourcePanelDndItem {\n  labelRef?: React.RefObject<any>;\n  showTooltip?: boolean;\n}\n\ntype MetricOption = Omit<Metric, 'id'> & {\n  label?: string;\n};\n\nexport default function DatasourcePanelDragOption(\n  props: DatasourcePanelDragOptionProps,\n) {\n  const { labelRef, showTooltip, type, value } = props;\n  const [{ isDragging }, drag] = useDrag({\n    item: {\n      value: props.value,\n      type: props.type,\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const optionProps = {\n    labelRef,\n    showTooltip: !isDragging && showTooltip,\n    showType: true,\n  };\n\n  return (\n    <DatasourceItemContainer data-test=\"DatasourcePanelDragOption\" ref={drag}>\n      {type === DndItemType.Column ? (\n        <StyledColumnOption column={value as ColumnMeta} {...optionProps} />\n      ) : (\n        <StyledMetricOption metric={value as MetricOption} {...optionProps} />\n      )}\n      <Icons.Drag />\n    </DatasourceItemContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { css, styled, t, DatasourceType } from '@superset-ui/core';\nimport {\n  ControlConfig,\n  Dataset,\n  ColumnMeta,\n} from '@superset-ui/chart-controls';\nimport { debounce } from 'lodash';\nimport { matchSorter, rankings } from 'match-sorter';\nimport Collapse from 'src/components/Collapse';\nimport Alert from 'src/components/Alert';\nimport { SaveDatasetModal } from 'src/SqlLab/components/SaveDatasetModal';\nimport { Input } from 'src/components/Input';\nimport { FAST_DEBOUNCE } from 'src/constants';\nimport { FeatureFlag, isFeatureEnabled } from 'src/featureFlags';\nimport { ExploreActions } from 'src/explore/actions/exploreActions';\nimport Control from 'src/explore/components/Control';\nimport { ExploreDatasource } from 'src/SqlLab/types';\nimport DatasourcePanelDragOption from './DatasourcePanelDragOption';\nimport { DndItemType } from '../DndItemType';\nimport { StyledColumnOption, StyledMetricOption } from '../optionRenderers';\n\ninterface DatasourceControl extends ControlConfig {\n  datasource?: ExploreDatasource;\n}\n\nexport interface Props {\n  datasource: Dataset;\n  controls: {\n    datasource: DatasourceControl;\n  };\n  actions: Partial<ExploreActions> & Pick<ExploreActions, 'setControlValue'>;\n  // we use this props control force update when this panel resize\n  shouldForceUpdate?: number;\n}\n\nconst enableExploreDnd = isFeatureEnabled(\n  FeatureFlag.ENABLE_EXPLORE_DRAG_AND_DROP,\n);\n\nconst Button = styled.button`\n  background: none;\n  border: none;\n  text-decoration: underline;\n  color: ${({ theme }) => theme.colors.primary.dark1};\n`;\n\nconst ButtonContainer = styled.div`\n  text-align: center;\n  padding-top: 2px;\n`;\n\nconst DatasourceContainer = styled.div`\n  ${({ theme }) => css`\n    background-color: ${theme.colors.grayscale.light5};\n    position: relative;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    max-height: 100%;\n    .ant-collapse {\n      height: auto;\n    }\n    .field-selections {\n      padding: 0 0 ${4 * theme.gridUnit}px;\n      overflow: auto;\n    }\n    .field-length {\n      margin-bottom: ${theme.gridUnit * 2}px;\n      font-size: ${theme.typography.sizes.s}px;\n      color: ${theme.colors.grayscale.light1};\n    }\n    .form-control.input-md {\n      width: calc(100% - ${theme.gridUnit * 8}px);\n      height: ${theme.gridUnit * 8}px;\n      margin: ${theme.gridUnit * 2}px auto;\n    }\n    .type-label {\n      font-size: ${theme.typography.sizes.s}px;\n      color: ${theme.colors.grayscale.base};\n    }\n    .Control {\n      padding-bottom: 0;\n    }\n  `};\n`;\n\nconst LabelWrapper = styled.div`\n  ${({ theme }) => css`\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-size: ${theme.typography.sizes.s}px;\n    background-color: ${theme.colors.grayscale.light4};\n    margin: ${theme.gridUnit * 2}px 0;\n    border-radius: 4px;\n    padding: 0 ${theme.gridUnit}px;\n\n    &:first-of-type {\n      margin-top: 0;\n    }\n    &:last-of-type {\n      margin-bottom: 0;\n    }\n\n    ${enableExploreDnd &&\n    css`\n      padding: 0;\n      cursor: pointer;\n      &:hover {\n        background-color: ${theme.colors.grayscale.light3};\n      }\n    `}\n\n    & > span {\n      white-space: nowrap;\n    }\n\n    .option-label {\n      display: inline;\n    }\n\n    .metric-option {\n      & > svg {\n        min-width: ${theme.gridUnit * 4}px;\n      }\n      & > .option-label {\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n  `}\n`;\n\nconst SectionHeader = styled.span`\n  ${({ theme }) => css`\n    font-size: ${theme.typography.sizes.s}px;\n  `}\n`;\n\nconst StyledInfoboxWrapper = styled.div`\n  ${({ theme }) => css`\n    margin: 0 ${theme.gridUnit * 2.5}px;\n\n    span {\n      text-decoration: underline;\n    }\n  `}\n`;\n\nconst LabelContainer = (props: {\n  children: React.ReactElement;\n  className: string;\n}) => {\n  const labelRef = useRef<HTMLDivElement>(null);\n  const extendedProps = {\n    labelRef,\n  };\n  return (\n    <LabelWrapper className={props.className}>\n      {React.cloneElement(props.children, extendedProps)}\n    </LabelWrapper>\n  );\n};\n\nexport default function DataSourcePanel({\n  datasource,\n  controls: { datasource: datasourceControl },\n  actions,\n  shouldForceUpdate,\n}: Props) {\n  const { columns: _columns, metrics } = datasource;\n\n  // display temporal column first\n  const columns = useMemo(\n    () =>\n      [..._columns].sort((col1, col2) => {\n        if (col1.is_dttm && !col2.is_dttm) {\n          return -1;\n        }\n        if (col2.is_dttm && !col1.is_dttm) {\n          return 1;\n        }\n        return 0;\n      }),\n    [_columns],\n  );\n\n  const [showSaveDatasetModal, setShowSaveDatasetModal] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n  const [lists, setList] = useState({\n    columns,\n    metrics,\n  });\n  const [showAllMetrics, setShowAllMetrics] = useState(false);\n  const [showAllColumns, setShowAllColumns] = useState(false);\n\n  const DEFAULT_MAX_COLUMNS_LENGTH = 50;\n  const DEFAULT_MAX_METRICS_LENGTH = 50;\n\n  const search = useMemo(\n    () =>\n      debounce((value: string) => {\n        if (value === '') {\n          setList({ columns, metrics });\n          return;\n        }\n        setList({\n          columns: matchSorter(columns, value, {\n            keys: [\n              {\n                key: 'verbose_name',\n                threshold: rankings.CONTAINS,\n              },\n              {\n                key: 'column_name',\n                threshold: rankings.CONTAINS,\n              },\n              {\n                key: item =>\n                  [item.description, item.expression].map(\n                    x => x?.replace(/[_\\n\\s]+/g, ' ') || '',\n                  ),\n                threshold: rankings.CONTAINS,\n                maxRanking: rankings.CONTAINS,\n              },\n            ],\n            keepDiacritics: true,\n          }),\n          metrics: matchSorter(metrics, value, {\n            keys: [\n              {\n                key: 'verbose_name',\n                threshold: rankings.CONTAINS,\n              },\n              {\n                key: 'metric_name',\n                threshold: rankings.CONTAINS,\n              },\n              {\n                key: item =>\n                  [item.description, item.expression].map(\n                    x => x?.replace(/[_\\n\\s]+/g, ' ') || '',\n                  ),\n                threshold: rankings.CONTAINS,\n                maxRanking: rankings.CONTAINS,\n              },\n            ],\n            keepDiacritics: true,\n            baseSort: (a, b) =>\n              Number(b.item.is_certified) - Number(a.item.is_certified) ||\n              String(a.rankedValue).localeCompare(b.rankedValue),\n          }),\n        });\n      }, FAST_DEBOUNCE),\n    [columns, metrics],\n  );\n\n  useEffect(() => {\n    setList({\n      columns,\n      metrics,\n    });\n    setInputValue('');\n  }, [columns, datasource, metrics]);\n\n  const sortCertifiedFirst = (slice: ColumnMeta[]) =>\n    slice.sort((a, b) => b.is_certified - a.is_certified);\n\n  const metricSlice = useMemo(\n    () =>\n      showAllMetrics\n        ? lists.metrics\n        : lists.metrics.slice(0, DEFAULT_MAX_METRICS_LENGTH),\n    [lists.metrics, showAllMetrics],\n  );\n\n  const columnSlice = useMemo(\n    () =>\n      showAllColumns\n        ? sortCertifiedFirst(lists.columns)\n        : sortCertifiedFirst(\n            lists.columns.slice(0, DEFAULT_MAX_COLUMNS_LENGTH),\n          ),\n    [lists.columns, showAllColumns],\n  );\n\n  const showInfoboxCheck = () => {\n    if (sessionStorage.getItem('showInfobox') === 'false') return false;\n    return true;\n  };\n\n  const mainBody = useMemo(\n    () => (\n      <>\n        <Input\n          allowClear\n          onChange={evt => {\n            setInputValue(evt.target.value);\n            search(evt.target.value);\n          }}\n          value={inputValue}\n          className=\"form-control input-md\"\n          placeholder={t('Search Metrics & Columns')}\n        />\n        <div className=\"field-selections\">\n          {datasource.type === DatasourceType.Query && showInfoboxCheck() && (\n            <StyledInfoboxWrapper>\n              <Alert\n                closable\n                onClose={() => sessionStorage.setItem('showInfobox', 'false')}\n                type=\"info\"\n                message=\"\"\n                description={\n                  <>\n                    <span\n                      role=\"button\"\n                      tabIndex={0}\n                      onClick={() => setShowSaveDatasetModal(true)}\n                      className=\"add-dataset-alert-description\"\n                    >\n                      {t('Create a dataset')}\n                    </span>\n                    {t(' to edit or add columns and metrics.')}\n                  </>\n                }\n              />\n            </StyledInfoboxWrapper>\n          )}\n          <Collapse\n            defaultActiveKey={['metrics', 'column']}\n            expandIconPosition=\"right\"\n            ghost\n          >\n            <Collapse.Panel\n              header={<SectionHeader>{t('Metrics')}</SectionHeader>}\n              key=\"metrics\"\n            >\n              <div className=\"field-length\">\n                {t(\n                  `Showing %s of %s`,\n                  metricSlice.length,\n                  lists.metrics.length,\n                )}\n              </div>\n              {metricSlice.map(m => (\n                <LabelContainer\n                  key={m.metric_name + String(shouldForceUpdate)}\n                  className=\"column\"\n                >\n                  {enableExploreDnd ? (\n                    <DatasourcePanelDragOption\n                      value={m}\n                      type={DndItemType.Metric}\n                    />\n                  ) : (\n                    <StyledMetricOption metric={m} showType />\n                  )}\n                </LabelContainer>\n              ))}\n              {lists.metrics.length > DEFAULT_MAX_METRICS_LENGTH ? (\n                <ButtonContainer>\n                  <Button onClick={() => setShowAllMetrics(!showAllMetrics)}>\n                    {showAllMetrics ? t('Show less...') : t('Show all...')}\n                  </Button>\n                </ButtonContainer>\n              ) : (\n                <></>\n              )}\n            </Collapse.Panel>\n            <Collapse.Panel\n              header={<SectionHeader>{t('Columns')}</SectionHeader>}\n              key=\"column\"\n            >\n              <div className=\"field-length\">\n                {t(\n                  `Showing %s of %s`,\n                  columnSlice.length,\n                  lists.columns.length,\n                )}\n              </div>\n              {columnSlice.map(col => (\n                <LabelContainer\n                  key={col.column_name + String(shouldForceUpdate)}\n                  className=\"column\"\n                >\n                  {enableExploreDnd ? (\n                    <DatasourcePanelDragOption\n                      value={col}\n                      type={DndItemType.Column}\n                    />\n                  ) : (\n                    <StyledColumnOption column={col} showType />\n                  )}\n                </LabelContainer>\n              ))}\n              {lists.columns.length > DEFAULT_MAX_COLUMNS_LENGTH ? (\n                <ButtonContainer>\n                  <Button onClick={() => setShowAllColumns(!showAllColumns)}>\n                    {showAllColumns ? t('Show Less...') : t('Show all...')}\n                  </Button>\n                </ButtonContainer>\n              ) : (\n                <></>\n              )}\n            </Collapse.Panel>\n          </Collapse>\n        </div>\n      </>\n    ),\n    [\n      columnSlice,\n      inputValue,\n      lists.columns.length,\n      lists.metrics.length,\n      metricSlice,\n      search,\n      showAllColumns,\n      showAllMetrics,\n      shouldForceUpdate,\n    ],\n  );\n\n  return (\n    <DatasourceContainer>\n      <SaveDatasetModal\n        visible={showSaveDatasetModal}\n        onHide={() => setShowSaveDatasetModal(false)}\n        buttonTextOnSave={t('Save')}\n        buttonTextOnOverwrite={t('Overwrite')}\n        datasource={datasource}\n      />\n      <Control {...datasourceControl} name=\"datasource\" actions={actions} />\n      {datasource.id != null && mainBody}\n    </DatasourceContainer>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport memoize from 'lodash/memoize';\nimport { isControlPanelSectionConfig } from '@superset-ui/chart-controls';\nimport { getChartControlPanelRegistry } from '@superset-ui/core';\nimport { controls } from '../explore/controls';\n\nconst memoizedControls = memoize((vizType, controlPanel) => {\n  const controlsMap = {};\n  (controlPanel?.controlPanelSections || [])\n    .filter(isControlPanelSectionConfig)\n    .forEach(section => {\n      section.controlSetRows.forEach(row => {\n        row.forEach(control => {\n          if (!control) return;\n          if (typeof control === 'string') {\n            // For now, we have to look in controls.jsx to get the config for some controls.\n            // Once everything is migrated out, delete this if statement.\n            controlsMap[control] = controls[control];\n          } else if (control.name && control.config) {\n            // condition needed because there are elements, e.g. <hr /> in some control configs (I'm looking at you, FilterBox!)\n            controlsMap[control.name] = control.config;\n          }\n        });\n      });\n    });\n  return controlsMap;\n});\n\nconst getControlsForVizType = vizType => {\n  const controlPanel = getChartControlPanelRegistry().get(vizType);\n  return memoizedControls(vizType, controlPanel);\n};\n\nexport default getControlsForVizType;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { isEqual, isEmpty } from 'lodash';\nimport { styled, t } from '@superset-ui/core';\nimport { sanitizeFormData } from 'src/explore/exploreUtils/formData';\nimport getControlsForVizType from 'src/utils/getControlsForVizType';\nimport { safeStringify } from 'src/utils/safeStringify';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ModalTrigger from '../ModalTrigger';\nimport TableView from '../TableView';\n\nconst propTypes = {\n  origFormData: PropTypes.object.isRequired,\n  currentFormData: PropTypes.object.isRequired,\n};\n\nconst StyledLabel = styled.span`\n  ${({ theme }) => `\n    font-size: ${theme.typography.sizes.s}px;\n    color: ${theme.colors.grayscale.dark1};\n    background-color: ${theme.colors.alert.base};\n\n    &: hover {\n      background-color: ${theme.colors.alert.dark1};\n    }\n  `}\n`;\n\nfunction alterForComparison(value) {\n  // Considering `[]`, `{}`, `null` and `undefined` as identical\n  // for this purpose\n  if (value === undefined || value === null || value === '') {\n    return null;\n  }\n  if (typeof value === 'object') {\n    if (Array.isArray(value) && value.length === 0) {\n      return null;\n    }\n    const keys = Object.keys(value);\n    if (keys && keys.length === 0) {\n      return null;\n    }\n  }\n  return value;\n}\n\nexport default class AlteredSliceTag extends React.Component {\n  constructor(props) {\n    super(props);\n    const diffs = this.getDiffs(props);\n    const controlsMap = getControlsForVizType(this.props.origFormData.viz_type);\n    const rows = this.getRowsFromDiffs(diffs, controlsMap);\n\n    this.state = { rows, hasDiffs: !isEmpty(diffs), controlsMap };\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    // Update differences if need be\n    if (isEqual(this.props, newProps)) {\n      return;\n    }\n    const diffs = this.getDiffs(newProps);\n    this.setState(prevState => ({\n      rows: this.getRowsFromDiffs(diffs, prevState.controlsMap),\n      hasDiffs: !isEmpty(diffs),\n    }));\n  }\n\n  getRowsFromDiffs(diffs, controlsMap) {\n    return Object.entries(diffs).map(([key, diff]) => ({\n      control: (controlsMap[key] && controlsMap[key].label) || key,\n      before: this.formatValue(diff.before, key, controlsMap),\n      after: this.formatValue(diff.after, key, controlsMap),\n    }));\n  }\n\n  getDiffs(props) {\n    // Returns all properties that differ in the\n    // current form data and the saved form data\n    const ofd = sanitizeFormData(props.origFormData);\n    const cfd = sanitizeFormData(props.currentFormData);\n\n    const fdKeys = Object.keys(cfd);\n    const diffs = {};\n    fdKeys.forEach(fdKey => {\n      if (!ofd[fdKey] && !cfd[fdKey]) {\n        return;\n      }\n      if (['filters', 'having', 'having_filters', 'where'].includes(fdKey)) {\n        return;\n      }\n      if (!this.isEqualish(ofd[fdKey], cfd[fdKey])) {\n        diffs[fdKey] = { before: ofd[fdKey], after: cfd[fdKey] };\n      }\n    });\n    return diffs;\n  }\n\n  isEqualish(val1, val2) {\n    return isEqual(alterForComparison(val1), alterForComparison(val2));\n  }\n\n  formatValue(value, key, controlsMap) {\n    // Format display value based on the control type\n    // or the value type\n    if (value === undefined) {\n      return 'N/A';\n    }\n    if (value === null) {\n      return 'null';\n    }\n    if (controlsMap[key]?.type === 'AdhocFilterControl') {\n      if (!value.length) {\n        return '[]';\n      }\n      return value\n        .map(v => {\n          const filterVal =\n            v.comparator && v.comparator.constructor === Array\n              ? `[${v.comparator.join(', ')}]`\n              : v.comparator;\n          return `${v.subject} ${v.operator} ${filterVal}`;\n        })\n        .join(', ');\n    }\n    if (controlsMap[key]?.type === 'BoundsControl') {\n      return `Min: ${value[0]}, Max: ${value[1]}`;\n    }\n    if (controlsMap[key]?.type === 'CollectionControl') {\n      return value.map(v => safeStringify(v)).join(', ');\n    }\n    if (\n      controlsMap[key]?.type === 'MetricsControl' &&\n      value.constructor === Array\n    ) {\n      const formattedValue = value.map(v => v?.label ?? v);\n      return formattedValue.length ? formattedValue.join(', ') : '[]';\n    }\n    if (typeof value === 'boolean') {\n      return value ? 'true' : 'false';\n    }\n    if (value.constructor === Array) {\n      const formattedValue = value.map(v => v?.label ?? v);\n      return formattedValue.length ? formattedValue.join(', ') : '[]';\n    }\n    if (typeof value === 'string' || typeof value === 'number') {\n      return value;\n    }\n    return safeStringify(value);\n  }\n\n  renderModalBody() {\n    const columns = [\n      {\n        accessor: 'control',\n        Header: 'Control',\n      },\n      {\n        accessor: 'before',\n        Header: 'Before',\n      },\n      {\n        accessor: 'after',\n        Header: 'After',\n      },\n    ];\n    // set the wrap text in the specific columns.\n    const columnsForWrapText = ['Control', 'Before', 'After'];\n\n    return (\n      <TableView\n        columns={columns}\n        data={this.state.rows}\n        pageSize={50}\n        className=\"table-condensed\"\n        columnsForWrapText={columnsForWrapText}\n      />\n    );\n  }\n\n  renderTriggerNode() {\n    return (\n      <Tooltip id=\"difference-tooltip\" title={t('Click to see difference')}>\n        <StyledLabel className=\"label\">{t('Altered')}</StyledLabel>\n      </Tooltip>\n    );\n  }\n\n  render() {\n    // Return nothing if there are no differences\n    if (!this.state.hasDiffs) {\n      return null;\n    }\n    // Render the label-warning 'Altered' tag which the user may\n    // click to open a modal containing a table summarizing the\n    // differences in the slice\n    return (\n      <ModalTrigger\n        triggerNode={this.renderTriggerNode()}\n        modalTitle={t('Chart changes')}\n        modalBody={this.renderModalBody()}\n        responsive\n      />\n    );\n  }\n}\n\nAlteredSliceTag.propTypes = propTypes;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { Select, Row, Col, AntdForm } from 'src/components';\nimport { SelectValue } from 'antd/lib/select';\nimport rison from 'rison';\nimport { t, SupersetClient, styled } from '@superset-ui/core';\nimport Chart, { Slice } from 'src/types/Chart';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport withToasts from 'src/components/MessageToasts/withToasts';\n\nexport type PropertiesModalProps = {\n  slice: Slice;\n  show: boolean;\n  onHide: () => void;\n  onSave: (chart: Chart) => void;\n  permissionsError?: string;\n  existingOwners?: SelectValue;\n  addSuccessToast: (msg: string) => void;\n};\n\nconst FormItem = AntdForm.Item;\n\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\n\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;\n\nfunction PropertiesModal({\n  slice,\n  onHide,\n  onSave,\n  show,\n  addSuccessToast,\n}: PropertiesModalProps) {\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState<SelectValue | null>(\n    null,\n  );\n\n  function showError({ error, statusText, message }: any) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: 'Error',\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' },\n    });\n  }\n\n  const fetchChartOwners = useCallback(\n    async function fetchChartOwners() {\n      try {\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/chart/${slice.slice_id}`,\n        });\n        const chart = response.json.result;\n        setSelectedOwners(\n          chart?.owners?.map((owner: any) => ({\n            value: owner.id,\n            label: `${owner.first_name} ${owner.last_name}`,\n          })),\n        );\n      } catch (response) {\n        const clientError = await getClientErrorObject(response);\n        showError(clientError);\n      }\n    },\n    [slice.slice_id],\n  );\n\n  const loadOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/chart/related/owners?q=${query}`,\n        }).then(response => ({\n          data: response.json.result.map(\n            (item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            }),\n          ),\n          totalCount: response.json.count,\n        }));\n      },\n    [],\n  );\n\n  const onSubmit = async (values: {\n    certified_by?: string;\n    certification_details?: string;\n    description?: string;\n    cache_timeout?: number;\n  }) => {\n    setSubmitting(true);\n    const {\n      certified_by: certifiedBy,\n      certification_details: certificationDetails,\n      description,\n      cache_timeout: cacheTimeout,\n    } = values;\n    const payload: { [key: string]: any } = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details:\n        certifiedBy && certificationDetails ? certificationDetails : null,\n    };\n    if (selectedOwners) {\n      payload.owners = (\n        selectedOwners as {\n          value: number;\n          label: string;\n        }[]\n      ).map(o => o.value);\n    }\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        id: slice.slice_id,\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    } catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n\n  const ownersLabel = t('Owners');\n\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      title=\"Edit Chart Properties\"\n      footer={\n        <>\n          <Button\n            data-test=\"properties-modal-cancel-button\"\n            htmlType=\"button\"\n            buttonSize=\"small\"\n            onClick={onHide}\n            cta\n          >\n            {t('Cancel')}\n          </Button>\n          <Button\n            data-test=\"properties-modal-save-button\"\n            htmlType=\"submit\"\n            buttonSize=\"small\"\n            buttonStyle=\"primary\"\n            onClick={form.submit}\n            disabled={submitting || !name || slice.is_managed_externally}\n            tooltip={\n              slice.is_managed_externally\n                ? t(\n                    \"This chart is managed externally, and can't be edited in Superset\",\n                  )\n                : ''\n            }\n            cta\n          >\n            {t('Save')}\n          </Button>\n        </>\n      }\n      responsive\n      wrapProps={{ 'data-test': 'properties-edit-modal' }}\n    >\n      <AntdForm\n        form={form}\n        onFinish={onSubmit}\n        layout=\"vertical\"\n        initialValues={{\n          name: slice.slice_name || '',\n          description: slice.description || '',\n          cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n          certified_by: slice.certified_by || '',\n          certification_details:\n            slice.certified_by && slice.certification_details\n              ? slice.certification_details\n              : '',\n        }}\n      >\n        <Row gutter={16}>\n          <Col xs={24} md={12}>\n            <h3>{t('Basic information')}</h3>\n            <FormItem label={t('Name')} required>\n              <Input\n                aria-label={t('Name')}\n                name=\"name\"\n                data-test=\"properties-modal-name-input\"\n                type=\"text\"\n                value={name}\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                  setName(event.target.value ?? '')\n                }\n              />\n            </FormItem>\n            <FormItem>\n              <StyledFormItem label={t('Description')} name=\"description\">\n                <TextArea rows={3} style={{ maxWidth: '100%' }} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'The description can be displayed as widget headers in the dashboard view. Supports markdown.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3>{t('Certification')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Certified by')} name=\"certified_by\">\n                <Input aria-label={t('Certified by')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t('Person or group that has certified this chart.')}\n              </StyledHelpBlock>\n            </FormItem>\n            <FormItem>\n              <StyledFormItem\n                label={t('Certification details')}\n                name=\"certification_details\"\n              >\n                <Input aria-label={t('Certification details')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'Any additional detail to show in the certification tooltip.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n          </Col>\n          <Col xs={24} md={12}>\n            <h3>{t('Configuration')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Cache timeout')} name=\"cache_timeout\">\n                <Input aria-label=\"Cache timeout\" />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  \"Duration (in seconds) of the caching timeout for this chart. Note this defaults to the dataset's timeout if undefined.\",\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3 style={{ marginTop: '1em' }}>{t('Access')}</h3>\n            <FormItem label={ownersLabel}>\n              <Select\n                ariaLabel={ownersLabel}\n                mode=\"multiple\"\n                name=\"owners\"\n                value={selectedOwners || []}\n                onChange={setSelectedOwners}\n                options={loadOptions}\n                disabled={!selectedOwners}\n                allowClear\n              />\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'A list of users who can alter the chart. Searchable by name or username.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n          </Col>\n        </Row>\n      </AntdForm>\n    </Modal>\n  );\n}\n\nexport default withToasts(PropertiesModal);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport PropTypes from 'prop-types';\nimport { Tooltip } from 'src/components/Tooltip';\nimport {\n  CategoricalColorNamespace,\n  css,\n  SupersetClient,\n  t,\n} from '@superset-ui/core';\nimport { toggleActive, deleteActiveReport } from 'src/reports/actions/reports';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport AlteredSliceTag from 'src/components/AlteredSliceTag';\nimport Button from 'src/components/Button';\nimport Icons from 'src/components/Icons';\nimport PropertiesModal from 'src/explore/components/PropertiesModal';\nimport { sliceUpdated } from 'src/explore/actions/exploreActions';\nimport { PageHeaderWithActions } from 'src/components/PageHeaderWithActions';\nimport { useExploreAdditionalActionsMenu } from '../useExploreAdditionalActionsMenu';\n\nconst propTypes = {\n  actions: PropTypes.object.isRequired,\n  canOverwrite: PropTypes.bool.isRequired,\n  canDownload: PropTypes.bool.isRequired,\n  dashboardId: PropTypes.number,\n  isStarred: PropTypes.bool.isRequired,\n  slice: PropTypes.object,\n  sliceName: PropTypes.string,\n  table_name: PropTypes.string,\n  formData: PropTypes.object,\n  ownState: PropTypes.object,\n  timeout: PropTypes.number,\n  chart: chartPropShape,\n  saveDisabled: PropTypes.bool,\n};\n\nconst saveButtonStyles = theme => css`\n  color: ${theme.colors.primary.dark2};\n  & > span[role='img'] {\n    margin-right: 0;\n  }\n`;\n\nexport const ExploreChartHeader = ({\n  dashboardId,\n  slice,\n  actions,\n  formData,\n  ownState,\n  chart,\n  user,\n  canOverwrite,\n  canDownload,\n  isStarred,\n  sliceUpdated,\n  sliceName,\n  onSaveChart,\n  saveDisabled,\n}) => {\n  const { latestQueryFormData, sliceFormData } = chart;\n  const [isPropertiesModalOpen, setIsPropertiesModalOpen] = useState(false);\n\n  const fetchChartDashboardData = async () => {\n    await SupersetClient.get({\n      endpoint: `/api/v1/chart/${slice.slice_id}`,\n    })\n      .then(res => {\n        const response = res?.json?.result;\n        if (response && response.dashboards && response.dashboards.length) {\n          const { dashboards } = response;\n          const dashboard =\n            dashboardId &&\n            dashboards.length &&\n            dashboards.find(d => d.id === dashboardId);\n\n          if (dashboard && dashboard.json_metadata) {\n            // setting the chart to use the dashboard custom label colors if any\n            const metadata = JSON.parse(dashboard.json_metadata);\n            const sharedLabelColors = metadata.shared_label_colors || {};\n            const customLabelColors = metadata.label_colors || {};\n            const mergedLabelColors = {\n              ...sharedLabelColors,\n              ...customLabelColors,\n            };\n\n            const categoricalNamespace =\n              CategoricalColorNamespace.getNamespace();\n\n            Object.keys(mergedLabelColors).forEach(label => {\n              categoricalNamespace.setColor(\n                label,\n                mergedLabelColors[label],\n                metadata.color_scheme,\n              );\n            });\n          }\n        }\n      })\n      .catch(() => {});\n  };\n\n  useEffect(() => {\n    if (dashboardId) {\n      fetchChartDashboardData();\n    }\n  }, []);\n\n  const openPropertiesModal = () => {\n    setIsPropertiesModalOpen(true);\n  };\n\n  const closePropertiesModal = () => {\n    setIsPropertiesModalOpen(false);\n  };\n\n  const [menu, isDropdownVisible, setIsDropdownVisible] =\n    useExploreAdditionalActionsMenu(\n      latestQueryFormData,\n      canDownload,\n      slice,\n      actions.redirectSQLLab,\n      openPropertiesModal,\n      ownState,\n    );\n\n  const oldSliceName = slice?.slice_name;\n  return (\n    <>\n      <PageHeaderWithActions\n        editableTitleProps={{\n          title: sliceName,\n          canEdit:\n            !slice ||\n            canOverwrite ||\n            (slice?.owners || []).includes(user?.userId),\n          onSave: actions.updateChartTitle,\n          placeholder: t('Add the name of the chart'),\n          label: t('Chart title'),\n        }}\n        showTitlePanelItems={!!slice}\n        certificatiedBadgeProps={{\n          certifiedBy: slice?.certified_by,\n          details: slice?.certification_details,\n        }}\n        showFaveStar={!!user?.userId}\n        faveStarProps={{\n          itemId: slice?.slice_id,\n          fetchFaveStar: actions.fetchFaveStar,\n          saveFaveStar: actions.saveFaveStar,\n          isStarred,\n          showTooltip: true,\n        }}\n        titlePanelAdditionalItems={\n          sliceFormData ? (\n            <AlteredSliceTag\n              className=\"altered\"\n              origFormData={{\n                ...sliceFormData,\n                chartTitle: oldSliceName,\n              }}\n              currentFormData={{ ...formData, chartTitle: sliceName }}\n            />\n          ) : null\n        }\n        rightPanelAdditionalItems={\n          <Tooltip\n            title={\n              saveDisabled\n                ? t('Add required control values to save chart')\n                : null\n            }\n          >\n            {/* needed to wrap button in a div - antd tooltip doesn't work with disabled button */}\n            <div>\n              <Button\n                buttonStyle=\"secondary\"\n                onClick={onSaveChart}\n                disabled={saveDisabled}\n                data-test=\"query-save-button\"\n                css={saveButtonStyles}\n              >\n                <Icons.SaveOutlined iconSize=\"l\" />\n                {t('Save')}\n              </Button>\n            </div>\n          </Tooltip>\n        }\n        additionalActionsMenu={menu}\n        menuDropdownProps={{\n          visible: isDropdownVisible,\n          onVisibleChange: setIsDropdownVisible,\n        }}\n      />\n      {isPropertiesModalOpen && (\n        <PropertiesModal\n          show={isPropertiesModalOpen}\n          onHide={closePropertiesModal}\n          onSave={sliceUpdated}\n          slice={slice}\n        />\n      )}\n    </>\n  );\n};\n\nExploreChartHeader.propTypes = propTypes;\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    { sliceUpdated, toggleActive, deleteActiveReport },\n    dispatch,\n  );\n}\n\nexport default connect(null, mapDispatchToProps)(ExploreChartHeader);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { styled, t, css, useTheme, logging } from '@superset-ui/core';\nimport { debounce, pick } from 'lodash';\nimport { Resizable } from 're-resizable';\nimport { useChangeEffect } from 'src/hooks/useChangeEffect';\nimport { usePluginContext } from 'src/components/DynamicPlugins';\nimport { Global } from '@emotion/react';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { usePrevious } from 'src/hooks/usePrevious';\nimport { useComponentDidMount } from 'src/hooks/useComponentDidMount';\nimport Icons from 'src/components/Icons';\nimport {\n  getItem,\n  setItem,\n  LocalStorageKeys,\n} from 'src/utils/localStorageHelpers';\nimport { RESERVED_CHART_URL_PARAMS, URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport cx from 'classnames';\nimport * as chartActions from 'src/components/Chart/chartAction';\nimport { fetchDatasourceMetadata } from 'src/dashboard/actions/datasources';\nimport { chartPropShape } from 'src/dashboard/util/propShapes';\nimport { mergeExtraFormData } from 'src/dashboard/components/nativeFilters/utils';\nimport { postFormData, putFormData } from 'src/explore/exploreUtils/formData';\nimport { useTabId } from 'src/hooks/useTabId';\nimport ExploreChartPanel from '../ExploreChartPanel';\nimport ConnectedControlPanelsContainer from '../ControlPanelsContainer';\nimport SaveModal from '../SaveModal';\nimport DataSourcePanel from '../DatasourcePanel';\nimport { mountExploreUrl } from '../../exploreUtils';\nimport { areObjectsEqual } from '../../../reduxUtils';\nimport { getFormDataFromControls } from '../../controlUtils';\nimport * as exploreActions from '../../actions/exploreActions';\nimport * as saveModalActions from '../../actions/saveModalActions';\nimport * as logActions from '../../../logger/actions';\nimport {\n  LOG_ACTIONS_MOUNT_EXPLORER,\n  LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS,\n} from '../../../logger/LogUtils';\nimport ConnectedExploreChartHeader from '../ExploreChartHeader';\n\nconst propTypes = {\n  ...ExploreChartPanel.propTypes,\n  actions: PropTypes.object.isRequired,\n  datasource_type: PropTypes.string.isRequired,\n  dashboardId: PropTypes.number,\n  isDatasourceMetaLoading: PropTypes.bool.isRequired,\n  chart: chartPropShape.isRequired,\n  slice: PropTypes.object,\n  sliceName: PropTypes.string,\n  controls: PropTypes.object.isRequired,\n  forcedHeight: PropTypes.string,\n  form_data: PropTypes.object.isRequired,\n  standalone: PropTypes.number.isRequired,\n  force: PropTypes.bool,\n  timeout: PropTypes.number,\n  impressionId: PropTypes.string,\n  vizType: PropTypes.string,\n};\n\nconst ExploreContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n\nconst ExplorePanelContainer = styled.div`\n  ${({ theme }) => css`\n    background: ${theme.colors.grayscale.light5};\n    text-align: left;\n    position: relative;\n    width: 100%;\n    max-height: 100%;\n    min-height: 0;\n    display: flex;\n    flex: 1;\n    flex-wrap: nowrap;\n    border-top: 1px solid ${theme.colors.grayscale.light2};\n    .explore-column {\n      display: flex;\n      flex-direction: column;\n      padding: ${theme.gridUnit * 2}px 0;\n      max-height: 100%;\n    }\n    .data-source-selection {\n      background-color: ${theme.colors.grayscale.light5};\n      padding: ${theme.gridUnit * 2}px 0;\n      border-right: 1px solid ${theme.colors.grayscale.light2};\n    }\n    .main-explore-content {\n      flex: 1;\n      min-width: ${theme.gridUnit * 128}px;\n      border-left: 1px solid ${theme.colors.grayscale.light2};\n      padding: 0 ${theme.gridUnit * 4}px;\n      .panel {\n        margin-bottom: 0;\n      }\n    }\n    .controls-column {\n      align-self: flex-start;\n      padding: 0;\n    }\n    .title-container {\n      position: relative;\n      display: flex;\n      flex-direction: row;\n      padding: 0 ${theme.gridUnit * 4}px;\n      justify-content: space-between;\n      .horizontal-text {\n        font-size: ${theme.typography.sizes.s}px;\n      }\n    }\n    .no-show {\n      display: none;\n    }\n    .vertical-text {\n      writing-mode: vertical-rl;\n      text-orientation: mixed;\n    }\n    .sidebar {\n      height: 100%;\n      background-color: ${theme.colors.grayscale.light4};\n      padding: ${theme.gridUnit * 2}px;\n      width: ${theme.gridUnit * 8}px;\n    }\n    .callpase-icon > svg {\n      color: ${theme.colors.primary.base};\n    }\n  `};\n`;\n\nconst updateHistory = debounce(\n  async (\n    formData,\n    datasourceId,\n    datasourceType,\n    isReplace,\n    standalone,\n    force,\n    title,\n    tabId,\n  ) => {\n    const payload = { ...formData };\n    const chartId = formData.slice_id;\n    const additionalParam = {};\n    if (chartId) {\n      additionalParam[URL_PARAMS.sliceId.name] = chartId;\n    } else {\n      additionalParam[URL_PARAMS.datasourceId.name] = datasourceId;\n      additionalParam[URL_PARAMS.datasourceType.name] = datasourceType;\n    }\n\n    const urlParams = payload?.url_params || {};\n    Object.entries(urlParams).forEach(([key, value]) => {\n      if (!RESERVED_CHART_URL_PARAMS.includes(key)) {\n        additionalParam[key] = value;\n      }\n    });\n\n    try {\n      let key;\n      let stateModifier;\n      if (isReplace) {\n        key = await postFormData(\n          datasourceId,\n          datasourceType,\n          formData,\n          chartId,\n          tabId,\n        );\n        stateModifier = 'replaceState';\n      } else {\n        key = getUrlParam(URL_PARAMS.formDataKey);\n        await putFormData(\n          datasourceId,\n          datasourceType,\n          key,\n          formData,\n          chartId,\n          tabId,\n        );\n        stateModifier = 'pushState';\n      }\n      const url = mountExploreUrl(\n        standalone ? URL_PARAMS.standalone.name : null,\n        {\n          [URL_PARAMS.formDataKey.name]: key,\n          ...additionalParam,\n        },\n        force,\n      );\n      window.history[stateModifier](payload, title, url);\n    } catch (e) {\n      logging.warn('Failed at altering browser history', e);\n    }\n  },\n  1000,\n);\n\nfunction ExploreViewContainer(props) {\n  const dynamicPluginContext = usePluginContext();\n  const dynamicPlugin = dynamicPluginContext.dynamicPlugins[props.vizType];\n  const isDynamicPluginLoading = dynamicPlugin && dynamicPlugin.mounting;\n  const wasDynamicPluginLoading = usePrevious(isDynamicPluginLoading);\n\n  /** the state of controls in the previous render */\n  const previousControls = usePrevious(props.controls);\n  /** the state of controls last time a query was triggered */\n  const [lastQueriedControls, setLastQueriedControls] = useState(\n    props.controls,\n  );\n\n  const [showingModal, setShowingModal] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [shouldForceUpdate, setShouldForceUpdate] = useState(-1);\n  const tabId = useTabId();\n\n  const theme = useTheme();\n\n  const defaultSidebarsWidth = {\n    controls_width: 320,\n    datasource_width: 300,\n  };\n\n  const addHistory = useCallback(\n    async ({ isReplace = false, title } = {}) => {\n      const formData = props.dashboardId\n        ? {\n            ...props.form_data,\n            dashboardId: props.dashboardId,\n          }\n        : props.form_data;\n      const { id: datasourceId, type: datasourceType } = props.datasource;\n\n      updateHistory(\n        formData,\n        datasourceId,\n        datasourceType,\n        isReplace,\n        props.standalone,\n        props.force,\n        title,\n        tabId,\n      );\n    },\n    [\n      props.dashboardId,\n      props.form_data,\n      props.datasource.id,\n      props.datasource.type,\n      props.standalone,\n      props.force,\n      tabId,\n    ],\n  );\n\n  const handlePopstate = useCallback(() => {\n    const formData = window.history.state;\n    if (formData && Object.keys(formData).length) {\n      props.actions.setExploreControls(formData);\n      props.actions.postChartFormData(\n        formData,\n        props.force,\n        props.timeout,\n        props.chart.id,\n      );\n    }\n  }, [props.actions, props.chart.id, props.timeout]);\n\n  const onQuery = useCallback(() => {\n    props.actions.setForceQuery(false);\n    props.actions.triggerQuery(true, props.chart.id);\n    addHistory();\n    setLastQueriedControls(props.controls);\n  }, [props.controls, addHistory, props.actions, props.chart.id]);\n\n  const handleKeydown = useCallback(\n    event => {\n      const controlOrCommand = event.ctrlKey || event.metaKey;\n      if (controlOrCommand) {\n        const isEnter = event.key === 'Enter' || event.keyCode === 13;\n        const isS = event.key === 's' || event.keyCode === 83;\n        if (isEnter) {\n          onQuery();\n        } else if (isS) {\n          if (props.slice) {\n            props.actions\n              .saveSlice(props.form_data, {\n                action: 'overwrite',\n                slice_id: props.slice.slice_id,\n                slice_name: props.slice.slice_name,\n                add_to_dash: 'noSave',\n                goto_dash: false,\n              })\n              .then(({ data }) => {\n                window.location = data.slice.slice_url;\n              });\n          }\n        }\n      }\n    },\n    [onQuery, props.actions, props.form_data, props.slice],\n  );\n\n  function onStop() {\n    if (props.chart && props.chart.queryController) {\n      props.chart.queryController.abort();\n    }\n  }\n\n  function toggleModal() {\n    setShowingModal(!showingModal);\n  }\n\n  function toggleCollapse() {\n    setIsCollapsed(!isCollapsed);\n  }\n\n  useComponentDidMount(() => {\n    props.actions.logEvent(LOG_ACTIONS_MOUNT_EXPLORER);\n  });\n\n  useChangeEffect(tabId, (previous, current) => {\n    if (current) {\n      addHistory({ isReplace: true });\n    }\n  });\n\n  const previousHandlePopstate = usePrevious(handlePopstate);\n  useEffect(() => {\n    if (previousHandlePopstate) {\n      window.removeEventListener('popstate', previousHandlePopstate);\n    }\n    window.addEventListener('popstate', handlePopstate);\n    return () => {\n      window.removeEventListener('popstate', handlePopstate);\n    };\n  }, [handlePopstate, previousHandlePopstate]);\n\n  const previousHandleKeyDown = usePrevious(handleKeydown);\n  useEffect(() => {\n    if (previousHandleKeyDown) {\n      window.removeEventListener('keydown', previousHandleKeyDown);\n    }\n    document.addEventListener('keydown', handleKeydown);\n    return () => {\n      document.removeEventListener('keydown', handleKeydown);\n    };\n  }, [handleKeydown, previousHandleKeyDown]);\n\n  useEffect(() => {\n    if (wasDynamicPluginLoading && !isDynamicPluginLoading) {\n      // reload the controls now that we actually have the control config\n      props.actions.dynamicPluginControlsReady();\n    }\n  }, [isDynamicPluginLoading]);\n\n  useEffect(() => {\n    const hasError = Object.values(props.controls).some(\n      control =>\n        control.validationErrors && control.validationErrors.length > 0,\n    );\n    if (!hasError) {\n      props.actions.triggerQuery(true, props.chart.id);\n    }\n  }, []);\n\n  const reRenderChart = useCallback(\n    controlsChanged => {\n      const newQueryFormData = controlsChanged\n        ? {\n            ...props.chart.latestQueryFormData,\n            ...getFormDataFromControls(pick(props.controls, controlsChanged)),\n          }\n        : getFormDataFromControls(props.controls);\n      props.actions.updateQueryFormData(newQueryFormData, props.chart.id);\n      props.actions.renderTriggered(new Date().getTime(), props.chart.id);\n      addHistory();\n    },\n    [\n      addHistory,\n      props.actions,\n      props.chart.id,\n      props.chart.latestQueryFormData,\n      props.controls,\n    ],\n  );\n\n  // effect to run when controls change\n  useEffect(() => {\n    if (\n      previousControls &&\n      props.chart.latestQueryFormData.viz_type === props.controls.viz_type.value\n    ) {\n      if (\n        props.controls.datasource &&\n        (previousControls.datasource == null ||\n          props.controls.datasource.value !== previousControls.datasource.value)\n      ) {\n        // this should really be handled by actions\n        fetchDatasourceMetadata(props.form_data.datasource, true);\n      }\n\n      const changedControlKeys = Object.keys(props.controls).filter(\n        key =>\n          typeof previousControls[key] !== 'undefined' &&\n          !areObjectsEqual(\n            props.controls[key].value,\n            previousControls[key].value,\n          ),\n      );\n\n      // this should also be handled by the actions that are actually changing the controls\n      const displayControlsChanged = changedControlKeys.filter(\n        key => props.controls[key].renderTrigger,\n      );\n      if (displayControlsChanged.length > 0) {\n        reRenderChart(displayControlsChanged);\n      }\n    }\n  }, [props.controls, props.ownState]);\n\n  const chartIsStale = useMemo(() => {\n    if (lastQueriedControls) {\n      const changedControlKeys = Object.keys(props.controls).filter(\n        key =>\n          typeof lastQueriedControls[key] !== 'undefined' &&\n          !areObjectsEqual(\n            props.controls[key].value,\n            lastQueriedControls[key].value,\n          ),\n      );\n\n      return changedControlKeys.some(\n        key =>\n          !props.controls[key].renderTrigger &&\n          !props.controls[key].dontRefreshOnChange,\n      );\n    }\n    return false;\n  }, [lastQueriedControls, props.controls]);\n\n  useEffect(() => {\n    if (props.ownState !== undefined) {\n      onQuery();\n      reRenderChart();\n    }\n  }, [props.ownState]);\n\n  if (chartIsStale) {\n    props.actions.logEvent(LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS);\n  }\n\n  const errorMessage = useMemo(() => {\n    const controlsWithErrors = Object.values(props.controls).filter(\n      control =>\n        control.validationErrors && control.validationErrors.length > 0,\n    );\n    if (controlsWithErrors.length === 0) {\n      return null;\n    }\n\n    const errorMessages = controlsWithErrors.map(\n      control => control.validationErrors,\n    );\n    const uniqueErrorMessages = [...new Set(errorMessages.flat())];\n\n    const errors = uniqueErrorMessages\n      .map(message => {\n        const matchingLabels = controlsWithErrors\n          .filter(control => control.validationErrors?.includes(message))\n          .map(control => control.label);\n        return [matchingLabels, message];\n      })\n      .map(([labels, message]) => (\n        <div key={message}>\n          {labels.length > 1 ? t('Controls labeled ') : t('Control labeled ')}\n          <strong>{` ${labels.join(', ')}`}</strong>\n          <span>: {message}</span>\n        </div>\n      ));\n\n    let errorMessage;\n    if (errors.length > 0) {\n      errorMessage = <div style={{ textAlign: 'left' }}>{errors}</div>;\n    }\n    return errorMessage;\n  }, [props.controls]);\n\n  function renderChartContainer() {\n    return (\n      <ExploreChartPanel\n        {...props}\n        errorMessage={errorMessage}\n        chartIsStale={chartIsStale}\n        onQuery={onQuery}\n      />\n    );\n  }\n\n  function getSidebarWidths(key) {\n    return getItem(key, defaultSidebarsWidth[key]);\n  }\n\n  function setSidebarWidths(key, dimension) {\n    const newDimension = Number(getSidebarWidths(key)) + dimension.width;\n    setItem(key, newDimension);\n  }\n\n  if (props.standalone) {\n    return renderChartContainer();\n  }\n\n  return (\n    <ExploreContainer>\n      <ConnectedExploreChartHeader\n        actions={props.actions}\n        canOverwrite={props.can_overwrite}\n        canDownload={props.can_download}\n        dashboardId={props.dashboardId}\n        isStarred={props.isStarred}\n        slice={props.slice}\n        sliceName={props.sliceName}\n        table_name={props.table_name}\n        formData={props.form_data}\n        chart={props.chart}\n        ownState={props.ownState}\n        user={props.user}\n        reports={props.reports}\n        onSaveChart={toggleModal}\n        saveDisabled={errorMessage || props.chart.chartStatus === 'loading'}\n      />\n      <ExplorePanelContainer id=\"explore-container\">\n        <Global\n          styles={css`\n            .navbar {\n              margin-bottom: 0;\n            }\n            body {\n              height: 100vh;\n              max-height: 100vh;\n              overflow: hidden;\n            }\n            #app-menu,\n            #app {\n              flex: 1 1 auto;\n            }\n            #app {\n              flex-basis: 100%;\n              overflow: hidden;\n              height: 100%;\n            }\n            #app-menu {\n              flex-shrink: 0;\n            }\n          `}\n        />\n        {showingModal && (\n          <SaveModal\n            onHide={toggleModal}\n            actions={props.actions}\n            form_data={props.form_data}\n            sliceName={props.sliceName}\n            dashboardId={props.dashboardId}\n          />\n        )}\n        <Resizable\n          onResizeStop={(evt, direction, ref, d) => {\n            setShouldForceUpdate(d?.width);\n            setSidebarWidths(LocalStorageKeys.datasource_width, d);\n          }}\n          defaultSize={{\n            width: getSidebarWidths(LocalStorageKeys.datasource_width),\n            height: '100%',\n          }}\n          minWidth={defaultSidebarsWidth[LocalStorageKeys.datasource_width]}\n          maxWidth=\"33%\"\n          enable={{ right: true }}\n          className={\n            isCollapsed ? 'no-show' : 'explore-column data-source-selection'\n          }\n        >\n          <div className=\"title-container\">\n            <span className=\"horizontal-text\">{t('Dataset')}</span>\n            <span\n              role=\"button\"\n              tabIndex={0}\n              className=\"action-button\"\n              onClick={toggleCollapse}\n            >\n              <Icons.Expand\n                className=\"collapse-icon\"\n                iconColor={theme.colors.primary.base}\n                iconSize=\"l\"\n              />\n            </span>\n          </div>\n          <DataSourcePanel\n            datasource={props.datasource}\n            controls={props.controls}\n            actions={props.actions}\n            shouldForceUpdate={shouldForceUpdate}\n            user={props.user}\n          />\n        </Resizable>\n        {isCollapsed ? (\n          <div\n            className=\"sidebar\"\n            onClick={toggleCollapse}\n            data-test=\"open-datasource-tab\"\n            role=\"button\"\n            tabIndex={0}\n          >\n            <span role=\"button\" tabIndex={0} className=\"action-button\">\n              <Tooltip title={t('Open Datasource tab')}>\n                <Icons.Collapse\n                  className=\"collapse-icon\"\n                  iconColor={theme.colors.primary.base}\n                  iconSize=\"l\"\n                />\n              </Tooltip>\n            </span>\n            <Icons.DatasetPhysical\n              css={{ marginTop: theme.gridUnit * 2 }}\n              iconSize=\"l\"\n              iconColor={theme.colors.grayscale.base}\n            />\n          </div>\n        ) : null}\n        <Resizable\n          onResizeStop={(evt, direction, ref, d) =>\n            setSidebarWidths(LocalStorageKeys.controls_width, d)\n          }\n          defaultSize={{\n            width: getSidebarWidths(LocalStorageKeys.controls_width),\n            height: '100%',\n          }}\n          minWidth={defaultSidebarsWidth[LocalStorageKeys.controls_width]}\n          maxWidth=\"33%\"\n          enable={{ right: true }}\n          className=\"col-sm-3 explore-column controls-column\"\n        >\n          <ConnectedControlPanelsContainer\n            exploreState={props.exploreState}\n            actions={props.actions}\n            form_data={props.form_data}\n            controls={props.controls}\n            chart={props.chart}\n            datasource_type={props.datasource_type}\n            isDatasourceMetaLoading={props.isDatasourceMetaLoading}\n            onQuery={onQuery}\n            onStop={onStop}\n            canStopQuery={props.can_add || props.can_overwrite}\n            errorMessage={errorMessage}\n            chartIsStale={chartIsStale}\n          />\n        </Resizable>\n        <div\n          className={cx(\n            'main-explore-content',\n            isCollapsed ? 'col-sm-9' : 'col-sm-7',\n          )}\n        >\n          {renderChartContainer()}\n        </div>\n      </ExplorePanelContainer>\n    </ExploreContainer>\n  );\n}\n\nExploreViewContainer.propTypes = propTypes;\n\nfunction mapStateToProps(state) {\n  const { explore, charts, impressionId, dataMask, reports } = state;\n  const form_data = getFormDataFromControls(explore.controls);\n  form_data.extra_form_data = mergeExtraFormData(\n    { ...form_data.extra_form_data },\n    {\n      ...dataMask[form_data.slice_id ?? 0]?.ownState, // 0 - unsaved chart\n    },\n  );\n  const chartKey = Object.keys(charts)[0];\n  const chart = charts[chartKey];\n\n  let dashboardId = Number(explore.form_data?.dashboardId);\n  if (Number.isNaN(dashboardId)) {\n    dashboardId = undefined;\n  }\n\n  return {\n    isDatasourceMetaLoading: explore.isDatasourceMetaLoading,\n    datasource: explore.datasource,\n    datasource_type: explore.datasource.type,\n    datasourceId: explore.datasource_id,\n    dashboardId,\n    controls: explore.controls,\n    can_overwrite: !!explore.can_overwrite,\n    can_add: !!explore.can_add,\n    can_download: !!explore.can_download,\n    column_formats: explore.datasource\n      ? explore.datasource.column_formats\n      : null,\n    containerId: explore.slice\n      ? `slice-container-${explore.slice.slice_id}`\n      : 'slice-container',\n    isStarred: explore.isStarred,\n    slice: explore.slice,\n    sliceName: explore.sliceName,\n    triggerRender: explore.triggerRender,\n    form_data,\n    table_name: form_data.datasource_name,\n    vizType: form_data.viz_type,\n    standalone: explore.standalone,\n    force: explore.force,\n    forcedHeight: explore.forced_height,\n    chart,\n    timeout: explore.common.conf.SUPERSET_WEBSERVER_TIMEOUT,\n    ownState: dataMask[form_data.slice_id ?? 0]?.ownState, // 0 - unsaved chart\n    impressionId,\n    user: explore.user,\n    exploreState: explore,\n    reports,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const actions = {\n    ...exploreActions,\n    ...saveModalActions,\n    ...chartActions,\n    ...logActions,\n  };\n  return {\n    actions: bindActionCreators(actions, dispatch),\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ExploreViewContainer);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport { Provider } from 'react-redux';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { ThemeProvider } from '@superset-ui/core';\nimport { GlobalStyles } from 'src/GlobalStyles';\nimport { DynamicPluginProvider } from 'src/components/DynamicPlugins';\nimport ToastContainer from 'src/components/MessageToasts/ToastContainer';\nimport setupApp from 'src/setup/setupApp';\nimport setupPlugins from 'src/setup/setupPlugins';\nimport './main.less';\nimport '../assets/stylesheets/reactable-pagination.less';\nimport { theme } from 'src/preamble';\nimport ExploreViewContainer from './components/ExploreViewContainer';\n\nsetupApp();\nsetupPlugins();\n\nconst App = ({ store }) => (\n  <Provider store={store}>\n    <DndProvider backend={HTML5Backend}>\n      <ThemeProvider theme={theme}>\n        <GlobalStyles />\n        <DynamicPluginProvider>\n          <ExploreViewContainer />\n          <ToastContainer />\n        </DynamicPluginProvider>\n      </ThemeProvider>\n    </DndProvider>\n  </Provider>\n);\n\nexport default hot(App);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport logger from '../middleware/loggerMiddleware';\nimport { initFeatureFlags } from '../featureFlags';\nimport { initEnhancer } from '../reduxUtils';\nimport getInitialState from './reducers/getInitialState';\nimport rootReducer from './reducers/index';\nimport App from './App';\n\nconst exploreViewContainer = document.getElementById('app');\nconst bootstrapData = JSON.parse(\n  exploreViewContainer.getAttribute('data-bootstrap'),\n);\ninitFeatureFlags(bootstrapData.common.feature_flags);\nconst initState = getInitialState(bootstrapData);\nconst store = createStore(\n  rootReducer,\n  initState,\n  compose(applyMiddleware(thunk, logger), initEnhancer(false)),\n);\n\nReactDOM.render(<App store={store} />, document.getElementById('app'));\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport shortid from 'shortid';\nimport { DatasourceType, JsonObject, QueryFormData } from '@superset-ui/core';\nimport { ControlStateMapping, Dataset } from '@superset-ui/chart-controls';\nimport {\n  CommonBootstrapData,\n  UserWithPermissionsAndRoles,\n} from 'src/types/bootstrapTypes';\nimport getToastsFromPyFlashMessages from 'src/components/MessageToasts/getToastsFromPyFlashMessages';\n\nimport { ChartState, Slice } from 'src/explore/types';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { getControlsState } from 'src/explore/store';\nimport {\n  getFormDataFromControls,\n  applyMapStateToPropsToControl,\n} from 'src/explore/controlUtils';\n\nexport interface ExplorePageBootstrapData extends JsonObject {\n  can_add: boolean;\n  can_download: boolean;\n  can_overwrite: boolean;\n  common: CommonBootstrapData;\n  datasource: Dataset;\n  datasource_id: number;\n  datasource_type: DatasourceType;\n  forced_height: string | null;\n  form_data: QueryFormData;\n  slice: Slice | null;\n  standalone: boolean;\n  force: boolean;\n  user: UserWithPermissionsAndRoles;\n}\n\nexport default function getInitialState(\n  bootstrapData: ExplorePageBootstrapData,\n) {\n  const { form_data: initialFormData } = bootstrapData;\n  const { slice } = bootstrapData;\n  const sliceName = slice ? slice.slice_name : null;\n\n  const exploreState = {\n    // note this will add `form_data` to state,\n    // which will be manipulatable by future reducers.\n    ...bootstrapData,\n    sliceName,\n    common: {\n      flash_messages: bootstrapData.common.flash_messages,\n      conf: bootstrapData.common.conf,\n    },\n    isDatasourceMetaLoading: false,\n    isStarred: false,\n    // Initial control state will skip `control.mapStateToProps`\n    // because `bootstrapData.controls` is undefined.\n    controls: getControlsState(\n      bootstrapData,\n      initialFormData,\n    ) as ControlStateMapping,\n    controlsTransferred: [],\n  };\n\n  // apply initial mapStateToProps for all controls, must execute AFTER\n  // bootstrapState has initialized `controls`. Order of execution is not\n  // guaranteed, so controls shouldn't rely on the each other's mapped state.\n  Object.entries(exploreState.controls).forEach(([key, controlState]) => {\n    exploreState.controls[key] = applyMapStateToPropsToControl(\n      controlState,\n      exploreState,\n    );\n  });\n\n  const sliceFormData = slice\n    ? getFormDataFromControls(getControlsState(bootstrapData, slice.form_data))\n    : null;\n\n  const chartKey: number = getChartKey(bootstrapData);\n  const chart: ChartState = {\n    id: chartKey,\n    chartAlert: null,\n    chartStatus: null,\n    chartStackTrace: null,\n    chartUpdateEndTime: null,\n    chartUpdateStartTime: 0,\n    latestQueryFormData: getFormDataFromControls(exploreState.controls),\n    sliceFormData,\n    queryController: null,\n    queriesResponse: null,\n    triggerQuery: false,\n    lastRendered: 0,\n  };\n\n  return {\n    charts: {\n      [chartKey]: chart,\n    },\n    saveModal: {\n      dashboards: [],\n      saveModalAlert: null,\n    },\n    explore: exploreState,\n    impressionId: shortid.generate(),\n    messageToasts: getToastsFromPyFlashMessages(\n      (bootstrapData.common || {}).flash_messages || [],\n    ),\n  };\n}\n\nexport type ExplorePageState = ReturnType<typeof getInitialState>;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint camelcase: 0 */\nimport { t, SupersetClient } from '@superset-ui/core';\nimport rison from 'rison';\nimport {\n  addDangerToast,\n  addSuccessToast,\n} from 'src/components/MessageToasts/actions';\n\nexport const SET_REPORT = 'SET_REPORT';\nexport function setReport(report, resourceId, creationMethod, filterField) {\n  return { type: SET_REPORT, report, resourceId, creationMethod, filterField };\n}\n\nexport function fetchUISpecificReport({\n  userId,\n  filterField,\n  creationMethod,\n  resourceId,\n}) {\n  const queryParams = rison.encode({\n    filters: [\n      {\n        col: filterField,\n        opr: 'eq',\n        value: resourceId,\n      },\n      {\n        col: 'creation_method',\n        opr: 'eq',\n        value: creationMethod,\n      },\n      {\n        col: 'created_by',\n        opr: 'rel_o_m',\n        value: userId,\n      },\n    ],\n  });\n  return function fetchUISpecificReportThunk(dispatch) {\n    return SupersetClient.get({\n      endpoint: `/api/v1/report/?q=${queryParams}`,\n    })\n      .then(({ json }) => {\n        dispatch(setReport(json, resourceId, creationMethod, filterField));\n      })\n      .catch(() =>\n        dispatch(\n          addDangerToast(\n            t(\n              'There was an issue fetching reports attached to this dashboard.',\n            ),\n          ),\n        ),\n      );\n  };\n}\n\nconst structureFetchAction = (dispatch, getState) => {\n  const state = getState();\n  const { user, dashboardInfo, charts, explore } = state;\n  if (dashboardInfo) {\n    dispatch(\n      fetchUISpecificReport({\n        userId: user.userId,\n        filterField: 'dashboard_id',\n        creationMethod: 'dashboards',\n        resourceId: dashboardInfo.id,\n      }),\n    );\n  } else {\n    const [chartArr] = Object.keys(charts);\n    dispatch(\n      fetchUISpecificReport({\n        userId: explore.user.userId,\n        filterField: 'chart_id',\n        creationMethod: 'charts',\n        resourceId: charts[chartArr].id,\n      }),\n    );\n  }\n};\n\nexport const ADD_REPORT = 'ADD_REPORT';\n\nexport const addReport = report => dispatch =>\n  SupersetClient.post({\n    endpoint: `/api/v1/report/`,\n    jsonPayload: report,\n  }).then(({ json }) => {\n    dispatch({ type: ADD_REPORT, json });\n    dispatch(addSuccessToast(t('The report has been created')));\n  });\n\nexport const EDIT_REPORT = 'EDIT_REPORT';\n\nexport const editReport = (id, report) => dispatch =>\n  SupersetClient.put({\n    endpoint: `/api/v1/report/${id}`,\n    jsonPayload: report,\n  }).then(({ json }) => {\n    dispatch({ type: EDIT_REPORT, json });\n    dispatch(addSuccessToast(t('Report updated')));\n  });\n\nexport function toggleActive(report, isActive) {\n  return function toggleActiveThunk(dispatch) {\n    return SupersetClient.put({\n      endpoint: encodeURI(`/api/v1/report/${report.id}`),\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        active: isActive,\n      }),\n    })\n      .catch(() => {\n        dispatch(\n          addDangerToast(\n            t('We were unable to active or deactivate this report.'),\n          ),\n        );\n      })\n      .finally(() => {\n        dispatch(structureFetchAction);\n      });\n  };\n}\n\nexport function deleteActiveReport(report) {\n  return function deleteActiveReportThunk(dispatch) {\n    return SupersetClient.delete({\n      endpoint: encodeURI(`/api/v1/report/${report.id}`),\n    })\n      .catch(() => {\n        dispatch(addDangerToast(t('Your report could not be deleted')));\n      })\n      .finally(() => {\n        dispatch(structureFetchAction);\n        dispatch(addSuccessToast(t('Deleted: %s', report.name)));\n      });\n  };\n}\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport removeAccents from 'remove-accents';\n\nvar rankings = {\n  CASE_SENSITIVE_EQUAL: 7,\n  EQUAL: 6,\n  STARTS_WITH: 5,\n  WORD_STARTS_WITH: 4,\n  CONTAINS: 3,\n  ACRONYM: 2,\n  MATCHES: 1,\n  NO_MATCH: 0\n};\nmatchSorter.rankings = rankings;\n\nvar defaultBaseSortFn = function defaultBaseSortFn(a, b) {\n  return String(a.rankedValue).localeCompare(String(b.rankedValue));\n};\n/**\n * Takes an array of items and a value and returns a new array with the items that match the given value\n * @param {Array} items - the items to sort\n * @param {String} value - the value to use for ranking\n * @param {Object} options - Some options to configure the sorter\n * @return {Array} - the new sorted array\n */\n\n\nfunction matchSorter(items, value, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      keys = _options.keys,\n      _options$threshold = _options.threshold,\n      threshold = _options$threshold === void 0 ? rankings.MATCHES : _options$threshold,\n      _options$baseSort = _options.baseSort,\n      baseSort = _options$baseSort === void 0 ? defaultBaseSortFn : _options$baseSort,\n      _options$sorter = _options.sorter,\n      sorter = _options$sorter === void 0 ? function (matchedItems) {\n    return matchedItems.sort(function (a, b) {\n      return sortRankedValues(a, b, baseSort);\n    });\n  } : _options$sorter;\n  var matchedItems = items.reduce(reduceItemsToRanked, []);\n  return sorter(matchedItems).map(function (_ref) {\n    var item = _ref.item;\n    return item;\n  });\n\n  function reduceItemsToRanked(matches, item, index) {\n    var rankingInfo = getHighestRanking(item, keys, value, options);\n    var rank = rankingInfo.rank,\n        _rankingInfo$keyThres = rankingInfo.keyThreshold,\n        keyThreshold = _rankingInfo$keyThres === void 0 ? threshold : _rankingInfo$keyThres;\n\n    if (rank >= keyThreshold) {\n      matches.push(_extends({}, rankingInfo, {\n        item: item,\n        index: index\n      }));\n    }\n\n    return matches;\n  }\n}\n/**\n * Gets the highest ranking for value for the given item based on its values for the given keys\n * @param {*} item - the item to rank\n * @param {Array} keys - the keys to get values from the item for the ranking\n * @param {String} value - the value to rank against\n * @param {Object} options - options to control the ranking\n * @return {{rank: Number, keyIndex: Number, keyThreshold: Number}} - the highest ranking\n */\n\n\nfunction getHighestRanking(item, keys, value, options) {\n  if (!keys) {\n    // if keys is not specified, then we assume the item given is ready to be matched\n    var stringItem = item;\n    return {\n      // ends up being duplicate of 'item' in matches but consistent\n      rankedValue: stringItem,\n      rank: getMatchRanking(stringItem, value, options),\n      keyIndex: -1,\n      keyThreshold: options.threshold\n    };\n  }\n\n  var valuesToRank = getAllValuesToRank(item, keys);\n  return valuesToRank.reduce(function (_ref2, _ref3, i) {\n    var rank = _ref2.rank,\n        rankedValue = _ref2.rankedValue,\n        keyIndex = _ref2.keyIndex,\n        keyThreshold = _ref2.keyThreshold;\n    var itemValue = _ref3.itemValue,\n        attributes = _ref3.attributes;\n    var newRank = getMatchRanking(itemValue, value, options);\n    var newRankedValue = rankedValue;\n    var minRanking = attributes.minRanking,\n        maxRanking = attributes.maxRanking,\n        threshold = attributes.threshold;\n\n    if (newRank < minRanking && newRank >= rankings.MATCHES) {\n      newRank = minRanking;\n    } else if (newRank > maxRanking) {\n      newRank = maxRanking;\n    }\n\n    if (newRank > rank) {\n      rank = newRank;\n      keyIndex = i;\n      keyThreshold = threshold;\n      newRankedValue = itemValue;\n    }\n\n    return {\n      rankedValue: newRankedValue,\n      rank: rank,\n      keyIndex: keyIndex,\n      keyThreshold: keyThreshold\n    };\n  }, {\n    rankedValue: item,\n    rank: rankings.NO_MATCH,\n    keyIndex: -1,\n    keyThreshold: options.threshold\n  });\n}\n/**\n * Gives a rankings score based on how well the two strings match.\n * @param {String} testString - the string to test against\n * @param {String} stringToRank - the string to rank\n * @param {Object} options - options for the match (like keepDiacritics for comparison)\n * @returns {Number} the ranking for how well stringToRank matches testString\n */\n\n\nfunction getMatchRanking(testString, stringToRank, options) {\n  testString = prepareValueForComparison(testString, options);\n  stringToRank = prepareValueForComparison(stringToRank, options); // too long\n\n  if (stringToRank.length > testString.length) {\n    return rankings.NO_MATCH;\n  } // case sensitive equals\n\n\n  if (testString === stringToRank) {\n    return rankings.CASE_SENSITIVE_EQUAL;\n  } // Lower casing before further comparison\n\n\n  testString = testString.toLowerCase();\n  stringToRank = stringToRank.toLowerCase(); // case insensitive equals\n\n  if (testString === stringToRank) {\n    return rankings.EQUAL;\n  } // starts with\n\n\n  if (testString.startsWith(stringToRank)) {\n    return rankings.STARTS_WITH;\n  } // word starts with\n\n\n  if (testString.includes(\" \" + stringToRank)) {\n    return rankings.WORD_STARTS_WITH;\n  } // contains\n\n\n  if (testString.includes(stringToRank)) {\n    return rankings.CONTAINS;\n  } else if (stringToRank.length === 1) {\n    // If the only character in the given stringToRank\n    //   isn't even contained in the testString, then\n    //   it's definitely not a match.\n    return rankings.NO_MATCH;\n  } // acronym\n\n\n  if (getAcronym(testString).includes(stringToRank)) {\n    return rankings.ACRONYM;\n  } // will return a number between rankings.MATCHES and\n  // rankings.MATCHES + 1 depending  on how close of a match it is.\n\n\n  return getClosenessRanking(testString, stringToRank);\n}\n/**\n * Generates an acronym for a string.\n *\n * @param {String} string the string for which to produce the acronym\n * @returns {String} the acronym\n */\n\n\nfunction getAcronym(string) {\n  var acronym = '';\n  var wordsInString = string.split(' ');\n  wordsInString.forEach(function (wordInString) {\n    var splitByHyphenWords = wordInString.split('-');\n    splitByHyphenWords.forEach(function (splitByHyphenWord) {\n      acronym += splitByHyphenWord.substr(0, 1);\n    });\n  });\n  return acronym;\n}\n/**\n * Returns a score based on how spread apart the\n * characters from the stringToRank are within the testString.\n * A number close to rankings.MATCHES represents a loose match. A number close\n * to rankings.MATCHES + 1 represents a tighter match.\n * @param {String} testString - the string to test against\n * @param {String} stringToRank - the string to rank\n * @returns {Number} the number between rankings.MATCHES and\n * rankings.MATCHES + 1 for how well stringToRank matches testString\n */\n\n\nfunction getClosenessRanking(testString, stringToRank) {\n  var matchingInOrderCharCount = 0;\n  var charNumber = 0;\n\n  function findMatchingCharacter(matchChar, string, index) {\n    for (var j = index, J = string.length; j < J; j++) {\n      var stringChar = string[j];\n\n      if (stringChar === matchChar) {\n        matchingInOrderCharCount += 1;\n        return j + 1;\n      }\n    }\n\n    return -1;\n  }\n\n  function getRanking(spread) {\n    var spreadPercentage = 1 / spread;\n    var inOrderPercentage = matchingInOrderCharCount / stringToRank.length;\n    var ranking = rankings.MATCHES + inOrderPercentage * spreadPercentage;\n    return ranking;\n  }\n\n  var firstIndex = findMatchingCharacter(stringToRank[0], testString, 0);\n\n  if (firstIndex < 0) {\n    return rankings.NO_MATCH;\n  }\n\n  charNumber = firstIndex;\n\n  for (var i = 1, I = stringToRank.length; i < I; i++) {\n    var matchChar = stringToRank[i];\n    charNumber = findMatchingCharacter(matchChar, testString, charNumber);\n    var found = charNumber > -1;\n\n    if (!found) {\n      return rankings.NO_MATCH;\n    }\n  }\n\n  var spread = charNumber - firstIndex;\n  return getRanking(spread);\n}\n/**\n * Sorts items that have a rank, index, and keyIndex\n * @param {Object} a - the first item to sort\n * @param {Object} b - the second item to sort\n * @return {Number} -1 if a should come first, 1 if b should come first, 0 if equal\n */\n\n\nfunction sortRankedValues(a, b, baseSort) {\n  var aFirst = -1;\n  var bFirst = 1;\n  var aRank = a.rank,\n      aKeyIndex = a.keyIndex;\n  var bRank = b.rank,\n      bKeyIndex = b.keyIndex;\n  var same = aRank === bRank;\n\n  if (same) {\n    if (aKeyIndex === bKeyIndex) {\n      // use the base sort function as a tie-breaker\n      return baseSort(a, b);\n    } else {\n      return aKeyIndex < bKeyIndex ? aFirst : bFirst;\n    }\n  } else {\n    return aRank > bRank ? aFirst : bFirst;\n  }\n}\n/**\n * Prepares value for comparison by stringifying it, removing diacritics (if specified)\n * @param {String} value - the value to clean\n * @param {Object} options - {keepDiacritics: whether to remove diacritics}\n * @return {String} the prepared value\n */\n\n\nfunction prepareValueForComparison(value, _ref4) {\n  var keepDiacritics = _ref4.keepDiacritics;\n  // value might not actually be a string at this point (we don't get to choose)\n  // so part of preparing the value for comparison is ensure that it is a string\n  value = \"\" + value; // toString\n\n  if (!keepDiacritics) {\n    value = removeAccents(value);\n  }\n\n  return value;\n}\n/**\n * Gets value for key in item at arbitrarily nested keypath\n * @param {Object} item - the item\n * @param {Object|Function} key - the potentially nested keypath or property callback\n * @return {Array} - an array containing the value(s) at the nested keypath\n */\n\n\nfunction getItemValues(item, key) {\n  if (typeof key === 'object') {\n    key = key.key;\n  }\n\n  var value;\n\n  if (typeof key === 'function') {\n    value = key(item);\n  } else if (item == null) {\n    value = null;\n  } else if (Object.hasOwnProperty.call(item, key)) {\n    value = item[key];\n  } else if (key.includes('.')) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    return getNestedValues(key, item);\n  } else {\n    value = null;\n  } // because `value` can also be undefined\n\n\n  if (value == null) {\n    return [];\n  }\n\n  if (Array.isArray(value)) {\n    return value;\n  }\n\n  return [String(value)];\n}\n/**\n * Given path: \"foo.bar.baz\"\n * And item: {foo: {bar: {baz: 'buzz'}}}\n *   -> 'buzz'\n * @param path a dot-separated set of keys\n * @param item the item to get the value from\n */\n\n\nfunction getNestedValues(path, item) {\n  var keys = path.split('.');\n  var values = [item];\n\n  for (var i = 0, I = keys.length; i < I; i++) {\n    var nestedKey = keys[i];\n    var nestedValues = [];\n\n    for (var j = 0, J = values.length; j < J; j++) {\n      var nestedItem = values[j];\n      if (nestedItem == null) continue;\n\n      if (Object.hasOwnProperty.call(nestedItem, nestedKey)) {\n        var nestedValue = nestedItem[nestedKey];\n\n        if (nestedValue != null) {\n          nestedValues.push(nestedValue);\n        }\n      } else if (nestedKey === '*') {\n        // ensure that values is an array\n        nestedValues = nestedValues.concat(nestedItem);\n      }\n    }\n\n    values = nestedValues;\n  }\n\n  if (Array.isArray(values[0])) {\n    // keep allowing the implicit wildcard for an array of strings at the end of\n    // the path; don't use `.flat()` because that's not available in node.js v10\n    var result = [];\n    return result.concat.apply(result, values);\n  } // Based on our logic it should be an array of strings by now...\n  // assuming the user's path terminated in strings\n\n\n  return values;\n}\n/**\n * Gets all the values for the given keys in the given item and returns an array of those values\n * @param item - the item from which the values will be retrieved\n * @param keys - the keys to use to retrieve the values\n * @return objects with {itemValue, attributes}\n */\n\n\nfunction getAllValuesToRank(item, keys) {\n  var allValues = [];\n\n  for (var j = 0, J = keys.length; j < J; j++) {\n    var key = keys[j];\n    var attributes = getKeyAttributes(key);\n    var itemValues = getItemValues(item, key);\n\n    for (var i = 0, I = itemValues.length; i < I; i++) {\n      allValues.push({\n        itemValue: itemValues[i],\n        attributes: attributes\n      });\n    }\n  }\n\n  return allValues;\n}\n\nvar defaultKeyAttributes = {\n  maxRanking: Infinity,\n  minRanking: -Infinity\n};\n/**\n * Gets all the attributes for the given key\n * @param key - the key from which the attributes will be retrieved\n * @return object containing the key's attributes\n */\n\nfunction getKeyAttributes(key) {\n  if (typeof key === 'string') {\n    return defaultKeyAttributes;\n  }\n\n  return _extends({}, defaultKeyAttributes, key);\n}\n/*\neslint\n  no-continue: \"off\",\n*/\n\nexport { defaultBaseSortFn, matchSorter, rankings };\n","var characterMap = {\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"AE\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"C\",\r\n\t\"\": \"C\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"D\",\r\n\t\"\": \"N\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"U\",\r\n\t\"\": \"U\",\r\n\t\"\": \"U\",\r\n\t\"\": \"U\",\r\n\t\"\": \"Y\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"ae\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"c\",\r\n\t\"\": \"c\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"d\",\r\n\t\"\": \"n\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"u\",\r\n\t\"\": \"u\",\r\n\t\"\": \"u\",\r\n\t\"\": \"u\",\r\n\t\"\": \"y\",\r\n\t\"\": \"y\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"C\": \"C\",\r\n\t\"c\": \"c\",\r\n\t\"\": \"D\",\r\n\t\"\": \"d\",\r\n\t\"\": \"D\",\r\n\t\"\": \"d\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"G\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"g\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"IJ\",\r\n\t\"\": \"ij\",\r\n\t\"\": \"J\",\r\n\t\"\": \"j\",\r\n\t\"\": \"K\",\r\n\t\"\": \"k\",\r\n\t\"\": \"K\",\r\n\t\"\": \"k\",\r\n\t\"K\": \"K\",\r\n\t\"k\": \"k\",\r\n\t\"\": \"L\",\r\n\t\"\": \"l\",\r\n\t\"\": \"L\",\r\n\t\"\": \"l\",\r\n\t\"\": \"L\",\r\n\t\"\": \"l\",\r\n\t\"\": \"L\",\r\n\t\"\": \"l\",\r\n\t\"\": \"l\",\r\n\t\"\": \"l\",\r\n\t\"\": \"M\",\r\n\t\"\": \"m\",\r\n\t\"M\": \"M\",\r\n\t\"m\": \"m\",\r\n\t\"\": \"N\",\r\n\t\"\": \"n\",\r\n\t\"\": \"N\",\r\n\t\"\": \"n\",\r\n\t\"\": \"N\",\r\n\t\"\": \"n\",\r\n\t\"\": \"n\",\r\n\t\"N\": \"N\",\r\n\t\"n\": \"n\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"OE\",\r\n\t\"\": \"oe\",\r\n\t\"P\": \"P\",\r\n\t\"p\": \"p\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"R\": \"R\",\r\n\t\"r\": \"r\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"\": \"S\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"\": \"s\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"\": \"T\",\r\n\t\"\": \"t\",\r\n\t\"\": \"t\",\r\n\t\"\": \"T\",\r\n\t\"\": \"T\",\r\n\t\"\": \"t\",\r\n\t\"\": \"T\",\r\n\t\"\": \"t\",\r\n\t\"T\": \"T\",\r\n\t\"t\": \"t\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"V\": \"V\",\r\n\t\"v\": \"v\",\r\n\t\"\": \"W\",\r\n\t\"\": \"w\",\r\n\t\"\": \"W\",\r\n\t\"\": \"w\",\r\n\t\"X\": \"X\",\r\n\t\"x\": \"x\",\r\n\t\"\": \"Y\",\r\n\t\"\": \"y\",\r\n\t\"\": \"Y\",\r\n\t\"Y\": \"Y\",\r\n\t\"y\": \"y\",\r\n\t\"\": \"Z\",\r\n\t\"\": \"z\",\r\n\t\"\": \"Z\",\r\n\t\"\": \"z\",\r\n\t\"\": \"Z\",\r\n\t\"\": \"z\",\r\n\t\"\": \"s\",\r\n\t\"\": \"f\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"AE\",\r\n\t\"\": \"ae\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"TH\",\r\n\t\"\": \"th\",\r\n\t\"\": \"P\",\r\n\t\"\": \"p\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"X\": \"X\",\r\n\t\"x\": \"x\",\r\n\t\"\": \"\",\r\n\t\"\": \"\",\r\n\t\"\": \"\",\r\n\t\"\": \"\",\r\n\t\"A\": \"A\",\r\n\t\"a\": \"a\",\r\n\t\"E\": \"E\",\r\n\t\"e\": \"e\",\r\n\t\"I\": \"I\",\r\n\t\"i\": \"i\",\r\n\t\"\": \"N\",\r\n\t\"\": \"n\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"W\",\r\n\t\"\": \"w\",\r\n\t\"\": \"Y\",\r\n\t\"\": \"y\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"B\": \"B\",\r\n\t\"b\": \"b\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"F\": \"F\",\r\n\t\"f\": \"f\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"J\": \"J\",\r\n\t\"\": \"j\",\r\n\t\"\": \"K\",\r\n\t\"\": \"k\",\r\n\t\"M\": \"M\",\r\n\t\"m\": \"m\",\r\n\t\"P\": \"P\",\r\n\t\"p\": \"p\",\r\n\t\"Q\": \"Q\",\r\n\t\"q\": \"q\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"V\": \"V\",\r\n\t\"v\": \"v\",\r\n\t\"W\": \"W\",\r\n\t\"w\": \"w\",\r\n\t\"X\": \"X\",\r\n\t\"x\": \"x\",\r\n\t\"Y\": \"Y\",\r\n\t\"y\": \"y\",\r\n\t\"A\": \"A\",\r\n\t\"a\": \"a\",\r\n\t\"B\": \"B\",\r\n\t\"b\": \"b\",\r\n\t\"\": \"D\",\r\n\t\"\": \"d\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"I\": \"I\",\r\n\t\"i\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"M\": \"M\",\r\n\t\"m\": \"m\",\r\n\t\"O\": \"O\",\r\n\t\"o\": \"o\",\r\n\t\"Q\": \"Q\",\r\n\t\"q\": \"q\",\r\n\t\"U\": \"U\",\r\n\t\"u\": \"u\",\r\n\t\"X\": \"X\",\r\n\t\"x\": \"x\",\r\n\t\"Z\": \"Z\",\r\n\t\"z\": \"z\",\r\n};\r\n\r\nvar chars = Object.keys(characterMap).join('|');\r\nvar allAccents = new RegExp(chars, 'g');\r\nvar firstAccent = new RegExp(chars, '');\r\n\r\nvar removeAccents = function(string) {\t\r\n\treturn string.replace(allAccents, function(match) {\r\n\t\treturn characterMap[match];\r\n\t});\r\n};\r\n\r\nvar hasAccents = function(string) {\r\n\treturn !!string.match(firstAccent);\r\n};\r\n\r\nmodule.exports = removeAccents;\r\nmodule.exports.has = hasAccents;\r\nmodule.exports.remove = removeAccents;\r\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport rison from 'rison';\nimport Chart from 'src/types/Chart';\nimport { useApiV1Resource, useTransformedResource } from './apiResources';\n\nfunction extractOwnerNames({ owners }: Chart) {\n  if (!owners) return null;\n  return owners.map(owner => `${owner.first_name} ${owner.last_name}`);\n}\n\nconst ownerNamesQuery = rison.encode({\n  columns: ['owners.first_name', 'owners.last_name'],\n  keys: ['none'],\n});\n\nexport function useChartOwnerNames(chartId: string) {\n  return useTransformedResource(\n    useApiV1Resource<Chart>(`/api/v1/chart/${chartId}?q=${ownerNamesQuery}`),\n    extractOwnerNames,\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Dashboard, Datasource, EmbeddedDashboard } from 'src/dashboard/types';\nimport { Chart } from 'src/types/Chart';\nimport { useApiV1Resource, useTransformedResource } from './apiResources';\n\nexport const useDashboard = (idOrSlug: string | number) =>\n  useTransformedResource(\n    useApiV1Resource<Dashboard>(`/api/v1/dashboard/${idOrSlug}`),\n    dashboard => ({\n      ...dashboard,\n      metadata:\n        (dashboard.json_metadata && JSON.parse(dashboard.json_metadata)) || {},\n      position_data:\n        dashboard.position_json && JSON.parse(dashboard.position_json),\n    }),\n  );\n\n// gets the chart definitions for a dashboard\nexport const useDashboardCharts = (idOrSlug: string | number) =>\n  useApiV1Resource<Chart[]>(`/api/v1/dashboard/${idOrSlug}/charts`);\n\n// gets the datasets for a dashboard\n// important: this endpoint only returns the fields in the dataset\n// that are necessary for rendering the given dashboard\nexport const useDashboardDatasets = (idOrSlug: string | number) =>\n  useApiV1Resource<Datasource[]>(`/api/v1/dashboard/${idOrSlug}/datasets`);\n\nexport const useEmbeddedDashboard = (idOrSlug: string | number) =>\n  useApiV1Resource<EmbeddedDashboard>(`/api/v1/dashboard/${idOrSlug}/embedded`);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { EffectCallback, useEffect } from 'react';\n\nexport const useComponentDidMount = (effect: EffectCallback) => {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(effect, []);\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TableTabTypes } from 'src/views/CRUD/types';\nimport { SetTabType } from 'src/views/CRUD/welcome/ActivityTable';\n\nexport enum LocalStorageKeys {\n  /**\n   * START LEGACY LOCAL STORAGE KEYS\n   *\n   * Do not follow the patterns here for key names. Keys should instead be namespaced to avoid\n   * collisions.\n   *\n   * TODO: Update all local storage keys to follow the new pattern. This is a breaking change,\n   * and therefore should be done in a major release.\n   */\n  filter_box_transition_snoozed_at = 'filter_box_transition_snoozed_at',\n  chart_split_sizes = 'chart_split_sizes',\n  controls_width = 'controls_width',\n  datasource_width = 'datasource_width',\n  is_datapanel_open = 'is_datapanel_open',\n  homepage_chart_filter = 'homepage_chart_filter',\n  homepage_dashboard_filter = 'homepage_dashboard_filter',\n  homepage_collapse_state = 'homepage_collapse_state',\n  homepage_activity_filter = 'homepage_activity_filter',\n  /** END LEGACY LOCAL STORAGE KEYS */\n\n  /**\n   * New local storage keys should be namespaced to avoid collisions. Keys should be named in the\n   * form [namespace]__[key].\n   *\n   * Example:\n   * sqllab__is_autocomplete_enabled\n   */\n  sqllab__is_autocomplete_enabled = 'sqllab__is_autocomplete_enabled',\n  explore__data_table_original_formatted_time_columns = 'explore__data_table_original_formatted_time_columns',\n}\n\nexport type LocalStorageValues = {\n  filter_box_transition_snoozed_at: Record<number, number>;\n  chart_split_sizes: [number, number];\n  controls_width: number;\n  datasource_width: number;\n  is_datapanel_open: boolean;\n  homepage_chart_filter: TableTabTypes;\n  homepage_dashboard_filter: TableTabTypes;\n  homepage_collapse_state: string[];\n  homepage_activity_filter: SetTabType | null;\n  sqllab__is_autocomplete_enabled: boolean;\n  explore__data_table_original_formatted_time_columns: Record<string, string[]>;\n};\n\n/*\n * This function should not be used directly, as it doesn't provide any type safety or any\n * guarantees that the globally namespaced localstorage key is correct.\n *\n * Instead, use getItem and setItem. Any legacy uses should be updated/migrated in future\n * Superset versions (as they may require breaking changes).\n * */\nexport function dangerouslyGetItemDoNotUse(\n  key: string,\n  defaultValue: any,\n): any {\n  try {\n    const value = localStorage.getItem(key);\n    if (value === null) {\n      return defaultValue;\n    }\n    return JSON.parse(value);\n  } catch {\n    return defaultValue;\n  }\n}\n\n/*\n * This function should not be used directly, as it doesn't provide any type safety or any\n * guarantees that the globally namespaced localstorage key is correct.\n *\n * Instead, use getItem and setItem. Any legacy uses should be updated/migrated in future\n * Superset versions (as they may require breaking changes).\n * */\nexport function dangerouslySetItemDoNotUse(key: string, value: any): void {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch {\n    // Catch in case localStorage is unavailable\n  }\n}\n\nexport function getItem<K extends LocalStorageKeys>(\n  key: K,\n  defaultValue: LocalStorageValues[K],\n): LocalStorageValues[K] {\n  return dangerouslyGetItemDoNotUse(key, defaultValue);\n}\n\nexport function setItem<K extends LocalStorageKeys>(\n  key: K,\n  value: LocalStorageValues[K],\n): void {\n  dangerouslySetItemDoNotUse(key, value);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames not based on template\n\tif (chunkId === 3718) return \"3718.a62d0a8e8aa478a00e40.entry.js\";\n\tif (chunkId === 4593) return \"4593.f9f64c6e7c3957f0f370.entry.js\";\n\tif (chunkId === 3906) return \"3906.6de478b94d6364c2b6f9.entry.js\";\n\tif (chunkId === 2441) return \"2441.9d43893841d3df512e51.entry.js\";\n\tif (chunkId === 4317) return \"4317.efc833d8ec8fcff74411.entry.js\";\n\t// return url for filenames based on template\n\treturn \"\" + {\"57\":\"38f4b0c5b2c751f3029f\",\"112\":\"0cceda87f254629c0f55\",\"137\":\"2750e07540640c5be0b5\",\"158\":\"7af34d924b2b2e3aaaa7\",\"177\":\"ca39eb74c4d49fd55005\",\"183\":\"2d69e60dfe962c42eee9\",\"215\":\"f6160a99b46b22e18caa\",\"310\":\"e2c18a71d3a5c875a789\",\"312\":\"90af13ee4a0d5e067aab\",\"326\":\"13e2e44acc050fe4f4e7\",\"336\":\"e5df42bc5a8ad6d9aed0\",\"347\":\"3f1f3f38b6b3b9616e75\",\"349\":\"0202ec1626f196ac9881\",\"363\":\"e517ebae29a6c51c5e09\",\"380\":\"b10c6bc15614f70674c7\",\"440\":\"163404f983dce20259a1\",\"444\":\"f6e6655a4a9d180a084d\",\"498\":\"f5d9188e06d66de8db23\",\"597\":\"d08e416f0ccd4854221a\",\"600\":\"d0d66aaabc04eac7f3a8\",\"616\":\"22160af30d9e816ffa2e\",\"704\":\"0d61450ba8761d04ddf9\",\"741\":\"ddfd188cfe976cc863f1\",\"775\":\"3c04ba1e823d1dfb5b89\",\"807\":\"c311b699287e23c5a49e\",\"826\":\"3f59c315d2e5d8b15ff9\",\"881\":\"78d550ef04ba4f916588\",\"895\":\"9cbed3c01a59f66c9b68\",\"954\":\"0ee69bed6107a59fe81f\",\"992\":\"3972b8e3abebd6e63caf\",\"999\":\"54febe7bb96630a3013d\",\"1020\":\"275351648e7df01f26d5\",\"1075\":\"529bc3f823e6fc60cd70\",\"1130\":\"98fb4e05eadd162d8fde\",\"1161\":\"173a9f0742b2a67e7a1b\",\"1174\":\"8849a375bcccf9df44ed\",\"1185\":\"9ea89afc9bce89ad80ad\",\"1221\":\"fce32082981c2dec49e7\",\"1256\":\"3479cded7646565257ab\",\"1258\":\"604b6fdb6661c6e1205e\",\"1261\":\"858915f2b7f5a9a59fc3\",\"1263\":\"62048be321505812ff6a\",\"1293\":\"825c8594d240fbf17f20\",\"1351\":\"8f38137e5b4342d2da4f\",\"1382\":\"587624c90ea6738e9972\",\"1398\":\"951f07c7c3e07b72cca4\",\"1402\":\"308402927cb1af91614e\",\"1493\":\"55bdc0586c89caac178c\",\"1568\":\"40f6c6e7fe72a2bc1b13\",\"1573\":\"90afe1a34c07bae41851\",\"1605\":\"2f7a1d1a47b76ec8c5c1\",\"1862\":\"4f5a2ebd6e31cf1109d8\",\"1877\":\"7dd385c6e9090a1b2734\",\"1899\":\"0502b5cdba557a6ff693\",\"1948\":\"f59707dedff3a7fc4091\",\"2079\":\"1506fd7de5b75c690b36\",\"2089\":\"6762245ee484d3ffcb17\",\"2105\":\"8146230ef7c416ab6cb3\",\"2112\":\"e9db5db193378823afb2\",\"2229\":\"a0489dd5b2f28952a9dc\",\"2264\":\"b12e914fd5684cf329c8\",\"2267\":\"1665a22356999f7d09cb\",\"2403\":\"a0d676c094e2f90b5f0a\",\"2439\":\"7e0114c1e26108fed2fc\",\"2549\":\"1f35e71bc0f82e09adf6\",\"2646\":\"22d6b0b1d527d046d260\",\"2698\":\"75dfd37839ade6c35680\",\"2713\":\"617726f17984c3192f46\",\"2797\":\"6a8bfc332a16fd0f491c\",\"2955\":\"21b0680368dea0bf61c5\",\"2983\":\"b85bf5c0e81e6910fa04\",\"2991\":\"61490367f35abf38e575\",\"3036\":\"3b134d76ef26f7542380\",\"3126\":\"9829ed24951e047c1187\",\"3141\":\"6db0cd2a326a62903532\",\"3187\":\"6802e173609e0f6b30c1\",\"3208\":\"c83ca863a53dd07d6e07\",\"3232\":\"86296449d9c861643378\",\"3240\":\"78cb567a5b91a58f0c01\",\"3265\":\"edc982d88e8d399830b7\",\"3325\":\"46b72d4c661fb47189a2\",\"3391\":\"80372a7194e9022afd80\",\"3496\":\"58bb3d2bd63b43c265bc\",\"3544\":\"78f16a06c10598e0b889\",\"3558\":\"a1e4af25d87548162409\",\"3567\":\"ccb341a117b2ee4d5e98\",\"3588\":\"8dbc009de7cea2d81e31\",\"3606\":\"7621f705e25335f0121d\",\"3711\":\"cb0a5497e8dfd6e40e1b\",\"3745\":\"98581cb610a83871af98\",\"3749\":\"68f7a3e5d439a23f4d89\",\"3831\":\"2b70b41875ae8ef7fd7d\",\"3871\":\"79cd11ca09fe747b1bfd\",\"3955\":\"03c4e9c66c2c63d79acc\",\"3985\":\"d51bceddde4bd627d6c2\",\"4139\":\"21f4237f0879646a0d9c\",\"4194\":\"eb98cf212c052ff4dbef\",\"4237\":\"b26c82ecb232cd0532de\",\"4266\":\"958a29639679b362fba3\",\"4273\":\"827fb5197c686f0662c7\",\"4421\":\"6290fd574418d5e32572\",\"4458\":\"85219e9a6edf20621bea\",\"4474\":\"b28a000dfeccbe1d81f3\",\"4494\":\"7310d9d0949b4227a562\",\"4572\":\"9d2bfa6bb53ce8784a2b\",\"4579\":\"8164718d6dabba184b88\",\"4625\":\"7c5442bc1e5598e90822\",\"4662\":\"712187ae25c83dce2174\",\"4667\":\"47a4c2c13ccfb09d3757\",\"4732\":\"d30d055df1b3b7e84dba\",\"4757\":\"124ced191b8ef59a3e2c\",\"4758\":\"8546effff2a679b01358\",\"4790\":\"4a9181a8fe8ffc5e3dcb\",\"4794\":\"fa2a3ad4d82d3d4459fd\",\"4797\":\"be22f9be14d0445f0f87\",\"4810\":\"82297ac94bca3b3859d2\",\"4817\":\"259525e7b455b997848a\",\"4832\":\"5a592d69bbd6eff5fd66\",\"4851\":\"a9ccd9b9ba2b847b6417\",\"4946\":\"0eccf4c7519446ab3438\",\"4972\":\"132e72e310c461806395\",\"5051\":\"50ad50de04f449dd9956\",\"5094\":\"838ef225492e310d33d5\",\"5123\":\"32f8de0d2820b6fae5cf\",\"5181\":\"34e5d3384af063aeb427\",\"5195\":\"da8bf97e481b90ceac4e\",\"5201\":\"0c0d33390c8cfa65fbbd\",\"5215\":\"79d6344a8913e2aec103\",\"5224\":\"2137b5c272446c93f5b7\",\"5226\":\"43d2d046df38601d76af\",\"5249\":\"8c40bbdfb03d04b29d02\",\"5264\":\"db3a2f0029307b78e598\",\"5281\":\"8b441b46691123854b6b\",\"5330\":\"c3630bd2c65829e4c7a1\",\"5335\":\"cbdabbf1e2d3d7e254df\",\"5350\":\"a4556551303ff93cd4bb\",\"5359\":\"fe8715215a93c63953ec\",\"5367\":\"12541bbb82603d7e2d66\",\"5378\":\"64f6237479272e5c5c3a\",\"5507\":\"c7cdf6f84afbcf502ddb\",\"5566\":\"a10ad064800c1df565c3\",\"5580\":\"fa964e628191e708a48e\",\"5592\":\"2e19c97690b06c32f1b4\",\"5641\":\"207a4252758bcd4d3cbd\",\"5707\":\"2b76605f1d6e11cf2df7\",\"5771\":\"3acf2091ed043492ae76\",\"5777\":\"58d0e720fba584974cbf\",\"5802\":\"8caa85ec5eb98cb83343\",\"5816\":\"3374bb9b8c7f89ae2da0\",\"5832\":\"6641ca7ff6e2a41a1257\",\"5838\":\"af5789397b8a13e08c38\",\"5962\":\"ed92d26f4a929fbbc564\",\"5972\":\"713e574a1d9b58a2135d\",\"5998\":\"cb935545042c1ce92ecb\",\"6061\":\"c9b07a9f1a9bae8552b2\",\"6126\":\"62a79c1241ef166355de\",\"6150\":\"6d17f8394d91a097eab6\",\"6167\":\"ad4ff700d252caec8ce3\",\"6207\":\"17d778c7ae36315bd979\",\"6254\":\"15612e9a43534ba1a97d\",\"6303\":\"b8e13b4773cab5f877ee\",\"6357\":\"855323b00072f22891ac\",\"6371\":\"150eda30c7d4d3f90b81\",\"6377\":\"6f0f091efb5ecc18dde4\",\"6420\":\"12131f944d05bfbc2b3d\",\"6447\":\"bfa0e245c6ade68dd3de\",\"6486\":\"9801caf1364f204340c9\",\"6507\":\"f00932e24ce22bd1ca3b\",\"6579\":\"f8fd51701b3ce361f688\",\"6668\":\"0062637c2e307e4a2536\",\"6682\":\"bdf3637ab1584c67ae30\",\"6693\":\"c37db19068bf7910b244\",\"6758\":\"fc3f2d7bb3a5b8f56817\",\"6819\":\"1d34427183b1bc32acfd\",\"6871\":\"ee6aaef556c2b3abedbf\",\"6883\":\"369bb61eda9423d64359\",\"6968\":\"2ec729de1b9e97e6ce11\",\"6981\":\"68a6c50b90b0d58736ad\",\"7003\":\"e8fb9fe508fee6bcd85c\",\"7183\":\"e16648fac64644e729c7\",\"7245\":\"7cbb94932e339ddac779\",\"7249\":\"b5e7e83ac26bf4ec5fbe\",\"7298\":\"44a89fd4ae0a1e57ae6b\",\"7405\":\"2bfae0bdc72a5900199c\",\"7460\":\"140aaba41af8a7b3891b\",\"7521\":\"935545b9bc56d8343445\",\"7584\":\"76c89f632c7a8315389e\",\"7610\":\"69ae28e81db50e4eb6d7\",\"7654\":\"2a756f12d13ca404a744\",\"7716\":\"36cbf8b4562f9c80a2e0\",\"7760\":\"7ab09485b0ef9d161fbf\",\"7803\":\"7967d211212f85a80dde\",\"7832\":\"fd7f701b105cdaddf11a\",\"7850\":\"00845228665a5b4e5deb\",\"7922\":\"034a466af79e5aec1e20\",\"7974\":\"2fa7652f1a627818db3e\",\"7984\":\"c70e87340845dac9e81d\",\"7989\":\"e2c714d33a44d93648c0\",\"8041\":\"b0b7ebae013a28bd3488\",\"8312\":\"9b8eaa85fdf772d344ca\",\"8349\":\"739a4da1e29881e55220\",\"8398\":\"effe2e4690559c9dd638\",\"8425\":\"d93b4ec64b1aced0c856\",\"8463\":\"55fba49f8743cb008b18\",\"8464\":\"a7c9c77204be1fa48aab\",\"8491\":\"bc7fc77e4b9a26daf89a\",\"8551\":\"213fce9c284921d22fd2\",\"8623\":\"f3f0b0e4997f9dcf5264\",\"8650\":\"122a0257d32b9b9dfd1f\",\"8656\":\"930c6a0cab67c68681cd\",\"8682\":\"e55361dd9642ab2c6cce\",\"8695\":\"794b59e83f2639bbd4f5\",\"8701\":\"07bc03500fdcdf86c946\",\"8750\":\"a4875cd79305e6148ef1\",\"8883\":\"7d0a7cd57a0e5306d21e\",\"8924\":\"30cbf0580b9a9c8153fe\",\"8970\":\"9662eb9aee235b45a0ba\",\"9013\":\"2ae202ac00476dac5f77\",\"9052\":\"bdc47b9882987a855bd3\",\"9101\":\"e312f8189d0016e01622\",\"9109\":\"70032121a681b08c1ca9\",\"9207\":\"5716fdaacba60c1b00fc\",\"9305\":\"857144aa3240952e069c\",\"9322\":\"4c640e97a929f739a3df\",\"9325\":\"d2f1f08edbd1d07cd106\",\"9393\":\"aa0534433005d1a82b09\",\"9396\":\"f9f3042a683c69591565\",\"9483\":\"fcce3a445fdb577251e2\",\"9510\":\"a1ded01332afd173d7e1\",\"9558\":\"11464bec3d82809a0027\",\"9622\":\"a6e817b0d68ef7cee2d4\",\"9767\":\"9e8414a89898cf629e48\",\"9794\":\"6c8b7483e1f99924e7f5\",\"9811\":\"b3748ff012fc7ee520ef\",\"9857\":\"169119af235c81fa0bc3\",\"9873\":\"34c9f3b849b55ef12fa4\",\"9877\":\"f6f5b18362ffb2b9362c\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"137\":\"2750e07540640c5be0b5\",\"380\":\"b10c6bc15614f70674c7\",\"1261\":\"858915f2b7f5a9a59fc3\",\"1877\":\"7dd385c6e9090a1b2734\",\"3036\":\"3b134d76ef26f7542380\",\"4194\":\"eb98cf212c052ff4dbef\",\"4237\":\"b26c82ecb232cd0532de\",\"4494\":\"7310d9d0949b4227a562\",\"5378\":\"64f6237479272e5c5c3a\",\"5566\":\"a10ad064800c1df565c3\",\"6871\":\"ee6aaef556c2b3abedbf\",\"8623\":\"f3f0b0e4997f9dcf5264\",\"8650\":\"122a0257d32b9b9dfd1f\"}[chunkId] + \".chunk.css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/static/assets/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t9782: 0,\n\t5296: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(!/^(126|687)1$/.test(chunkId)) {\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunksuperset\"] = globalThis[\"webpackChunksuperset\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// module factories are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\n__webpack_require__.O(undefined, [504,294,3704,1030,9102,2087,185,9755,4981,5827,4921,7106,1844,995,9480,9602,2491,4750,323,9525,5010,3920,5289,9772,9986,3389,2569,8274,4489], () => (__webpack_require__(85156)))\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504,294,3704,1030,9102,2087,185,9755,4981,5827,4921,7106,1844,995,9480,9602,2491,4750,323,9525,5010,3920,5289,9772,9986,3389,2569,8274,4489], () => (__webpack_require__(31835)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","loadStylesheet","installedCssChunks","logMessageQueue","constructor","callback","sizeThreshold","delayThreshold","this","queue","delayThrehold","trigger","bind","append","eventData","push","length","events","splice","call","endpoint","source","source_id","navigator","sendBeacon","formData","FormData","safeStringify","SupersetClient","postPayload","parseMethod","lastEventId","toastsFromPyFlashMessages","flashMessages","toasts","forEach","messageType","message","toastType","ToastType","toast","addToast","text","payload","FETCH_DASHBOARDS_SUCCEEDED","fetchDashboardsSucceeded","choices","type","FETCH_DASHBOARDS_FAILED","fetchDashboardsFailed","userId","fetchDashboards","dispatch","then","json","pks","map","id","index","value","label","result","dashboard_title","catch","SAVE_SLICE_FAILED","saveSliceFailed","SAVE_SLICE_SUCCESS","saveSliceSuccess","data","REMOVE_SAVE_MODAL_ALERT","removeSaveModalAlert","saveSlice","requestParams","url","getExploreUrl","endpointType","force","curUrl","queryContext","buildV1ChartDataPayload","resultFormat","resultType","form_data","query_context","response","FAVESTAR_BASE_URL","SET_DATASOURCE_TYPE","setDatasourceType","datasourceType","SET_DATASOURCE","setDatasource","datasource","SET_DATASOURCES","setDatasources","datasources","POST_DATASOURCE_STARTED","FETCH_DATASOURCE_SUCCEEDED","fetchDatasourceSucceeded","FETCH_DATASOURCES_STARTED","fetchDatasourcesStarted","FETCH_DATASOURCES_SUCCEEDED","fetchDatasourcesSucceeded","TOGGLE_FAVE_STAR","toggleFaveStar","isStarred","FETCH_FAVE_STAR","fetchFaveStar","sliceId","count","SAVE_FAVE_STAR","saveFaveStar","urlSuffix","t","SET_FIELD_VALUE","setControlValue","controlName","validationErrors","SET_EXPLORE_CONTROLS","setExploreControls","UPDATE_CHART_TITLE","updateChartTitle","sliceName","CREATE_NEW_SLICE","createNewSlice","can_add","can_download","can_overwrite","slice","SLICE_UPDATED","sliceUpdated","SET_FORCE_QUERY","setForceQuery","exploreActions","combineReducers","charts","saveModal","state","action","actionHandlers","actions","dashboards","saveModalAlert","dataMask","explore","DYNAMIC_PLUGIN_CONTROLS_READY","controls","controlsState","isDatasourceMetaLoading","newFormData","granularity_sqla","time_grain_sqla","druid_time_origin","granularity","controlsTransferred","time_range","DEFAULT_TIME_RANGE","Object","entries","controlState","valueKey","Array","isArray","options","getControlValuesCompatibleWithDatasource","ensureIsArray","default","newState","datasource_id","datasource_type","getControlsState","isDatasourcesLoading","new_form_data","old_metrics_data","metrics","new_column_config","column_config","vizType","viz_type","item","controlConfig","getControlConfig","control","getControlStateFromControlConfig","rerenderedControls","rerender","errors","err","includes","hasErrors","isVizSwitch","currentControlsState","transformed","StandardizedFormData","transform","triggerRender","renderTrigger","owners","slice_name","impressionId","messageToasts","ADD_TOAST","noDuplicate","find","x","REMOVE_TOAST","filter","reports","SET_REPORT","report","resourceId","creationMethod","filterField","reportObject","ADD_REPORT","reportTypeId","dashboard","chart","creation_method","EDIT_REPORT","ToastContainer","style","StyledIcon","theme","gridUnit","colors","grayscale","base","Toast","onCloseToast","hideTimer","useRef","visible","setVisible","useState","showToast","handleClosePress","useCallback","current","clearTimeout","setTimeout","useEffect","duration","className","icon","Icons","css","role","content","noHtml","allowHtml","tabIndex","onClick","StyledToastPresenter","position","zIndex","max","dark1","borderRadius","dark2","opacity","mediumLight","light5","transitionTiming","removeToast","key","TooltipContent","cachedTimestamp","cachedText","fromNow","hovered","setHovered","labelType","Tooltip","title","Label","onMouseOver","onMouseOut","TimerLabel","Timer","endTime","isRunning","startTime","status","clockStr","setClockStr","timer","stopTimer","clearInterval","undefined","setInterval","endDttm","CHART_STATUS_MAP","ChartPills","forwardRef","queriesResponse","chartStatus","chartUpdateStartTime","chartUpdateEndTime","refreshCachedQuery","rowLimit","ref","isLoading","firstQueryResponse","RowCountLabel","rowcount","Number","limit","is_cached","CachedLabel","cached_dttm","AlertContainer","info","light2","typography","sizes","m","alert","ButtonContainer","Title","weights","bold","ExploreAlert","bodyText","primaryButtonAction","secondaryButtonAction","primaryButtonText","secondaryButtonText","Button","buttonStyle","buttonSize","propTypes","PropTypes","onQuery","dashboardId","column_formats","containerId","table_name","ownState","standalone","timeout","chartIsStale","chartPropShape","errorMessage","GUTTER_SIZE_FACTOR","INITIAL_SIZES","MIN_SIZES","Styles","styled","ExploreChartPanel","chartAlert","useTheme","gutterMargin","gutterHeight","width","chartPanelWidth","height","chartPanelHeight","chartPanelRef","useResizeDetector","refreshMode","refreshRate","splitSizes","setSplitSizes","getItem","LocalStorageKeys","showAlertBanner","updateQueryContext","async","setDataMask","slice_id","headers","body","JSON","stringify","query_context_generation","setItem","onDragEnd","postChartFormData","updateQueryFormData","onCollapseChange","isOpen","renderChart","ChartContainer","Math","floor","annotationData","chartStackTrace","chartId","latestQueryFormData","triggerQuery","panelBody","useMemo","getChartRequiredFieldsMissingMessage","row_limit","standaloneChartBody","queryFormData","setQueryFormData","elementStyle","dimension","elementSize","gutterSize","standaloneClass","document","split","minSize","direction","expandToMin","DataTablesPane","queryForce","RunQueryButton","loading","onStop","isNewChart","canStopQuery","disabled","actionButtonsContainerStyles","rgba","ControlPanelsTabs","Tabs","fullWidth","light3","s","sectionsToExpand","sections","reduce","acc","section","expanded","isTimeSection","columns","some","c","is_dttm","Datasource","hasTimeColumn","String","props","pluginContext","useContext","prevState","usePrevious","exploreState","prevDatasource","showDatasourceAlert","setShowDatasourceAlert","containerRef","scrollTo","expandedQuerySections","expandedCustomizeSections","querySections","customizeSections","tabOverride","controlSetRows","rows","config","getState","resetTransferredControls","handleClearFormClick","handleContinueClick","shouldRecalculateControlState","name","Boolean","shouldMapStateToProps","renderControlPanelSection","description","sectionId","Collapse","header","InfoTooltipWithTrigger","tooltip","bsStyle","controlSets","i","renderedControls","controlItem","visibility","controlData","mapStateToProps","restProps","isVisible","Control","renderControl","ControlRow","hasControlsTransferred","DatasourceAlert","dataTabTitle","xs","placement","has","Loading","showCustomizeTab","allowOverflow","tab","defaultActiveKey","expandIconPosition","ghost","SK_DASHBOARD_ID","StyledModal","Modal","SaveModal","super","saveToDashboardId","newSliceName","canOverwriteSlice","onDashboardSelectChange","onSliceNameChange","changeAction","saveOrOverwrite","isNewDashboard","newDashboardName","is_managed_externally","componentDidMount","dashboardIds","lastDashboard","sessionStorage","recentDashboard","parseInt","indexOf","setState","event","target","selected","gotodash","sliceParams","save_to_dashboard_id","new_dashboard_name","url_params","dashboard_id","removeItem","dashboard_url","slice_url","prefix","URLSearchParams","toString","window","location","assign","onHide","removeAlert","render","dashboardSelectValue","show","footer","Form","layout","Alert","cursor","Radio","checked","onChange","required","Input","placeholder","allowClear","allowNewOptions","ariaLabel","user","DatasourceItemContainer","DatasourcePanelDragOption","labelRef","showTooltip","isDragging","drag","useDrag","collect","monitor","optionProps","showType","DndItemType","column","metric","enableExploreDnd","primary","DatasourceContainer","light1","LabelWrapper","light4","SectionHeader","StyledInfoboxWrapper","LabelContainer","extendedProps","children","DataSourcePanel","datasourceControl","shouldForceUpdate","_columns","sort","col1","col2","showSaveDatasetModal","setShowSaveDatasetModal","inputValue","setInputValue","lists","setList","showAllMetrics","setShowAllMetrics","showAllColumns","setShowAllColumns","search","keys","threshold","expression","replace","maxRanking","keepDiacritics","baseSort","a","b","is_certified","rankedValue","localeCompare","metricSlice","columnSlice","mainBody","evt","closable","onClose","metric_name","col","column_name","SaveDatasetModal","buttonTextOnSave","buttonTextOnOverwrite","memoizedControls","memoize","controlPanel","controlsMap","controlPanelSections","isControlPanelSectionConfig","row","origFormData","currentFormData","StyledLabel","alterForComparison","AlteredSliceTag","React","diffs","getDiffs","getChartControlPanelRegistry","get","getControlsForVizType","getRowsFromDiffs","hasDiffs","UNSAFE_componentWillReceiveProps","newProps","diff","before","formatValue","after","ofd","sanitizeFormData","cfd","fdKeys","fdKey","isEqualish","val1","val2","v","filterVal","comparator","join","subject","operator","formattedValue","renderModalBody","TableView","accessor","Header","pageSize","columnsForWrapText","renderTriggerNode","ModalTrigger","triggerNode","modalTitle","modalBody","responsive","FormItem","StyledFormItem","StyledHelpBlock","withToasts","onSave","addSuccessToast","submitting","setSubmitting","form","setName","selectedOwners","setSelectedOwners","showError","error","statusText","errorText","okButtonProps","danger","fetchChartOwners","owner","first_name","last_name","getClientErrorObject","loadOptions","input","page","query","page_size","totalCount","ownersLabel","htmlType","cta","submit","wrapProps","onFinish","values","certified_by","certifiedBy","certification_details","certificationDetails","cache_timeout","cacheTimeout","o","res","updatedChart","initialValues","gutter","md","maxWidth","marginTop","mode","canOverwrite","canDownload","saveDisabled","saveButtonStyles","ExploreChartHeader","onSaveChart","sliceFormData","isPropertiesModalOpen","setIsPropertiesModalOpen","d","json_metadata","metadata","parse","mergedLabelColors","shared_label_colors","label_colors","categoricalNamespace","CategoricalColorNamespace","getNamespace","setColor","color_scheme","fetchChartDashboardData","menu","isDropdownVisible","setIsDropdownVisible","useExploreAdditionalActionsMenu","redirectSQLLab","oldSliceName","PageHeaderWithActions","editableTitleProps","canEdit","showTitlePanelItems","certificatiedBadgeProps","details","showFaveStar","faveStarProps","itemId","titlePanelAdditionalItems","chartTitle","rightPanelAdditionalItems","iconSize","additionalActionsMenu","menuDropdownProps","onVisibleChange","connect","bindActionCreators","toggleActive","deleteActiveReport","forcedHeight","ExploreContainer","ExplorePanelContainer","updateHistory","datasourceId","isReplace","tabId","additionalParam","URL_PARAMS","urlParams","RESERVED_CHART_URL_PARAMS","stateModifier","postFormData","getUrlParam","putFormData","mountExploreUrl","history","e","logging","ExploreViewContainer","dynamicPlugin","usePluginContext","dynamicPlugins","isDynamicPluginLoading","mounting","wasDynamicPluginLoading","previousControls","lastQueriedControls","setLastQueriedControls","showingModal","setShowingModal","isCollapsed","setIsCollapsed","setShouldForceUpdate","useTabId","defaultSidebarsWidth","controls_width","datasource_width","addHistory","handlePopstate","handleKeydown","ctrlKey","metaKey","isEnter","keyCode","isS","add_to_dash","goto_dash","toggleModal","toggleCollapse","useComponentDidMount","logEvent","LOG_ACTIONS_MOUNT_EXPLORER","useChangeEffect","previous","previousHandlePopstate","removeEventListener","addEventListener","previousHandleKeyDown","dynamicPluginControlsReady","reRenderChart","controlsChanged","newQueryFormData","getFormDataFromControls","renderTriggered","Date","getTime","fetchDatasourceMetadata","displayControlsChanged","areObjectsEqual","dontRefreshOnChange","LOG_ACTIONS_CHANGE_EXPLORE_CONTROLS","controlsWithErrors","errorMessages","Set","flat","labels","textAlign","renderChartContainer","getSidebarWidths","setSidebarWidths","newDimension","styles","onResizeStop","defaultSize","minWidth","enable","right","iconColor","queryController","abort","cx","extra_form_data","mergeExtraFormData","isNaN","datasource_name","forced_height","common","conf","SUPERSET_WEBSERVER_TIMEOUT","saveModalActions","chartActions","logActions","setupApp","setupPlugins","exploreViewContainer","getElementById","bootstrapData","getAttribute","initFeatureFlags","feature_flags","initState","initialFormData","flash_messages","chartKey","lastRendered","getInitialState","store","createStore","rootReducer","compose","applyMiddleware","thunk","next","LOG_EVENT","dashboardInfo","dashboardLayout","logMetadata","impression_id","version","eventName","ts","event_name","LOG_EVENT_TYPE_TIMING","event_type","trigger_event","shortid","event_id","visibilityState","target_id","present","meta","target_name","initEnhancer","ReactDOM","DndProvider","backend","HTML5Backend","GlobalStyles","fetchUISpecificReport","queryParams","rison","filters","opr","setReport","addDangerToast","structureFetchAction","chartArr","addReport","jsonPayload","editReport","isActive","encodeURI","active","finally","rankings","CASE_SENSITIVE_EQUAL","EQUAL","STARTS_WITH","WORD_STARTS_WITH","CONTAINS","ACRONYM","MATCHES","NO_MATCH","matchSorter","defaultBaseSortFn","items","_options","_options$threshold","_options$baseSort","_options$sorter","sorter","matchedItems","aRank","rank","aKeyIndex","keyIndex","bRank","bKeyIndex","sortRankedValues","matches","rankingInfo","allValues","j","J","attributes","getKeyAttributes","itemValues","getItemValues","I","itemValue","getAllValuesToRank","_ref2","_ref3","keyThreshold","newRank","getMatchRanking","newRankedValue","minRanking","getHighestRanking","_rankingInfo$keyThres","_ref","testString","stringToRank","prepareValueForComparison","toLowerCase","startsWith","string","acronym","wordInString","splitByHyphenWord","substr","matchingInOrderCharCount","charNumber","findMatchingCharacter","matchChar","spreadPercentage","inOrderPercentage","firstIndex","getClosenessRanking","_ref4","hasOwnProperty","path","nestedKey","nestedValues","nestedItem","nestedValue","concat","apply","getNestedValues","defaultKeyAttributes","Infinity","characterMap","chars","allAccents","RegExp","firstAccent","removeAccents","match","module","exports","remove","extractOwnerNames","ownerNamesQuery","useChartOwnerNames","useDashboard","idOrSlug","position_data","position_json","useDashboardCharts","useDashboardDatasets","effect","dangerouslyGetItemDoNotUse","defaultValue","localStorage","dangerouslySetItemDoNotUse","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","amdD","Error","amdO","O","chunkIds","fn","priority","notFulfilled","fulfilled","every","r","n","getter","__esModule","getPrototypeOf","obj","ns","create","def","getOwnPropertyNames","definition","defineProperty","enumerable","f","chunkId","Promise","all","promises","u","miniCssF","g","globalThis","Function","hmd","set","prop","prototype","l","done","script","needAttach","scripts","getElementsByTagName","createElement","charset","nc","setAttribute","src","onScriptComplete","prev","onerror","onload","doneFns","parentNode","removeChild","head","appendChild","Symbol","toStringTag","nmd","paths","p","resolve","reject","href","fullhref","existingLinkTags","dataHref","tag","rel","existingStyleTags","findStylesheet","linkTag","errorType","realHref","code","request","createStylesheet","miniCss","installedChunks","installedChunkData","test","promise","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}