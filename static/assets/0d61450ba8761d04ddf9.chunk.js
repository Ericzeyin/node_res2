"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[704],{33738:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var n=r(67294),l=r(63475),s=r(11965);function c({height:e,width:t,echartOptions:r,setDataMask:c,labelMap:a,labelMapB:u,groupby:i,groupbyB:h,selectedValues:o,formData:d,seriesBreakdown:f}){const p=(0,n.useCallback)((e=>e<f),[f]),g=(0,n.useCallback)(((e,t)=>{if(!(p(t)?d.emitFilter:d.emitFilterB))return;const r=p(t)?i:h,n=p(t)?a:u,l=e.map((e=>n[e])).filter((e=>!!e));c({extraFormData:{filters:0===e.length?[]:[...r.map(((e,t)=>{const r=l.map((e=>e[t]));return null==r?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:r}}))]},filterState:{value:l.length?l:null,selectedValues:e.length?e:null}})}),[i,h,a,u,c,o]),b={click:e=>{const{seriesName:t,seriesIndex:r}=e,n=Object.values(o);n.includes(t)?g(n.filter((e=>e!==t)),r):g([t],r)}};return(0,s.tZ)(l.Z,{height:e,width:t,echartOptions:r,eventHandlers:b,selectedValues:o})}},63475:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(67294),l=r(51995),s=r(82217),c=r(11965);const a=l.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function u({width:e,height:t,echartOptions:r,eventHandlers:l,zrEventHandlers:u,selectedValues:i={}},h){const o=(0,n.useRef)(null),d=(0,n.useRef)(),f=(0,n.useMemo)((()=>Object.keys(i)||[]),[i]),p=(0,n.useRef)([]);return(0,n.useImperativeHandle)(h,(()=>({getEchartInstance:()=>d.current}))),(0,n.useEffect)((()=>{o.current&&(d.current||(d.current=(0,s.S1)(o.current)),Object.entries(l||{}).forEach((([e,t])=>{var r,n;null==(r=d.current)||r.off(e),null==(n=d.current)||n.on(e,t)})),Object.entries(u||{}).forEach((([e,t])=>{var r,n;null==(r=d.current)||r.getZr().off(e),null==(n=d.current)||n.getZr().on(e,t)})),d.current.setOption(r,!0))}),[r,l,u]),(0,n.useEffect)((()=>{d.current&&(d.current.dispatchAction({type:"downplay",dataIndex:p.current.filter((e=>!f.includes(e)))}),f.length&&d.current.dispatchAction({type:"highlight",dataIndex:f}),p.current=f)}),[f]),(0,n.useEffect)((()=>{d.current&&d.current.resize({width:e,height:t})}),[e,t]),(0,c.tZ)(a,{ref:o,height:t,width:e})}const i=(0,n.forwardRef)(u)}}]);
//# sourceMappingURL=0d61450ba8761d04ddf9.chunk.js.map